ATLAS LAr Note 27 January 2003

**Data Economy and Zero Suppression**

**of the Liquid Argon Calorimetry Record**

**Bryan L. Caron and James L. Pinfold1**

Footnote 1: Communicating author: pinfold @phys.ualberta.ca

_Centre for Subatomic Research,_

_Department of Physics, University of Alberta,_

_Edmonton, Alberta T6G 2N5 Canada_

**Luc Poggioli**

_LAPP,_

_Chemin de Bellevue_

_BP 110 74 941 Annecy-le-Vieux, CEDEX - France_

Initial estimates indicate that the ATLAS event size is roughly 2 MB, with the LAr data corresponding to 70% of the record. In this document two methods of reducing the contribution of the LAr calorimetry to the overall ATLAS data size are described. The first method simply recognizes that very low energy cells require less space in the record. The second method, called zero suppression, saves space in the LAr data record by suppressing cells containing electronic and pileup noise. Using these two methods, reductions in the size of the LAr data record by a factor of approximately five to six can be achieved without obvious impairment of the underlying physics. The data reduction takes place in the RODs. The zero suppression algorithms are constructed to work either in the RODs or in the Event Filter. Information on how to run the zero suppression code are given and a sketch of a possible data format for the LAr data record is given. Last, but not least details are given of planned future upgrades to the zero suppression procedures.

Introduction

The size of an ATLAS event was initially estimated to be approximately 2 MB, of which roughly 1.4 MB was due to the \(\sim\)200,000 channels of liquid Argon (LAr) calorimetry data. Thus, the LAr data was thought to comprise 70% of the ATLAS data. The estimate of 1.4 MB per event was made in the following way. Each of the 200K LAr channels need 4 bytes to store energy information, 2 bytes to store time information and 1 byte for quality information. Thus, 7 bytes are required for each of the \(\sim\)200K channels. This original estimate of 1.4 MB per event for the LAr data size is currently under review. It has now been accepted that for low energy cells only 2 bytes (not 4 bytes) is required to store the channel energy and very low energy cells do not have valid time and quality information. Thus, there is a resulting large decrease in the estimated size of the LAr data record, due to a more detailed understanding of the LAr data.

Another approach to data reduction is zero suppression, where noise channels are cut out in such a way that the effect on the underlying physics is unimportant. For example, this means that tails on distributions, energy resolution, missing transverse energy (\(E_{T}^{miss}\)) resolution, minimum ionizing particle clusters, etc., should not be adversely affected, in any critical way, by the required cuts. Zero suppression is largely independent of any data"compression" in the RODs touched on above, and gives even further reductions in data size. The HI group have shown that their approach to zero suppression, which is similar to that presented below, can also reduce the overall noise levels in certain measurements [1].

It is possible that the zero suppression would be implemented in the RODs, the Event Filter, or some combination of the both. The effective and safe deployment of the zero suppression procedure will require a detailed understanding of the ATLAS calorimetry. Such an understanding is unlikely to be available before we have had some substantial experience with real data. As experience and confidence is gained with the zero suppression procedure it can increasingly be employed to full affect. This incremental approach is valid since it is likely that it will track the growth of luminosity. It is at higher luminosity that the zero suppression procedure is particularly useful.

## 2 Data Reduction in the LAr Data Record

In this document we will concentrate attention on the EM calorimetry as it dominates the LAr data record size. Only the EM Barrel and Endcap have been subjected to the data reduction and zero suppression procedures. Using the description of the detector presented in the ATLAS Detector and Physics Technical Design Report [2] the number of cells comprising the EM endcap and barrel regions of the EM LAr calorimetry is as follows: EM barrel, 101,888; EM Endcap, 62,208. However, the ATRECON code utilized for analyses reported in this document uses a slightly different cell count: EM barrel 104,448; EM Endcap, 62848. One could also extend the data reduction and zero suppression procedures to include: the Presampler Barrel, 7,808; Presampler Endcap 1,536, the Forward Calorimetry and the Hadron Endcap calorimeter. This document presents a proposal to significantly reduce the fraction of the total event size due to data from the LAr calorimetry without affecting the data quality.

### The LAr Byte-Stream Structure

The ATLAS Readout Driver (ROD) group have reassessed the space required to store the LAr data [3]. This document indicates that for low energy and very low energy cells, less than 7 bytes is required to store the information from the LAr cell. The updated LAr data size estimate proposed here, allocates space according to the following criteria:

* If the cell energy (\(E_{cell}\)) is greater than 33 GeV (\(2^{15}\)) we need 7 bytes to store the cell information as before. The breakdown is as follows: 4 bytes for energy; 2 bytes for time information; and, 1 byte for quality information.
* If the cell energy is in the range 33 GeV\(\geq E_{cell}\geq 2\sigma_{elec}\), where \(\sigma_{elec}\) is the sigma of the electronic noise, then we need only 5 bytes to store the information from the cell. The breakdown is as follows: 2 bytes for energy; 2 bytes for time; and, 1 byte for quality.
* If \(E_{cell}\leq 2\sigma_{elec}\) we need only 2 bytes to store the cell information. Those 2 bytes are needed to store the cell energy. In this case there is no valid time and quality information to be stored.

Note that in the above all energies are calculated at the EM scale. A sample of 1500 QCD \(di-jets\) and \(1000\ Z+jets\) events were analyzed using ATRECON to ascertain what the new storage requirements would be, using the criteria defined above. The events were also used to generate low luminosity (\(10^{33}cm^{-2}s^{-1}\)) and high luminosity (\(10^{34}cm^{-2}s^{-1}\)) pileup samples. For example, in the case of the QCD di-jets at high luminosity (high pileup) the breakdown was on average, as follows:

* Cells with \(E_{cell}>33\) GeV contribute 3 KBytes (\(390\times 7\)) to the record on average,
* Cells with 33 GeV \(\geq E_{cell}\geq 2\sigma_{elec}\), contribute 97 Kbytes (\(19820\times 5\)),
* Cells with \(E_{cell}\leq 2\sigma_{elec}\), contribute 286 Kbytes (\(146490\times 2\)),
* The total average record size for di-jet is now 0.386 Mbytes.

It can be seen from this study that the average amount of space required to store the LAr data from the EM barrel and endcap calorimeters, has fallen from the initial estimate of 1.2 Mbytes (\(166,700\times 7\)) to 0.4 MB - a factor of three reduction. The same reduction factor was observed in the \(Z+jets\) sample. Thus, a more careful reassessment of space requirements has resulted in considerable savings in space, compared to initial estimates.

The most recent iteration on the LAr byte-stream structure that is now implemented in ATHENA is more detailed than the "ATRECON" scheme mentioned above, although the data savings are nearly the same. In the conversion from LArRawChannels to byte-stream, each of the roughly 1500 Front End Board (FEB) records begins with a word count listing the number of 32-bit words which make up the total record. Each record has two \(4\times 32\)-bit word (128 bit) bitmaps, with one bit for each of the 128 channels for that FEB. The first bitmap maps thepresence of time and quality data and the second bitmap maps the presence of energy. For each FEB channel we have either \(1\times 16\)-bit word for energy alone, or \(3\times 16\)-bit words encoding energy, time and quality information. The energy is recorded in a 16-bit word with 1 sign bit, 2 range bits, and 13 bits for the energy. The ranges are as follows:

* Range 0: Least significant bit is 1 MeV;
* Range 1: Least significant bit is 8 MeV;
* Range 2: Least significant bit is 64 MeV;
* Range 3: Least significant bit is 512 MeV.

The least significant bit here refers to the lowest energy value in the range represented.

The time information and quality information are each recorded in 16 bits (unsigned). It is assumed that the time and quality information for the FEB channel is NOT recorded if the energy recorded in the FEB channel is less than twice the sigma of the electronic noise. A proposed addition [4] to this scheme, not considered further here, has an additional 2 bits to record the gain scale (high, medium, low) in addition to the time and quality information.

The comparison of the"ATRECON" with the "ATHENA 5.0" LAr byte-stream structure is as follows. First, in the initial"ATRECON" approach the energy was stored in 2 bytes if less than or equal to 33 GeV and 4 bytes if greater than 33 GeV. In the"ATHENA 5.0" scheme the energy is stored in 2 bytes. However, as nearly all the FEB channels have energies less than 33 GeV we should expect no real increase in data size due to this change. The time and quality information is only recorded if the energy recorded in the FEB channels is greater than twice the sigma of the electronic noise. In the "ATRECON" case the time information is stored in 2 bytes and the quality information in 1 byte. In the "ATHENA 5.0" case the time and quality information each require 2 bytes. Thus, resulting difference in the LAr data size between the "ATHENA" and "ATRECON" case is minor.

Although we have assumed that the time and quality information for the FEB channel is not recorded if the energy recorded in the FEB channel is less than twice the sigma of the electronic noise, this cut is NOT implemented in ATHENA 5.0 at present. The details of the final scheme for the LAr byte-stream structure are still under discussion.

### The Zero Suppression Procedure

One can obtain further savings in the size of the LAr data record by applying a "zero suppression" procedure. It is extremely important that this procedure not affect the physics is any deleterious way. Thus one must retain, as far as possible, information on the tails and backgrounds of the calorimetry clusters that are part of the event. Having said that we should eradicate as many cells as possible containing only noise information. In this procedure we have three basic entities:1) cells in clusters; 2) cells adjacent to clusters; and, 3) cells between clusters. Note that all entities are defined in the \(\eta-\phi\) plane corresponding to each calorimeter layer, in depth. The procedure continues as follows:* If a cell energy is greater than some value, \(|E_{thr.}^{clus.}|\), then the cell is deemed to be part of a cluster, or a cluster.
* The cells immediately adjacent to a cell that passes the \(E_{thr.}^{clus.}\) cut are automatically retained and are not subject to further cuts.
* Any cells that do not satisfy the \(E_{thr.}^{clus.}\) cut and are NOT immediately adjacent to a cell that has passed the cut, are retained only if their energy is greater than some value, \(|E_{thr.}^{cell}|\).
* This procedure is carried out in the barrel and endcap calorimetry and in each layer of the calorimetry, in depth.
* If significant energy is observed (that is at least one cell with energy greater than \(E_{thr.}^{clus.}\)) in layer (1) and/or layer (2) of the calorimetry then the cells in subsequent layers, belonging to the same projective tower, are retained whatever their energy.

The net effect of the above procedure is to build up clusters a cell at a time. This method allows clusters as small as a cell, thus allowing it to retain the small clusters expected from isolated minimum ionizing particles. The cells immediately adjacent to these clusters are retained whatever their energy. The region of the clusters and the cells immediately adjacent to the clusters are called _Regions of Retention_ (RORs). In this case it is a cluster that is retained, thus it is called a _cluster_ ROR. All cells outside of the RORs that do not satisfy the \(|E_{thr.}^{cell}|\) cut are deemed to be noise and are essentially deleted from the record. It should be noted that symmetric cuts are applied where the cut level is some multiple of the sigma of the electronic noise. A schematic illustration of this procedure is given in Fig. 1.

Figure 1: A schematic view of how a cluster Region of Retention is defined.

### Minimum Ionizing Particle Information Retention

Using a sample of 1000 50 GeV (\(E_{T}\)) muons impinging on the calorimeter at \(\eta=0.3\) and \(\phi=0.3\), we have defined a muon - or Minimum Ionizing Particle (MIP), as found if at least one cluster (that could be one cell) is retained after the \(E_{thr.}^{clus.}\) cut, where all calorimeter layers are considered. As can be seen from Fig. 2 the retention of muon information is good, with \(\sim\)98% of muons being retained after a \(E_{thr.}^{clus.}\) of \(3\sigma_{elec.}\)

At present we have only studied cluster RORs. One can also imagine other types of ROR such as a muon ROR. In this case we envisage that a road is established through the calorimetry with the help of the tracking, the Tilecal and the muon tracking system. Calorimeter cells along this road could be retained. A muon ROR can only be used at the Event Filter stage and could obviously only access low energy cells not eradicated by a possible ROD based zero suppression scheme.

### Implementation of the Data Reduction Scheme Described

The zero suppression scheme described in the previous section is envisaged to take place in the Event Filter. A question has arisen about the possibility of applying zero suppression at the ROD level. In the RODS the zero suppression algorithm would presumably have to be simplified to a simple single FEB channel energy cut, since we would not be able to discern a complete cluster, in depth. However, this could free up some needed bandwidth both for the 2nd level trigger and the Event Filter.

Figure 2: A plot of muon retention efficiency as a function of the \(E_{thr.}^{clus.}\) cut.

## 3 Estimate of the Data Reduction Using QCD \(Di-jets\) and \(Z+jets\)

One can obtain an initial estimate on the scale of a possible reduction in the size of the LAr data record by using QCD di-jets, as well as Z+jets final states, as "typical" ATLAS events. Using a sample of 1500 fully simulated di-jets the percentage of data that survives the zero suppression cuts in the cell energy, expressed in terms of a multiple of the "sigma" of the electronic noise, is estimated. Note that this percentage is based on an initial data size after the data economy criteria mentioned previously have been applied. As stated previously zero suppression cuts are expressed in terms of two thresholds: \(|E_{thr.}^{clus.}|\) defining the cluster cell threshold; and, \(|E_{thr.}^{cell}|\) defining the threshold of the cells outside of the cluster ROR. The results obtained are summarized in Table 1. where the percentages relate to the fraction of channels retained after zero suppression cuts.

As can be seen from Table. 1 a further factor of two reduction to the data size can be made by reasonable zero suppression cuts (\(|E_{thr.}^{clus.}|>3\sigma_{elec.}\), \(|E_{thr.}^{cell}|>2\sigma_{elec}\)). This cut is over and above the date size economy measures previously described. More specifically the breakdown of the amount of QCD di-jet surviving these zero suppression cuts was, on average, as follows:

* Cells with \(E_{cell}>33\,GeV\) contribute 3 KBytes \((390\times 7)\) to the record on average,
* Cells with \(33\,GeV\geq E_{cell}\geq 2\sigma_{elec}\), contribute 97 Kbytes \((19820\times 5)\),
* Cells with \(E_{cell}\geq 2\sigma_{elec}\), contribute 111 Kbytes \((56740\times 2)\),
* The total average record size for di-jet is now 0.206 Mbytes.

Thus, on average, for QCD di-jets at high luminosity, the space required to store the data after zero suppression has fallen to 0.206 MBytes, compared to the 0.38 MBytes required after the data economy procedure has been applied. Compared to the initial estimates of the size of the LAr EM calorimetry record of 1.12 Mbytes the data economy and zero suppression procedures

\begin{table}
\begin{tabular}{|r|r|r|r|r|r|r|} \hline \(|E_{thr.}^{cell}|\) cut & \multicolumn{5}{|c|}{\(|E_{thr.}^{clus.}|\) cut} & \multicolumn{2}{|c|}{\(|\)\(E_{thr.}^{clus.}|\) cut} & \multicolumn{2}{|c|}{(Data Size) MB} \\ \hline  & \(1\sigma\) & \(2\sigma\) & \(3\sigma\) & \(4\sigma\) & \(2\sigma/3\sigma/4\sigma\) \\ \hline  & \(1\sigma\) & - & 73\% & 43\% & 38\% & 0.25/0.15/0.13 \\ No Pileup & \(2\sigma\) & - & - & 20\% & 13\% & 0.11/0.02 \\  & \(3\sigma\) & - & - & - & 03\% & 0.01 \\ \hline  & \(1\sigma\) & - & 77\% & 51\% & 46\% & 0.27/0.18/0.16 \\ Low Pileup & \(2\sigma\) & - & - & 32\% & 24\% & 0.11/0.08 \\  & \(3\sigma\) & - & - & - & 15\% & 0.05 \\ \hline  & \(1\sigma\) & - & 86\% & 68\% & 62\% & 0.32/0.26/0.23 \\ High Pileup & \(2\sigma\) & - & - & 54\% & 44\% & 0.21/0.17 \\  & \(3\sigma\) & - & - & - & 35\% & 0.13 \\ \hline \end{tabular}
\end{table}
Table 1: The percentages of data retained after zero suppression cut. This is on top of the savings already obtained by data economy.

have resulted in a (0.206/1.12) factor of 5.4 decrease in the EM LAr data size. Note that at lower luminosity the savings obtained from zero suppression would be even greater, as can be seen from Table. 1. A plot of event size for high luminosity QCD di-jets before and after the zero suppression procedure is given in Fig. 3.

## 4 Physics Checks

A number of studies have been performed, or are being performed, to ascertain to what extent various levels of Zero Suppression (ZS) cut affect the physics. We have already studied the effect of the zero suppression cuts in the following areas:

* Single photon shower tests;
* Studies of the recoil spectrum, against the Z, of the process \(Z(\rightarrow\mu^{+}\mu^{-})+jets\);
* Higgs (H) decays to two photons;
* The B physics process \(B_{s}\to J/\Psi\eta\);

In all of the final states studied ZS cuts at the level of \(|E_{thr.}^{clus.}|>3\sigma_{elec.}\), and \(|E_{thr.}^{cell}|>2\sigma_{elec.}\) were found not to affect the physics in any important way. The effect of the data economy and zero suppression procedures on missing energy physics still needs to be assessed. To this end the process \(H\to AA(A\rightarrow\tau\tau)\) is being currently being studied [5]. Various examples from the results of these studies are shown below. The \(H\rightarrow\gamma\gamma\) results are not reported since the zero suppression issues relating to the reconstruction of photon showers are dealt with in the single photon shower tests section of this document. Needless to say the initial investigation of this channel showed that the zeros suppression procedure described here(using reasonable cuts values such as \(|E_{thr.}^{clus.}|>3\sigma_{elec.}\), and \(|E_{thr.}^{cell}|>2\sigma_{elec.}\)) did not affect the detected physics of this channel in any adverse way.

### Single Photon Shower Tests

The zero suppression algorithms were applied to single isolated photon showers in order to study in detail how this procedure affects the physics of a simple well defined calorimetric entity - the photon shower. All photon showers must pass the st andard EM ID cuts where the EM cluster ID code is tuned so that there is an efficiency of 80% for identifying photons from low mass Higgs decay. A thousand single photons were generated, using the full simulation, at a pseudorapidity of \(\eta=0.3\) at each of the three values of \(E_{T}\): 30, 50,100 GeV. Another one thousand photons were generated with an \(E_{T}\) of 50 GeV, at \(\eta=1.0\). For all plots showing energy in samplings 1,2, and 3 of the calorimetry:

* \(\Delta R<0.2\) (where \(\Delta R=\sqrt{\Delta\eta^{2}+\Delta\phi^{2}}\));Figure 3: Di-jet event size distributions at high luminosity, before and after zero suppression, are shown in the bottom two plots. The zero suppression cuts applied in this case were \(E_{thr.}^{clus.}>3\sigma_{elec}\) and \(|E_{thr.}^{cell}|>2\sigma_{elec}\)

* The energy in a \(3\times 5\) window in the second sampling is subjected to the following cuts:
* At \(\eta=0.3\) for 30 GeV photons the energy in the window must be \(>15\) GeV;
* At \(\eta=0.3\) for 50 GeV photons the energy in the window must be \(>25\) GeV;
* At \(\eta=0.3\) for 100 GeV photons the energy in the window must be \(>60\) GeV;
* At \(\eta=1.0\) for 50 GeV photons the energy in the window must be \(>35\) GeV;

In the case of the shower shape comparisons:

* The number of EM clusters before and after zero suppression must be equal;
* The energies in a \((3\times 3)\), \((5\times 5)\) and \((7\times 7)\) window in the second sampling are subjected to the following cuts:
* At \(\eta=0.3\) for 30 GeV photons the energy in the window must be \(>10\) GeV;
* At \(\eta=0.3\) for 50 GeV photons the energy in the window must be \(>20\) GeV;
* At \(\eta=0.3\) for 100 GeV photons the energy in the window must be \(>60\) GeV;
* At \(\eta=1.0\) for 50 GeV photons the energy in the window must be \(>30\) GeV;
* The ratio (R) of the energy in a \((3\times 3)\) window to that in a \((7\times 7\) window), in the second sampling, is subjected to the following cuts:
* At \(\eta=0.3\) for 30 GeV photons, R \(\geq 0.900\);
* At \(\eta=0.3\) for 50 GeV photons, R \(\geq 0.900\);
* At \(\eta=0.3\) for 100 GeV photons, R \(\geq 0.925\);
* At \(\eta=1.0\) for 50 GeV photons, R \(\geq 0.900\);

The zero suppression cuts employed are as before \(|E_{thr.}^{\mbox{\tiny{\it{L}}}vis.}|>3\sigma_{elec.}\), and \(|E_{thr.}^{\mbox{\tiny{\it{cell}}}}|>2\sigma_{elec.}\). The photons are produced in a high luminosity, worst case, scenario. A plot of the number of EM clusters before and after zero suppression is shown in Fig. 4. The cluster energy within a \((3\times 5)\) window in each sampling for 50 GeV \(E_{T}\) photons at \(\eta=0.3\), before and after zero suppression cuts, is shown in Fig. 5. The event by event differences between the zero suppressed and non zero suppressed layer by layer energy distributions are given in Fig. 6.

Another sensitive variable is the shower shape variable that essentially compares the shower core energy to the shower energy using the ratio R of the energy in a \((3\times 7)\) window to the energy in a \((7\times 7)\) window. The comparison is done in sampling 2 of the EM calorimetry. The resulting plots for 50 GeV \(E_{T}\) photons at \(\eta=0.3\) in a high luminosity environment, are shown in Fig. 7. All three sets of plots indicate that the zero suppression procedure using the cuts mentioned above has a negligible effect on the physics.

Table. 2 lists the EM cluster ID efficiencies for the single photon events at 50 GeV \(E_{T}\) at \(\eta=0.3\) (1000 events). Here the efficiency is computed as the number of EM clusters passing EM cuts divided by the total number of found EM clusters. The EM cuts relate to measured

energies in samplings 1 and 2 of the calorimeter. The table lists the values of efficiency when zero suppression is applied, the second number in each table entry is the efficiency in the case of no zero suppression.

The decreased efficiency before (and after) zero suppression, for the high luminosity pileup case, is due to the low energy threshold of 5 GeV which is used in the EM Cluster finding. As can be seen the ID efficiencies after the application of zero suppression are essentially unchanged from the efficiencies seen before zero suppression case. If anything the efficiencies increase with the zero suppression applied, indicating that it very likely that clusters arising from pileup and electronic noise are being eliminated.

### The Recoil Spectrum Against the Z(\(\rightarrow\mu^{+}\mu^{-}\)) in \(Z+jets\) Events

Final states involving \(Z+jets\), where \(Z\rightarrow\mu^{+}\mu^{-}\), are used experimentally to study the recoil against the W in the \(W+jets\) channel, where \(W\to l\nu\). A detailed understanding of this recoil spectrum is important in the W-mass determination. Thus, it is important that the recoil spectrum is not substantially affected by the zero suppression procedure. In order to study the effect of zero suppression on the recoil spectrum against the Z, 3000 fully simulated \(Z+jets\), where \(Z\rightarrow\mu^{+}\mu^{-}\) were generated with \(|\eta|<3.0\) and with the LAr and Tile Calorimeter simulated. The \(E_{T}\) spectra obtained for high luminosity running are shown in Fig. 8. These plots indicate that the zero suppression procedure resulted in no important distortion of the recoil spectra even in the tails although, as one might expect the mean of the distribution did move somewhat, from 54.4 GeV to 58.4 GeV. Such effects illustrate the obvious need to recalibrate the data after zero suppression has taken place. In order to provide a more quantitative picture

Figure 4: Distribution of the number of clusters before (dark line) and after (lighter line) zero suppression with the cuts: \(E_{thr.}^{clus.}>3\sigma_{elec}\) and \(|E_{thr.}^{cell}|>2\sigma_{elec}\).

Figure 5: Cluster energy within a \((3\times 5)\) window in each of the 4 samplings of the EM calorimetry before and after zero suppression cuts where the zero suppression cuts are \(E_{thr.}^{tus.}>3\sigma_{elec}\) and \(|E_{thr.}^{cell}|>2\sigma_{elec}\). The 50 GeV photon energy, high luminosity, data simulated at \(\eta=0.3\) was used to generate the above plots. The darker histograms depict the energy distributions corresponding to no zero suppression cuts.

Figure 6: Event by event fractional differences between the zero suppressed and non zero suppressed energy distributions for each sampling of the EM calorimetry where the zero suppression cuts are \(E_{thr.}^{clus.}>3\sigma_{elec}\) and \(|E_{thr.}^{cell}|>2\sigma_{elec}\).

Figure 7: The top left hand plot shows the shower shape variable R (which is defined by the ratio of the energy in a \((3\times 7)\) window to that in a \((7\times 7)\) window) in the second sampling of the EM calorimetry. The darker histogram depicts the energy distributions corresponding to non zero suppressed data. The top right hand gives the event by event differences between R for non zero suppressed and zero suppressed clusters in the second sampling. The bottom plot gives the fractional difference in R for non zero suppressed and zero suppressed clusters. Again, the zero suppression cuts are \(E_{thr.}^{clus.}>3\sigma_{elec}\) and \(|E_{thr.}^{cell}|>2\sigma_{elec}\).

of how the tails of the recoil spectra are affected some bin-by-bin comparison plots were made.

Fig. 9 shows a cell-by-cell comparison of the recoil (against the Z) distributions with various level of zero suppression cuts, at high luminosity. The variable plotted is the value of the no-cut bin minus the value of the zero suppressed bin divided by the value in the no-cut bin. Ideally, if the zero suppression cuts made no difference to this plot the distribution obtained should be described by a flat line of slope 0 for the \(E_{T}\) range. The data is consistent with this hypothesis even for cuts at the level of \(E_{thr.}^{clus.}>3\sigma_{elec}\) and \(|E_{thr.}^{cell}|>2\sigma_{elec}\), although the statistical variations are large at the tails.

### The Process \(B_{s}\to J/\Psi\eta(\eta\rightarrow\gamma\gamma)\)

A study of the process \(B_{s}\to J/\Psi\eta(\eta\rightarrow\gamma\gamma)\) was performed [6] with a view to ascertaining the effect of zero suppression on the analysis. This analysis was performed in a simulated low luminosity environment. A number of variables were plotted, too numerous to show here. The influence of zero suppression on the transverse momentum spectra of the clusters is shown in Fig. 10.

Another sensitive distribution is the two cluster invariant mass where only the two highest \(E_{T}\) clusters are combined. The spectra obtained in this case are shown in Fig. 11. This analysis relies on the accurate reconstruction of low energy photon showers. There is some evidence that a zero suppression procedure utilizing hard cuts, such as \(E_{thr.}^{clus.}>4\sigma_{elec}\) and \(|E_{thr.}^{cell}|>3\sigma_{elec}\) or harder, could affect such analyses in a non-recoverable way. However, lower level cuts do not appear to affect the analysis in any important way. As in the previous physics checks, we believe that in the case of high luminosity running the positive effect of the cuts in reducing the influence of pileup as well as electronic noise will more than balance any adverse effects resulting from harder zero suppression cuts.

\begin{table}
\begin{tabular}{|c|c|c|c|c|c|} \hline  & \(E_{thr.}^{cell}\) & cut & & \(E_{thr.}^{clus.}\) & cut \\ \hline  & & 1\(\sigma\) & 2\(\sigma\) & 3\(\sigma\) & 4\(\sigma\) \\ \hline  & 1\(\sigma\) & - & 98.9/98.8\% & 99.1/98.8\% & 99.0/98.8\% \\ No Pileup & 2\(\sigma\) & - & - & 99.5/98.8\% & 99.5/98.8\% \\  & 3\(\sigma\) & - & - & - & 99.8/98.8\% \\ \hline  & 1\(\sigma\) & - & 94.6/94.4\% & 94.8/94.4\% & 94.4/94.4\% \\ Low Pileup & 2\(\sigma\) & - & - & 95.1/94.4\% & 95.4/94.4\% \\  & 3\(\sigma\) & - & - & - & 95.9/94.4\% \\ \hline  & 1\(\sigma\) & - & 66.3/66.2\% & 66.6/66.2\% & 66.5/66.2\% \\ High Pileup & 2\(\sigma\) & - & - & 68.1/66.2\% & 68.2/66.2\% \\  & 3\(\sigma\) & - & - & - & 70.0/66.2\% \\ \hline \end{tabular}
\end{table}
Table 2: The efficiency of retaining identified photon showers for no pileup, low pileup and high pileup. The second number in each field is the efficiency measured without zero suppression.

Figure 8: The predicted recoil spectrum against the Z for high luminosity where the spectrum with no zero suppression is shown alongside spectra with various values of the zero suppression. The solid line denotes a polynomial fit to the distribution.

Figure 9: The plot gives a bin-by-bin (in \(E_{T}\)) comparison of the recoil spectra expected at high luminosity, with and without zero suppression, where various zero suppression cut levels are shown. The variable plotted is the value of non zero suppressed bin minus the value of zero suppressed bin divided by the value of the non zero suppressed bin.

## 5 Using the Zero Suppression Code

The zero suppression code is in the process of being rewritten in C++ for implementation within the ATHENA framework. Currently, the code is implemented within the ATRECON package. To run the code one need to add the following two cards to the ATRECON datacard file:

* *MODE 'ZERO' 'RECO' I 'PRIN' 1 'DEBU' 0 'HIST' 1
* *DETP 'ZERO' 'zpar(1).ClsThr =' XX zpar(1).Cell.Thr=' YY

The datacard parameters are:

* Cluster selection algorithm ('RECO'):
* I = 1 - Simple cell threshold cluster finding (in multiples of \(\sigma\) of the electronic noise),
* I = 2 - 1 x 1 sliding window cluster finding (to be expanded to \((3\times 3)\) and \((5\times 5)\)).
* Cluster/cell threshold cut values ('ClusThr', 'CellThr'):
* XX = Cluster threshold (in multiples of \(\sigma\) of the electronic noise),
* YY = Outside cluster cell threshold (in multiples of \(\sigma\) of the electronic noise).

Figure 10: The above plot shows a distribution of the transverse momentum spectrum of calorimetry clusters from an analysis of the channel \(B_{s}\to J/\Psi\eta(\eta\rightarrow\gamma\gamma)\). The darker (blue)line depicts the situation without zero suppression, the lighter (red) line depicts the histogram when zero suppression has been applied. The zero suppression cuts used were \(E^{clus.}_{thr.}>3\sigma_{elec}\) and \(|E^{cell}_{thr.}|>2\sigma_{elec}\).

Figure 11: A distribution of the invariant mass formed from the two highest \(E_{T}\) clusters deriving from the process \(B_{s}\to J/\Psi\eta(\eta\to\gamma\gamma)\). The darker (blue) line depicts the situation without zero suppression, the lighter (red) line depicts the histogram when zero suppression has been applied. The lower plot depicts the corresponding transverse momentum spectra. The zero suppression cuts used were \(E_{thr.}^{\text{elus.}}>3\sigma_{elec}\) and \(\left|E_{thr.}^{\text{cell}}\right|>2\sigma_{elec}\).

Events sizes before and after the zero suppression procedure are stored in the 'CALO' directory of the output hist/ntuple.

* Event size (MB) before zero suppression,
* Event size (MB) after ZS,
* Event size reduction.

## 6 A Proposed Modification to the LAr Data Record

It is proposed that at the beginning of each FEB based LAr data record there is placed in addition to the bitmaps described in subsection 2.1, an additional 128 bit 4 word bitmap isomorphic to the 128 channels of the FEB. In this bitmap bits corresponding to zero suppressed channels are 0 and those corresponding to non suppressed are set to 1. Overall, this would add a small overhead of 24 kB to the LAr data record. Presumably a similar scheme could be adopted for a simplified ROD based zero suppression scheme.

## 7 Conclusions and Future Work

The conclusions reached from the studies described in the preceding document indicate that substantial savings can be made in the size of the LAr data record. In general, these savings amount to a factor of \(\sim\)3 from data economy in the RODs with an additional factor of \(\sim\)2 from zero suppression, with moderate cuts employed. Additionally, the zero suppression procedure can be employed at the Event Filter stage or in the RODs. If it is utilized in the RODs this offers the benefit of increased bandwidth in the high level trigger. However, at the ROD stage any particular cluster would be spread across many RODs. Thus, unless there is some considerable investment in extra electronics it is likely that the zero suppression procedure in the RODS would largely involve a per channel energy cut. However, the details of possible zero suppression procedures within the RODs await the completion of dedicated studies, now underway.

The proper implementation of the zero suppression procedure in either the RODS or the Event Filter will require a detailed understanding of the ATLAS calorimetry. Such an understanding is unlikely to be available before we have had some substantial experience with real data. Thus, it is probable that, we will initially study the affect of zero suppression with only sample of events subjected to the zero suppression procedures. As we gain experience and confidence the zero suppression procedure can start to be employed to full affect. This incremental approach will still be useful as it is likely that we will have sufficient experience before higher luminosity running takes place. It is during higher luminosity running that zero suppression will be particularly useful.

The zero suppression code is available within the ATRECON framework, in the CVS repository and can now be used by anybody interested. It is important that as many diverse physics channels are studied as possible to get an initial idea of the effect of zero suppression on ATLAS physics. We have reported some studies in this document. Although, these channels have yet to be studied after recalibration using zero suppressed data.

We are also aware of ongoing studies that are particularly sensitive to the \(E_{T}^{miss}\) resolution (\(A\rightarrow\tau\tau\)) [5]. It is also important to begin testing zero suppression procedures on available test-beam data. In order to keep the code fully available for further study we are currently rewriting the zero-suppression algorithms in C++ with a view to implementing them in the ATHENA framework. We expect this to be completed by the summer of 2003. There are also other avenues of future work. For example, different physics channels will exhibit different sensitivity to the zero suppression procedure. Thus, the implementation of the zero suppression algorithms could be made trigger dependent. In addition, further studies have to be completed in order to to specify the details of an implementation of basic zero suppression in the RODS, although this looks entirely possible.

## References

* [1] V. Shekelyan, private communication.
* [2] ATLAS Collaboration, _ATLAS Detector and Physics Performance Technical Design Report_, CERN/LHCC/99-15, ATLAS TDR 15, 25th May 1999.
* [3]_The ROD Demonstrator for the LAr Calorimeter_, Note: ATL-COM-LARG-99-011, Version 3.1, Last modified March 2000.
* [4] D. Fournier, private communication.
* [5] D. Cantore-Cavalli, private communication.
* [6] Fairouz Malek, private communication.
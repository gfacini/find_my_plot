**SUPPORT CARD FOR THE FORWARD SCT MODULE**

**Ashley Greenland (email: ashley@hep.ph.liv.ac.uk)**

**The University of Liverpool, Department of Physics, Liverpool, L69 7ZE, United Kingdom**

**ABSTRACT**

Previously in the development and testing stage of ATLAS SCT Forward modules support cards have been used which interface the module to the DAQ by using only the Redundant inputs for the module configuration and the'spying' of the ABCD Master chip(s) data. As module development has matured there is now a necessity to be able to test modules in the laboratory using also their Primary input/output data routes i.e. using the optical chips DORIC [1] and VDC [2] but without the need of optical fibres. A Forward Kapton Support Card, FKSC, has been developed so that both Primary and Redundant data routes can be used for module testing.

**1. INTRODUCTION**

FKSC has been designed to provide an electrical interface to SCT Forward Modules1 and their associated data acquisition system SCTDAQ [3]. The configuration of the Module and FKSC is through software control, which is bundled into SCTDAQ. The readout and control of the module can be done either:

Footnote 1: K3, K4 and K5 modules can be tested, depending upon the flavour of ‘wiggly’[5] Kapton interconnect.

\(\bullet\) Pseudo-optically2, using the onboard optical chips (DORIC and VDC) with Primary Clock and Command inputs (Clk0 and Com0) and data readout through the VDC.

Footnote 2: This is a method whereby the optical chips, DORIC and VDC, are driven electrically – there is no requirement for PIN diodes or VCSELs and their associated optical-fibre interconnects.

\(\bullet\) The use of the Redundant Clock and Command inputs (Clk1 and Com1) and with data readout via the'spying' of the data from the ABCD Master chip(s) outputs.

There are a total of 5 readout modes with which the Module can be configured and readout.

FKSC requires an external power supply this has been done to allow the Module Power Supply (SCT LV-2 or SCT LV-3 [4]) to monitor accurately VDD and VCC.

## 2 Fksc

### Functionality

Fig. 1 illustrates the main blocks of FKSC highlighting the data and command routing.

There are 5 readout modes supported by FKSC, Fig. 2 shows these modes, which are used to exercise the various configurations of the module when using both Primary and Redundant inputs.

\begin{tabular}{l l}
**Mode** & **Description** \\ \hline
0 & BPM3 encoded Clock/Command is sent to DORIC, data readout is from VDC. \\
1 & BPM encoded Clock/Command is sent to DORIC, Bypass outputs on DORIC are active. The Bypass Clock/Command from DORIC is fedback into the redundant inputs of the module. ABCD data is read directly from the ABCD Master chip(s). \\
2 & Clock/Command is linked directly into the redundant inputs of the module. Data is read directly from ABCD Master chip(s). \\
3 & BPM encoded Clock/Command is sent to DORIC but BPM\(+\) is not active. \\  & Data is readout from the VDC. \\
4 & BPM encoded Clock/Command sent to DORIC but BPM- is not active. \\  & Data is readout from the VDC. \\ \end{tabular}

Footnote 3: BPM: Bi-phase-mark encoding is a means of encoding both Clock and Command onto a single line.

It is envisaged that the 2 main operating Readout Modes will be Mode 0, Primary route, and Mode 2 using the Redundant route for control and readout of the module.

### Hardware Implementation

Fig. 3 shows a single FKSC and also its connection to a K5 middle module where the 'wiggly' Kapton interconnects can be quite clearly seen.

Figure 3: A single FKSC and connection to a K5 middle module

Figure 2: FKSC Readout Modes

The board layout, Fig. 4, shows all the electrical connections that are required to interface a module to SCTDAQ. The electrical connections are as follows:

\(\bullet\) SCTDAQ module control and data streams are connected via PPR [6] through a 16-way IDC Ribbon Cable (J2).

\(\bullet\) Module Power supply is connected via a 25-way D-type male plug (J1).

\(\bullet\) Module Silicon Detector bias is either via SCT-LV (Vbias \(\leq\) 300V), for Vbias \(>\) 300V a HV-LEMO is provided (PCLEMO). If the HV-LEMO is to be used then it is necessary to solder links at R1 and R2. Vbias\(+\) is the shrouded pin on the connector.

\(\bullet\) The Support Card Power Supply is connected at PWR1. This is a DC input with an operating voltage range \(\geq\) +7.5V to \(\leq\)+10V. The current draw is typically 300mA.

It is important to connect the power supply correctly (+Ve and GND) there is no protection.

\(\bullet\) The module is connected via 'Wiggly' Kaptons, K3 or K44 module flavours, at connectors J3 and J4. J3 is the Opto/Redundancy connection, J4 is the Power connection to the module.

Footnote 4: The K4 flavoured wiggly Kapton is used for the interconnect to K5 Modules.

Figure 4: **FKSC Board layout 1**

### 2.3 Jumper Settings

There are a series of Jumpers that are available to the user, JMP1- JMP3. Jumpers JMP4 - JMP8 should be left open circuit.

\(\bullet\) JMP1 links the screen of the SCT-LV Cable to module AGND.

\(\bullet\) JMP3 and JMP4 should be made if no Optical chips are present. The module is being controlled/readout via the redundancy and ABCD 'SPY' data connections. If Optical devices are present then these jumpers should be left out.

\(\bullet\) Solder links R1 and R2 are required if the HV-LEMO is to be used.

### 2.4 Readout Mode and VDC Active LED indicators

There are 2 banks of LEDs mounted on the board these give a visible indication of the Readout mode and if the VDC channels are wire bonded.

Readout mode status is indicated by the 3 LEDs, D0 - D2:

\begin{tabular}{|c|c|c|c|} \hline LED D2 & LED D1 & LED D0 & READOUT MODE \\ \hline
0 & 0 & 0 & 0 \\ \hline
0 & 0 & 1 & 1 \\ \hline
0 & 1 & 0 & 2 \\ \hline
0 & 1 & 1 & 3 \\ \hline
1 & 0 & 0 & 4 \\ \hline \end{tabular}

\(0\) - LED not active \(1\) - LED active

\(\bullet\) LEDs V0 and V1 are used to indicate if the VDC channels 0 and 1 are wire bonded. A LED not active indicates that the VDC channel is not bonded.

### 2.5 Software Implementation[7]

FKSC has presently been tested using a production version of SCTDAQ, this can be downloaded as a zip file from the following site:

[http://s.home.cern.ch/s/sct/public/zips/pro/](http://s.home.cern.ch/s/sct/public/zips/pro/)

This version of SCTDAQ uses an updated Module Configuration file, which incorporates a set of variables that are then used for the configuration of FKSC. A truncated example of a Configuration file is shown below in Fig 5.

An additional line has been added, shown in red, where the configuration variables are set. In the example file shown below, FKSC is operating in Readout mode 0, BPM output drive is set to 500uA and both VDC DAC's set to 512 (this assumes that VCSEL Vled is set to 6.0V).

**Both BPM_DRIVE and VDC_DAC are default settings.**The FKSC specific variables are shown below:

\begin{tabular}{l l} SC\_MODE: & Readout mode (0 - 4) \\ BPM\_DRIVE: & BPM output drive current (0 -3) \\ VDC\_DAC0: & VDC0 10-bit DAC data receiver (0 - 1023) \\ VDC\_DAC1: & VDC1 10-bit DAC data receiver (0 - 1023) \\ \end{tabular}

\(\bullet\) The Readout mode, as explained previously, '0' sets the mode to 0 etc.

\(\bullet\) The BPM output drive current, this is the magnitude of the input signal to the DORIC, this can be set to the following: 60\(\mu\)A, 120\(\mu\)A, 250\(\mu\)A or 500\(\mu\)A. Where '0' sets 60\(\mu\)A and '1' sets it to 120\(\mu\)A etc.

\(\bullet\) The VDC DACs are used in conjunction with a voltage comparator as an interface to the incoming data stream from the individual VDCs. It is necessary to set the DAC so as to be able to discriminate correctly between a logic '1' and '0'.

Figure 5: **Modified Module Configuration file**

[MISSING_PAGE_FAIL:7]

## 4 Conclusions

A support card has been designed for use with the Forward SCT Modules equipped with versions K3, K4 or K5 Forward Kapton Hybrid. The card can be run in several modes and allows readout via the Primary input/output data route as well as via the Redundant data route. Tests on a K5 module show that the module performance is independent of the data route chosen.

## 5 References

[1] DORIC (Links Front End Clock & L1 Distribution Chip)

[http://scipp.ucsc.edu/groups/atlas/elect-doc/doric4](http://scipp.ucsc.edu/groups/atlas/elect-doc/doric4) spec.pdf

[2] VDC (Links VCSEL Driver Chip)

[http://scipp.ucsc.edu/groups/atlas/elect-doc/VDC](http://scipp.ucsc.edu/groups/atlas/elect-doc/VDC) spec.pdf

[3] ATLAS SCT Module/Hybrid Test DAQ

[http://atlas.web.cern.ch/Atlas/GROUPS/INNER](http://atlas.web.cern.ch/Atlas/GROUPS/INNER) DETECTOR/SCT/testdaq/testdaq.html

[4] SCT LV-2 (3) VME SCT LV Power Supply

[http://www-hep.fzu.cz/Atlas/WorkingGroups/Projects/MSGC.html](http://www-hep.fzu.cz/Atlas/WorkingGroups/Projects/MSGC.html)

[5] Wiggly Interconnect Kaptons, K4 version April 01

[http://hep.ph.liv.ac.uk:80/~smithy/atlas.html](http://hep.ph.liv.ac.uk:80/~smithy/atlas.html)

[6] PPR (Patch Panel Replacer)

[http://roberts.ph.unimelb.edu.au/epp/projects/ppr/](http://roberts.ph.unimelb.edu.au/epp/projects/ppr/)

[7] Forward Kapton Support Card - User Manual

[http://hep.ph.liv.ac.uk/~ashley/FWDSCRD.doc](http://hep.ph.liv.ac.uk/~ashley/FWDSCRD.doc)

[8] K5-300 Middle Module

[http://sct.physik.uni-freiburg.de/feld/sct/module/](http://sct.physik.uni-freiburg.de/feld/sct/module/)
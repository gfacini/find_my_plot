ATLAS Internal Note

MUON-No-202

**Pixel CCD RANIK DAQ**

Kevan S Hashemi and James R Bensinger

Brandeis University

May 1997

Introduction

This note describes the data acquisition system (DAQ) proposed by Brandeis University for use with the pixel CCD RASNIK instrument in the ATLAS muon chamber alignment system. The original RASNIK instrument, as described in the ATLAS technical proposal [1], uses a miniature video camera as its image sensor. The camera transmits the image as a video signal along a coaxial cable. It requires only a single 9-V power supply. But doubts about the stability of the reconstructed image's pixel width, and the dependence of that width upon the frame grabber used to reconstruct the image, lead Brandeis University to propose and test the pixel CCD RASNIK instrument as an alternative to the original [2]. The pixel CCD instrument's image sensor consists of a CCD, an operational amplifier, and a few resistors, capacitors, and zenar diodes. The circuit is simpler than that of a video camera because the CCD clock signals are not generated locally. They are transported to the image sensor by cable. The image pixels are transmitted back down the same cable one at a time as analog voltages. It is because the pixels are transmitted one at a time that a geometrically exact representation of the CCD image may be reconstructed by the DAQ.

The CCD Head

The "CCD Head" is what we call the pixel CCD RASNIK instrument's image sensing circuit. We are considering two CCDs for the CCD Head, the TC-237 and the TC-255. Both are manufactured by Texas Instruments, and are readily available in quantities of several thousand. The two devices are compared in the Table 1.

The 10%-Fill Time is the time it takes the CCD pixels to fill to 10% of their full capacity at room temperature when no light is allowed to land upon the CCD. The TC-237 is larger than the CCDs we have used extensively in our video CCD RASNIK instruments. But the TC-255 is smaller. Although our initial simulations suggest that the TC-255 will provide 5 \(\upmu\)m rms accuracy in the measurement of lens displacement [2], we hesitate to commit to using it until tests with the actual CCD have been performed. The advantage of using the TC-255 is that it costs $14 as compared to $50 for the TC-237. The CCD Head cost would be reduced from $65 to $29.

In either case, the CCD Head will be a double-sided surface-mount circuit board with a 20-way ribbon cable plug (or "header") on one side, and the CCD on the other. We estimate the area of the board to be 25 x 25 mm.

The Mask Illumination

A single LED (Hewlette Packard, HSDL-4230) is adequate to illuminate the mask in pixel CCD instruments up to 8 m long, even if the central lens is only 25 mm in diameter [2]. The LED dissipates over 200 mW when turned on. If this dissipation is adequate to distort the local aluminum structure, the LED should be turned on only when an image is being recorded. The in-plane alignment of the forward muon detector requires that a single CCD Head be used for two separate optical paths. Each optical path has its own LED. Although it may be possible to analyze two superimposed mask images of differing pitches, the two images are readily separated by turning one LED on at a time. A third reason for giving the DAQ ability to control the LEDs is that it guarantees that there will be no smearing of the mask image caused by the LED being left on while the image is being shifted row-by-row out of the CCD.

\begin{table}
\begin{tabular}{|l|l|c|c|c|c|} \hline \hline CCD & Company & Active & Pixel Size & 10\%-Fill & Cost in \\  & & Area & & Time & Thousands \\  & & (mm 2) & (\(\upmu\)m 2) & (s) & (\$) \\ \hline TC-237 & TI & 4.9 x 3.7 & 7.4 x 7.4 & 20 & 50 \\ \hline TC-255 & TI & 3.2 x 2.4 & 10 x 10 & 5 & 14 \\ \hline \hline \end{tabular}
\end{table}
Table 1: Comparison of CCDsWe conclude that the DAQ should be able to turn on and off the LEDs, and propose that it be able to do so independently from the image-retrieving system, so that no particular association of CCD Heads and LEDs is built into the electronics. The pixel CCD RASNIK DAQ therefore contains a 9U VME "LED Driver" board. Each LED Driver has three 64-way headers at the front. Each header provides ground and switched power for 32 LEDs, making 96 LEDs per LED Driver. The connections to the LED power cables are made with individual 2-pin sockets. The LED Driver will ensure that the time derivatives of both current and voltage at turn-on and turn-off are so small as to make cross-talk from the LED power cables. Therefore unshielded twisted-pair cable can be used to carry the current. We estimate the cost of the LED driver to be $288, or $3 per LED. We estimate the cost of halogen-free LED power cable to be $0.24 per meter.

The CCD Head Cable

A CCD Head Cable carries clock signals from a CCD Multiplexer to a CCD Head (see Figure 1). The clock signals are square waves with peak-to-peak amplitude 12 V. We estimate that the largest voltage slew rate in the clock lines will be 36 V / \(\upmu\)s, which will not disturb neighboring CCD Head Cables, but may disturb the cables of other data acquisition systems. Nevertheless, we propose to use unshielded flat ribbon cable for the CCD Head Cable. If necessary, the CCD Head Cables will be bundled together and kept separate from sensitive cables. Our cost estimate for unshielded, 20-way, halogen-free, ribbon cable is $2.40 per meter. Our estimate for shielded cable is $9.40 per meter. If we use shielded cable, the cost of the CCD Head Cables in the forward alignment system rises from $56 k to $219 k, an increase of 7% in the system's total cost.

The CCD Driver resides in a VME crate, and performs the following functions. It generates the clock signals required by the CCDs in the CCD Heads. It digitizes the analog CCD image pixels returned by the CCD Heads. It stores the digitized CCD images in its own memory. It makes the digitized images available on VME backplane.

The CCD Driver's clock signals are carried to a CCD Multiplexer by a Multiplexer Data Cable (see Figure 1). The Multiplexer Data Cable has the same pinout as a CCD Head Cable. It plugs into a 20-way header on the front of the CCD Driver. If desired, a CCD Head may be connected directly to this same plug. The CCD Driver controls its multiplexers through the "Multiplexer Logic Cable". This cable plugs into a 34-way header on the front of the CCD Driver.

The CCD Driver is controlled by writing commands to its control registers. The CCD Control Register governs the clock signals. There are

Figure 1: DAQ Schematic

commands for clearing a CCD, exposing a CCD, and transferring a CCD image into memory. The Multiplexer Control Register governs the multiplexers attached to the CCD Driver. This register transmits an eight bit address along the Multiplexer Logic Cable.

The CCD Multiplexer

On average, we expect four CCD Multiplexers to be connected to each CCD Driver (see Figure 1). The number of multiplexers that may be attached to a single driver is limited by the power consumption of the multiplexers and connected CCD Heads, all of which receive their power from the driver. With the TC-237 or TC-255, eight multiplexers can be supported by a single driver. Nevertheless, the more multiplexers, and therefore CCD Heads, that are associated with a given driver, the longer the CCD Head Cables. The money saved by sharing a driver among many CCD Heads is quickly offset by the money spent on lengthening these cables (see cost estimate below).

The Multiplexer Data Cables carry clock signals from the driver to the multiplexers. The Multiplexer Logic Cables carry DC power and CCD select lines. Each multiplexer can be connected to up to eight CCD Heads. In our nominal architecture, four multiplexers are connected to each driver, and eight CCD Heads are connected to each multiplexer. Therefore each driver controls thirty-two CCD Heads. The CCD Heads are controlled one at a time. The driver cannot, for example, clear all of its CCDs at the same time. It must clear them one at a time.

Performance of the DAQ

The CCD Driver digitizes CCD pixel intensities to 8-bit precision and stores them in its own memory at a rate of up over one million pixels per second (1 MPS). At 1 MPS, the CCD Driver stores three TC-237 images, or twelve TC-255 images, per second. The CCD Driver has 2 MB of RAM in which to store images. This 2 MB is enough to store six TC-237 images, or twenty-five TC-255 images. A computer in the VME crate can read an image out of the CCD Driver's memory even while the CCD Driver is digitizing and storing new images. When such simultaneous memory access is taking place, the pixel storage rate is still 1 MPS. Consequently, the CCD Driver, in continuous operation, can read out three images per second if we use the TC-237, or twelve images per second if we use the TC-255. Nominally, there are 32 CCDs attached to each CCD Driver, so the maximum readout rate for each CCD Head is once per eight seconds for TC-237 CCD Heads, and once per three seconds for TC-255 CCD Heads.

Cost of the DAQ

We estimate the cost of the pixel CCD RASNIK to be $46 per instrument, assuming one CCD per mask and lens. A breakdown of this estimate is given in Table 2.

Conclusion

We built breadboard versions of the CCD Driver, CCD Multiplexer, cables, and CCD Head, and tested them. Based upon these tests, and the manufacturer's specifications for parts that we intend to use in the production version of the DAQ, we estimate the DAQ cost to be $73 per pixel CCD RASNIK instrument. Each CCD Driver takes up one VME slot and controls thirty-two RASNIK instruments through four CCD Multiplexers. In the near future, we expect to receive printed circuit boards for the next generation of the CCD Driver and CCD Multiplexer. We will test these circuits with the proposed low-cost CCD Heads, and hope to demonstrate that an effective CCD Head can be manufactured for $29. Crosstalk from the CCD Head Cables to the cables of other ATLAS data acquisition systems remains a source of concern for us. The cost of using shielded cables is so high that we would like to take whatever steps we can to allow us to use unshielded cable.

References

[1] ATLAS Collaboration, _Technical Proposal_, CERN/LHCC/94-43

[2] K. S. Hashemi, J. R. Bensinger, _Pixel CCD RASNIK_, ATLAS Internal Note MUON-No-xxx, May 1997.

\begin{table}
\begin{tabular}{|l|l|r|r|r|} \hline  & & & Cost Each & Cost \\ Part Name & Description & Quantity & (US \$) & (US \$) \\ \hline Head Cable & 20-way unshielded ribbon (10 m) & 1 & 24.60 & 24.60 \\ LED Cable & 2-way unshielded (10 m) & 1 & 2.40 & 2.40 \\ CCD Mux & CCD Multiplexer circuit & 1 & 187.70 & 23.46 \\ Logic Cable & 34-way unshielded ribbon (1 m) & 1/8 & 5.10 & 0.64 \\ Data Cable & 20-way unshielded ribbon (1 m) & 1/8 & 3.00 & 0.38 \\ LED Driver & LED Driver circuit & 1/96 & 288.00 & 3.00 \\ CCD Driver & CCD Driver circuit & 1/32 & 449.54 & 14.05 \\ VME Crate & 13-slot crate with 500 W supply & 1/288 & 1300.00 & 4.51 \\ \hline Total & & & 73.04 \\ \hline \end{tabular}
\end{table}
Table 2: Pixel CCD RASNIK DAQ Cost per Instrument
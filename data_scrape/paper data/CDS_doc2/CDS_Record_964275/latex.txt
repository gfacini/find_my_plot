**ATLAS B-physics Trigger Studies**

**using EM and Jet RoIs**

Julie Kirk1, John Baines

Footnote 1: Contact: J.Kirk@rl.ac.uk

Rutherford Appleton Laboratory, Chilton, Didcot UK.

Alan Watson

Birmingham University, Birmingham, UK.

This note documents the ATLAS B-physics triggers for final states containing hadrons and electrons or photons. Various possible trigger strategies are described and their impact on trigger resources is discussed.

## 1 Introduction

ATLAS will use a LVL1 dimuon trigger to search for rare decays such as \(B^{\circ}_{s,d}\)\(\rightarrow\)\(\mu^{+}\mu^{-}\), \(B^{\circ}_{d}\)\(\rightarrow\)\(K^{\circ*}\mu^{+}\mu^{-}\) and \(B_{d}\)\(\rightarrow\)\(\rho^{\circ}\mu^{+}\mu^{-}\)[1] and to select channels with \(J/\psi\)\(\rightarrow\)\(\mu^{+}\mu^{-}\) in the final state. These selections can be applied from initial running through to high luminosity operation. In addition during lower luminosity running, e.g. in the first years of operation or at the end of beam-coasts during high luminosity running, additional triggers can be introduced for hadronic channels (such as \(B^{\circ}_{s}\)\(\rightarrow\)\(D^{-}_{s}\)\(\pi^{+}\) and \(B^{\circ}_{s}\)\(\rightarrow\)\(D^{-}_{s}\)\({}^{+}_{1}\)[2]) and channels with electromagnetic final states (such as \(J/\psi\)\(\rightarrow\)\(e^{+}e^{-}\), \(B^{\circ}_{d}\)\(\rightarrow\)\(K^{\circ*}\gamma\) and \(B^{\circ}_{s}\)\(\rightarrow\)\(\phi\gamma\)). Three possible strategies have been considered for these triggers, for events with a single LVL1 muon trigger with \(p_{T}>~{}\sim 8\) GeV:

* Using LVL1 Jet or EM RoIs to identify regions likely to contain the hadronic or electromagnetic B-meson decay
* Searching the half of the inner detector opposite the trigger muon
* Searching the whole of the inner detector (full-scan).

ATLAS has a time budget at LVL2 of an average of about 10 ms per LVL1 accept. Longer execution times are permissible at lower rates i.e. later in the selection, for example for LVL1 muons that have been confirmed at LVL2. This constraint on average total execution time means that, while a full-scan would be expected to give higher efficiency at low B-meson \(p_{T}\) than a trigger based on a LVL1 RoI, its longer execution time means it must be run at lower input rates. Similarly there is a trade-off between reducing the threshold for the LVL1 RoI trigger, and so increasing efficiency at low B-meson \(p_{T}\), and an increase in average execution time per event due to the increase in RoI multiplicity.

In this note, these three approaches are compared for the \(B^{\circ}_{s}\)\(\rightarrow\)\(D^{-}_{s}\)\(\pi^{+}\) channel based on selection efficiency for the signal and the average total execution time for background events \(b\overline{b}\)\(\rightarrow\)\(\mu\)6X. Some LVL1 studies using EM RoIs are also reported.

The \(B^{\circ}_{s}\)\(\rightarrow\)\(D^{-}_{s}\)\(\pi^{+}\)and \(b\overline{b}\)\(\rightarrow\)\(\mu\)6X samples used are Rome datasets generated with release 9.0.4. They were then re-digitized with the new LVL1 simulation using release 10.0.6. Reconstruction was also performed with 10.0.6. In both cases with pile-up corresponding to a luminosity of 10\({}^{33}\)cm\({}^{-2}\)s\({}^{-1}\).

## 2 The LVL1 calorimeter trigger

It is important to have an accurate simulation of the LVL1 calorimeter trigger in order to correctly predict the multiplicities down to the low \(E_{T}\) thresholds used in this note. A previous study, [3], showed encouraging first results. In this note, these measurements have been repeated using a GEANT-based simulation which includes a full simulation of the detector response and readout electronics. The input to the LVL1 calorimeter trigger is a set of \(\sim\)7200 trigger towers with granularity \(\Delta\phi\times\Delta\eta\approx 0.1\times 0.1\) formed by the analogue summation of calorimeter cells. There are separate sets of trigger towers for the EM and hadronic calorimeter. The trigger tower sum is digitized to 8 bits with a nominal \(E_{T}\) of 1 GeV per count (the digit scale). For initial running at low luminosity a finer scale of 0.5 GeV per count could be used. A threshold can be applied to each individual trigger tower to suppress noise and pileup ( the "Trigger Tower (TT) threshold") and can be adjusted in steps of \(\sim\)250MeV. Towers with energy above the Trigger Tower threshold, can contribute to an EM or jet cluster reconstructed by the LVL1 trigger algorithms.

To reproduce the calorimeter response the simulation includes the full pulse history of up to 25 preceding bunch crossings, the arrangement of LAr and Tile calorimeter units into towers for the trigger readout (Trigger Towers) and a simulation of noise applied to both LAr and Tile calorimeters and to the trigger towers. There is a simulation of the Bunch Crossing Identification (BCID) logic, which reduces the noise contribution from other bunch crossings by assigning the calorimeter signals to the correct bunch crossing. An \(|\eta|\)-dependent calibration is performed. This is followed by an emulation of the algorithms that run in the LVL1 trigger.

The LVL1 jet algorithm uses a sliding window of \(2\times 2\), \(3\times 3\) or \(4\times 4\) jet elements. Each jet element has the size \(\Delta\phi\times\Delta\eta\approx 0.2\times 0.2\) (for \(|\eta|<~{}3.2\)). The sliding windows have then the sizes \(\Delta\phi\times\Delta\eta\) of approximately \(0.4\times 0.4,\,0.6\times 0.6\) or \(0.8\times 0.8\). The transverse energy is summed over both the electromagnetic and the hadronic layers. A RoI is produced if the \(2\times 2\) cluster of the window is a local \(E_{T}\) maximum (as defined in [5]) and the window \(E_{T}\) sum is greater than one of the eight predefined thresholds.

The electron/photon algorithm processes \(4\times 4\) trigger towers, each tower with the size \(\Delta\phi\times\Delta\eta\approx 0.1\times 0.1\) and \(|\eta|<~{}2.5\). In each sliding window, it identifies \(2\times 2\) EM clusters with at least one two-tower sum ( \(1\times 2\) or \(2\times 1\)) greater than a predefined threshold. Isolation criteria are then set using both the hadronic core and surrounding rings of towers. The LVL1 calorimeter trigger algorithms are described in more detail in [4].

The LVL1 trigger simulation is configured with the following parameters:

* The digit scale (default 1 GeV per count)
* The EM and hadronic TT thresholds
* The cluster threshold
* The EM isolation ring threshold
* The hadronic ring isolation threshold
* The hadronic core isolation threshold (for the e/gamma trigger only).

These have been varied to study the effect on efficiency and average RoI multiplicity. The default value for the EM TT threshold is 500MeV and it is raised to 750MeV or 1000MeV. The default hadronic TT threshold is 750MeV in the barrel and 500MeV in the end-cap, this is raised to 1000MeV in the barrel and 750MeV in the end-cap in the following studies. The barrel hadronic TT threshold is given when referring to the different settings.

## 3 Level1 RoI multiplicities

Using a level 1 EM or Jet RoI to guide the ID reconstruction should save resources as compared to doing a full scan. This will only be the case if the average number of RoIs per event (the RoI multiplicity) is small, ideally about 1-2. Figure 1a shows the level 1 EM RoI multiplicity for \(b\overline{b}\)\(\rightarrow\)\(\mu\)6X events with an EM cluster threshold of 2GeV. Figure 1b shows how the mean of this distribution varies as the \(E_{T}\) threshold is changed. From the plot it is seen that an \(E_{T}\) threshold of 2-2.5GeV would result in the required multiplicity of 1-2. The different curves show the effect of varying the EM TT threshold which is applied to each individual trigger tower before the cluster is formed. Increasing this threshold will reduce noise contributions and Figure 2: Mean LVL1 multiplicities as a function of \(E_{T}\) threshold for a) 4x4 and b) 8x8 Jet RoIs for \(b\overline{b}\)\(\rightarrow\)\(\mu\)6X events. The points on the solid line are for the default TT thresholds, those on the dotted line are for an EM TT threshold of 750MeV, those on the dashed line are for an EM TT threshold of 1000MeV and those on the dash-dotted line are for a hadronic TT threshold of 1000MeV.

Figure 1: a) Level 1 EM RoI multiplicity for \(b\overline{b}\)\(\rightarrow\)\(\mu\)6X events for \(E_{T}>\)2GeV threshold. b) Mean EM RoI multiplicities for \(b\overline{b}\)\(\rightarrow\)\(\mu\)6X events as a function of \(E_{T}\) threshold. The points on the solid line are for the default EM tower threshold of 500MeV, those on the dotted line for 750MeV and those on the dashed line for 1000MeV. (The lines are just to guide the eye)

hence the multiplicity. It can be seen that varying this threshold from 500Mev to 1000 MeV has only a small effect on the multiplicity distributions.

Figure 2 shows the mean multiplicity distributions for Jet RoIs with sizes of a) 4x4 and b) 8x8 trigger towers. For a 4x4 Jet RoI an \(E_{T}\) threshold of 4-5GeV would give multiplicities of 1-2. For the larger 8x8 Jet RoI the multiplicities are larger, as expected, and an \(E_{T}\) threshold of 6-7GeV would be needed to keep the multiplicity at the required level. In both cases the EM and hadronic TT thresholds were varied. For the Jet RoIs, as for the EM RoIs, increasing the EM TT threshold reduces the multiplicity only slightly. Increasing the hadronic TT threshold to the higher setting results in a much larger reduction in multiplicity but may also reduce the signal efficiency (this will be discussed in section 5.2).

## 4 B-triggers using EM RoIs

### \(b(\rightarrow\)J/\(\psi(\mu^{+}\mu^{-}))\overline{b}(\to e\)X)

A study of the feasibility of using EM RoIs to increase the efficiency for \(b(\rightarrow\)J/\(\psi(\mu^{+}\mu^{-}))\) events is discussed. The idea is to try to recover some of the events in which the second muon from the J/\(\psi(\mu^{+}\mu^{-})\) is not found by the muon trigger. This can be done by looking for an electron from the other \(B\) in the event. For 9360 \(b\rightarrow\)J/\(\psi(\mu^{+}\mu^{-})\)events, 867 have \(\overline{b}\to e\)X. For an \(E_{T}\) threshold of 2GeV 200 of these events give rise to an EM RoI (an efficiency of 23%). Figure 3a) shows the \(p_{T}\) distribution of the electrons from \(\overline{b}\to e\)X. The shaded histogram shows the \(p_{T}\) distribution for those electrons giving an EM RoI with \(E_{T}>\)2GeV. Figure 3b) shows the efficiency for the electron to give an EM RoI as a function of \(p_{T}\). It is clear that the inefficiency is due to the low \(p_{T}\) electrons.

Figure 3: a) The \(p_{T}\) distribution of electrons from \(\overline{b}\to e\)X in \(b\rightarrow\)J/\(\psi(\mu^{+}\mu^{-})\)events. The shaded histogram shows those electrons giving rise to an EM RoI, \(E_{T}\)\(>\)2GeV. b) The LVL1 efficiency as a function of \(p_{T}\) for electrons from \(\overline{b}\to e\)X to give an EM RoI with \(E_{T}>\)2GeV.

### Rare radiative decays

The rare radiative decays \(B_{d}^{\circ}\!\!\to\!\!K^{\circ*}\gamma\) and \(B_{s}^{\circ}\!\!\to\!\!\phi\gamma\) are sensitive to new physics. A previous study [6] presented a trigger feasibility study using the offline software. In these events the strategy is to use a LVL1 EM RoI in events with a LVL1 muon and to search for the \(K^{*}\) or \(\phi\) decay products in a large RoI around the LVL1 EM RoI. In this note we use the trigger software for the first time to study the LVL1 efficiency for the photon. Figure 4a shows the \(p_{T}\) spectrum of the photons from the \(B_{s}^{\circ}\!\!\to\!\!\phi\gamma\) decay (the spectrum for \(B_{d}^{\circ}\!\!\to\!\!K^{\circ*}\gamma\) events is similar). The spectrum peaks toward low values of \(p_{T}\) and we need to therefore be as efficient as possible for low \(p_{T}\) photons. As there are no generated events for the signal sample we have considered 5 GeV single photons and looked at the LVL1 EM RoI efficiency.

Figure 4b shows the \(E_{T}\) of LVL1 EM RoIs within \(|\Delta\phi|,|\Delta\eta|<0.2\) of the generated photon. Requiring \(E_{T}>\)2GeV, 3GeV and 4GeV gives efficiencies of 93%, 81% and 61% respectively. Fully simulated signal events will allow a complete trigger analysis of these channels.

## 5 \(B_{s}^{\circ}\!\!\to\!\!D_{s}^{-}\pi^{+}\) trigger using Jet RoIs

The \(B_{s}^{\circ}\!\!\to\!\!D_{s}^{-}\pi^{+}\)trigger uses a LVL1 Jet RoI to seed the track reconstruction at LVL2. The Rome datasets were used and re-digitised with the new LVL1 trigger simulation using ATHENA release 10.0.6. Pileup corresponding to \(1\times 10^{33}cm^{-2}s^{-1}\) was applied to the data. The results presented here are based on 5000 \(B_{s}^{\circ}\!\!\to\!\!D_{s}^{-}\pi^{+}\)signal events and 5000 \(b\overline{b}\!\!\to\!\!\mu\)6X background events.

### Level1 RoI efficiencies for \(B_{s}^{\circ}\!\!\to\!\!D_{s}^{-}\pi^{+}\)

In this section the efficiency for finding the B-hadron within a LVL1 Jet RoI is discussed. The B-hadron is considered to be within the RoI if it is within \(|\Delta\phi|\),\(|\Delta\eta|<\)0.4 of the centre of the RoI. Different RoI sizes and hadronic tower thresholds are investigated. A 4x4 Jet RoI is 4\(\times\)4 trigger towers which corresponds to \(\Delta\phi\)x\(\Delta\eta\approx\)0.4x0.4 and a 8x8 Jet RoI is 8\(\times\)8 trigger towers which corresponds to \(\Delta\phi\)x\(\Delta\eta\approx\)0.8x0.8.

Figure 5a shows the efficiency for the \(B\) in \(B^{\rm a}_{s}\)\(\rightarrow\)\(D^{\rm a}_{s}\)\(\pi^{+}\) events to be within the RoI for 4x4 Jet RoIs as a function of the \(B\)\(p_{T}\) for RoI \(E_{T}\) thresholds of 4GeV and 5GeV (i.e. those which gave reasonable RoI multiplicities in section 3). Clearly using the higher \(E_{T}\) threshold reduces the efficiency for lower \(p_{T}\)\(B\)-mesons. Figure 5b shows the effect of raising the hadronic TT threshold to the higher levels for a fixed \(E_{T}\) threshold of 4GeV. Raising the hadronic TT threshold reduces the efficiency for low \(p_{T}\)\(B\)-hadrons. However, as can be seen from figure 2a, the mean ROI multiplicity is also reduced and it is therefore possible to reduce the \(E_{T}\) threshold and still maintain a reasonable RoI multiplicity. Figure 7a shows that by doing this it is possible to recover a similar efficiency to that with the default TT threshold. Figures 6a and 6b show the equivalent plots for the 8x8 Jet RoIs where similar behaviours are observed. Again lowering the \(E_{T}\) threshold for the high TT threshold case allows one to recover similar efficiencies as in the default TT threshold case as shown in figure 7b.

Table 1 shows the efficiencies for the \(B\) hadron to be within the RoI for different Jet RoI sizes and hadronic TT threshold settings for all events, events with \(p_{T}(B)>\)10GeV and events with \(p_{T}(B)>\)20GeV. It is seen that full efficiency is only reached for \(p_{T}(B)>\)20GeV. As already

Figure 5: Efficiencies for the \(B\) hadron to be within 0.4x0.4 of the 4x4 Jet RoI centre for a) different \(E_{T}\) thresholds and b) different hadronic TT thresholds.

Figure 6: Efficiencies for the \(B\) hadron to be within 0.4x0.4 of the 8x8 Jet RoI centre for a) different \(E_{T}\) thresholds and b) different hadronic TT thresholds.

\begin{table}
\begin{tabular}{|l|c|c|c|c|c|} \hline \hline RoI size/ & \(E_{T}\) threshold & mean ROI & \multicolumn{3}{c|}{efficiency} \\ \cline{3-6} tower threshold & & multiplicity & all events & \(p_{T}(B)>10GeV\) & \(p_{T}(B)>20GeV\) \\ \hline
4x4 jet & 4 GeV & 1.8 & 58\% & 76\% & 98\% \\  & 5 GeV & 1.1 & 51\% & 69\% & 96\% \\ \hline
4x4 jet & 3.0GeV & 1.9 & 62\% & 80\% & 98\% \\ hadth\(>\)1000MeV & 3.5GeV & 1.5 & 58\% & 76\% & 98\% \\  & 4.5GeV & 1.0 & 50\% & 68\% & 97\% \\ \hline
8x8 jet & 6GeV & 2.0 & 55\% & 72\% & 98\% \\  & 7 GeV & 1.3 & 49\% & 66\% & 97\% \\ \hline
8x8 jet & 4 GeV & 1.8 & 59\% & 78\% & 98\% \\ hadth\(>\)1000MeV & 5GeV & 1.3 & 53\% & 71\% & 98\% \\ \hline \hline \end{tabular}
\end{table}
Table 1: Efficiencies for the \(B\) hadron to be within 0.4x0.4 of the Jet RoI centre for different RoI sizes and hadronic tower thresholds.

Figure 7: Efficiencies for the \(B\) hadron to be within 0.4x0.4 of the Jet RoI centre for a) 4x4 Jet RoI \(E_{T}>\)4GeV and default hadronic TT thresholds (solid line) and \(E_{T}>\)3GeV and high hadronic TT thresholds (dashed line) b) 8x8 Jet RoI \(E_{T}>\)6GeV and default hadronic TT thresholds (solid line) and \(E_{T}>\)4GeV and high hadronic TT thresholds (dashed line).

seen for the 4x4 Jet RoI case increasing the hadronic TT threshold by itself would reduce the efficiency but since the multiplicity is also reduced we can reduce the \(E_{T}\) threshold for the RoI and maintain a similar overall efficiency. For the 8x8 Jet RoI with default hadronic TT thresholds a significantly higher \(E_{T}\) threshold is needed than for the 4x4 JetRoI in order to keep the multiplicity low and this reduces the efficiency. With the raised hadronic TT threshold there is a lower noise contribution to the cluster ET and so a given RoI multiplicity can be obtained with a reduced cluster threshold giving an increased efficiency, particularly for low pT \(B\). A more complete comparison of the different schemes will be given in the next section where track reconstruction efficiency is included.

### Level 2 selection and efficiency

At LVL2 tracks are reconstructed using IDSCAN in a region \(\Delta\phi\)x\(\Delta\eta=1.5\)x\(1.5\) around all Jet RoIs with \(E_{T}\) above a certain threshold. These tracks are combined to form \(\phi\) and \(D_{s}\) candidates and mass cuts are applied to select good events. A \(p_{T}\) cut of 1.4GeV is applied to all reconstructed tracks. For kaons and pions with \(p_{T}^{true}>\)1.5GeV the track reconstruction efficiencies are 86% and 88% respectively. The corresponding efficiency to reconstruct all three tracks is 71%. The track reconstruction efficiency is the efficiency for there to be a track which is kine-matched to the truth particle (i.e. at least 3 space points on the track are assocoiated to the truth particle). Figure 8 shows the track reconstruction efficiencies for kaons and pions as a function of \(p_{T}^{true}\) and \(\eta\). The efficiency falls off at low \(p_{T}\) (\(<\) 3-4 GeV) and high eta (\(|\eta|>1.5\)), this is being investigated and should be improved in the future.

Track pairs are only used to form a \(\phi\) candidate if they pass \(|\Delta z|<3\)mm, \(|\Delta\phi|<0.2\) and \(|\Delta\eta|<0.2\). This helps to reduce the number of track combinations which need to be considered. Figure 9 shows the \(|\Delta\phi|\) and \(|\Delta\eta|\) distributions for all pairs of tracks (dashed line) and for those pairs which are kine matched to the \(K^{+}K^{-}\) (solid line). Table 2 shows the mean number of tracks in an event and the mean number of opposite sign track pairs as successive track cuts are made. It is clear that the \(\Delta\phi\) and \(\Delta\eta\) cuts significantly reduce the number of track pairs to be considered. The table also shows the efficiency to find the true \(K^{+}K^{-}(p_{T}>1.5\)GeV) pair as successive track cuts are made and it is seen that there is negligible change.

Opposite sign tracks are combined with a \(K^{+}K^{-}\) mass hypothesis and a cut around the \(\phi\) mass is applied. Track pairs passing this cut are then combined with all other tracks in the RoI in turn, assuming a pion mass for the new track. An event is selected if the mass of the track triplet is close to the \(D_{s}\) mass. Figure 10a) shows the \(K^{+}K^{-}\) invariant mass distribution for track pairs from \(B_{s}^{\circ}\)\(\rightarrow\)\(D_{s}^{-}\pi^{+}\) events. Shown shaded is the distribution for those pairs of tracks

\begin{table}
\begin{tabular}{|l|c|c|c|c|c|} \hline  & \multicolumn{2}{c|}{\(b\overline{b}\)\(\rightarrow\)\(\mu\)6X} & \multicolumn{2}{c|}{\(B_{s}^{\circ}\)\(\rightarrow\)\(D_{s}^{-}\pi^{+}\)} \\ \cline{2-6} Track cuts & \(<N_{tracks}>\) & \(<N_{trackpairs}>\) & \(<N_{tracks}>\) & \(<N_{trackpairs}>\) & \(\epsilon\) (KK) \\ \hline \(p_{T}>\)1.4GeV & 5.1 & 10.2 & 6.9 & 16.2 & 77\% \\ \(|\Delta z|<3\)mm & & 9.2 & & 15.7 & 77\% \\ \(|\Delta\phi|<0.2\), \(|\Delta\eta|<0.2\) & & 3.5 & & 5.9 & 77\% \\ \hline \end{tabular}
\end{table}
Table 2: The mean number of reconstructed tracks in an RoI for signal (\(B_{s}^{\circ}\)\(\rightarrow\)\(D_{s}^{-}\pi^{+}\)) and background (\(b\overline{b}\)\(\rightarrow\)\(\mu\)6X) events. The mean number of track pairs considered as \(\phi\) candidates as successive track pair cuts are applied. The efficiency to find the true \(K^{+}K^{-}(p_{T}>1.5\)GeV) pair as successive track cuts are applied.

Figure 8: Track efficiencies for a) kaons and b) pions as a function of p\({}_{T}^{true}\) and c) kaons and d) pions as a function of \(\eta\)

Figure 9: a) \(\Delta\phi\) and b) \(\Delta\eta\) distributions from signal events for all track pairs (dashed) and kine matched track pairs (solid). The arrows indicate the cut values of \(|\Delta\phi|<0.2\) and \(|\Delta\eta|<0.2\)

Figure 11: \(K^{+}K^{-}\pi\) invariant mass distribution for a)\(B^{\circ}_{s}\)\(\rightarrow\)\(D^{-}_{s}\pi^{+}\) and b)\(b\overline{b}\)\(\rightarrow\)\(\mu\)6X events. The shaded histogram in a) is for track pairs with kine matching

Figure 10: \(K^{+}K^{-}\) invariant mass distribution for a)\(B^{\circ}_{s}\)\(\rightarrow\)\(D^{-}_{s}\pi^{+}\) and b)\(b\overline{b}\)\(\rightarrow\)\(\mu\)6X events. The shaded histogram in a) is for track pairs with kine matching

both of which have at least 3 hits with correct kine matching. A cut is made of 3\(\sigma\) (1005-1035 MeV) around the phi mass to select \(\phi\) candidates, this is shown by the dashed lines on the plots. The mass window is determined using the trigger reconstruction. The same distribution for background \(b\overline{b}\)\(\rightarrow\)\(\mu\)6X events is shown in figure 10b). The \(K^{+}K^{-}\pi\) invariant mass distributions for signal and background events are shown in figures 11a) and b) respectively (the dashed lines show the 3\(\sigma\) mass window of 1908-2040 MeV).

Table 3 shows the efficiency to select \(B_{s}^{\circ}\)\(\rightarrow\)\(D_{s}^{-}\pi^{+}\) events at LVL2 for different RoI sizes and hadronic TT thresholds. For each different set of parameters, \(E_{T}\) thresholds which give acceptable LVL1 multiplicities in section 3 are used. The table also shows the fraction of background \(b\overline{b}\)\(\rightarrow\)\(\mu\)6X events selected.

The results with a 8x8 Jet RoI look worse than the 4x4 case, i.e. lower efficiency for the same background or higher background for the same efficiency. The results with the 4x4 Jet RoI and different TT thresholds are similar. Figure 12 shows the efficiency versus background plot for the different scenarios. Using a 4x4 Jet RoI with the default TT thresholds gives the best results (i.e. lowest background for a given efficiency or highest efficiency for a given background).

### Comparison with full scan and other approaches

In this section we compare the efficiencies and rates achieved using the RoI based analysis with other possible approaches. The first of these is to perform a full scan of the inner detector which should be more efficient since it doesn't require a LVL1 EM or Jet RoI but will also take more time. An second alternative approach has been suggested using the LVL1 muon and looking in the opposite half of the event for the \(B\) decay of interest. Figure 13 shows the \(\Delta\eta\) versus \(\Delta\phi\) distribution of the \(B_{s}^{\circ}\)\(\rightarrow\)\(D_{s}^{-}\pi^{+}\)with respect to the LVL1 muon. It can be seen that while a large fraction of the \(B\)-mesons are indeed opposite the muon a significant number are also close to the muon in \(\eta\) and \(\phi\). We define a "muon-combined" analysis which uses two large RoIs one opposite to the muon in \(\phi\) and covering all \(\eta\) and another centered on the muon with \(\Delta\eta\times\Delta\phi\) of 1\(\times\)1 (these regions are shown by the dotted lines in figure 13). Figure 14 shows the

\begin{table}
\begin{tabular}{|l|c|c|c|c|} \hline RoI size/ & \(E_{T}\) threshold & efficiency & background & LVL1 RoI mult \\ \hline
4x4 jet & 4GeV & 59\% & 3.6\% & 1.8 \\  & 4.5GeV & 56\% & 3.4\% & 1.3 \\  & 5GeV & 53\% & 3.2\% & 1.1 \\ \hline
4x4 jet & 3.0GeV & 60\% & 3.6\% & 1.9 \\ hadth\(>\)1000MeV & 3.5GeV & 57\% & 3.5\% & 1.5 \\  & 4.0GeV & 54\% & 3.4\% & 1.2 \\  & 4.5GeV & 51\% & 3.2\% & 1.0 \\ \hline
8x8 jet & 6GeV & 57\% & 3.5\% & 2.0 \\  & 6.5GeV & 55\% & 3.4\% & 1.6 \\  & 7GeV & 53\% & 3.3\% & 1.3 \\ \hline
8x8 jet & 4.0GeV & 57\% & 3.7\% & 1.8 \\ hadth\(>\)1000MeV & 4.5GeV & 55\% & 3.4\% & 1.5 \\  & 5.0GeV & 53\% & 3.4\% & 1.3 \\ \hline \end{tabular}
\end{table}
Table 3: Efficiencies and backgrounds for level2 selection with different RoI \(E_{T}\) thresholds and tower thresholds.

efficiency for the \(B\) hadron to be within the "RoI" for the RoI based and the muon-combined approaches. Since the muon-combined approach is a purely geometrical selection there is far less dependence on the \(p_{T}\) of the \(B\)-meson.

Table 4 shows the efficiency and background rates for the three different approaches. These results use athena release 11.0.5 as an updated version of IDSCAN was needed to run the full-scan. The results for the RoI based approach have improved slightly compared to those in table 3 due to improvements in IDSCAN.

Figure 15 shows the efficiency as a function of the \(p_{T}\) of the \(B\) meson for the 3 different cases. As expected the efficiency is higher in the full-scan scenario particularly for low \(p_{T}\)\(B\)-mesons.

### Timing measurements

Figure 16 shows the time taken by IDSCAN per ROI and per event for \(b\overline{b}\)\(\rightarrow\)\(\mu\)6X events. Table 5 shows the mean time taken by IDSCAN for \(b\overline{b}\)\(\rightarrow\)\(\mu\)6X events on a 2.4GHz machine. The times are

\begin{table}
\begin{tabular}{|l|c|c|} \hline approach & efficiency & background \\ \hline
4x4 jet (\(E_{T}>\)4GeV) & 60\% & 3.3\% \\ full scan & 68\% & 3.4\% \\ muon combined & 61\% & 3.4\% \\ \hline \end{tabular}
\end{table}
Table 4: Efficiencies and backgrounds for level2 selection

Figure 12: Efficiency versus background for different settings.

Figure 14: The efficiency for the \(B\)-meson to be within the “RoI” for a Jet RoI based approach (solid line) and for the muon-combine analysis (dashed line) as a function of a) \(p_{T}\) and b) \(\eta\) of the \(B\) meson

Figure 13: \(\Delta\eta\) versus \(\Delta\phi\) of \(B\) meson with respect to the LVL1 muon. The dashed lines shows the RoIs used by the muon-combined analysis.

shown for two different Jet RoI \(E_{T}\) thresholds. Times are shown per RoI and per event both for only those events containing RoIs and for all events. With the higher threshold there are both less RoIs per event and more events with no RoIs and hence both the time/event measurements decrease.

Most of the time is taken by the SpacePoint Reader (i.e. data preparation) and the TRT extrapolation as shown in table 6 which shows a breakdown of the time spent in different parts of IDSCAN for the two different JETROI \(E_{T}\) thresholds.

For a full scan of the inner detector IDSCAN takes about 160 ms per event. The breakdown of the timing in different parts of the algorithm is again shown in table 6. The full scan takes about 3-4 times as long as the RoI based approach. However, this is only comparing to the time for Jet RoIs, in addition there are EM and muon RoIs which will add to the time for an RoI based approach.

Figure 15: Efficiency to select event at LVL2 as a function of \(p_{T}\) of the \(B\) meson for the RoI (solid line), full scan (dashed line) and muon combined (dotted line) approaches. (the 100% efficiency observed at 4GeV is due to a single event.)

\begin{table}
\begin{tabular}{|l|c|c|c|c|} \hline RoI size & \(E_{T}\) threshold & time/ROI & time/event(with an RoI) & time/event (all events) \\ \hline
4x4 & 4GeV & 23 ms & 50 ms & 44 ms \\
4x4 & 5GeV & 25 ms & 46 ms & 31 ms \\ \hline \end{tabular}
\end{table}
Table 5: IDSCAN timing measurmenets for \(b\overline{b}\)\(\rightarrow\)\(\mu\)6X.

Figure 16: Time taken by IDSCAN for the Jet RoI analysis a) per RoI and b) per event for events with at least 1 RoI.

Conclusions

A detailed study has been made of the potential to use LVL1 RoI for \(B\)-physics triggers. A comparison has been made of the efficiency and mean RoI multiplicity as a function of cluster threshold, trigger tower threshold and Jet trigger window size. For Jet triggers, a window size of 4x4 is better in terms of efficiency and background than a 8x8 window. There is some indication that using a higher TT threshold of 1000 MeV compared to the default of 750MeV in conjunction with a lower cluster \(E_{T}\) threshold gives a better efficiency for the same background efficiency, particularly for \(B\) with \(p_{T}\) below 20 GeV. Since the TT thresholds affect the performance of all trigger algorithms we will need to examine the effect on the non-B part of the trigger menu when choosing the threshold values. It is encouraging that a broadly similar performance can be achieved using various possible settings. This means that in the case that it is not possible to run with the optimum settings, due to considerations from other triggers, the performance should not be too badly effected.

A comparison of several different B-trigger strategies for hadronic final states has been made using the \(B_{s}^{\circ}\)\(\rightarrow\)\(D_{s}^{-}\pi^{+}\) channel. The highest efficiency is obtained using track reconstruction in the full volume of the ID and is 68% for events with \(B\)-meson \(p_{T}>10\) GeV and the \(p_{T}\) of the final state tracks \(>1.5\) GeV. Performing track reconstruction only inside LVL1 Jet RoI gives an 8% lower efficiency, for a similar background efficiency, but the average execution time is only 31ms per event compared with 160ms for a full-scan. The loss of efficiency is predominantly for low \(p_{T}\)\(B\) which do not give rise to a LVL1 Jet RoI, i.e. with \(p_{T}\) below about 20 GeV. It should be noted that the time for the RoI based approach only includes reconstruction in Jet RoI. If ID reconstruction is also performed in EM RoI for final states including electrons or photons, this will add to the average execution time per event for the RoI based approach. An alternative strategy looking for tracks in regions in the same direction at the muon and in the opposite direction gives better efficiency for low pT \(B\), but overall gives similar results to the method based on Jet RoI.

In order to compare these times with the average LVL2 time budget of 10ms, we must take into account the fact that Track reconstruction (either in the Jet RoI or with the full-scan) will only be performed for events where the LVL1 muon has been confirmed at LVL2. This gives a effective reduction in the average execution time of a factor of about 4.5. Taking this into account, the mean execution time per event, triggered at LVL1, is 7ms for the RoI guided approach to which the time to confirm the muon must be added (about 6ms). This is approaching the the average LVL2 time budget of 10ms. For the full-scan the average time per event triggered at LVL1 is about 35 ms. This is compatible with use at lower rates, for example either at lower luminosities or by raising the LVL1 muon threshold.

## 7 Acknowledgements

We would like acknowledge the important contributions to this work from the ATLAS B-physics group, the TDAQ PESA group and the Calorimeter group. We would like to express especial thanks to Fabienne Ledroit for providing the detailed LVL1 emulation, upon which this study relies.

## References

* [1] M. Smizanska _ATLAS B Physics Reach_ ATLAS Scientific note: SN-ATLAS-2003-033.

- 9 Apr 2003. Available in CERN cds hep-ph/0307114.
* [3] B. Epp, V. Ghete, A. Watson, _A study of the use of Low ET calorimeter RoI in the ATLAS B-Trigger_. ATLAS note ATL-COM-DAQ-2003-036
* [4] E.F. Eisenhandler for the ATLAS LVL1 Calo Group _Level-1 Calorimeter Trigger Algorithms_ ATLAS note ATL-DAQ-2004-011
* [5] The ATLAS Collaboration _The Level-1 Trigger Technical Design Report_ CERN/LHCC/98-14
* [6] S. Viret, F. Ohlsson-Malef, M. Smizanska _Simulation of online selection for \(B^{\circ}_{d}\)\(\rightarrow\)\(K^{\circ*}\)\(\gamma\)and \(B^{\circ}_{s}\)\(\rightarrow\)\(\phi\gamma\)decays at ATLAS experiment_ ATLAS note ATL-PHYS-PUB-2005-006
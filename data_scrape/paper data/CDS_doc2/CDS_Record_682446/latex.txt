**ATLAS Internal Note**

**MUON-NO-080**

**4 April 1995**

**Noise Considerations for the**

**Atlas Muon Front-End Electronics**

February 23, 1995

Craig Blocker

Brandeis University

John Huth, John Oliver

Harvard University

**Abstract**

A simplified circuit model of the Atlas muon front-end electronics is studied to identify intrinsic noise sources and determine their effect. Two complementary approaches are used. First, when possible, analytic calculations are done. Second, a PSpice simulation of the circuit is used to calculate the noise levels. Several circuit options are studied in order to understand the effects on the noise of various design choices.

**I. Introduction**

The primary requirement on the Atlas muon system front-end electronics is accurate determination of the arrival times of pulses from muons. The spatial resolution required of the tubes in conjunction with the drift velocity of the gas leads to a demanding requirement on the timing resolution. In addition, considerations of rates, particularly from neutron and photon backgrounds, lead to the desire that the gas gain be moderate, giving smaller signals than might be desired.

The intrinsic noise will effect the timing resolution of the electronics, both because it alters the shape of signal and because it increases the threshold that must be set. By intrinsic noise, we mean noise due to thermal, shot noise, and 1/f noise effects in the components (particularly resistors and semiconductors) of the circuit. This sets a noise floor that may be augmented by other sources such as pickup of radiated signals by nearby circuits, power supply ripple, etc.

**II. Noise calculations**

In the case in which the Monitor Drift Tube's (MDT's) anode wire can be

considered an ideal, lossless transmission line, the contributions to the total noise due to

several major sources can be calculated in closed form. In particular, the contribution due

to the termination resistor can be written explicitly without a detailed model for the

transimpedance amplifier. Expressions can also be derived for the contributions due toboth the white and 1/f components of amplifier voltage noise arising in a generic transimpedance amplifier.

The first quantity of interest is the equivalent noise charge due to the termination resistor. Since the noise spectrum due to this component is broad band, the HV capacitors in series with both ends of the tube have little effect on the total noise, because they have an effect only at low frequencies. They will therefore be omitted from the calculation for simplicity. We have done the calculations including the HV capacitors and find that they change the results by only a few per cent for reasonable values of the capacitance.

One of the free parameters which we have at our disposal is the input impedance of the preamp which can be set by design. Its effect upon the collected charge is discussed in the following paragraphs. The equivalent circuit of the tube with preamp and terminator is shown in figure 1.

If a charge q is deposited on the wire, q/2 will travel to the left and be absorbed by the terminator. The other q/2 will travel to the preamp and be partially reflected by its input impedance. The reflection coefficient is given by,

\[\mathfrak{R}=\frac{R_{m}-Z_{0}}{R_{m}+Z_{0}}, \tag{1}\]

where \(R_{m}\) and \(Z_{0}\) are the input impedance (assumed to be real) and the tube's characteristic impedance respectively. In general, if \(R_{m}\) is smaller than \(Z_{0}\), the reflection coefficient will be negative indicating an inverted reflection. In order to conserve charge at the preamp node, the total charge absorbed by the preamp will be,

\[\mathcal{G}_{\mathit{preamp}}=\frac{\mathcal{G}}{2}(1-\mathfrak{R})=q\frac{Z_{ 0}}{Z_{0}+R_{m}}=q\gamma\,, \tag{2}\]

where we have defined a _preamp absorption factor_\(\gamma\) given by,

\[\gamma\equiv\frac{Z_{0}}{Z_{0}+R_{m}} \tag{3}\]

Figure 1: Circuit for determination of the charge collected by the preamp.

Note that for \(R_{\mbox{\tiny in}}\) confined to the range of zero to \(Z_{0}\), \(\gamma\) will take on values of 1 down to 1/2. In the special case where \(R_{\mbox{\tiny in}}\) is zero, the charge \(\frac{q}{2}\) incident at the preamp will be reflected into a charge \(-\frac{q}{2}\) traveling back down the wire resulting in a net absorbed preamp charge of \(q_{\mbox{\tiny preamp}}=q\). After receiving the inverted reflection, the net charge absorbed by the terminator will be zero. Similarly, if the preamp input impedance is chosen to be equal to the tube characteristic impedance, the total absorbed charge will be half of the incident charge on the tube. In the following analysis, we treat \(\gamma\)as a free parameter since, in practice, the preamplifier can be designed with whatever input impedance one chooses.

Termination Resistor Contribution

The equivalent circuit shown below (figure 2) is used to compute the equivalent noise charge due to the terminator.

The feedback resistor and capacitor combination determine the fall time at the preamp output in response to a delta function input. In addition, finite amplifier bandwidth and the effect of subsequent stages will always limit the risetime. A separate shaping pole is added artificially to take this into account as shown above. In the following, we make the simplifying, and frequently used, assumption that both risetime and falltime are equal so that the output pulse has the form,

\[\nu_{\mbox{\tiny out}}(t)=\sigma\gamma\frac{t}{\tau}e^{\frac{-t}{\tau}}, \tag{2.4}\]

where both rise and fall times are given by

\[\tau=C_{f}R_{f}. \tag{2.5}\]

We can expect \(\tau\) to be of order 10 ns for preamps used in typical drift chamber applications. Higher order shaping approaching gaussian can be used but will not greatly affect the noise calculation. Considering the absorption factor for the preamp, the transfer function for the terminator current noise source will be

Figure 2: Circuit for analytic determination of noise contribution of the termination resistor.

\[\mathcal{T}(s)=\gamma\frac{\dot{R_{{}_{f}}}}{\left(1+s\dot{R_{{}_{f}}}C_{{}_{f}} \right)^{2}}\,. \tag{6}\]

The rms output noise voltage can now be calculated by evaluating the integral,

\[V_{max}^{2}=\dot{i_{{}_{a}}}^{2}\int_{0}^{\infty}\left|\mathcal{T}(2\pi\dot{y }\gamma)\right|^{2}df\,, \tag{7}\]

where \(\dot{i_{{}_{a}}}\) is the terminator noise current density given by,

\[\dot{i_{{}_{a}}}=\sqrt{\frac{4\dot{k}\mathcal{T}}{R_{{}_{f}}}}\,. \tag{8}\]

By a change of variables this can be written as

\[V_{max}^{2}=\gamma^{2}\dot{i_{{}_{a}}}^{2}\frac{1}{4\pi}\frac{R_{{}_{f}}}{C_{{} _{f}}}\int_{-\infty}\frac{dx}{\left(1+x^{2}\right)^{2}}\,, \tag{9}\]

where the variable of integration has been changed to

\[x=\omega R_{{}_{f}}C_{{}_{f}}. \tag{10}\]

The fact that the integrand is an even function of x has been used to extend the range of integration to -\(\infty\) to \(\infty\) by dividing the result by 2. The final integral is easily evaluated by contour integration and is given by,

\[\int_{-\infty}^{\infty}\frac{dx}{\left(1+x^{2}\right)^{2}}=\frac{\pi}{2}\,, \tag{11}\]

which gives the final result for the rms output voltage:

\[V_{max}=\frac{\dot{\mathcal{H}_{{}_{a}}}}{2}\sqrt{\frac{4\dot{k}\mathcal{T}}{ R_{{}_{f}}}}\sqrt{\frac{R_{{}_{f}}}{2\,C_{{}_{f}}}}\,. \tag{12}\]

In order to obtain the equivalent noise charge, this voltage must be referred to the peak of a unit test impulse incident on the wire. From equation 4, this peak voltage is given by

\[V_{peak}=\frac{1}{C_{{}_{f}}}\cdot\gamma\cdot e^{-1}\,. \tag{13}\]

The equivalent noise charge due to the terminator is thus given by

\[\sigma_{{}_{t}}=e^{\dagger}\sqrt{\frac{\dot{k}\mathcal{T}}{2\,R_{{}_{f}}}\, \varepsilon_{peak}}\,, \tag{14}\]where e is the natural logarithm base (not the charge of the electron).

The factor \(\gamma\) has canceled out of this equation since the same preamp absorption factor affects both collection of signal charge and noise from the terminator. Thus, while low input impedance is desirable for maximal collection of charge, the signal to noise ratio due to terminating resistor is unaffected.

If we take a typical value of peaking time of \(\sim\)10 ns, equation 2.14 results in a noise contribution due to a \(360\Omega\) terminator of

\[\sigma_{t}=4000electrons\,. \tag{15}\]

It should be noted that since both \(R_{t}\) and \(\tau_{peak}\) are parameters specified in the MDT design, there are essentially no free parameters remaining in equation 2.14. The 4000 electrons which results becomes a noise floor below which we cannot get.

Amplifier noise contribution

The calculation of equivalent noise charge due to amplifier voltage noise is done for both white and 1/f components. This will be particularly useful as the results will serve as a guideline in choosing preamplifier designs and technology. If the results indicate tolerance to 1/f noise, then a wider choice of preamp technology will be available.

Since we are including 1/f noise, we must use a more complete model which includes the high voltage coupling capacitor to the preamp. This will be important since the 1/f components effect will be dependent on the value of this capacitor. The model shown below (figure 3) is used as the basis for the calculation.

It will be useful to assign some typical values to the components in this model. In the following we will assume the values \(360\Omega\) for the termination resistor and 1000 pf for the coupling capacitor. We will also assume a feedback resistor of 10k\(\Omega\) and a feedback capacitor of 1 pf giving a 10 ns time constant. The reason for doing this is that in evaluating the noise gain, other time constants such as tube impedance times feedback

Figure 3: Circuit for analytic determination of noise contribution of the preamp.

capacitor will appear. Having assigned these typical values allows us to know which time constants can be safely ignored. For example, the one arising from terminator and feedback capacitor is 360 ps and will in practice be too fast to be observed. Once these offscale time constants have been neglected, the formulas will, for all practical purposes, retain their full generality.

The noise gain of this circuit, giving the output noise density divided by the amplifier input referred voltage noise density is given by the well known formula

\[G(s)=\frac{A(s)}{1+\beta(s)A(s)}, \tag{16}\]

where \(\beta(s)\) is the feedback factor and \(A(s)\) is the open loop gain. Since we are treating the input impedance as a design parameter, this puts a constraint on the amplifier's open loop response \(A(s)\), which must be chosen to produce the desired input impedance through the relation

\[Z_{in}=\frac{Z_{f}}{1+A(s)}. \tag{17}\]

If we apply the constraint in equation 17 to the noise gain formula, we can obtain an expression for the noise gain in terms of circuit component values. The resulting formula is messy and not very illuminating. It can, however, be factored and its negligible terms can be discarded. Doing so yields the result

\[G(s)=\gamma\frac{1+sR_{f}C_{e}}{(1+sR_{f}C_{f})(1+sR_{f}C_{e})}. \tag{18}\]

It will be useful in later approximations to have the relative values of the relevant time constants in the above expression, that is

\[R_{f}C_{f} \approx 10ns\] \[R_{C}C_{e} \approx 360ns \tag{19}\] \[R_{f}C_{e} \approx 10\mu s.\]

The voltage noise density as a function of frequency is taken to be

\[e_{n}^{2}(f)=e_{0}^{2}+\frac{B}{f}. \tag{20}\]

The noise can now be evaluated by performing the integrations in the expression

\[V_{rms}^{2}=\int_{0}^{\infty}\left|\frac{G(2\gamma\dot{f}/\gamma)}{\left(1+2 \pi\dot{f}/\dot{\tau}_{peak}\right)}\right|^{2}\left(e_{0}^{2}+\frac{B}{f} \right)df \tag{21}\]

and using the approximate expression for G(s), namely equation 18. This will be done separately for the white and the 1/f parts.

As in the terminator noise calculation, the value of the coupling capacitor is irrelevant for calculating the white noise contribution. Equation 2.18 can be further simplified in this case by looking at the limit as the coupling capacitor becomes arbitrarily large giving,

\[G(s)=\gamma\frac{1}{\left(1+sR_{r}C_{r}\right)}\frac{R_{r}}{R_{r}}. \tag{2.22}\]

Thus the white noise term is obtained by evaluating the following expression:

\[V_{mn}^{2}=\gamma^{2}\frac{\epsilon_{0}^{2}}{4\pi}\frac{R_{r}^{2}}{R_{r}^{2}} \left[\int_{-\infty}^{-\infty}\frac{d\omega}{\left(1+\omega^{2}\left(R_{r} \cdot C_{r}\right)^{2}\right)^{2}}\right. \tag{2.23}\]

The integral in the above expression is of the same form as the one appearing in the expression for the noise due to the terminating resistor and is given by equation 2.11. The resulting expression for the equivalent noise charge is

\[\sigma_{white}=e^{\gamma}\sqrt{\frac{kT}{2R_{r}}\tau_{post}}\sqrt{\frac{R_{r}} {R_{r}}}, \tag{2.24}\]

where \(R_{N}\), the amplifier equivalent noise resistance, has been defined by

\[R_{N}\equiv\frac{\epsilon_{N}^{2}}{4kT}. \tag{2.25}\]

The equivalent noise charge due to the amplifier white noise only differs from the one for the terminator noise, equation 2.14, by the final square root of the ratio of amplifier noise resistance to terminator resistance. As long as this noise resistance is less than approximately one third of the termination resistance, its effect will be small. Thus, a noise resistance of order \(100\Omega\) to \(150\Omega\) will be acceptable.

The following plot (figure 4) shows the total noise from both the terminator and amplifier white noise plotted as a function of amplifier noise resistance. The results of a SPICE simulation are also shown and agree with the calculation.

[MISSING_PAGE_FAIL:8]

authors for several rad-hard CMOS processes. We will take a pessimistic value of \(3\cdot 10^{-24}\) Joules, which has been measured[1] for pfets using the Harris rad-hard process. Many other processes have measured values considerably lower than this. We assume the following parameters:

\[W=5000\mu\] \[L=2\mu\] \[C_{ox}=1.5/\emph{tempofarafas}/\mu^{2}.\]

Plugging these values and our typical values of circuit components into equation 2.26 gives a 1/f noise contribution of 260 electrons. Since this value is negligible in comparison with the terminator noise, it is of no further concern. We are therefore free to choose from available processes without regard to their 1/f contribution so long as their flicker noise coefficients are not outrageous.

## III Effect of Wire Resistance

The sense wires proposed for the Atlas muon chambers are tungsten-rhenium, which have a resistance of approximately 30\(\Omega\)/m assuming 50\(\mu\) wire diameter. This series resistance affects the noise calculations in two ways: (1) it modifies the characteristic impedance and propagation properties of the transmission line formed by the muon tube and (2) the series resistance is itself a thermal noise source.

The characteristic impedance of a lossy transmission line is

\[Z_{0}=\sqrt{\frac{(R+j\omega L)}{(G+j\omega C)}}\,, \tag{2.28}\]

where R is the resistance per unit length, L is the inductance per unit length, G is the leakage conductance per unit length, and C is the capacitance per unit length. For the Atlas muon tubes, G is zero, and L and C are given by standard formulas for coaxial transmission lines.

If R is zero, Z0 is given by the familiar \(\sqrt{L/C}\), which is real (hence resistive) and independent of frequency. If R is nonzero, the characteristic impedance becomes quite complicated. In the high frequency limit (\(\omega>>R/L\)), the characteristic impedance can be approximated as

\[Z_{0}=\sqrt{\frac{L}{C}}+\frac{R}{2j\omega\sqrt{LC}}\,, \tag{2.29}\]

which is the impedance of a resistor \(\sqrt{L/C}\) in series with a capacitor \(2\sqrt{LC}/R\). For the geometry of the muon tubes and a resistive wire of R = 30\(\Omega\)/m, this capacitance is 230pF. Since a high voltage capacitor in series with the termination resistor is necessary anyway, it is worthwhile considering making this capacitor 230pF, which would minimize high frequency reflections. However, this will significantly increase the undershoot of the tail of the pulse, which is not desirable.

The propagation factor for a transmission line is

\[\Gamma=\sqrt{(R+j\omega L)(G+j\omega C)}\,, \tag{2.30}\]

If R and G are zero, this reduces to \(j\omega\sqrt{LC}\). Since this is purely imaginary and linear in the frequency, waves propagate without attenuation and without dispersion. If R is nonzero, \(\Gamma\) is a complicated complex number with frequency dependent real and imaginary parts. The high frequency limit is

\[\Gamma\simeq j\omega\sqrt{LC}+\frac{R}{2}\sqrt{\frac{C}{L}}\,, \tag{2.31}\]

Thus, at high frequencies \(\Gamma\) has a real part that causes attenuation of signals. The attenuation length (\(2\sqrt{L\,/\,C}\,/\,R\)) is approximately 24 meters for the geometry of the Atlas muon tubes with \(30\Omega\)/m wire. This length is somewhat larger than the longest muon tubes, but not so large that attenuation can be totally neglected.

Since the version of PSpice used for this note did not have true lossy transmission lines, the lossy transmission line was modeled by dividing the transmission line into seven equal lines with a total length of 6 meters. Between each pair of transmission lines, a \(30\Omega\) series resistor was inserted. It was checked that the results are insensitive to the number of parts the transmission line is divided into, as long as the delay times and series resistor are scaled properly. It was also checked that similar results are obtained by a lumped model consisting of LRC sections chosen appropriately.

The following circuit was modeled in PSpice:

\[\begin{array}{c}\includegraphics[width=142.26378pt, width=142.26378pt]{Fig5.eps}\\ \end{array}\]

The circuit is a series of ideal transmission lines with characteristic impedance of \(360\Omega\).

The total length of the transmissions lines is 6 meters. The series resistors R were varied from zero to \(30\Omega\), corresponding to wire resistances from zero to \(30\Omega\)/m.

(10)

Figure 5: PSpice model of lossy transmission line.

Figure 6 below shows the current pulse out of the transmission line (R=30\(\Omega\)) for various injection points along the line of the same pulse shape. As expected for high frequencies, the pulse shape is the same (that is, there is little dispersion), but the arrival time increases and the pulse height decreases the further to the left that the pulse is injected. The attenuation of the pulse height is consistent the predicted attenuation length of 24m.

Figure 6. Output pulse shape for current pulses injected at intervals along the transmission line.

The noise output of the circuit was determined from PSpice for several values of the series resistance. For this study, the noise due to the preamp (\(\mathrm{e_{n}}\)) was set to zero. The input impedance of the preamp was small (1\(\Omega\))

The noise contribution of the termination resistor can be calculated analytically by (1) considering it to be a noise source, (2) writing equations for the correct standing waves on the lossy transmission line, and (3) satisfying the appropriate boundary conditions at the ends of the line. This leads to an expression for the noise spectrum that is unwieldy and not very illuminating, and hence will not be given here. This spectrum is plotted along with the PSpice simulation results in figure 7. There is good agreement.

The noise contribution of the series resistance can be calculated in a similar manner. A small section of the transmission line a distance x from the end is treated as a series resistor of value R dx connected between two lossy transmission lines (figure 8). As for the termination resistor calculation, R dx is treated as a noise source, the proper standing waves are setup on the transmission lines, and the boundary conditions at the ends are satisfied. The current out of the line is calculated to first order in dx and then integrated over x to obtain the total contribution. Again, the expression for the noise spectrum is complicated and not very enlightening. It is plotted in figure 9 below, along with the PSpice simulation, showing good agreement.

(12)

Figure 8: Circuit for analytic determination of noise contribution of the series resistance of the wire.

Figure 7: Noise spectrum due to termination resistor for a series resistance of 30\(\Omega\)/m.

[MISSING_PAGE_EMPTY:13]

## 4 Implications of Noise Figures

The noise performance of the circuit has implications for several aspects of the muon system. First, the gas gain must be sufficiently high that the contribution of the noise doesn't contribute significantly to the timing (and hence spatial) resolution. Secondly, it is desirable that the preamp not be the dominant noise source. This impacts considerations of which chip production processes are acceptable.

It is desired that we be able to set thresholds at the equivalent of a few drift electrons without being swamped by noise. Since the rms noise is equivalent to about 4000 electrons after the avalanche, the effective gas gain (defined as the number of electrons collected at the wire in the relevant time divided by the number of drift electrons) must be a few times \(10^{4}\). A study of the exact relationship between the threshold level, the noise level, the false signal rate, and the timing resolution is underway and will be reported in a future note.

Since the dominant noise source is the termination resistor, the only way to reduce the requirement on the gas gain is to reduce its noise contribution. One solution might be to use "cool" termination, that is, an opamp with capacitive feedback to give the proper resistive input impedance at the desired frequencies. This is probably prohibitively expensive for 400,000 channels. A second option would be to eliminate the termination resistor and set the input impedance of the preamp to the characteristic impedance of the muon tubes. This would mean that the reflections from the far end of the tube would also be seen by the preamp. This would probably not affect timing of the leading edge of the signal, but would probably make tail cancellation difficult (affecting two track resolution) and make "last electron timing" impossible. Furthermore, the input impedance of the preamp depends on properties of the preamp that may want to be determined by other considerations or may be difficult to control accurately.

Figure 10: Equivalent noise charge (ENC) from the termination resistor, the series resistor, and their sum as a function of the series resistance. The lines are the calculation and the open symbols are the PSpice results.

In order that the preamp not dominate the intrinsic noise, its equivalent white noise resistance must be less than around \(150\Omega\) and its 1/f contribution to the equivalent noise charge must be less than around a thousand electrons. These are not extremely tight requirements and allow considerable flexibility in the choice of ASIC processes:

## 5 Summary and Conclusions

We have investigated the intrinsic noise floor for a simplified circuit of the Atlas muon tubes and preamp. For reasonable preamp noise levels, the noise is dominated by the termination resistor and is equivalent to a signal of about 4000 electrons created at the wire. These results are determined by both PSpice simulations and analytic calculations, with excellent agreement.

The high voltage blocking capacitor has only a small effect (5-10%) on the noise levels due to the termination resistor, feedback resistor, and white noise of the preamp. The blocking capacitor does substantially reduce the contribution of the 1/f noise from the preamp.

The series resistance of the muon tube wire also has a small effect on the total noise level due to a couple of cancelling contributions. The primary consideration due to the series resistance is that signals are attenuated with an attenuation length of 24 meters for a 50 \(\mu\) anode wire.

In order to set thresholds equivalent to a few drift electrons, the effective gas gain must be a few times \(10^{4}\). Further studies are underway to understand the effect of noise levels, signal levels, and thresholds on the timing resolution. The noise requirements on the preamp are modest, indicating that ASIC processes that are not inherently very low noise may be considered.

## References

* [1] "Analytical and Experimental Studies of Thermal Noise in MOSFETs," Tedja, van der Speigel, and Williams (to be published IEEE Trans Electron Devices).
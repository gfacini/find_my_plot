Optimisation of the size of the EmTau Region of Interest for the ATLAS Level-2 Trigger using the Electromagnetic Calorimeter

N. Konstantinidis, S. Stefanidis, M.R. Sutton

University College London

###### Abstract

A study for optimizing the size of the EmTau Region of Interest (RoI) using the pointing information from the Electromagnetic Calorimeter is presented. The benefits from the reduced RoI size in terms of timing and performance for tracking using the IDSCAN package at the LVL2 Trigger are discussed in details.

## 1 Introduction

The ATLAS trigger chain is implemented as a three level system and is faced with the challenge of reducing the rate of interesting events from the 40MHz bunch crossing rate to approximately 200Hz. The concept of the _Region of Interest (RoI)_ plays a crucial role - it defines a geometrical area in which the LVL1 trigger identified some activity of potential further interest. At the LVL2 trigger stage, only the data within the RoIs in the event are transfered from the readout buffers (ROBs) to the LVL2 processors, to reduce CPU and network usage [1]. Each event can have more than one RoI, depending on the event topology. There are between 1-2 RoIs per LVL1 accepted event and each RoI represents a few percent of a complete event data volume [2]. As a result the dimensions of the RoI are of major importance, having a direct impact on the network data volume and CPU processing resources required to handle the event, and therefore to the effectiveness of the LVL2 trigger.

There are several types of RoI, including electromagnetic, muonic and jet RoIs. The study presented in this note refers only to the electromagnetic RoIs, which include \(e/\gamma\) and \(\tau\) objects, and so are referred to as EmTau RoIs. Information from the EmTau RoI comes only from the calorimeter in the form of an isolated electromagnetic cluster. No Muon detector information is included.

This note is organised as follows: in Section 2 we describe the shape and size of the currently used EmTau RoI and we focus on a prescription for redefining the shape and size of the RoI in the \((\eta,\phi)\) space, after the LVL2 calorimeter trigger. In Section 3 we describe the Monte Carlo data sets used and the event selection. Performance results, using data both at high and low luminosity, are presented in Section 4. Finally, Section 5 summarises and discusses possible further improvements that could be implemented.

The shape of the Region of Interest

### The current RoI

Processing of an EmTau RoI at LVL2 starts from the calorimeter. The LVL2Calo code [3, 4, 5, 6] has access to the \(\eta_{\rm LVL1}\) and \(\phi_{\rm LVL1}\) information from the calorimeter at the full calorimeter granularity. Using this information, LVL2Calo determines with better precision than the LVL1 processing the position of the RoI and passes it on to the LVL2 tracking.

The currently implemented shape of the EmTau RoI used by the LVL2 tracking algorithms is described in Fig.1. It has dimensions \((\Delta\eta\times\Delta\phi)=(0.2\times 0.2)\) and it is extended near the beam line by \(\Delta z=16.8\) cm to take account of the spread in the position of the interaction vertex along the beam direction. This extension corresponds to \(\pm 3\) standard deviations of the vertex distribution width.

### An improved RoI

In this study we propose, using the information from the different samplings of the electromagnetic calorimeter [7, 8], to obtain an estimate of the \(z\)-position of the primary interaction to allow the reduction of the size of the RoI in \(\eta\). This is illustrated in Figure 2. Because of the improved estimate of the vertex position, the required window in \(z\) need not cover the entire interaction region. In addition, allowing the opening of the window in pseudorapidity to be independent at either end, i.e. allowing \(\eta_{F}\) and \(\eta_{B}\) to be independent, allows the trapezoid search window in the \(\rho-z\) plane to be closed at the calorimeter face using the resolution of the track position at the face, since this is likely to be better known than the extrapolated vertex position. However, for this study, we use \(\eta_{F}=\eta_{B}=\eta\).

Since tracks of interest are most likely to come from near the beamline, we retain the simple \(\phi_{0}-\Delta\phi<\phi<\phi_{0}+\Delta\phi\) window used in the current RoI definition. However, we also study the degree of bending of tracks in \(\phi\) due to the magnetic field, in order to choose an optimal value for the \(\phi\) opening of the RoI.

Figure 1: Construction of the RoI in the \(\rho-z\) plane at LVL2 trigger level.

### The reduction of the RoI in the \(\rho-z\) plane

The reduction of the RoI in the \(\rho-z\) plane relies on effectively estimating the \(z\) position of the primary interaction vertex using the first and second samplings of the LAr calorimeter.

Since the trajectory of a high transverse momentum charged particle is approximately linear in the \(\rho-z\) plane, the \(z\) position of the primary vertex, \(Z_{\rm vertex}\), can be estimated by simple linear extrapolation, given the \((\rho,z)\) coordinates from the two samplings of the calorimeter. This is illustrated in Figure 3. For a cluster in the barrel calorimeter, the \(\rho_{1,2}\) are known, while the \(z_{1,2}\) can be calculated from the equation:

\[\frac{z}{\rho}=\sinh\eta \tag{1}\]

where the index refers to 1st or 2nd sampling and the \(\eta\) is calculated with respect to the origin of the detector. For a cluster in the calorimeter endcap, the \(z_{1,2}\) are known and the

Figure 3: Definition of the quantities given in eq.1 and eq.2.

Figure 2: Proposed improvement of the RoI in the \(\rho-z\) plane at LVL2 trigger level.

\(\rho_{1,2}\) are calculated from equation 1. The primary vertex position can then be calculated from the coordinates of the two points using:

\[Z_{\rm vertex}=\frac{z_{1}\rho_{2}-z_{2}\rho_{1}}{\rho_{2}-\rho_{1}}. \tag{2}\]

Although the barrel (endcap) coordinates \(\rho_{1,2}\) (\(z_{1,2}\)) are in principle known by the geometry of the LAr calorimeter, there is some ambiguity as to which values to actually use, i.e. the position on entrance to the sampling, the geometrical centre, the outermost point of each sampling, or some parametrisation of the mean of the shower depth within the calorimeter. These different options were studied and the best resolution for \(Z_{\rm vertex}\) was achieved using the outermost point of the samplings. This is plotted in Figure 4. The analytical equations of the parametrisation functions used are given in Appendix A.

After this calculation, we have an estimation of the vertex position in \(z\) making use only of the calorimeter information. The RoI can then be extended along the \(z\)-axis by some extent depending on the \(Z_{\rm vertex}\) resolution, parameterised as a function of \(\eta\). The window used throughout this study is \(\pm 3\sigma\) of the \(Z_{\rm vertex}\) resolution.

### The crack region in the LAr Calorimeter

Whether the cluster is in the barrel or the endcap of the calorimeter, either the \(\rho\) or the \(z\) coordinate is known from the geometry, with the other coordinate being calculated from the cluster position, as discussed above. However, in addition, there are cases where the energy of the cluster is deposited in both the calorimeter barrel and endcap. The majority of such "transition region" events can be treated as barrel events, since most of their energy is deposited in the barrel. Events where more than 90% of the energy is in the barrel (endcap) are treated as barrel (endcap) events. Studies showed that when the energy is split more evenly between barrel and endcap, the determination of \(Z_{\rm vertex}\) is unreliable, so the reduction of the RoI size in \(\eta\) is not applied to these events. The number of events in each category are shown in table 1.

Figure 4: The maximum radius of the 1st and 2nd barrel samplings (left) and the maximum z of the 1st and 2nd end-cap samplings (right).

## 3 Dataset and event selection

The subsequent study was performed using single electron Monte Carlo generated with \(p_{T}=20\) GeV at low luminosity (\(\mathcal{L}=10^{32}cm^{-2}sec^{-1}\)), and a sample of single electrons generated at \(p_{T}=30\) GeV at high luminosity (\(\mathcal{L}=10^{34}cm^{-2}sec^{-1}\)). The events were then reconstructed using the 9.0.4 ATLAS Offline software release. For the reconstruction inside the calorimeter during the LVL2 trigger, the T2Calo package was used. For each event, the number of RoIs, the clusters reconstructed by T2Calo (online clusters) together with the clusters reconstructed by the offline calorimeter package (offline clusters) were used.

Since the modified RoI description is intended for use online during the trigger chain, the online clusters are appropriate. However, for release 9.0.4 the LVL2 clusters were missing important corrections, since this information had not been required before. The difference between the offline and LVL2 clusters can be seen in Figure 5. The figure shows the difference in pseudorapidity between the first and second sam

\begin{table}
\begin{tabular}{|l|c|c|} \hline  & Low Luminosity & High Luminosity \\ \hline Events Processed & 4,720 & 9,647 \\ Barrel Events & 2,650 (56.1\%) & 5,164 (53.5\%) \\ Endcap Events & 1,870 (39.6\%) & 3,751 (38.9 \%) \\ Transition Events & 200 (4.2\%) & 732 (7.6\%) \\ \(\eta\) reduction wasnâ€™t applied & 92 (1.9\%) & 441 (4.6\%) \\ \hline \end{tabular}
\end{table}
Table 1: Event Statistics for optimising the RoI size.

Figure 5: Eta difference between sampling 1 and sampling 2 for the online and offline barrel clusters (up) and end-cap clusters (down).

online clusters. In the case of the barrel clusters, the shape of the distributions is the same. The offline analysis uses a more sophisticated algorithm for the cluster reconstruction, therefore the offline distribution is narrower than the online distribution. This is not the case for the endcap clusters - the distribution using the online clusters appears to have two peaks, symmetric about zero. Since the work to implement the necessary corrections to the LVL2 clusters is still underway, for this study we have concentrated on the using the offline clusters. This is appropriate, since the calorimeter information available to the LVL2 algorithms is at the full granularity, so that after application of the appropriate corrections, the reconstructed cluster information should be very close to that reconstructed using offline algorithms.

However, since the offline clusters have access to the full event data, rather than being seeded by a LVL1 RoI, there is not a one-to-one correspondence between clusters and RoIs and hence some matching has to be performed. To avoid uncertainties and complications due to this matching, events were considered only when there was a single offline and LVL2 cluster within a distance of \(\Delta R=\sqrt{\Delta\eta^{2}+\Delta\phi^{2}}<0.15\) from the true electron position. Finally, in order to avoid mismatching, clusters with \(E_{T}<15\) GeV at low luminosity and with \(E_{T}<20\) GeV at high luminosity were also excluded. Table 2 gives the overall statistics for both low and high luminosity samples.

## 4 Implementation and results

In order to evaluate the effectiveness of the proposed method and determine the optimal values for the different parameters (for example of the \(\Delta\phi\) window), the LVL2 tracking package IDSCAN was used. The architecture and performance of IDSCAN are described elsewhere [9, 10]. Using three-dimensional space points from the Pixel and the SCT detectors, IDSCAN starts by finding the vertex of the primary interaction and uses this to reconstruct tracks in the Inner Detector. This first step is performed using the ZFinder algorithm [11].

For comparison purposes, IDSCAN was seeded first with the space points contained in the original RoI as defined in Section 2. The RoI was subsequently defined in \(\eta\) and \(\phi\) according to the prescription described above and IDSCAN was executed over the same events, seeded this time with the space points contained in the reduced RoI. The performance was evaluated each time in terms of the efficiency for determining the vertex of the primary interaction, where correct determination was defined to be when:

\[|Z_{\rm vertex}\,-\,Z_{\rm true}|\leq 2\,{\rm mm}\]

\begin{table}
\begin{tabular}{|l|c|c|} \hline  & Low Luminosity & High Luminosity \\ \hline Reconstructed Events & 5,000 & 10,000 \\ Reconstructed RoIs & 5,067 & 10,806 \\ Events with 1 RoI (cluster) inside cone & 4,949 (98\%) & 9,845 (91\%) \\ Events with well reconstructed cluster & 4,720 (93\%) & 9,647 (89\%) \\ \hline \end{tabular}
\end{table}
Table 2: Event Statistics for the Low and High Luminosity data samples.

### The \(Z_{\rm vertex}\) resolution and reduction of RoI extent in \(z\)

In order to open a window around the \(z\) position which is calculated using the calorimeter, it is first necessary to know the resolution with which \(Z_{\rm vertex}\) can be determined. This is shown in Fig.6 as a function of the absolute value of the \(\eta\) of the cluster for both low and high luminosity events. The absolute value of \(\eta\) is used here to increase the statistical significance, since the distribution was seen to be symmetric in \(\eta\). Both the dependence of the resolution for the high and low luminosity samples are similar indicating that the resolution is not significantly influenced by the additional \(pp\) "pile up" interactions in the bunch crossing and the different electron transverse momenta.

For the very central region, the resolution is of the order of 25 mm, rising to approximately 80 mm in the forward region. The resolution is worse for \(\eta\) approximately in the range 1.4-1.6, which includes the transition region. The data were fitted using a second order polynomial with the parametrised form:

\[\sigma=7.16\cdot|\eta|^{2}+8.72\cdot|\eta|+24.84\quad({\rm mm}),\]

Although a symmetric function is really desired to reflect the symmetry of the detector and the observed variation of the resolution, the small difference with respect to this around \(|\eta|\sim 0\) is of minor significance since the spread of the resolution at any \(|\eta|\) itself is large, and variations in the calorimeter granularity might cause differences from the smooth functional form if greater statistics were available.

### The \(\phi\) resolution and reduction of RoI extent in \(\phi\)

The residuals in \(\phi\) of the true electron position with respect to the calorimeter cluster position are shown in Figure 7 for both low and high luminosity events with no corrections for bremsstrahlung and no extrapolation from the calorimeter back to beam axis. The

Figure 6: Calorimeter pointing resolution as a function of \(\eta\), fitted with a parabola.

different \(p_{T}\) of the electrons in the two samples is responsible for the difference in the overall shift of the peaks - the higher momentum of the high luminosity sample meaning the track is bent less in the magnetic field.

The degree of curvature in \(\phi\) is additionally different for particles in the barrel and the endcap regions due to the weaker magnetic field towards the endcaps [12]. It is worth noting that the form of the \(\phi\) residual has contributions from several sources. Although the position of the peak would be in principle calculable from the bending of the track in the magnetic field, the position will also be smeared by the calorimeter resolution in \(\phi\) and smeared to larger \(|\Delta\phi|\) by bremsstrahlung and energy loss as the track travels through the material of the detector. For this reason, optimising the \(\phi\) window of the RoI merits a study, where the effects of both calorimeter resolution and bremsstrahlung are correctly simulated.

Since for electrons with \(p_{T}>20\) GeV the \(|\Delta\phi|\) residual is always less than 0.04 rad it is clear that the \(\pm 0.1\) rad window in \(\phi\) used until now is too large for these RoIs. Although this would not naively be expected to affect the efficiency, if all the hits are included within the RoI, the large extent of the RoI means that a significant number of pile-up hits at large \(\Delta\phi\), not associated with the electron will be included in the pattern recognition stage of the

Figure 7: The \(\phi\) resolution of the electromagnetic clusters in the barrel region (top) and in the end-cap region (bottom) for low and high luminosity.

algorithm. This will increase the number of unwanted, incorrect combinations that have to be considered, and so increase the time consumption of the algorithm, and increase the possibility of an incorrect assignment being made, so reducing the efficiency.

In order to find the optimal size in \(\phi\) for each region of the calorimeter, and for each data set, we applied different windows around the reconstructed \(\phi\) position of the cluster, and studying the effect on the \(Z_{\rm vertex}\) efficiency of the IDSCAN ZFinder.

The results are illustrated in Figure 8. As the \(\Delta\phi\) window increases from 0, more of the space points from the tracks are included so that as we move through the maximum, the efficiency approaches 50%. As we move out from the peak to include the entire distribution within the window, the efficiency reaches a maximum. Further increasing the window, allows more and more background space points to be included, but with no additional space points from the tracks themselves, so increasing the chance of an error in the pattern recognition and the efficiency falls.

In our case, the positions of the maxima in the residuals lie at different \(\Delta\phi\) for the high and luminosity samples, so the position of the maxima on the efficiency curves are different - for example, for the barrel samples the maxima lie near 0.03 rad for the high luminosity sample and 0.04 rad for the low luminosity sample.

Of course, during real data taking conditions, the trigger would have to deal with the full spectrum of electron momentum, and as such, the window size would be dependent on the lower threshold of \(p_{T}\) of electrons that were required to pass the trigger. As such,

Figure 8: Effect of the \(\phi\) window around the cluster on the ZFinder efficiency for low (open squares) and high (solid squares) luminosity events.

a common window of \(\Delta\phi=\pm 0.04\) rad around \(\phi_{\rm cluster}\) should therefore be sufficient for electrons with \(p_{T}>20\) GeV and this has been applied for the results presented here.

In contrast to the reduction in the \(\rho-z\) plane, the reduction in \(\phi\) was also applied to electrons in the calorimeter transition region as well as those in the barrel and endcap regions.

### Efficiency of the ZFinder

The efficiency for reconstructing the correct primary vertex as a function of \(|\eta|\) for both high and low luminosity is given in Figure 9. Figure 10 and Table 3 summarise the efficiencies for each of the barrel, endcap and transition regions of the detector as well as the overall efficiency. It can be seen that the efficiency achieved using the new reduced RoI is higher than that obtained using the original RoI description. Since the ZFinder is a combinatorial algorithm, reducing the size of the RoI leads to fewer combinations of random background space points. This means the likelihood of obtaining an incorrect combination of hits is reduced, while that for finding a correct combination should remain unchanged. For exactly this reason, the observed improvement is larger with the high luminosity events (6%) than the low luminosity case (1.3%).

### Timing

The design of the ZFinder algorithm means that the executing time it is found to scale almost linearly with the number of space points in the RoI so that a reduction in the size of the RoI would be expected to lead to an improvement, not only in the transfer time of the data, but also in the execution time of the algorithm itself.

For this study, the execution time of the ZFinder was measured using a 2.4 GHz Pentium-IV processor. Table 4 shows the results for execution time of the ZFinder obtained using both the original and the reduced RoI definitions for both high and low luminosity samples. The mean execution time is reduced by \(\sim\)28% in low luminosity RoIs and by \(\sim\)58% in high luminosity RoIs.

In the same table, the number of space points contained in the reduced RoI is also shown and is almost a factor four smaller compared to the original RoI at high luminosity, which directly reflects the actual reduction of the RoI size. At high luminosity, the number of space points from the true electron is essentially negligible compared to the total so the execution time is dependent purely on the data volume.

\begin{table}
\begin{tabular}{|c|c|c||c|c|} \hline  & \multicolumn{2}{|c|}{_Low Luminosity_} & \multicolumn{2}{|c|}{_High Luminosity_} \\ \cline{2-5}  & **Original RoI** & **Reduced RoI** & **Original RoI** & **Reduced RoI** \\ \hline \hline
**Barrel** & 96.11 \(\pm\) 0.38 & 97.36 \(\pm\) 0.31 & 90.12 \(\pm\) 0.42 & 96.69 \(\pm\) 0.25 \\ \hline
**Transition** & 95.00 \(\pm\) 1.54 & 94.50 \(\pm\) 1.61 & 92.62 \(\pm\) 0.97 & 95.63 \(\pm\) 0.76 \\ \hline
**End-cap** & 93.96 \(\pm\) 0.55 & 95.35 \(\pm\) 0.49 & 88.24 \(\pm\) 0.53 & 92.59 \(\pm\) 0.43 \\ \hline \hline
**Overall** & 95.21 \(\pm\) 0.31 & 96.44 \(\pm\) 0.27 & 89.58 \(\pm\) 0.31 & 95.01 \(\pm\) 0.22 \\ \hline \end{tabular}
\end{table}
Table 3: ZFinder efficiencies.

Figure 9: ZFinder efficiencies as a function of \(|\eta|\) for low (up) and high (down) luminosity using the original RoI (solid markers) and the reduced RoI (open markers).

Figure 10: ZFinder efficiencies for the barrel, transition and end-cap regions of the detector for low (up) and high (down) luminosity using the original RoI (solid markers) and the reduced RoI (open markers). The overall efficiency is also given at the right of the graphs.

This result is particularly important, because the average execution time for LVL2 tracking is dominated by the data preparation, i.e. the unpacking of the Pixel/SCT byte-stream, the clustering and the space point formation. Therefore, a significant improvement in the overall execution time is expected when the whole LVL2 tracking chain is performed inside only this reduced RoI. Moreover, this will also reduce the amount of data required to be transfered from the Readout Buffers to the LVL2 processors, hence reducing the overall network traffic with the DAQ system.

## 5 Conclusions and prospects

This study has shown that the performance of the LVL2 tracking can improved significantly both in terms of increased efficiency and in reduced latency, by using an optimized description of the size of RoI. To achieve this, it is necessary to use all the information available from the LVL2 calorimeter reconstruction. Work to implement the calculations necessary to obtain this information for LVL2 clusters is currently underway. Also currently underway, is work to introduce the proposed RoI shape into the RegionSelector, so that it can be properly integrated in the LVL2 trigger software chain.

In order to exploit the full potential of the proposed improvement, it would be interesting to test it using a broader \(p_{T}\) spectrum. Since the electrons used here have essentially the minimum \(p_{T}\) currently required in every trigger menu, the improvements obtained using a full spectrum of momenta might be expected to be the similar or even better.

Several improvements might still be envisaged, such as better treatment of the transition region, further optimisation of the \(\rho\) and \(z\) position of the calorimeter samplings in the barrel and endcap regions respectively and closing of the RoI to account for the resolution of the the cluster position on the face of the calorimeter while going outwards towards the cluster. All these enhancements might be expected to allow further improvements to the performance of the LVL2 tracking, although the bulk of the improvement is achieved with the work presented here.

\begin{table}
\begin{tabular}{|l|c|c||c|c|} \hline  & \multicolumn{2}{c|}{_Low Luminosity_} & \multicolumn{2}{c|}{_High Luminosity_} \\ \cline{2-5}  & **ZFinder mean** & **Mean number** & **ZFinder mean** & **Mean number** \\  & **execution time** & **of space points** & **execution time** & **of space points** \\ \hline \hline
**Original RoI** & 0.32 ms & 43.06 & 0.81 ms & 156.2 \\ \hline
**Reduced RoI** & 0.23 ms & 18.12 & 0.34 ms & 44.07 \\ \hline \hline
**\% difference** & -28.13\% & -57.92\% & -58.02\% & -71.79\% \\ \hline \end{tabular}
\end{table}
Table 4: Improvement on ZFinder mean execution time and on the mean number of space points.

## References

* [1] S.Armstrong _et al._: _Architecture of the ATLAS High Level Trigger Event Selection Software_. Nuclear Instruments and Methods in Physics Research A 518 (2004) 537-541.
* [2] The ATLAS Collaboration: _ATLAS High-Level Trigger Data Acquisition and Controls_. CERN/LHCC/2003-22, ATLAS TDR 16, (2003).
* [3] M.P.Casao, S.Gonzalez, T.Shears: _TrigT2Calo package: [http://atlas-sw.cern.ch/cgi-bin/cvsweb.cgi/offline/Trigger/TrigAlgorithms/TrigT2Calo/_](http://atlas-sw.cern.ch/cgi-bin/cvsweb.cgi/offline/Trigger/TrigAlgorithms/TrigT2Calo/_)
* [4] S.Gonzalez, T.Hansl-Kozanecka, M.Wielers: _Selection of high-\(p_{T}\) electromagnetic clusters by the Second Level Trigger of ATLAS_. ATL-DAQ-2000-002, (2000).
* [5] S.Gonzalez, B.Gonzalez Pineiro, T.Shears: _First Implementation of Calorimeter FEX Algorithms in the LVL2 Reference Software_. ATL-DAQ-2000-020, (2000).
* [6] S.Gonzalez, T.Shears: _Further Studies and Optimization of the Level-2 trigger electron/photon FEX algorithm_. ATL-DAQ-2000-042, (2000).
* [7] The ATLAS Collaboration: _ATLAS Calorimeter Performance_. CERN/LHCC/96-40, ATLAS TDR 1, (1996).
* [8] The ATLAS Collaboration: _ATLAS Liquid Argon Colorimeter Technical Design Report_. CERN/LHCC/96-41, ATLAS TDR 2, (1996).
* [9] N. Konstantinidis, H. Drevermann: _Determination of the z position of primary interactions in ATLAS_. ATLAS-SOFT-2002-007, (2002)
* [10] N. Konstantinidis, H. Drevermann _Algorithms to select space points of tracks from single primary interactions in ATLAS_. ATLAS-COM-DAQ-003-040, (2003).
* [11] J. Baines, H. Drevermann, D. Emeliyanov, N. Konstantinidis, F. Parodi, C. Schiavi, M. Sutton: _Fast tracking in hadron collider experiments_. ATL-DAQ-CONF-2005-001, (2005)
* [12] The ATLAS Collaboration: _ATLAS Detector and Physics Performance Technical Design Report_. CERN/LHCC/99-14, ATLAS TDR 14, (1999).

## Appendix A: Parametrisation equations for the 1st and 2nd EM Samplings.

### Barrel.

**Maximum position of the 1st barrel sampling.**

\[R_{1}(\textit{mm})=\left\{\begin{array}{ll}1586&,\text{if }|\eta|\leq 0.27\\ 1599.6-46.8|\eta|&,\text{if }0.27<|\eta|\leq 0.6\\ 1570.7&,\text{if }0.6<|\eta|\leq 0.8\\ 1545.3&,\text{if }0.8<|\eta|\leq 1.0\\ 1548.2&,\text{if }1.0<|\eta|\leq 1.15\\ 1629.5-72.0|\eta|&,\text{if }1.15<|\eta|\leq 1.35\\ 1532.3&,\text{if }|\eta|>1.35\end{array}\right.\]

**Maximum position of the 2nd barrel sampling.**

\[R_{2}(\textit{mm})=\left\{\begin{array}{ll}1927.2&,\text{if }|\eta|\leq 0.5\\ 2031.8-238.4|\eta|&,\text{if }0.5<|\eta|\leq 0.8\\ 1759.2&,\text{if }0.8<|\eta|\leq 1.0\\ 2164.1-295.1|\eta|&,\text{if }1.0<|\eta|\leq 1.5\\ 1719.6&,\text{if }|\eta|>1.5\end{array}\right.\]

### Endcap.

**Maximum position of the 1st endcap sampling.**

\[Z_{1}(\textit{mm})=\left\{\begin{array}{ll}3782.0&,\text{if }|\eta|\leq 1.7\\ 3778.4+2.3|\eta|&,\text{if }1.7<|\eta|\leq 2.1\\ 3776.3+3.4|\eta|&,\text{if }2.1<|\eta|\leq 2.27\\ 3833.3-30.9|\eta|&,\text{if }|\eta|>2.27\end{array}\right.\]

**Maximum position of the 2nd endcap sampling.**

\[Z_{2}(\textit{mm})=\left\{\begin{array}{ll}4289.3-100.4|\eta|&,\text{if }|\eta|\leq 2.2 \\ 4448.1-179.2|\eta|&,\text{if }|\eta|>2.2\end{array}\right.\]
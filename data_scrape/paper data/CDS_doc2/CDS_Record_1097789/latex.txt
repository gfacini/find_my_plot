# First Report of the Simulation Optimization Group

A. Rimoldi\({}^{1}\), T. Carli\({}^{2}\), A. Dell'Acqua\({}^{2}\), D. Froidevaux\({}^{2}\), F. Gianotti\({}^{2}\), C. Guyot\({}^{3}\),

I. Hinchliffe\({}^{4}\), K. Jakobs\({}^{5}\), Z. Marshall\({}^{6,7}\), A. Nisati\({}^{8}\), D. Quarrie\({}^{4}\), G. Unal\({}^{2}\), C. Young\({}^{9}\)

\({}^{1}\)_INFN Pavia and Universita di Pavia, Dipartimento di Fisica Nucleare e Teorica,_

_Via Bassi 6, IT-27100 Pavia, Italy_

\({}^{2}\)_CERN, CH - 1211 Geneva 23, Switzerland_

\({}^{3}\)_CEA, DSM/DAPNIA, Centre d'Etudes de Saclay, FR - 91191 Gif-sur-Yvette, France_

\({}^{4}\)_Lawrence Berkeley National Laboratory and University of California, Physics Division,_

_MS50B-6227, 1 Cyclotron Road, Berkeley, CA 94720, United States of America_

\({}^{5}\)_Physikalisches Institut, Universitaet Freiburg, Hermann-Herder Str. 3,_

_D - 79104 Freiburg i.Br., Germany_

\({}^{6}\)_Columbia University, Nevis Laboratory, 136 So. Broadway, Irvington,_

_NY 10533, United States of America_

\({}^{7}\)_California Institute of Technology, Physics Department, Pasadena, CA 91125, USA_

\({}^{8}\)_INFN Roma I and Universita La Sapienza, Dipartimento di Fisica, Piazzale A. Moro 2,_

_IT-00185 Roma, Italy_

\({}^{9}\)_Stanford Linear Accelerator Center, 2575 Sand Hill Road, Menlo Park, CA 94025, USA_

###### Abstract

This is the first report of the ATLAS Simulation Optimization Group, established in June of 2007. This note justifies the selected Geant4 version, physics list, and range cuts to be used by the default ATLAS simulation for initial data taking and beyond. The current status of several projects, including detector description, simulation validation, studies of additional Geant4 parameters, and cavern background, are reported.

Introduction

The Simulation Optimization Group was set up by the TOB in June of 2007 to optimize the Geant4-based simulation [1] for ATLAS in terms of physics content and technical performance, to recommend a baseline Geant4 release and set of parameters, and to address long-term validation and strategy issues. The group has met every two to four weeks since, collecting input from and helping to coordinate the efforts of the relevant detector, performance, and physics groups.

The group has carried out studies of range cuts in the subdetectors and the physics lists to be used. It has also established the Geant4 version to be used for Athena release 14 [2]. These decisions relied heavily on comparisons to test beam data [3].

The Simulation Strategy Group, using these parameters as input, will produce a document plotting the course for simulation production in 2008.

## 2 Geant4 Version

It is necessary to ensure that the ATLAS simulation is stable and well validated by the time data collection begins later this year. While with each new release, the Geant4 team introduces new features that can be exploited by the ATLAS simulation either for enhanced agreement with data or for improved detector descriptions, each new release must be validated completely, first in a computing sense and then in a physics sense. The decision has been made to continue to use Geant4.8.3 through first data taking, with transition to Geant4.9 in late 2008 to allow sufficient time for validation of the new version prior to production.

The transition to Geant4.8 was made between Athena releases 12 and 13. Four versions of Geant4.8 have been used since, with the validation process occasionally catching errors or problems with the newer release. The Geant4 team extensively tests each minor release before providing it to the public, but in a system as complicated as ATLAS, rare bugs may be discovered in untested regimes. The version currently in use is Geant4.8.3 official patch 1. An official patch 2 for Geant4.8.3 was recently produced by the Geant4 team, including several bug fixes and a few features requested by ATLAS (e.g. support for new solid shapes). The official patch 2 will be adopted in the next minor release, Athena 14.1.0, in order to complete or improve the description of several muon spectrometer volumes and to fix a rare bug in particle transportation.

Because the Geant4 team is facing its own manpower shortage, ATLAS has decided not to formally request continued back-porting of new features to Geant4.8.3. Bug fixes that are easily back-ported may be requested.

Since its first release in 2007, the simulation group has been testing candidate and patched versions of Geant4.9 to gauge its readiness for insertion into a production release. New features are tested, and frequently formal requests were made to back-port a fix or feature to Geant4.8.

Geant4.9.1 includes several new features that are interesting to ATLAS:

* New parallel navigation abilities. Users can construct volumes and regions in a parallel world and count hits and fluxes through the new volumes rather than in the "real world" volumes. This ability is particularly useful for cosmic ray and cavern background studies, since they wish to save only particles passing through or into specific regions of the detector.
* Improved support for the description of certain types of volumes, especially boundary represented solids and extruded solids. Particularly in the inner detector and muon systems, the detector description could be improved by using these new shapes.

* Additional options for steppers, including geometric step length limitation and error propagation. These features could be useful for the testing of steppers that is ongoing, however the average user would likely not see a difference.
* Several new physics lists and updates to older lists, e.g. the inclusion of pions in the binary cascade models. Several of these lists show promising agreement with data and require Geant4.9 in ATLAS simulation production in order to do complete testing.
* Updated data sets for neutron cross-sections, low energy (\(\sim\)MeV) electromagnetic physics, and radioactive decay. Most of these changes should be transparent.

A migration nightly and various test releases will continue to be used for testing Geant4.9 and any new patches and ensuring its stability. Little physics validation will be done with this release before it is moved into production, because of a lack of manpower and because it was judged too confusing and thus unsafe to keep multiple Geant4 versions in the production system. Several groups wishing to test new features may use a newer version of Geant4 for their studies, but this testing comes with the understanding that unless a new critical problem is discovered, the experiment's default for at least most of 2008 will be Geant4.8.3. Since testing may continue with Geant4.9, no significant physics penalty is expected from this choice.

Test beam studies have been the major uses of new versions of Geant4 in test builds with AtlasSimulation. The most recent Athena release in which the combined test beam can be run is 12.0.95, and test versions have been built with Geant4.9.1. It is crucial to the calorimetry group that the calorimeter test beam be maintained in future releases, however the inner detector and muon groups have dropped support for their part of the combined test beam in release 13. The Simulation Optimization group helped organize a decision to complete all combined test beam studies in 12.0.95 and continue with only the calorimeter test beam in release 13 and beyond, if possible. Unfortunately, since the Geant4 collaboration has ceased support for SLC3 and Athena release 12.0.95 was only validated in SLC3, any future test builds of AtlasSimulation against new Geant4 releases will not be validated in a computing sense. The key parts of the test beam code will have to be kept up to date in Athena for tests to continue.

## 3 Physics Lists

Physics lists in Geant4 are sets of interaction models applied in a certain energy range for each particle type. Since many interactions are approximated by parameterizations, and since several different parameterizations might exist for any single process, many physics lists exist with different combinations of the available models. Many lists are tuned for particular applications: some for medical applications, some for space science, and some for high energy physics. Most physics models in Geant4 are only effective and accurate within a limited energy range. The selection of physics list and the processes that the selected list includes can dramatically affect agreement with data and computing performance. It is not necessarily the case that the list that agrees best with data will have the worst computing performance.

Physics lists are provided by the Geant4 team. Only lists provided in a Geant4 release are used for testing to improve reproducibility and reduce sources of error.

### Multiple Coulomb Scattering

In Geant4.8, a new multiple Coulomb scattering (MCS) model was made available. This new model allows multiple scattering to limit the length of a particle's transportation process, improving agreement with data near volume boundaries. The inner detector group reported improved agreement with data with either the step-limiting multiple scattering or a limit on the length of the steps allowed in the detector. With the new MCS model there was no longer any need for the step limitation.

As shown in Figure 1, in the SCT the average number of clusters and average number of space points are both considerably more stable against range cuts (described more in Section 4) when the new MCS model is used. This stability makes comparison between data and Monte Carlo more straightforward, since one fewer parameter of the simulation can be changed to alter the output.

Cosmic ray simulation in the pixel detector also shows some improvement when using the new physics list. Cluster location resolution was previously stable only with step limitation under approximately 100 \(\mu\)m when using the old MCS model. Cluster size was even better described by the new MCS model than the step-limited old MCS model. Figure 2 shows a comparison of the non-step limited MCS, non-step-limiting MCS with an force step limitation, and the step-limiting MCS.

The liquid argon calorimeter group reported relative changes in sampling fraction between 3% and 35% with the new physics list, as shown in Table 1. There was also a slight narrowing of energy resolution (e.g. a 7% narrowing for photons in the central portion of the electromagnetic barrel calorimeter), in better agreement with the data. Moreover, with this MCS model the ratio of the electron energy response to the muon energy response is in better agreement with data. The computing time overhead associated with the change is a factor of 1.5 in typical physics events.

This step-limiting MCS is the default in most Geant4 physics lists; when it is turned off the list is usually labeled an "Electromagnetic Variant" (EMV).

\begin{table}
\begin{tabular}{l c c c}
**Subdetector** & **QGSP\_EMV SF** & **QGSP\_BERT SF** & **Ratio** \\ Electromagnetic Barrel Calorimeter & 0.189 & 0.170 & 0.90 \\ Hadronic Endcap Calorimeter Wheel 1 & 0.0436 & 0.0447 & 1.03 \\ Hadronic Endcap Calorimeter Wheel 2 & 0.0218 & 0.0224 & 1.03 \\ Forward Calorimeter Module 1 & 0.0137 & 0.0159 & 1.16 \\ Forward Calorimeter Module 2 & 0.00854 & 0.0114 & 1.34 \\ Forward Calorimeter Module 3 & 0.0111 & 0.0141 & 1.27 \\ \end{tabular}
\end{table}
Table 1: Sampling fractions (SF) in the liquid argon calorimeters for the QGSP_EMV and QGSP_BERT physics lists.

Figure 1: Left, variation in average number of clusters, and right, variation in average number of spacial points, with range cuts in the SCT. The new MCS provides a much more stable description of the detector compared to the old MCS model, even when step limitation of 10 \(\mu\)m is applied to the old MCS.

### Bertini Cascade Model

Several people involved in calorimeter test beam analyses have also studied proton and charged pion showers in the calorimetry to find the physics list with best agreement with data [3]. In their studies, they found that including the Bertini intranuclear cascade model improved agreement with the test beam data. Particularly in the calorimeters, both the average number of neutrons per event and the distance of propagation for a typical neutron increase with the Bertini model. Hadronic showers became longer and wider with the Bertini model in the hadronic endcap and tile calorimeter, in better agreement with data. Several of the better-described lateral shower shape variables are particularly important for particle identification. After convolving energy deposits with the hadronic endcap calorimeter's signal time structure and adding Birk's law, agreement with data was improved dramatically. However, by comparing results with Bertini to physics lists including high-precision neutron physics models, it is clear that too much out-of-time energy is still deposited. The difference should have no impact on physics performance. The computing time penalty of adding the cascade is a factor of 1.5 in typical physics events.

The Bertini cascade model describes the response in the barrel and endcap calorimeters to within a few percent. The longitudinal shower shape is described to within 5-10%, and the radial shower extent is generally well-described. Figure 3 shows the ratio of energy deposited in the tile calorimeter's sensitive detector volumes in Monte Carlo to that in test beam data and the RMS of the same distribution as a function of test beam energy. Figure 4(a) shows the longitudinal shower shape for 180 GeV pions as a function of depth in the tile calorimeter, in interaction lengths. In the tile calorimeter test beam setup, three modules were stacked vertically, with the test beam entering the center module. Figure 4(b) shows the ratio of energy deposited in the top module to that deposited in the middle module, which is one measure of lateral shower spread. In each case, the addition of the Bertini cascade model improves agreement with data.

The Bertini cascade also gives results similar to those of FLUKA, another stand-alone simulation package [4], in the tile calorimeter. Various improvements in the cascade are being considered by Geant4 developers.

Figure 2: Cluster size in cosmic events in the pixel detector. Left, a comparison of the non-step-limiting MCS model (“old default”) and the non-step-limiting MCS model with a forced step limitation (“step limitation”) to data. The data are better described with a step limitation. Right, a comparison of the non-step-limiting MCS model with a forced step limitation (“QGSP_EMV”) and the step-limiting MCS model (“QGSP_BERT”) to data. The agreement is improved with the step-limiting MCS model.

### Physics Lists Selection

Three physics lists were studied in the full ATLAS detector, each based on the quark-gluon string pre-compound (QGSP) model: QGSP_EMV, a list without the Bertini shower model - only the QGSP standard hadronic physics package - and with non-step-limiting multiple scattering, QGSP_BERT_EMV, a list with the same electromagnetic physics package but including the Bertini model in the hadronic physics package, and QGSP_BERT, a list including both the Bertini model in the hadronic physics package and step-limiting multiple scattering.

Jet resolution and response were studied prior to selecting a physics list. A small shift in the jet \(p_{T}\) spectrum towards slightly higher \(p_{T}\) can be seen in the QGSP_BERT physics list relative to QGSP_EMV. A \(\sim 3\%\) change in relative jet response before calibration was observed in the central region (\(|\eta|<1.0\)) of the calorimeter over a large range in \(p_{T}\), and smaller differences were observed at higher \(\eta\). Jet energy resolutions were not appreciably different in either physics list. Approximately 15% more muon fakes were found in high energy di-jet events when the physics list included Bertini, owing to the longer shower shape and additional high energy jets punching through the calorimeters. Although the test beam studies were only done with single pions and protons, it is assumed that because agreement with single-particle data has improved using the QGSP_BERT physics list that the changes in jet response and resolution are an improvement as well.

After some optimization of range cuts and Geant4 parameters, as discussed in later sections, the time penalty of the QGSP_BERT physics list is a factor of \(\sim 1.9\). Table 2 shows the time increases in various physics channels for QGSP_EMV, QGSP_BERT without any optimization, and QGSP_BERT after some optimization has been done. The main contributors to the time reduction are a 150 ns neutron cut, a change in range cuts in the liquid argon calorimeters, and the removal of step limitation in the inner detector.

In addition to the computing time differences, the HIT output files are gener

Figure 3: Deposited pion shower energy in the ATLAS test beam. Left, the ratio of energy deposited in sensitive detector regions in Monte Carlo to that in test beam data as a function of test beam energy. The average energy deposited by pion showers is increased with the Bertini cascade model, in better agreement with data. Right, the RMS of the same distribution shows improved agreement with data when the Bertini cascade model is included. “G483” refers to Geant4 version 8.3.

physics lists. The QGSP_BERT_EMV model's HIT files are 30% larger than the files generated with QGSP_EMV, and the QGSP_BERT model's HIT files are 75% larger. First studies show that this increase in disk space required is a direct consequence of the energy deposits of the additional neutrons generated by the Bertini cascade and the additional number of steps required by the step-limiting MCS. By eliminating the additional neutrons with a time cut and relaxing calorimeter range cuts (see Section 4), the file size increase is almost completely alleviated. The majority of the increase takes place in containers corresponding to the liquid argon calorimeters. Further optimization to reduce the disk consumption of HIT files is underway for several subsystems.

Raw Data Object (RDO) files are also somewhat larger, however their size increase is entirely due to larger containers from the HIT files that are additionally stored in the RDO files. No RDO containers increase appreciably in size.

Although not all shower variables are perfectly described even after the addition of the Bertini model and new multiple scattering, the QGSP_BERT list was selected for its agreement with data, even at the cost of a factor of 2 in computing time.

### Future Prospects

Several other varieties of physics lists are available in Geant4.9, including alternatives to the QGSP model. These new options were compared to the test beam data, and none was found to be in sufficiently good agreement with data to justify an early transition to Geant4.9. High precision neutron physics lists include a more accurate theoretical description of neutron physics, but they have been shown to give similar performance in calorimeter observables. Since the computing time penalty for the lists is unacceptably high, they are not considered as an alternative. The Fritiof fragmentation and binary cascade models show some improvements in describing some observables, but their overall performance is not better than QGSP_BERT. No single physics list has been found to reproduce all observables in all detectors, but these lists may be revisited once data have been collected with the full detector.

Figure 4: Pion shower shape in the ATLAS tile calorimeter test beam. Left, the ratio of energy deposited in sensitive detector volumes in Monte Carlo to that in test beam data as a function of depth in the calorimeter, in interaction lengths. The length of the shower is increased with the Bertini cascade model, in better agreement with data. Right, the width of the shower is increased with the Bertini cascade model, in better agreement with data. For the test beam, three calorimeter modules were stacked, with the beam entering the middle module. Shower width is measured as the ratio of the energy deposited in the top module to that deposited in the middle module.

## 4 Range Cuts

Range cuts are parameters in Geant4 that affect the energy at which a secondary electron, positron, or photon can be produced in the detector by ionization or bremsstrahlung processes. Below the energy cut off, rather than producing a photon or electron that separately propagates through the detector, the energy is deposited in a single spot at the location of the interaction. These range cuts are separately set for photons, electrons, and positrons, though in ATLAS the three always have the same value. Cuts can be set by subdetector or subdetector volume, and are set as a distance which is translated into an energy for each material. Computing time can be reduced by using longer range cuts. Detector response is most sensitive to these range cuts when particles approach material boundaries.

With the introduction of the step-limiting multiple scattering in the QGSP_BERT physics list, detector response and sampling fraction are considerably more stable against range cuts than they had previously been. The change allows a relaxing of range cuts and a recovery of some of the additional computing time used by the new physics list. The Geant4 group suggests that, with this step-limiting MCS, range cuts be on the order of the thickness of the thinnest subdetector volume.

In most ATLAS volumes, the Geant4 default of 1 mm is used for the range cuts. In the inner detector, 50 \(\mu\)m cuts are applied only to the sensitive regions: the silicon of the pixel detector and SCT and the gas of the TRT. These cuts were found to have an effect on the spread of energy resulting from a minimally ionizing particle passing through the sensitive region. A study of cuts in dead material, particularly those materials close to sensitive volumes, is underway, but will not be complete before data collection begins.

In all the liquid argon calorimeters, 30 \(\mu\)m cuts were applied while the old physics lists, QGSP_EMV, was used. Because a great deal of the total computing time is spent simulating particles in the calorimetry, it may be possible to save a significant amount of time in simulation by relaxing these cuts as much as the physics allows. Since QGSP_BERT has been adopted, these cuts were studied again and were relaxed in the barrel and endcap electromagnetic calorimeters to 100 \(\mu\)m and to 1 mm in the hadronic end cap calorimeter. As shown in Figure 5, there is little change in either resolution or average energy deposition when varying the range cuts with the QGSP_BERT physics list. It is still necessary to examine the effect in the forward calorimeter. The thinnest materials are about 250 \(\mu\)m in the forward calorimeter, so it may be possible to set the cuts several times higher.

In the muon system, 50 \(\mu\)m range cuts are only applied to the thin aluminum walls of the drift tubes.

It may be possible to considerably relax range cuts in dead material and absorber volumes, for example forward shielding or the ATLAS feet. The Geant4 group suggests no range cuts longer than 10 cm.

\begin{table}
\begin{tabular}{l r r r r r}
**Sample** & **QGSP\_EMV** & **QGSP\_BERT** & **Ratio** & **Opt QGSP\_BERT** & **Ratio** \\ J2 QCD Di-jet & 368 & 882 & 2.40 & 707 & 1.92 \\ H(130) to \(4\ell\) & 417 & 913 & 2.19 & 735 & 1.76 \\ Minimum Bias & 157 & 377 & 2.40 & 301 & 1.91 \\ SU3 SUSY & 632 & 1443 & 2.28 & 1161 & 1.84 \\ \(Z\rightarrow\mu^{+}\mu^{-}\) & 308 & 711 & 2.31 & 585 & 1.90 \\ \(Z\rightarrow\e^{+}e^{-}\) & 376 & 859 & 2.28 & 722 & 1.92 \\ \(Z\rightarrow\tau^{+}\tau^{-}\) & 356 & 804 & 2.26 & 641 & 1.80 \\ \end{tabular}
\end{table}
Table 2: Times per physics event for the previous default physics list, QGSP_EMV, the QGSP_BERT physics list using the same parameters (range cuts, step limitation, neutron time cut), and the QGSP_BERT physics list after some optimization. A 150 ns neutron time cut was included in the optimized QGSP_BERT runs. All times are averaged over 200 events and are reported as user time on an lxbatch machine with \(cpuf=2.45\).

Several studies of possible cuts and their effects on timing have been done by the core simulation group, however the validation is still in progress in the subdetector groups. These studies will not be completed before first data taking.

## 5 Additional Geant4 Parameters

An examination of several other Geant4 parameters has been undertaken, and some show considerable promise for speeding up the simulation without adversely affecting output.

### Thermal Neutrons

Particularly in the new physics list, thermal neutrons contribute significantly to the total simulation time. Geant4 includes a method for ceasing their simulation after a certain time has passed. By reducing this time cut from the default value of 10 \(\mu\)s to 200 ns, the CPU time for simulation was reduced by almost 15% in tests with Athena release 13.0.30 (Geant4.8.3). The calorimeter read out times are all under 150 ns, so there should be no affect on observables. These cuts are being studied for their effect on physics by the calorimeter performance group.

The disk space problem that was introduced by the inclusion of the Bertini cascade model seems to be completely alleviated by introducing a 150 ns neutron time cut. In preliminary tests, HIT and RDO files created with the QGSP_BERT physics list were reduced to approximately the same size on disk as they were for the QGSP_EMV physics list.

Because of the need to conserve disk space, a neutron cut will be validated and included in simulation prior to first data taking.

### Neutrinos

In release 14 of Athena, which uses Geant4.8.3, neutrinos are no longer simulated in the ATLAS detector. Because of the several thousand steps required to exit the simulated volume, these neutrinos were contributing a noticeable fraction of simulation time.

In order to carefully gauge the amount of energy lost to deposits in dead material, the calorimeter performance group counts all missing energy in the detector due to neutrinos. Some of their code was modified to correctly account for the missing energy of the neutrinos before they are removed.

Figure 5: Left, variation in average deposited energy, and right, variation in energy resolution with range cut value, in the electromagnetic barrel calorimeter with the QGSP_BERT physics list.

### Steppers and Parameters

A stepper in Geant4 is the code for calculating the next position of a charged particle in a magnetic field. Such steppers numerically solve the ordinary differential equation for motion, limiting the errors on the calculation based on parameters provided by the user. Currently the stepping parameters used by ATLAS are the Geant4 defaults in the calorimetry and muon systems and approximately ten times tighter parameters in the inner detector. No step is allowed to cross more than one material, and the error on the step is in fact a bias that accumulates as the particle crosses more volume boundaries.

Because ATLAS uses a magnetic field map for its complex field, considerable computing time can be saved by using a stepper with lower order than the default provided by Geant4. The default stepper is a fourth order Runge Kutta; by using a second order Runge Kutta stepper instead (called "SimpleRunge"), simulation time can be reduced by 10-15%.

Because of the steppers' bias, muons can collect a significant (several mm) offset over the course of the \(\sim 1200\) steps required to pass through the calorimeter. The muon group has studied the effect of tightening the stepping parameters on single muon simulation time and accumulated bias, and the results are promising. Unfortunately, while a method exists in Geant4.8 for controlling these parameters by particle type, ATLAS has only recently begun tests with it. The effect of limiting all particles as much as muons may require creates an inhibitive increase in simulation time. The Geant4 method will be developed further to help ATLAS solve this stepping problem.

The Geant4 method that allows tightening of stepping parameters by particle may also allow other changes in stepping procedures. Various procedures are being tested, including turning off the magnetic field for some particles in the calorimeters, changing stepper by particle type, and changing steppers or parameters by region. Although more complicated approaches can reduce the computing time required, they also produce greater difficulties in validation and the potential for introducing many kinds of problems along the way. A simple method that is slightly slower may be preferable to a very complicated method in the end.

In the coming months these parameters and their effects will be studied in detail. A recommendation for the standard simulation will follow these dedicated studies in late 2008.

## 6 Detector Description

In order to ensure agreement between simulation and data, a detailed and accurate description of the ATLAS detector must be implemented. The description must include reasonable descriptions of dead material and material in crack regions if missing energy, efficiencies, and particle identification are to be accurately modeled.

The Simulation Optimization Group collected reports from the subdetector groups on the status of geometry description over the last several months. Generally, complete and accurate models exist for detector subsystems, but several specific areas need additional work. Dead material in the cracks between the calorimeters near \(\eta=1.4\) has been completed in recent months, and dead material in the inner detector is now stabilizing after having increased considerably for the last several geometry versions. The liquid argon calorimeters have been split recently into different volumes in positive and negative pseudorapidity regions. The separation allows differences to be introduced to improve agreement once data collection begins. It is already known, for example, that the sampling fractions in the two forward calorimeters differ by several percent because of differences in absorber manufacturing.

The muon system description is not yet complete but will be much improved in Athena release 14.2.0. Detector volume overlaps, which can cause problems for particle transportation in Geant4, are still an issue, and will be fixed in an upcoming release. There is still an incomplete description of dead material in the geometry database.

In release 14, a detector description of LUCID, one of the ATLAS luminosity monitors, is available to users for the first time. Because LUCID covers high pseudorapidity regions, it will not be included in the simulation by default - doing so would slow simulation by a factor of four or so. Some dedicated simulation runs may be undertaken with release 14 to understand how to simulate the detector with as little penalty to the standard simulation time as possible.

## 7 Validation

The Simulation Optimization Group also helped to undertake a review of the simulation validation process with the Simulation Strategy Group. With every release a standard set of simulation jobs are run and the results are made public [5]. Studies are also done for new versions of Geant4 when they are available, and for various options within the simulation including physics lists and cuts. These runs are judged solely on computing time - no hit output or detector information is recorded. For physics validation, the subdetector or performance groups are asked to assist.

The Simulation Strategy Group evaluated the number of events used in each channel to ensure that the comparison from release to release was not dramatically affected by errors owing to the physical differences in events or the statistics of the sample. The number of events used was settled at 300 events for simple single-particle samples and 200 events for high energy single-particle or physics samples. The list of channels used for these tests was judged sufficient for the task.

## 8 Ongoing Studies

The group has asked for reports to examine the progress of several other groups. Cavern background and pile up groups are making substantial progress, and both plan additional work on overlaying data from the real detector onto simulated signal events. Background and radiation calculation studies have already been undertaken and will be continued both with Geant4 and with FLUKA.

The group intends to pursue improvements in the geometry, in particular to provide an overlap free geometry. Some effort has already been put into comparing the simulated geometry to the as-built detector geometry, for example by calculating weights of the simulated volumes and comparing them to their real counterparts. Work will continue on performance improvements, including alterations of the tracking in a magnetic field. The magnetic field group will shortly provide a new high-precision magnetic field map that will need validation, and the parameters of the steppers used by Geant4 may be changed in order to optimize the computing time of the simulation.

The treatment of out-of-time energy deposits due to non-relativistic particles will be examined and may need to be updated in some of the detectors. Although, in the busy environment of the LHC, it may be difficult to recognize particles arriving late in the detectors, some study should be done to understand the magnitude of the problem.

The simulation code itself will be cleaned up in the new Athena release. Obsolete fragments will be removed to help reduce confusion. Eventually the simulation group may undertake an infrastructure upgrade, and the Simulation Optimization Group will help with any coordination needed, in particular with the subdetector and validation groups.

The Monte Carlo generator group will assist with studies of the generator implementations in order to ensure that all the event generators used by ATLAS are well validated.

Finally, the group will review all simulation parameters, including range cuts, particle cuts, physics lists, and steppers to be used, in order to validate not just the individual changes but the parameters as a set. Although any single change may not introduce a visible effect, several could conspire to create a problem in agreement with data.

Summary and Conclusions

In the eight months since its inception, the ATLAS Simulation Optimization Group has collected input from subdetector groups and performance groups on a variety of subjects. It has selected version of Geant4 and a physics list and is finalizing a set of range cuts for the experiment's default Geant4 simulation. It has helped to study the computing validation of the simulation. The various subdetectors have also given reports on their progress in finalizing their geometry and dead material descriptions.

New studies of remaining Geant4 parameters including neutron cuts and steppers are foreseen for the immediate future. The group will continue to monitor the status of the cavern background, pile up, and forward detectors to ensure that they are completely integrated into the standard simulation.

## 10 Acknowledgements

The authors would like to thank all the various people and groups that contributed either studies or expertise for the Simulation Optimization Group, particularly L. Dell'Asta for completing studies of range cuts and physics lists in the pixel system and M. Simonyan for updating the test beam studies in ATL-TILECAL-PUB-2007-008 for understanding differences in showering models in the tile calorimeter.

## References

* [1] J. Allison et al., IEEE Transactions on Nuclear Science **53** (2006) 270-278.
* [2] Athena Core Software, see [http://atlas-computing.web.cern.ch/atlas-computing/packages/athenaCore/athenaCore.php](http://atlas-computing.web.cern.ch/atlas-computing/packages/athenaCore/athenaCore.php).
* [3] T. Carli, H. Hakobyan, A. Henriques-Correia, M. Simonyan, ATL-TILECAL-PUB-2007-008 (2007), and notes in preparation.
* [4] A. Fasso', A. Ferrari, S. Roesler, P.R. Sala, G. Battistoni, F. Cerutti, E. Gadioli, M.V. Garzelli, F. Ballarini, A. Ottolenghi, A. Empl and J. Ranft, The physics models of FLUKA: status and recent developments, Computing in High Energy and Nuclear Physics 2003 Conference (CHEP2003), La Jolla, CA, USA, March 24-28, 2003, (paper MOMT005), eConf C0303241 (2003), arXiv:hep-ph/0306267.
* [5] Results from Validation of the Atlas Geant4 Simulation: [http://atlas-computing.web.cern.ch/atlas-computing/packages/simulation/geant4/validation/Validation.html](http://atlas-computing.web.cern.ch/atlas-computing/packages/simulation/geant4/validation/Validation.html).
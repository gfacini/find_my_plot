# Simulation of the TRT System Rate Response and Occupancy

F. C. Luehring, G. G. Hanson, H. O. Ogren, D. R. Rust

January 13, 1995

###### Abstract

Computer simulation studies of the rates and occupancies of the ATLAS Transition Radiation Tracking detector have been carried out for the "Panel Design" of the ATLAS inner detector using the ATLAS simulation package DICE. At the LHC design luminosity of \(1.0\times 10^{34}\) cm\({}^{-2}\)s\({}^{-1}\), the total rate of charged particles crossing the straws was found to range from 15 MHz (inner) to 4 MHz (outer) in the barrel TRT, to be 5 MHz in the shorter TRT disks, and to be 11 MHz in the longer TRT disks. Also studied was the system occupancy and efficiency for recording drift time information. The occupancy for a level (non-drift time) hit is found to range from 36% (inner) to 10% (outer) in the TRT barrel, to be 12% for the shorter TRT disks, and to be 26% for the longer TRT disks at LHC design luminosity. The fraction of drift time hits shadowed out is found to range from 40% (inner) to 13% outer in the TRT barrel, 17% in the short TRT disks, and to be 30% for the longer TRT disks at LHC design luminosity.

Introduction

Given the extremely high proposed design luminosity of \(1.0\times 10^{34}\) cm\({}^{-2}\)s\({}^{-1}\) at the LHC[1] and the intrinsic response time of drift tubes, charged particle crossing rates, occupancies, and shadowed hit fractions are of considerable interest in designing the ATLAS Transition Radiation Tracker (TRT) detector. The key to calculating these quantities is to make a detailed model of the time-response of the straw tubes and their associated electronics used in the TRT design. To perform the work described in this paper, the standard ATLAS simulation framework (SLUG and DICE)[2][3] was used to study the Panel Layout[4] of the ATLAS inner tracker. For the TRT system the Panel Layout is almost identical to the current layout (the Annecy Layout). The very detailed model of the TRT system already in the ATLAS simulation frame work called XTRD[5] was modified to perform the studies described in this paper.

The XTRD code was modified to consider additional information when calculating the time response to charged particles of the straws in the TRT. In particular, the effects of the particle flight time, signal propagation time along the straw tubes, and bunch crossing time on the recording of hits were added to the straw tube response model already in XTRD. Once these modifications were made, additional code was developed to study the rates and occupancies in the TRT. Much of the algorithm for calculating rates and occupancies was based on work done for the SDC modular straw tracking system at SSC[6]. Structural similarities of the SDC and ATLAS tracking systems and their corresponding simulations eased transferring of code from SDC software to XTRD for reuse.

As the study described in this paper progressed, the model used to simulate straw tube time response was changed. The initial studies for this paper were made using a straw tube time-response model based on one implemented in SDC[6]. This model made the simplifying assumption that the straw tube electronics produce fixed length outputs and ignored the effect of hit-to-hit pulse width variation. After initial studies of rates and occupancies were made with the simple fixed pulse shape model, the detailed model already available in XTRD was combined with the additional code of the simple model to provide a complete picture of the time response. Throughout this paper these two models will be referred to as the "fixed pulse shape model" and the "detailed model". Results from both models are shown in section 5.

This paper is divided into the following sections:

1. A description of how straw tubes record hits, measure drift time, and respond to high hit rates (section 2).
2. A description of the straw tube time-response models: the simple, fixed pulse shape model and the full, detailed model of XTRD (section 3).
3. A description of the simulation conditions including the modifications made to the standard ATLAS control files to implement a full time response treatment (section 4).
4. A detailed description of the studies made and their results including rates and occupancies (section 5).

## 2 Straw Tubes

This section of the paper describes how a straw tube works in principle and introduces terms that are used throughout the rest of the paper. In reading this section, one should keep in mind that a straw drift tube measures the distance from its central wire to the track by measuring the time it takes for the ionization electron clusters created along the track to drift in to the central wire. Thus the position resolution of a straw tube is determined by how accurately this drift time can be measured and how well the position of the straw tube central wire is known.

### Straw Tube Time Measurement

Let us first consider in general how a straw tube (or for that matter any drift-time measuring detector) records time. First a charged particle traverses the straw at some time (the "flight time") and ionizes the gas along its path. The ionization electrons then drift over the distance between where they are created to the central anode wire, arriving after some time (the "drift time"). The drift time is a measurement of the drift distance. Once the drift electrons collect on the anode, the resulting signal then propagates along the straw to the electronics; this propagation process takes some time (the "propagation time"). After the signal reaches the electronics, the signal must be amplified, shaped, and reach a discriminator threshold level before a time measurement of its leading edge (an "edge hit") can be recorded. The combination of all of these effects leads to the time measurements being spread over a considerably wider time interval than one would expect from the drift distance and represents a finite resolution for the drift distance measurement. If one is willing to forgo the higher spatial precision of the drift time measurement, the presence of a pulse with a height exceeding a threshold anywhere within a gate can be recorded as a hit (a "level hit"). In this case the position resolution is the straw diameter divided by \(\sqrt{12}\).

### Straw Tube Response to High Hit Rates

An additional complication in understanding how a straw tube measures time occurs when more than one track strikes a straw tube within or just before the gate during which the hits are recorded. Depending on how closely in time multiple tracks strike a straw tube, the leading edge of the later hits can be obscured by the trailing part of a previous pulse so that the time measurement for the later hit is not recorded ("hit shadowing"). When hits are shadowed, the closely-spaced hits are recorded as one longer single hit. It is possible for several hits to be merged into one, if they are closely spaced in time. The shadowed-out hits are lost to drift time (edge) hit measurements but can still be detected as level measurements. Figure 1 shows a simplified timing diagram of the shadowing process using logic pulses and not the actual shape a raw straw tube signals. The likelihood of a straw having shadowed hits increases with rising luminosity. For the studies described, the luminosity was modeled by overlapping hits from interactions ("minimum bias events") for beam crossings before, during, and after the beam crossing of interest. Three relevant quantities to measuring this detector response to increased luminosity are (1) the rate at which charged particles cross a straw ("rate"), (2) the fraction of straws with a level or drift time (edge) hit when the system is read out ("occupancy") and (3) the fraction of drift time hits which are lost in the shadowing process ("shadowing fraction").

Simulation of Straw Tube Time Response

Simulating the chain of events described in the previous section requires a detailed readout response model. The response model involves two steps: (1) recording when and where the simulated particles pass through the straw tubes during GEANT tracking and (2) calculating how the straw tubes and their associated electronics would respond to the particles that cross them. The information recorded in step one is called the "hit" information, and the calculated readout response in step two is called "digitization" information. All hits are recorded and GEANT tracking completed before any digitizations are calculated because for wires with more than one charged particle crossing, the multiple hits can interfere with the read out of each other.

### Storing of GEANT Tracking Information

GEANT tracks the particles through the simulated detector one at a time to allow the calculation of hits. If secondary tracks are generated from interactions within the detector, they are also tracked completely and hits recorded for them. Each straw in the TRT is a separate volume recognized by GEANT. As a track crosses a straw, the distance of closest approach of the track to the straw's central wire, the location of the hit along the length of the straw, and the path length of the track within the straw are calculated. Also stored with the hit is information identifying which straw was struck, time of the hit relative to the start of the event, the \(p_{t}\) of the track (component of momentum transverse to the LHC beam direction), and the energy that it deposits. Hit information is stored about every crossing of a straw by any track in the event. The amount of hit information can be quite large for some types of events.

### Time Response Using Fixed Pulse Shape Model

A model of the response of the straw tube and its associated electronics was used to calculate "digitizations" reflecting the way a drift cell measures particle position (recorded with nearly perfect accuracy by the hit) with a finite resolution and efficiency. The pulse width used in calculating the digitizations for the initial studies was fixed in length and the pulse was modeled as a simple square wave. Later studies used the detailed model in XTRD that included a varying pulse shape (see section 3.3).

The steps of the digitization process were:

1. Each hit is checked to see whether the track passes through the sensitive region of the straw. The exact wire position and straw tube diameter are used in making this determination.
2. Each hit was turned into a recorded drift time hit time by summing three times: 1. The **drift time** of the electrons to the central wire. The drift time is used to measure position in a drift cell. The simulated drift time was calculated by dividing the distance of closest approach of the track to the wire by an effective drift velocity. The drift velocity used was \(52.6\,\mu\)m/ns, which corresponds to a maximum drift time of \(38\,\)ns in a straw with \(2.0\,\)mm radius. For the simple fixed pulse shape model described in this section, the drift time measurement was assumed to be perfect and no resolution related smearing of the recorded drift time was used. 2. The **flight time** of the track to the hit location. This time has the effect of slightly shifting the hit time that a straw records. 3. The **propagation time** of the signal along the length of the straw to the electronics. For a gas filled straw tube this is essentially the distance between the hit location and the electronics, divided by the speed of light. This time also has the effect of shifting the straw time measurement. If information is available about the position of the hit along the straw (e.g., from silicon detector \(z\) hits for tracks passing through the TRT barrel), the effect of propagation time can be accounted for when fitting the TRT hits. Figure 2 shows a plot of the drift times, flight times, propagation times, and recorded edge hit times for minimum bias event hits in a typical straw barrel layer. For clarity all the minimum bias events were generated at t=0. Note: the figure shows all hits, even ones that were eventually determined to be shadowed out. The shadowed hits contribute primarily to the tail of late hits.

3. After the times of each hit were determined, the effect of interference between hits on wires with more than one hit was calculated. All the hits on a single wire are time-ordered to facilitate calculation of dead time losses. Any hit occurring within the pulse width of an earlier hit is shadowed out, and its drift time not recorded, even if the earlier hit was itself shadowed. In the limit of infinite luminosity, no drift times would be recorded because all hits would be shadowed by another preceding hit. For the initial studies a fixed double-pulse resolution of 30 ns was used. The 30 ns was estimated from convoluting the electronics shaping time with the pulse width of just under 15 ns. Once the detailed pulse shape model already in DICE was integrated into the time response code, the pulse width generated by this code was used. The detailed model generated pulses varying between 0 ns and 50 ns with an average pulse width of about 20 ns. For further discussion of the ramifications of the detailed model on shadowing see section 3.3 below.
4. All unshadowed hits falling within a time gate of width 64 ns after the triggering beam crossing are recorded by the simulation, although a narrower, superlayer-dependent time window is imposed for occupancy calculations. This gate reflects the actual minimum gate width needed to achieve full efficiency for recording drift time (edge) hits from stiff tracks (i.e. tracks with sufficient \(p_{t}\) that the track is nearly straight and does not loop). Note: a slightly different gate is used in recording level hits, as described in section 5.2.1. Figures 2(e) and (f) show the flight time and total time spectra for the hits caused by stiff tracks (\(p_{t}~{}>~{}1.0\) GeV/c) to illustrate this full efficiency drift time gate.

### Time Response Using Detailed Model

After the initial study using a fixed pulse width of 30 ns and a drift time proportional to the distance of closest approach, the detailed model already in XTRD of straw tube pulse width and drift time based on energy deposition along the path of the track was used for further study. This detailed model included the generation of transition radiation photons.

The detailed pulse shape model in XTRD does the following for each straw in the TRT:1. The ionization deposited by tracks crossing the straw is calculated using the Photo Absorption Ionization Model ("PAI Model")[7]. This energy is produced at a small number (about 30) of primary ionization centers (see figure 3). By using the PAI model, the energy and space fluctuations of \(dE/dx\) measure in test beams are fully reproduced. The standard GEANT ionization calculation is not used.
2. As GEANT tracks a particle through the radiator material, the probability to emit transition radiation photons is accumulated according to reference [8]. The calculation of the probability takes into account the radiator structure and photon absorption cross sections. When a particle crosses the straw volume, this probability is used to generate the ionization centers produced by the absorbed transition radiation photons.
3. Using the measured electron drift velocity as a function of electric field [9] and the actual field in a straw, the drift time of each generated cluster to the wire is calculated based on its distance from the wire. The calculated 32 ns maximum drift time is less than expected actual value of 38 ns because the drift time calculation is made with the ambient magnetic field in the straw set to zero. (Note: The ATLAS magnetic field has the effect of lengthening the cluster drift distances and hence their drift times.) An ad hoc linear scaling factor was applied to compensate for this and make the maximum drift time be 38 ns. See figure 3 for a schematic of clusters drifting in from various places along the track. The time to distance relationship is shown in figure 4).
4. Using an array with 0.5 ns bins, a histogram was filled with energy deposited at the wire as a function of cluster time of arrival. This array has enough bins to store all energy from all clusters that could affect the measurement of stiff a track. See figure 5(a).
5. Energy associated with each transition radiation photon generated by the track is added to the energy array. All of the energy from a single transition radiation photon is added to only one bin of the array because the transition radiation is absorbed very quickly.
6. The process of depositing energy is repeated for any additional tracks crossing the wire.

7. The fluctuations of the gas gain caused by the avalanche process near the wire are modeled by using a gain factor for each bin that depends on the primary energy deposited in the bin. The content of each bin containing energy is replaced by an appropriately amplified amount of energy (see figure 5(b)).
8. The bins are then convoluted together using a model of the electronics signal shape that is based on measurements of response of prototype electronics. See figure 5(c).
9. A low (minimum ionizing) threshold of 200 eV and a high (transition radiation candidate) threshold of 5 keV are then used to find at which times the low and high thresholds are crossed. The amplified signal can fail to cross the threshold, can cross the threshold once, or cross the threshold more than once. See figures 6(a)-(d) for examples of hits where the pulse meets the low threshold, fails to reach any threshold, crosses the threshold more than once, and reaches the high threshold.

Before modification to account for the bunch crossing, propagation, and flight time, the detailed shape model assumed that all of the ionization was deposited at the beam crossing time (t = 0 ns). The various drift times from the locations where the clusters were created led to a reasonable drift time resolution of about 150 \(\mu\)m (see figure 7) and pulse width distribution (see figure 8) but did not model on an individual hit basis the effect of shifting the pulse recording time to account for the hit bunch crossing, flight, and propagation times. (Note: The occupancy is similar to the one produced by the time consuming process of generating events for the bunch crossings before and after the in-time crossing and only counting in-time hits). To make the individual hit time adjustment, the time that the energy was deposited by each cluster was shifted to account for the track flight to the straw and the signal propagation time along the straw. Also the energy vs. time histogram was extended to negative times to allow for the effect of hits from tracks in previous bunch crossings. Thus the energy deposited by hits in previous bunch crossings was correctly smeared into the bins occupied by energy from the in-time particles. For individual hits the resolution and pulse width distributions are identical to those produced by the original detailed model (though different pulse height vs. time distributions were recorded).

These modifications lead to a natural way to calculate pulse width, level hits, and drift time hits. The pulse width was taken to be the time that the pulse spent over the 200 eV threshold. See figure 8 for the pulse width distribution for hits from 100 GeV/c muons. In the figure only wires with a single hit are plotted. If the threshold is crossed more than once (something that happens infrequently for these single hit wires), the plotted pulse width is the time between the leading edge of the first crossing and the trailing edge of the last crossing. It should be noted that the pulse width is correlated with the drift time (see figure 9). This correlation occurs because tracks passing through the central wire of a straw must also pass through the outer part of the straw and thus the tracks deposit some of their energy far from the wire. The electrons from these far clusters drift in at the normal drift velocity and extend the pulse width. Conversely tracks causing large drift times deposit all of their energy in the outer part of the straw, and the drift times from all clusters are about the same, leading to a shorter pulse. A level hit was recorded for wires where any part of the signal exceeded the threshold within a gate that lead to a high efficiency for recording stiff track hits. A drift time (edge) hit was recorded at the time of an upward crossing of the threshold (also using a high efficiency gate for stiff tracks). The time smearing of the amplification process automatically calculates the hit shadowing correctly. High threshold (TR candidate) hits were recorded using a 5 keV threshold and the same pulse height vs. time distribution used to record the low threshold hits.

## 4 Simulation Conditions

This section describes modifications and inputs to the ATLAS simulation program needed to calculate rates and occupancies for the TRT. Wherever possible, the standard ATLAS simulation DICE[3] and TRT simulation XTRD[5] were used with no modifications. All of the results presented in this paper use minimum bias events that were first generated individually and then later combined into global events representing the effects of all of the minimum bias interactions capable of generating hits in time with events of interest. This meant that data tapes containing the resulting hits from generating and tracking thousands of minimum bias events were first made. Sets of these events were then combined into global events to simulate beam conditions at various luminosities for the occupancy calculations. The number of minimum bias events required to simulate one global event can be quite large (100-200) because the LHC design luminosity is very high and the data readout from the TRT is affected by hits from previous and following bunch crossings. It is worth noting that the large size of the minimum bias data sets generated required modification of SLUG to allow the use of 8 mm data tapes to store the events generated by DICE.

### Simulating the ATLAS Minimum Bias Interactions

PYTHIA[10] was used to generate the minimum bias events. The version of PYTHIA used PYTHIA 5.702 (13-Feb-94) and the version of JETSET (another program used by PYTHIA) was 7.401 (11-Feb-94). The PYTHIA control file was the standard one used by ATLAS to generate minimum bias events:

BEAM 'p' 'p'

FRAME 'CMS'

ENER 14000.

C PTAB 1

MSEL 1

MSTP 2=2 33=3 81=1 82=4

MSTJ 22=2

This PYTHIA control file leads to an average charged particle multiplicity of about 7.5/unit of pseudorapidity (see figure 10). The control file was tuned to produce results that matched data from the CDF experiment at Fermilab. The tuning process used an older version of PYTHIA which lead to a lower average charged particle multiplicity of about 6.5/unit of pseudorapidity. The differences between the two versions of PYTHIA were not completely resolved when this report was written. The size of the beam spot was taken to be the standard ATLAS one:

VERT 6=5.6

*NEWV 'p' 1

Tracks were generated out to an \(|\eta|\) of 5.5:

*FFLT 'ETAP' -5.5 +5.5

### Simulating LHC Luminosity

To calculate occupancy at various luminosities, hits for many minimum bias events were superimposed and then digitized. The LHC beams will cross every 25 ns and each crossing will generate an average of 18 interactions per bunch crossing at design luminosity (assuming a cross section of 72 mb at the LHC design energy of 14 GeV). The low energy tracks generated in these interactions can loop through the TRT for over 100 ns and thus affect the readout of data from interactions in later beam crossings. For minimum bias events generated at 0 ns, figure 11(a) shows the recorded hit times using the simple fixed pulse shape model and figure 11(b) shows shows the recorded times using the detailed model. The figure shows the recorded hit time spectrum for the innermost barrel straw layer, which is the layer with the longest time tail. Based on the length of the tail on this hit time distribution and the length of the readout gate (\(\approx\) 40 ns), hits from minimum bias events for the four preceding crossings, the in-time crossing, and the following crossing were superimposed to form a single global event. During the hit superimposition process, the flight times stored for the hits were altered to reflect the time of the beam crossing being simulated (e.g., a hit designated to be in the third previous bunch crossing had 3 \(\times\) 25 ns subtracted from its flight time). Figure 12(a) shows the flight times of hits after this shifting process and figure 12(b) shows how many in-time hits were contributed by tracks originating in each bunch crossing. The figure shows that including hits for the four prior bunch crossings was a very conservative choice because the number of in-time hits contributed by the first 2 crossings (the -4 and -3 crossings) was very small (less than 0.25%). The exact number of events used to represent a single bunch crossing was randomly selected using a Poisson distribution. Design luminosity was taken to be a mean of 18 minimum bias events per beam crossing. To change the luminosity, the number of minimum bias events per bunch crossing was adjusted linearly relative to design luminosity. For example, half design luminosity used a mean of 9 events per beam crossing and twice design used a mean of 36. The control statements to achieve this superimposition are:

BACK -1 3 -4 +1 18. 25. 20.
*MODE 'INNE' 'BACK' 411
*MODE 'XTRD' 'BACK' 411

### ATLAS GEANT Geometry and Materials

All simulation was done with the standard DICE geometry and materials for the **Panel Layout**. This is selected with the following control cards:

*MODE 'INNE' 'GEOM' 2
*MODE 'SITV' 'GEOM' 1
*MODE 'SIT' 'GEOM' 1
*MODE 'MSGC' 'GEOM' 1
*MODE 'XTRD' 'GEOM' 1

In order to save a factor of 3-5 in computation time the ATLAS geometry was deliberately cut off at just outside the tracker. The cryostat for the magnet/calorimeter was not used because backsplash has been measured experimentally to be small and the computer time required to track showers through the cryostat is quite large. The controls cards to restrict the geometry in this way are:

*MODE 'CRYO' 'GEOM' 0
*DETP 'SLUG' 3=140. 4=140. 5=360.

### GEANT Tracking Parameters

The GEANT program[11] handles the tracking of the particles through the detector and the generation of secondary particles. GEANT version **3.15** was used for all studies presented in this report. All studies used GEANT parameters that lead to very precise tracking of the generated tracks. GEANT was not allowed to change the tracking media parameters, and the optimization level in GSORD was set to 2:

AUTO 0 OPTI 2

All GEANT interactions were turned on and FLUKA was used to simulate hadronic interactions:

DCAY 1 MULS 2PFIS 1 MUNU 1 LOSS 3 PHOT 1 COMP 1 PAIR 1 BREM 1 DRAY 1 ANNI 1 HADR 4

Note: As previously mentioned in section 3.3 XTRD simulation uses the PAI model in place of the normal GEANT ionization calculation.

The energy cut off used to determine if a track had stopped was set very low (100 keV) for all particle types:

CUTS 1=.0001 2=.0001 3=.0001 4=.0001 5=.0001

The cuts for bremsstrahlung and \(\delta\)-ray production were set to 1 MeV.

CUTS 6=.001 7=.001 8=.001 9=.001

Finally for safety tracks were followed for up to 500 ns during event generation by setting the GEANT TOF cut appropriately:

CUTS 11=500.E-9

### Readout Model

The work presented in this note required additions to the XTRD code to treat flight time, study rates, etc., in the straw tubes. Modifications were made to the hit storing routine (XTRDSTE), the readout/digitizations routine (XTRDIG), and the routine (XSIGNAL) that calculates the shape of the signal when a track crosses a straw.

The XTRDSTE hit storing routine was modified to store the flight time of the hit in addition to the normal information (hit location, track Bethe-Bloch \(\gamma\) factor, track distance of closest approach to the anode wire, energy deposited in the straw, and path length in the straw). Also added to the hit information was the radius of curvature (\(\propto\ 1/p_{t}\)) of the track generating the hit. The radius of curvature word was also used to mark which hit was generated when the track exited the straw (depending on track energy etc., GEANT takes multiple steps in crossing a straw, and hits are recorded for each step). By tagging the last step in a straw with a special code, the time code was able to combine hit information from multiple steps taken in crossing the straw into a single digitization representing the time of the crossing. Technical limitations of the code lead to the hit information being of reduced accuracy in recording the distance of closest approach for hits caused by the uninteresting very low energy tracks with radii of curvature on the order of or less than the radius of a straw (2.0 mm). In order to tag the hit recorded when a track exits a straw, the ATLAS version of the GEANT user step routine, GUSTEP, that calls XTRDSTE also had to be modified. The modifications ensured that XTRDSTE was called on the last step in the straw (previously this was not true for certain low energy tracks ). It was also necessary to modify GUSTEP to pass additional Monte Carlo track identification information to XTRDSTE to allow proper calculation of the rates.

The routine that actually calculates the response of a straw tube (XTRD-DIG) was by far the most heavily modified routine used in the studies described in this paper. The modifications were carried out in two steps: first a simple model that assumed that all pulses were exactly 30 ns wide was implemented (see section 3.2) and then the detailed calculation of pulse height vs. time already in the code was modified to use the bunch crossing time, flight time, and propagation time calculated in making the simple model (see section 3.3). An additional word was implemented in the digitizations to store the recorded drift times (after shadowing) with 0.25 ns resolution. This word could store up to 4 drift times recorded between 0 and 64 ns. In order to study occupancies at very high luminosities, it was also necessary to modify XTRDIG to handle more hits. The original code could handle about 0.5 million hits, and combining hits over the range of bunch crossings used (four bunch crossings before and one after the event of interest ) at design luminosity or higher required storing many more hits (up to ten times more). In the process of making the rate and occupancy studies, numerous histograms were implemented for calculating rates, occupancies, shadowed drift time (edge) hit fractions, etc.

Study Results

This section describes: (1) the methods used to calculate the rates, occupancies, and shadowing fractions, (2) the calculated rates, occupancies, and shadowing fractions, and (3) sources of uncertainty for the results. The following studies are described:

1. Studies of the total charged particle crossing rate for each straw layer at design luminosity (section 5.1).
2. Studies of the level hit occupancy as a function of luminosity (section 5.2).
3. Studies of the drift time (edge) hit occupancy as a function of luminosity (section 5.2).
4. Studies of the fraction of drift time (edge) hits shadowed out as a function of luminosity (section 5.3).
5. Studies of the Transition Radiation (TR) hit occupancy as a function of luminosity (section 5.4).

All of the studies were made with both the fixed 30 ns pulse width/perfect drift distance resolution code and also with the detailed shape model (except for the rate which is the rate of hits before the signals are processed by the electronics). Throughout this paper, the LHC design luminosity is taken to be 18 minimum bias events per beam crossing (which corresponds to an assumed inelastic cross section of 72 mb). The uncertainty of the results from the assumption of of a 72 mb cross section and from other sources is discussed in section 5.5.

To understand this section, it is necessary to understand how the rate and occupancy calculations differ. Since the total charged particle rate is the rate that particles cross an average straw, it is not necessary to consider the effect on the readout electronics of multiple hits in a single straw in calculating the rate. Thus in making the rate calculation, the minimum bias events can be processed by the program one at time. Unlike the rate, the occupancy calculation requires information about the electronics used to read out the system. For the occupancy calculation many previously generated minimum bias events are combined into a single global event (see section 4.2). The use of global events allows simulation of how the hits shadow each other during event readout.

In creating global events, the minimum bias events were selected randomly from a data set of approximately 3500 events with a total storage size of about 1.5 Gbytes. Note: The same PYTHIA minimum bias events were used one at a time in the rate calculation. When simulating higher luminosities, 3500 minimum bias events are nowhere near enough events for a reasonable statistics and the events were reused many times by combining different randomly selected minimum bias events to generate different global events.

It is worth emphasizing that in the limit of infinite luminosity (infinite total charged particle rate), the level hit occupancy approaches 100%, and the drift time (edge) hit occupancy approaches zero. The level hit occupancy goes to 100% because every straw has energy deposited into it during the gate. The drift time hit level goes to zero because an infinitely high flux of particles ensures that no pulse will ever have an unshadowed leading edge.

### Total Charged Particle Rate

#### 5.1.1 Total Charged Particle Rate Calculation

The total charged particle rate has direct bearing on the analog electronics design and also on how quickly the straw will age. This rate is the total rate of charged particles crossing an average straw in a given layer and is essentially a geometrical acceptance calculation. Since the rate is independent of the readout model used, it serves as a sensitive test of the event generation and also the GEANT geometry and tracking parameters.

The total rate was calculated by counting the number of charged particle crossings for each straw using individual minimum bias events. The average rate of charged particle crossings caused by an individual minimum bias event was scaled by the 720 million minimum bias events per second (18 minimum bias events per beam crossing) expected at design luminosity. The minimum bias events were generated using the PYTHIA control file mentioned above. The tracks were generated over a pseudorapidity range of \(\left|\eta\right|\leq~{}5.5\) to ensure that secondaries generated in the beam pipe were included in the rate. While it was not studied, it is believed that further increasing the \(\eta\) range would have little effect on the rates because tracks with \(\left|\eta\right|>~{}5.5\)reach the beam pipe at \(z\approx 300\) cm and the last large disk in the TRT system is at \(z\approx 320\) cm. In order to compare with previous studies and to gauge the effect of the \(|\eta|\) cut on the results, the study was rerun with an \(|\eta|\) cut of 2.5. GEANT tracked the generated and secondary tracks for 500 ns following the event generation time. All straw crossings by charged particles in this time window entered into the rate calculation. In calculating the rate, the rate in each layer of straws (either a barrel in the central region or a disk in the forward region) was calculated individually. The number of charged particle crossings in a layer was counted two different ways when were multiple crossings of a single straw by a single track: (1) counting each crossing as an individual count in the rate and (2) counting all crossings as a single count in the rate. Counting in the latter way prevents very small loopers running approximately parallel to a straw from having each of their loops counted separately in the rate. In such a case the crossings are separated by picoseconds and the straw tube registers one longer in time, large pulse height hit. After considerable discussion this one-track, one-crossing-counts definition was accepted as the official one. This results in a slight underestimate of the rate (perhaps 1%-2% because occasionally there are two distinct hits in a straw (particularly a barrel straw) caused by one track (see section 5.3.2). Crossings from the \(+z\) and \(-z\) layers at the same relative position were combined in a single rate measurement.

#### 5.1.2 Total Charged Particle Rate Study Results

Figure 13 shows the rates for all barrel and disk layers in the TRT. Four curves are plotted:

1. The rates for tracks generated with an \(|\eta|\) cut of 5.5 and all crossings in one straw counted separately in the rate.
2. The rates for tracks generated with an \(|\eta|\) cut of 5.5 and all crossings by one track in one straw counted as a single hit in the rate. **This is believed to be the best estimate of the rate.**
3. The rates for tracks generated with an \(|\eta|\) cut of 2.5 and all crossings in one straw counted separately in the rate.
4. The rates for tracks generated with an \(|\eta|\) cut of 2.5 and all crossings by one track in one straw counted as a single hit in the rate.

Starting from the left side of the plot, the first group of points are the rates in the small disks, the second set of points are the rates in the large, forward disks, and the third set of points are the rates in the barrel region. For the plot, the total rate is plotted for an average straw in each layer of the TRT at the design luminosity of \(1.0\times 10^{34}\) cm\({}^{-2}\)s\({}^{-1}\) (720 million minimum bias interactions per second).

A number of conclusions can be drawn from the plot. The average rates in the disks show relatively small dependence on the \(z\) location of the disk, with the rate in the short disks being about 5.3 MHz (4.6 MHz to 6.0 MHz) and in the long disks being about 10.8 MHz (10.3 MHz to 11.4 MHz). For the barrel layers the rate varies drastically as a function of the radius of the layer with the barrel layer rates varying from 15.2 MHz on the innermost layer to 3.8 MHz on the outermost layer. The quoted rates are with all crossings in a straw by one track counted as one and for tracks generated over the wide pseudorapidity range (\(|\eta|<5.5\)). The effect of counting all crossings by one track in one straw as one hit is much larger in the barrel (8%-13%) than in the disks (3%) because the magnetic field runs parallel to the barrels and consequently loopers tend to run along the barrel layers. The effect of the \(\eta\) cut is pronounced. In the barrel changing the \(\eta\) region over which minimum bias events are generated to 5.5 from 2.5 leads to about a 18% increase in the rate. In the disks there is an even greater effect: an 18% to 28% increase for the short disks and a 28% to 36% increase for the long disks. A final note: to calculate the rate at other luminosities, simply scale the rate linearly to that luminosity (e.g., at twice design luminosity the rates shown in this section double). Similarly, to scale the rates to assume a different inelastic total cross section, one can simply scale by the ratio of the number of assumed minimum bias events to the 18 events/bunch crossing (72 mb) assumed in making these plots.

### Level and Drift Time Hit Occupancy

#### 5.2.1 Level and Drift Time Hit Occupancy Calculation

The crucial part of an occupancy calculation is the selection of a gate. The gate must be wide enough to allow for hits from the in-time bunch crossing to be recorded with high efficiency but not so wide that the hits are contaminated by unnecessary hits from the out-of-time bunch crossings. The shorter the gate can be, the lower the occupancy will be. Additionally for the level hit case one can take advantage of the correlation between the pulse length and track distance of closest approach to the central wire in the straw to set a shorter gate than one would naively expect. To define the gate for a given layer of straws, the program calculated the minimum and maximum time that could be recorded by a stiff track. In the barrel, the minimum time that can be recorded by an in-time stiff track is when a track hits the straw at the electronics (outer) end and crosses the exact center of the straw (through the anode wire). In this case, both the propagation time and the drift time are zero and the measured time is just the flight time from the interaction point to the electronics. Conversely the maximum possible time recorded in the barrel by an in-time stiff track is when a track hits the inner end of the straw (at \(z\,=0\)) and crosses at the straw's outer edge. Such a track has the maximum drift time and the sum of the propagation time plus flight time is the maximum possible for any track. For the straws in the barrel TRT these times differ by about 40 ns (which is essentially the maximum drift time of 38 ns). For the TRT disks, a similar pair of tracks crossing the inner and outer edge of the disk define the time range although this range is slightly less because the straws are shorter. When using the detailed model, this full efficiency gate is slightly delayed by pulse-height-dependent time-walk and slightly widened by the smearing caused by the signal shaping function.

For drift time (edge) hits, this time range of the previous paragraph represents the minimum gate needed to achieve full efficiency for recording drift time hits. Except for a few nanosecond offset associated with the rise time to the 200 eV threshold of the detailed model, the fixed pulse shape and detailed model drift time occupancy calculations used a gate equal to this time range. The fixed pulse shape model achieved 100% efficiency for finding stiff, isolated track drift time hits for this gate. There is about a 3% inefficiency due to pulses that do not reach the 200 eV threshold built into the detailed model. The hit finding efficiency for the detailed model was about 95% indicating that the detailed model also achieved approximately a 98% efficiency for the tracks that did reach the threshold. The remaining 2% inefficiency is due to selecting a gate the optimizes the trade off between efficiency for recording in-time hits and out-of-time hits. A diagram of this gate is shown in figure 14.

For level hits, the leading edge of this gate can be advanced to shorten the gate and still register the trailing portion of pulses from earlier hits. Inthe simple model where every pulse has a width of exactly 30 ns this leads to reducing the 40 ns gate to about 10 ns. For the detailed model, the gate edge could be advanced by about 32 ns without substantially reducing track finding efficiency. This is because the earliest pulses are at minimum 32 ns long (almost all the pulses shorter than 32 ns have longer drift times - see section 3.3). This level gate is identified throughout the rest of this paper as "gate A". For isolated tracks with \(p_{t}\,>\,1.0\) GeV/c, the efficiency of gate A for recording a level hit is essentially 100% for the fixed pulse shape model and 93% in the detailed model (remember that about 3% of the time the hit in the detailed model fails to reach the 200 eV threshold). Another level hit gate (identified in this paper as "gate B") has a pulse length requirement in addition to a pulse height requirement and is similar to the way the current design of the TRT electronics records a hit. This gate requires a hit in the last 25 ns (one bunch crossing) of the full efficiency gate and a hit in the 25 ns following the end of the full efficiency gate. Gate B has a slightly lower efficiency (87% in the detailed model). These gates are also shown in figure 14. Note: the fixed pulse shape model level occupancy results are not shown because the fixed model does not contain a correlation between distance of closest approach to the wire and pulse width.

Before the data is presented, one more point about the definition of occupancy must be made. The occupancy plots in this report are presented in terms of hits per wire per event, which can be confusing depending on the type of occupancy being studied. There are three kinds of occupancies presented in the following section:

1. **Total Hit Occupancy** is the number of track crossings for an average wire in each layer. This occupancy is equivalent to the previously described rate where all crossings of a straw by a track are counted and exceeds one hit per wire for high enough luminosity. As with the rate, this occupancy increases linearly with luminosity and for some layers this occupancy approaches 1.5 hits per wire per event at twice design luminosity.
2. **Level Hit Occupancy** is the fraction of wires with a pulse height exceeding the low threshold for each layer for the narrow level hit gate. The level occupancy ranges between 0.0 and 1.0 and saturates at 1.0 in the limit of very high luminosity.

3. **Drift Time (Edge) Hit Occupancy** is the number of unshadowed leading edges that an average wire in the layer reads out. The drift time occupancy is the efficiency for reading out a drift time measurement successfully. Depending on the length of the gate and the double pulse resolution of the electronics this number can theoretically exceed 1.0. For example for the electronics model assumed in this paper, the gate in the barrel straws is about 40 ns wide and the pulse width is about 30 ns (in the fixed pulse shape model). Thus in this model it is possible to get two drift time hits on a wire. In practice, the average value of this occupancy never does get that high and saturates around 0.4-0.5 hits per wire per event because of shadowing effects.

#### 5.2.2 Level Hit Occupancy Study Results

The level hit occupancy was defined as the fraction of the wires in a layer with a level hit when the system is read out. The readout gate was taken to be as described above in section 5.2.1. Figure 15 shows the level occupancy for each layer in the TRT at design luminosity. Figure 15 shows the occupancy for the detailed model and gate A, which has a slightly higher efficiency for recording hits caused by in-time stiff tracks than gate B. The points are in the same order as the points on the rate figure with the order being (left to right): short disk layers, long disk layers, and the barrel layers. The worst layer is the innermost barrel layer which has an occupancy of 36% using the detailed model and gate A. While not shown, gate B has a comparable occupancy of 36% using the detailed model. The fixed pulse shape model results are not valid in this case because the model lacks the proper pulse width to drift distance correlation. While the occupancies are comparable between gates A and B, remember that gate B has about 5% lower efficiency for recording hits produced by isolated in-time hits. There is considerable event-to-event variation in the occupancy around its mean value. It is important to note the width of this distribution when quoting occupancies. There is further discussion of this variation in the drift time occupancy section (section 5.2.3).

Figure 16(b) shows the level occupancy for the most occupied layer in the TRT (the innermost barrel layer) as a function of luminosity. At twice design luminosity, the level occupancy reaches 59% (gate A) or 60% (gate B) in the detailed model and the inner layer is clearly starting to saturate and fall away from the curve showing the full rate of hits. By comparison, for

the lowest rate straw layer (the outermost barrel layer) things are better (see figure 17). In the outer layer the occupancy is 10.2% (gate A) and 9.2% (gate B) at design luminosity. For the outer layer, even at twice design luminosity the occupancy never exceeds 20% and the occupancy vs. luminosity curve is almost straight indicating that the level occupancy is not starting to saturate.

Figures 18(b) and 19(b) show similar level occupancy plots for the innermost short disk layer (the lowest rate disk layer) and the outermost long disk layer (the highest rate disk layer). The short disk layer is not near saturation (12% gate A or 11% gate B) at design luminosity using but the long disk layer is starting to saturate with a level occupancy of about 26% (gate A) or 25% (gate B) at design luminosity.

#### 5.2.3 Drift Time (Edge) Hit Occupancy Study Results

For a given layer, the drift time (edge) occupancy was defined as the number of unshadowed drift time hits per straw when the system is read out. The readout gate was taken to be the drift time hit gate described above in section 5.2.1. Figure 20 shows the drift time hit occupancy for each layer in the TRT at design luminosity. The figure uses the detailed model. The worst layer is the innermost barrel layer, which has an occupancy of 38% (the fixed pulse shape result is almost identical). Figure 21 shows the distribution of individual drift time hit occupancy measurements for the innermost straw layer at six luminosities ranging from 0.05 times design to 2.0 times design. The results shown are for the fixed pulse shape model. There is considerable event-to-event variation in the occupancy around its mean value. While not shown, the level hit occupancies show a similar dispersion.

Figure 16(a) shows the drift time hit occupancy as a function of luminosity for the inner barrel layer using the fixed pulse shape model. Figure 16(b) shows the same thing for the full pulse shape model. At twice design luminosity, the drift time hit occupancy is about 48% with the fixed pulse shape model and 50% with the detailed model. At twice design luminosity, the inner layer is clearly starting to saturate and fall away from the total number of hits curve. Notice from the figure that the drift time hits are slightly more reduced by shadowing then the level hits. Counterintuitively, doing pattern recognition with the lower number of unshadowed drift time measurements does not always reduce the track finding efficiency compared to using level hits because the drift time measurements locate the track so much more pre

cisely that they have more power for pattern recognition. Detailed pattern recognition studies are required to decide which type of hit should be used in a given set of conditions. By comparison, for the outer straw layer (figure 17) things are better for the drift time hit occupancy: it is about 13% at design luminosity and 23% at twice design luminosity for both the fixed pulse shape and detailed models. Just as in the level case, the occupancies are much better for the outer layers than the inner layers. As in the level hit case, this layer does not approach saturation even at twice design luminosity though the curve has started to fall away from the total number of possible hits.

Figures 18 and 19 show similar fixed pulse shape and detailed model drift time hit occupancy plots for the innermost short disk layer (the lowest rate disk layer) and the outermost long disk layer (the highest rate disk layer). The fixed pulse shape and detailed model occupancies are almost the same. The short disk layer is not near saturation (about 15% at design luminosity, which is slightly more than the level hit occupancy). As in the level hit case, the long disk layer is starting to saturate with a drift time hit occupancy of about 32% at design luminosity.

### Shadowed Drift Time (Edge) Hit Fraction

#### 5.3.1 Shadowed Hit Fraction Calculation

A crucial parameter for the drift time hits is the hit shadowing fraction, which is the fraction of leading edges obscured by other pulses. This fraction is a strong function of luminosity because it reflects how often multiple hits on one straw interfere with each other. At extremely high rates (much higher than expected at LHC), the shadowing fraction will approach 100% because every hit will be obscured by other hits.

For the fixed pulse shape model it is possible to directly study the fraction of leading edges lost by directly counting the total number of particles with \(p_{t}>1.0\) GeV/c crossing a straw and the total number of edges recorded by tracks with \(p_{t}>1.0\) GeV/c. The use of \(p_{t}>1.0\) GeV/c tracks guarantees that a track will cross a straw only once at the expense of a greatly reduced sample of leading edges to calculate the shadowing fraction. To avoid rewriting program code, the shadowing fraction for tracks of all \(p_{t}\)'s in the fixed pulse shape model was not directly calculated. The difficulty was caused by the use of the definition of total track crossings requiring that a track be counted as a single crossing no matter how many times it actually crosses a straw (see section 5.1.1). Consequently the all \(p_{t}\) fixed pulse shape model shadowing fraction was calculated by comparing the number of drift times (edges) recorded to the total number of tracks crossing an average straw in a given layer to calculate the recorded hit fraction (which is the complement of the shadowed hit fraction).

For the detailed model an even more indirect approach must be taken to calculate the shadowed hit fraction. In the detailed model, the number of recorded edges is again divided by the total number of possible edges (with one track counted as a single crossing no matter how many times it crossed the straw). Since the detailed model can record zero, one, or more than one edge for a single crossing of a particle, the kept hit fraction must be corrected for the number of edges generated by a track. Further the detailed and fixed pulse shape model gates do not record quite the same hit sample, so the relative hit recording efficiencies of these two gates must also be accounted for when calculating the shadowed hit fraction. The number of edge hits and the gate efficiency effect were directly estimated by counting the number of in-time detailed model edge (drift time) hits caused by tracks in and out of the full efficiency gate. These corrections were calculated to be about a 3% adjustment of the shadowed hit fraction. However, apparently the use of the one-track-one-crossing definition led to a slight underestimate of the total number of distinct straw crossings. In very low rate layers, the 3% correction was too great and caused the shadowed hit fraction becoming slightly less than zero. As a result of this, the correction for the number of edges and the gate efficiency correction was reduced arbitrarily to 1.5%, which made the lowest rate layer (the outer barrel layer) at the lowest simulated luminosity (5% of design luminosity or \(5\times 10^{32}\) cm\({}^{-2}\)s\({}^{-1}\)) have a shadowing fraction that was about zero.

#### 5.3.2 Shadowed Hit Fraction Study Results

For design luminosity, figure 22 shows the detailed model shadowing fraction for each layer in the system. As one would expect, the highest shadowing fraction is the innermost barrel layer (40%) and the lowest shadowing fraction is the outermost barrel layer (13%). The shadowing fraction in the short disks is about 17% on average and in the large disks is about 30% on average.

Figure 23 shows the fraction of drift time hits shadowed out as a function

of luminosity for the highest rate layer (the inner barrel layer). The three curves on the plot are for (1) the directly counted shadowing fraction for hits cause by tracks with \(p_{t}\;>\;1.0\) GeV/c using the fixed pulse shape model, (2) the indirectly calculated shadowing fractions for hits caused by tracks with any \(p_{t}\) in the fixed pulse shape model, and (3) the shadowing fraction for drift time hits caused by tracks with any \(p_{t}\) in the detailed model. The all \(p_{t}\) curve is dominated by hits caused by low energy tracks. The fraction of shadowed hits has a steep dependence on luminosity; for the detailed model at one tenth design luminosity, the all \(p_{t}\) hit shadowed fraction is 6%, at design luminosity 40%, and twice design luminosity, 59%. The fixed pulse shape model shows similar results. The \(p_{t}\;>\;1.0\) GeV/c curve is slightly above the all \(p_{t}\)curve (the same three points are 11%, 42%, and 62%, respectively) because the number of total straw crossings used in calculating the detailed shadowing fraction is underestimated by 1%-2%. If one compares the inner layer shadowing fraction to the fraction for the lowest rate layer, the outermost barrel layer, one immediately sees that the outer layer is much better off (see figure 24). Even at twice design luminosity the shadowed hit fraction is only 22% for the detailed model. At design luminosity only 14% of the high \(p_{t}\) track hits are shadowed.

For the disk layers, figures 25 and 26 show the shadowed hit fractions for the innermost short disk layer and the outermost long disk layer. The shadowing fraction is quite low in the short disk layer (about 15% at design luminosity and about 25% at twice design) and fairly high for the long disk layer (about 34% at design and about 50% at twice design luminosity). For the disk layers in the fixed pulse shape model, the \(p_{t}\;>\;1.0\) GeV/c and the all \(p_{t}\) shadowed fractions are almost identical (this is in comparison to the barrel layers where the \(p_{t}\;>\;1.0\) GeV/c is higher). This indicates that the approximation that one track only causes one distinct hit in a straw no matter how many times it crosses the straw is better for the disk than the barrel layers. Unlike in the barrel layers the disks are perpendicular to the magnetic field and loopers spiral across the disk straws instead of along the straws and are unlikely to strike the same wire twice. Thus there is almost no underestimate of the number of track crossings of disk straws by counting only one hit for each track. In the barrel, where the straws run parallel to the field, a looper can run along the barrel repeatedly generating hits that are shadowed out in the same straw. In this regard, the disk design has an advantage over the barrel design at high luminosities.

From the shadowing fraction plots it is clear that even at very low luminosities the shadowing fraction does not quite go to zero. This effect is especially obvious for the fixed pulse shape model \(p_{\rm t}\;>\;1.0\) GeV/c shadowing fraction which is directly counted. The irreducible shadowed hit faction is caused by spatial correlations of the tracks within jets. Since minimum bias events are jet events, many of the tracks in the events are very close to each other. These closely spaced tracks in jet cores cause hits that shadow out the hits from nearby tracks in the jet. Even though the average occupancy throughout the tracker is quite low, the local occupancy in an isolated jet may still be considerable.

### Transition Radiation (TR) Hit Occupancy

#### 5.4.1 TR Hit Occupancy Calculation

The final study result described in this report is the occupancy for real TR hits and and other pulses exceeding a high (5 keV) threshold. In fact, most of the pulses exceeding the high threshold are not caused by TR. Instead the high threshold hits are caused by pile-up and energy fluctuations in the ionization deposition. The non-TR, high threshold hits are random and should not line up with a track in multiple layers of the TRT on average.

The detailed model and a 5 keV threshold were used in studying the TR occupancy. Since the high threshold is 25 time higher than the lower threshold (5 keV vs. 200 eV) and the pulse width is taken to be the time that the pulse spends above the high threshold, the TR pulses are much shorter in duration then the low threshold pulses. This reduction in pulse width required that both gate A and gate B had to be modified to achieve reasonable efficiencies for pulses exceeding the high threshold pulses. Compare the pulse width distribution in figure 27 to the corresponding distribution of low threshold hit pulse widths in figure 8. Gate A was extended to start 10 ns earlier for the high threshold (i.e. 22 ns after the start of the full efficiency gate. Gate B required a hit in the last 25 ns of the full efficiency gate (the same as the low threshold B gate) but the the second hit time region was 10 ns earlier and included the last 10 ns of the full efficiency gate as well as the following 15 ns after the full efficiency gate (see figure 14).

#### 5.4.2 TR Hit Occupancy Study Results

Figure 28 shows the number of high pulse height hits (+ signs) and high pulse height hits associated with actual TR production (\(\times\) signs) per wire for each layer at design luminosity. The data shown is for the modified form of A described in the previous paragraph. For the modified gate A, the efficiency for any high threshold hit (whether associated with TR or not) was found to be 89% using a sample of isolated, high pulse height hits associated with the in-time bunch crossing. However, the efficiency for hits in the above sample produced in conjunction with actual TR was nearly 100%, so almost all the out-of-time high threshold hits were not interesting. While the gate B result is not shown on the figure, gate B has a lower occupancy (and also a lower high threshold hit recording efficiency). Using the same sample of hits used to test gate A's efficiency, Gate B's efficiency was found to be about 77% for high threshold hits. Gate B does have the same approximately 100% efficiency for hits associated with TR. In the most occupied layer (again the innermost barrel layer), there is a 3.9% chance using the modified gate A that any straw in that layer will record a high pulse height hit at design luminosity. Gate B has a lower chance (2.9%) for recording a high threshold hit for the same layer. The chance that a minimum bias event will produce an actual TR hit in this layer is very small (\(<~{}0.05\%\)). The outer layers of the barrel have about 0.93% (gate A) or 0.68% (gate B) chance of a high threshold hit and about the same very low probability of a real TR hit as the innermost barrel layers. In the short disks, the high threshold probability is again about 1.1% (gate A) or 0.9% (gate B) and in the long disks about twice that. As \(\eta\) increases, the fraction of high threshold hits associated with actual TR events increases. Clearly from the rise in the real TR curve as a function of increasing \(z\) of the layer, the number of stiff, real electrons in a minimum bias event increases with increasing \(|\eta|\). Since the large disks are longer and reach higher \(|\eta|\) then the small disks, both the actual TR and high threshold occupancies are much higher. The high threshold hits not associated with TR are not so problematic because they are most likely randomly distributed throughout the TRT (though that remains to be seen). The true TR hits are likely correlated with electrons in the minimum bias events and their effect needs be considered.

### Sources of Uncertainty on the Study Results

While the rates and occupancies given in this paper are believed to be accurate, there are a number of sources of uncertainty to the reported rates and occupancies. The main sources of uncertainty are generally things that were difficult to quantify at this time for lack of information about the final design of the TRT or its electronics and the conditions at the LHC.

1. The PYTHIA event generator was used even though the GENCL event generator is believed to produce a slightly better minimum bias event sample. For both generators, there is some theoretical uncertainty about what the minimum bias event spectrum will be like at LHC energies.
2. The inelastic cross section of 72 mb used for scaling the rates and occupancies to LHC energies is uncertain. All results would be directly affected by changes in this cross section.
3. The GEANT geometry for the Annecy layout was not complete when the minimum bias event dataset was generated and thus the generated events used the Panel layout. For the TRT itself, the Annecy and Panel layouts are very similar. However, the tracking elements inside the TRT are somewhat different, particularly at higher \(|\eta|\). This leads to the generated tracks passing through different amounts of mass to reach the TRT in the Annecy and Panel layouts and will certainly affect the calculated rates and occupancies. The effect of this is believed to be small.
4. A bug in the version of DICE used to generate the minimum bias events caused the GaAs detector to be in the Annecy configuration even though the Panel version was requested. The GaAs detector occupies such a small volume that this should only affect the results slightly.
5. The velocity of the drift electrons in a magnetic field is not known precisely at this time. The maximum drift time of 38 ns was put in the program in an ad hoc way by simply scaling the precisely calculated drift velocity in zero magnetic field to be 38 ns. The drift velocity in the actual TRT would also be changed if the gas mixture is altered. Thisvelocity has a strong effect on the occupancy (particularly the probability for recording a correct drift time) even with relatively small changes. At one point during the study jobs were run with the no magnetic field velocity (about 32 ns maximum drift time) and the occupancies were considerably improved.
6. The design of the ATLAS solenoidal magnet leads to considerable field inhomogeneity and thus will cause the electron drift velocity to be different for straws at different locations within the TRT. These variations in drift velocity will in turn affect the occupancy. The study described in this paper used the drift velocity associated with the central field value (2.0 T) and with the assumption that the field is aligned perpendicular to the drift direction. This is a reasonable assumption for the barrel region but is not true in the forward region. In the forward region, the magnitude and orientation of the magnetic field should lead to a reduction of the effect of the field on the electron drift and hence a faster drift velocity which will improve the occupancy.
7. A similar comment to the one about the effect of the drift velocity on the occupancy applies to the pulse shaping width used in the model of the read out electronics. If the pulse shaping width is wider, the pulse width will widen and the occupancies and drift time recording efficiencies are worse. When using the full pulse shape model, the drift velocity is more important than the pulse shaping width in defining the pulse width. This is especially true for tracks with small distances of closest approach to the central wire (such tracks create electron clusters over the widest range of radii within the straw and generate the widest pulses ). Note: In the fixed pulse shape model, the pulse width is the parameter in the read-out model that directly affects the calculated occupancy, while the drift velocity parameter has little, if any, effect on the occupancy. It has been pointed out that since the straws are unterminated the average pulse should be widened by about 3.5 ns on average to account for the effect of the reflected pulse. The amount of widening caused by the reflection depends both on the length of the straw and the location of the hit along the straw.
8. The routine that calculates to the point of closest approach of a track to the wire uses a linear approximation to extrapolate from the GEANThit location to distance of closest approach. This works fine for tracks that do no curve appreciably over the diameter of the straw. However, for very low energy tracks, the linear approximation used does not always yield an accurate distance of closest approach. It is believed that on average this effect is very small. To check that this effect is small, code making a circular extrapolation could be written.

## 6 Acknowledgements

The authors gratefully acknowledges the help he received from Daniel Froidevaux and Pavel Nevski on numerous occasions. Their help was invaluable in understanding both the TRT design and the ATLAS simulation. We also acknowledge their careful comments on the results of these studies.

This work was supported by the United States Department of Energy under grant number DEFG0291ER40661.

## References

* [1] LHC News, No. 4, October 1993, page 9.
* [2] R. S. DeWolf, _Slug Manual, Version 1.07_, 07-Sep-1993 available on WWW under [http://atlasinfo.cern.ch/Atlas](http://atlasinfo.cern.ch/Atlas).
* [3] Offline Software Group, _ATLAS Dice Manual_, Available on WWW under [http://atlasinfo.cern.ch/Atlas](http://atlasinfo.cern.ch/Atlas). Also Offline Software Group, _ATLAS Offline software manual, Version 2.04_, 25-Nov-1994, available on WWW under [http://atlasinfo.cern.ch/Atlas](http://atlasinfo.cern.ch/Atlas).
* [4] Progress Report on ATLAS Milestones, **CERN/LHCC/94-22**, May 23, 1994.
* [5] P. Nevski, "Transition Radiation Tracker for the LHC", _Proceedings of the International Europhysics Conference on High Energy Physics 1993_, edited by J. Carr and M. Perrottet, Edition Frontieres, 1994.
* [6] D. Adams et al., "Simulation Studies of Tracking Systems for the Solenoidal Detector Collaboration Experiment at the SSC", to be submitted to _Nucl. Instr. Methods_, preprint available via anonymous ftp to ftp.scri.fsu.edu, get files in /pub/corden/paper.
* [7] W. W. M. Allison and J. H. Cobb, _Ann. Rev. Nucl. Part. Sci._**30** (1980) 253. See also V. M. Grishin, V. K. Ermilova, S. K. Kotelnikov, "Fast particle identification based on the relativistic increase of the threshold efficiency in multilayer proportional detectors", _Nucl. Instr. Methods_**A307** (1991) 273.
* [8] G. M. Garibyan, "Contribution to the theory of formation of transition X-radiation in a stack of plates", _Sov. Phys. JETP_**33** (1971) 23. See also, M. L. Cherry et al., "Transition radiation from relativistic electrons in periodic radiators", _Phys. Rev._**10** (1974) 3594.
* [9] RD6 Collaboration, "Systematic Study of Straw Proportional Tubes for the ATLAS Inner Detector RD6 Collaboration", **INDET-No-18**, September 29, 1993.
**Assembly and Certification of ATLAS Muon**

**Stations for the Middle and Outer Barrel at CERN**

G. Aielli\({}^{1}\), A. Di Girolamo\({}^{2}\), P. Fleischmann\({}^{3}\), P. Iengo\({}^{3}\), S. Kovar\({}^{3}\),

J. Wotschack\({}^{3}\), S. Zimmermann\({}^{3,}\)a

Footnote a: Corresponding author, Stephanie.Zimmermann@cern.ch

24.11.2006

**Abstract**

Roughly 400 of the approximately 700 muon stations of the ATLAS barrel belong to the middle and outer layer. Barrel Middle and Barrel Outer stations consist of both an MDT chamber and one or two RPC planes delivering the level-1 trigger information.

While MDT chambers and individual RPC units are constructed at their home institutes, the assembly of the RPCs into planes, including the final cabling and the mounting of the trigger electronics, as well as the integration of MDTs and RPCs into muon stations takes place at CERN. MDT chambers, RPC planes and the completed stations have to pass a series of tests before being declared'ready-for-installation'. Final certification criteria is the passing of a one-day cosmic ray test, for which a special setup has been built in building 899 (BB5).

This note gives an overview of the work carried out in BB5, with emphasis on the cosmic ray test. Examples of abnormal chamber behavior will be discussed and a summary of common mistakes in station assembly or chamber cabling will be given. A second focus of the note is on the statistical analysis of the certification results.

###### Contents

* 1 Introduction
	* 1.1 ATLAS MDT chambers
		* 1.1.1 MDT naming conventions
	* 1.2 ATLAS RPC chambers
		* 1.2.1 RPC naming conventions
		* 1.2.2 Front-end electronics
		* 1.2.3 Level-l trigger electronics
		* 1.2.4 RPC strip numbering and trigger towers
* 2 Chamber preparation and station assembly
	* 2.1 MDT preparation
	* 2.2 MDT testing
		* 2.2.1 Test of temperature sensors
		* 2.2.2 Test of magnetic field probes
		* 2.2.3 Test of alignment components
		* 2.2.4 Leak test
		* 2.2.5 Noise test
	* 2.3 RPC plane preparation
	* 2.4 RPC testing
		* 2.4.1 Gas leak test
		* 2.4.2 Mechanical, services and cabling checks
		* 2.4.3 High voltage distribution and gap current test
		* 2.4.4 Low voltage, grounding and noise rejection test
	* 2.5 Muon station assembly
	* 2.6 Sag adjustment
* 3 The BB5 Cosmic Ray Test Stand
	* 3.1 Mechanical setup
	* 3.2 Trigger
	* 3.3 Services, power distribution and gas system
		* 3.3.1 MDT gas system
		* 3.3.2 RPC gas system
		* 3.3.3 MDT high and low voltage
		* 3.3.4 RPC high and low voltage
	* 3.4 DCS
	* 3.5 Data acquisition system
* 4 MDT cosmic ray certification
	* 4.1 Test of on-chamber temperature sensors and ELMB
	* 4.2 Electronics initialization
	* 4.3 High voltage currents
	* 4.4 Hit profiles, cable maps and dead channels
	* 4.5 ADC pulse charge spectra
	* 4.6 Drift time spectra
* 5 RPC cosmic ray certification
	* 5.1 High voltage scan
	* 5.2 Hit profiles, timing plots, dead and noisy channels

### 5.3 Verifying cable maps
* 6 Other cosmic ray results
	* 6.1 RPC test pulse runs
	* 6.2 Cross talk between RPCs and MDTs
* 7 Archiving of results
	* 7.1 MTF database
	* 7.2 Chamber status report
	* 7.3 Cosmic ray test report
	* 7.4 MDT certification database
	* 7.5 MDT data visualisation using Ammonit
* 8 Conclusions
* A Summary of muon station certification criteria

Introduction

Muon stations forming the middle and outer layer of the Atlas Barrel Muon Spectrometer have the double purpose of providing precise track reconstruction and generating the muon level-1 (LV1) trigger, based on whether a certain pattern of hits is compatible with a particle trajectory having high transverse momentum \(p_{t}\). The two types of detector technology used are Monitored Drift Tubes (MDTs) for track reconstruction and Resistive Plate Chambers (RPCs) as trigger chambers. The latter have the additional function to provide a muon track's coordinate in the direction parallel to the MDTs' wire.

In total 444 muon stations have to be built for the Middle and Outer Barrel; these stations, which are all equipped with active LV1 trigger electronics, are complemented by 96 individual RPC units usually referred to as'special chambers' not having their own readout and trigger electronics but rather being connected to neighboring stations. The purpose of these chambers is to improve the trigger acceptance.

Barrel Outer (BO) and Barrel Middle (BM) muon stations, with the exception of those of type BML-G and the special chambers, can be considered as a mechanical unit combining an MDT chamber with one or two RPC planes. Table 1 lists the different types, their numbers and their location in the experiment.

### ATLAS MDT chambers

All BM and BO MDT chambers consist of \(2\times 3\) layers of individual drift tubes, arranged into two multilayers separated by a spacer (the chamber's cross plate). The number of tubes in a chamber ranges from 192 to 432, depending on the chamber

\begin{table}
\begin{tabular}{|l|r|r|r|r|r|} \hline Station & Number of & RPC planes & MDT & \multicolumn{1}{c|}{Sectors} & MDT production site \\ type & stations & per station & & & \\ \hline \hline BML & 94 & 2 & yes & \(1,3,5,7,9,11,13,15\) & LNF Frascati \\ \hline BML-G & 16 & 1 & no & \(1,3,5,7,9,11,13,15\) & – \\ \hline BMS & 72 & 2 & yes & \(2,4,6,8,10,16\) & JINR Dubna \\ \hline BMF & 12 & 2 & yes & \(12,14\) & JINR Dubna \\ \hline BOS & 72 & 1 & yes & \(2,4,6,8,10,16\) & MPI/LMU Munich \\ \hline BOF & 4 & 1 & yes & \(12,14\) & MPI/LMU Munich \\  & 12 & 2 & yes & \(12,14\) & MPI/LMU Munich \\ \hline BOG & 10 & 1 & yes & \(12,14\) & Freiburg \\  & 8 & 2 & yes & \(12,14\) & freiburg \\ \hline BOL & 96 & 1 & yes & \(1,3,5,7,9,11,13,15\) & NIKHEF \\ \hline S2-S2 & 36 & 2 & no & \(2,4,6,8,10,16\) & – \\ S2-S3 & 12 & 2 & no & \(2,4,6,8,10,16\) & – \\ \hline  & **444** & & & & \\ \hline \end{tabular}
\end{table}
Table 1: Types of BM and BO stations. The ’special chambers’ S2–S2 and S2–S3 do not have active trigger electronics of their own.

width. ATLAS drift tubes have a diameter of 29.97 mm, uniform for all chamber types.

All tubes of a chamber are supplied with high voltage from the same side via a set of passive printed circuit boards known as HV hedgehogs. High voltage for the tubes within a multilayer is in common. A second type of hedgehog board is attached to the tubes on the end opposite to the high voltage side. The readout hedgehogs decouple the high voltage by means of a capacitor before passing the signal to the MDTs' active on-chamber electronics.

Groups of \(3\times 8\) tubes correspond to one electronics board, also known as mezzanine card [1]. Each mezzanine is equipped with three 8-channel ASD2 chips and the 24-channel ATLAS Muon TDC AMT [4] for the measurement of drift times. All mezzanine cards send their data to the Chamber Service Module CSM [5], which is responsible for trigger and clock distribution and for off-chamber transmission of data via an optical link to the data acquisition system.

Footnote 2: Amplifier-Discriminator-Shaper [2]

#### 1.1.1 MDT naming conventions

In this note ATLAS conventions are used. Layers and multilayers are numbered starting from 1, with numbers increasing in radial direction w.r.t. to a chamber's position in ATLAS. Within a layer, tubes are numbered starting from 1, with numbers increasing in \(|z|\)-direction in a chamber's ATLAS geometry. For details on the mapping of geometric tube location to electronics readout channels please refer to [6].

### ATLAS RPC chambers

All RPC planes are assembled from either one or two RPC units. The core elements of any RPC unit are two gas gaps, each formed by two bakelite plates having a distance of 2 mm from each other. The bakelite plates are coated by a graphite layer on their outside; during operation a voltage of approximately 10 kV is applied across the gap, sufficient for gas amplification in the gap as a consequence of ionization by a traversing charged particle. Two copper strip panels placed on the outside of the gas volume are used as pick-up electrodes for the signals induced by the moving electric charge. Strips in the two panels are perpendicular to each other, making it possible to reconstruct the particle position in two dimensions. In an assembled muon station the \(\eta\)-strips run parallel to the wires of the MDT while the \(\varphi\)-strips are orthogonal to the axis of the drift tubes.

#### 1.2.1 RPC naming conventions

For muon stations with two RPC planes (all BM, some BOF/G stations) the plane closer to the interaction point in the station's final ATLAS position is referred to as confirm plane, the other one as pivot plane. Stations with only one RPC plane (BOS, BOL, some BOF/G) by default have a confirm plane only.

Confirm planes are denoted by the letter J, pivot planes by the letter I. Within each RPC plane the two gas gap layers are labeled 0 and 1, with layer 0 corresponding to smaller radial position in the ATLAS geometry.

#### 1.2.2 Front-end electronics

The RPC front-end boards, containing the amplifier and discriminator chip [7][8] are an integral part of an RPC unit. Different from the mezzanine cards in the MDT case, they can not be replaced without dismantling (opening) the RPC unit. Each board receives the signals from 8 strips, compares them to an externally supplied threshold voltage and produces a single-ended ECL output, provided the input pulse is above threshold.

#### 1.2.3 Level-1 trigger electronics

RPC signals are transmitted from the front-end boards to the LV1 trigger electronics, which is located on the chamber in the form of so-called trigger boxes. There are two different types of trigger boxes, LV1 splitters and PAD boxes. A schematic view of the LV1 cabling scheme is shown in Figure 1.

LV1 splitters contain the receiver circuit for the ECL front-end signals of the confirm plane of a station. Incoming pulses are transformed into LVDS signals. The sole other purpose of the splitter is to divide the input signal into two identical output signals.

LV1 PAD boxes come in two types, a low-\(p_{t}\) and a high-\(p_{t}\) version, which are used on BM and BO stations respectively. Low-\(p_{t}\) PADs contain the receiver circuits for the pivot plane signals, transmitted from the front-end electronics. In addition, both low- and high-\(p_{t}\) PADs receive signals from the splitter of the station they are located on and from the neighboring one.

The PADs contain as their main elements a set of 4 coincidence matrices (CMs), two for \(\eta\)-strips, two for \(\varphi\)-strips. The CMs select events consistent with a high transverse momentum muon having been detected by the RPCs. The trigger decision is sent via an optical link to the trigger processor. Information on strips that 'fired' in

Figure 1: Schematic view of the LV1 electronics cabling scheme. Confirm plane strips and signals are denoted by the letter J, pivot plane ones by the letter I.

a given event is sent to the data acquisition system over a second optical link. There are thus no electrical connections of the RPC part of a muon stations to its environment, except for the power lines and the CanBus connection needed for electronics initialization.

#### 1.2.4 RPC strip numbering and trigger towers

Each muon station forms two distinct trigger towers w.r.t. the LV1 trigger scheme, one pair splitter - PAD belonging to each of them. Within each trigger tower (i.e. half-chamber), the maximum number of \(\varphi\)-strips is 80 for a confirm- and 64 for a pivot plane; the maximum number of \(\eta\)-strips is 64 in both cases.

\(\varphi\)-strips are numbered starting from the chamber middle, as shown in Figure 2. Strips are distributed evenly between the \(\varphi_{0}\)- and the \(\varphi_{1}\) coincidence matrices of the PAD3. If a chamber has less than the maximum possible number of strips, empty channels are by default the lowest channels of \(\varphi_{0}\) (\(\eta_{0}\)) and the highest channels of \(\varphi_{1}\) (\(\eta_{1}\)). Special rules apply for chambers whose strip number in either \(\eta\) or \(\varphi\) is not an even multiple of 8 or for which there are no more than 32 \(\eta\)-strips.

Footnote 3: With the exception of BML-G stations with 56 = 32 + 24 \(\varphi\)-strips per trigger tower.

Figure 2: RPC strip numbering. From the LV1 trigger scheme point of view, each station consists of two distinct trigger towers. Numbering of \(\varphi\)-strips starts in the chamber middle. The assignment of \(\eta_{0}\) and \(\eta_{1}\) as shown is valid for a chamber seen from the interaction point in ATLAS geometry.

## 2 Chamber preparation and station assembly

Chamber completion activities in BB5 cover all steps necessary to bring a muon station to the ready-for-installation state. A schematic view of the work flow is given in Figure 3. Details on the different preparatory steps are given below; the final certification with cosmic muons is described in a later section.

### MDT preparation

MDT chambers are assembled at their respective production sites4. A set of tests is carried out already at the home institute. Depending on chamber type, these tests range from minimal checks covering gas leak rates and the HV behavior only, to a full evaluation with cosmic rays. The former is the case for BML and BMS, the latter for BOS, BOF and BOL chambers. In case of BOS and BOF chambers the cosmic ray test also includes the determination of individual wire positions [9], [10]. The preparation work done at CERN consists of

Footnote 4: The production sites for the individual chamber types are listed in Table 1.

* Finalizing the on-chamber gas distribution. This step is done at CERN exclusively for a few BMS chambers; all other chambers arrive at CERN with the

Figure 3: Schematic overview of BB5 chamber completion work. Different colors represent activities usually done by separate specialized teams. Dashed boxes show steps done only for certain chamber types, as explained in the legend.

gas system already completed.
* Mounting of the readout electronics (Fig. 4). The Chamber Service Module CSM is mounted upon arrival at CERN for all chambers except those of type BOL. BML, BMS and BMF chambers must also be equipped with mezzanine cards, the high voltage distribution and the ELMB5 for connection to the detector control system. Footnote 5: Embedded Local Monitoring Board [11]
* Mounting of the magnetic field probes (Fig. 5). For the Outer and Middle Barrel, only chamber types BOS, BOF, BOG, BMS, BMF and some BOL are equipped with magnetic field sensors.
* Measurement of the position of the axial/praxial alignment sensor platforms relative to the drift tubes;
* Mounting of the alignment components except for the in-plane system, which is installed during chamber construction.

### MDT testing

MDT chambers undergo a set of tests and measurements before the integration with their respective RPCs. These tests shall be described here.

Figure 4: Readout side view of an MDT chamber, before the Faraday cage has been fully closed.

Figure 5: Magnetic field probes are mounted on special platforms glued onto the MDTs of BOS/F/G, BMS and certain BOL chambers.

#### 2.2.1 Test of temperature sensors

All BM MDT chambers are equipped with 10 temperature sensors. BO chambers have either 18 or 28 temperature probes. The latter is the case for BOG. Temperature sensors are connected to the ELMB of the chamber and can be read out via CanBus. All values are checked for consistency with ambient conditions; the data is uploaded into the certification database.

The sensors' cabling scheme, i.e. their assignment to certain ELMB channels can also be checked by applying a local heat source, e.g. a fan, to specific sensors and checking which ELMB readings change.

#### 2.2.2 Test of magnetic field probes

Magnetic field probes are connected to the ELMB of the chamber. They can be read out via CanBus. To verify the correct operation of the sensors, in a first step their ID codes are read, verifying communication with the sensor is possible. In a second step, the three components of the earth magnetic field, \(B_{0,x}\), \(B_{0,y}\) and \(B_{0,z}\) are measured and checked for consistency. In a last step, a small magnet is placed close to the field probes; a change in the sensors' readings is expected in this case and is checked for. Test results are stored in the certification database.

#### 2.2.3 Test of alignment components

MDT chambers are equipped both with light sources (LEDs) and with (CCD) cameras, which together form the optical alignment system [12]. LEDs and cameras are controlled and read out via an on-chamber multiplexer, known as RasMux. At CERN, praxial, projective and CCC components are mounted on the chambers. The in-plane alignment system is installed during chamber construction.

After all alignment devices have been mounted, all LEDs are switched on one by one from the control software. By checking if the correct sensor becomes illuminated on the chamber, the cabling scheme is verified. For the in-plane system, a full test is carried out, including analysis of the camera images. This is possible since both light sources and their corresponding cameras are located on the same chamber in this case.

#### 2.2.4 Leak test

ATLAS Muon specifications prescribe a leak rate per individual drift tube

\[Q_{leak,tube}\leq 2\cdot 10^{-8}\,\frac{\mathrm{bar}\cdot 1}{s} \tag{1}\]

at 3 bar absolute pressure, in order to limit the overall gas loss and contaminations by back-diffusion of air into the tubes. Sophisticated methods are used by the chamber building institutes to verify that condition (1) is met. The main purpose of the renewed leak test at CERN during the pre-installation certification process is to exclude damages to the gas system of a chamber during transport or storage. Cracks in some end plugs have also been observed occasionally.

At CERN, gas tightness of BM and BO chambers is verified by measuring the pressure drop over a period of typically 24 to 48 hours. Equation (1) translates into

\[-\frac{\Delta p}{\Delta t}\leq 2\cdot 10^{-8}\frac{\mathrm{bar}\cdot 1}{\mathrm{ s}}\cdot V_{tube}\,, \tag{2}\]where \(V_{tube}\) is the volume of an individual drift tube of the chamber. For a 24-hour period, (2) becomes

\[-\frac{\Delta p}{24\mbox{ hours}}\leq 0.6\,\,...\,\,\,1\,\mbox{mbar}\,,\]

depending on the tube length.

Given that a very precise leakage measurement has been done for all chambers during construction, and given the limited time available for a measurement at CERN, leading to lower precision, one usually considers a chamber gas tight if the leak rate measured at CERN is below 10 times the value given in (2) [13].

#### Test system

The test setup used at CERN is shown in Figure 6. A maximum of 6 chambers, or 12 multilayers, can be connected to the system simultaneously. At the start of the test procedure the chamber is brought up to the nominal pressure of 3 bar abs., using the standard MDT operating mixture Ar:CO\({}_{2}\) = 93:7.

The gas mixing is controlled by the two electronics mass flow controllers (D)6. Next the input valves (A) to the chambers under test are closed. One multilayer is connected to each of the two electronic pressure sensors (C)7 in turn with the help of the valves (B); the (initial) pressure is recorded every 30 sec for a period of ideally at least half an hour. The pressure measurement is repeated after a period of 24 to 48 hours. Pressure values are corrected for effects of changing temperature, according to

Footnote 6: Bronkhorst HI-TEC F-201AC-FA

Footnote 7: Bronkhorst HI-TEC P702CC-FAC-33Z

\[p_{corr}=p_{meas}\cdot\frac{T}{T_{ref}}\,\,, \tag{3}\]

where \(T\) is the temperature in K and \(T_{ref}\) a fixed reference temperature, usually 293 K. A linear fit is performed to the corrected pressure data \(p_{corr}(t)\), with the time as independent variable, to obtain the pressure drop \(\frac{\Delta p}{\Delta t}\).

Figure 6: Schematic overview of the MDT leak test setup.

read out via the on-chamber ELMB from a PC. A second, stand-alone ELMB is utilized to record the pressure values, obtained from the sensors (C) as analogue voltages. This ELMB is also used to monitor the gas composition and the absolute gas flow. Data analysis is done using a PVSS program, which further controls the communication with the ELMBs via CanBus and provides monitoring and display functionality to the operator (Fig. 7).

## Results

Measured leak rates per drift tube are shown in Figure 8. Positive values of \(\frac{\Delta p}{\Delta t}\) can be explained by inaccuracies in the fitting of the data, or, in a few cases, by sudden temperature increases not fully compensated by the correction (3).

#### 2.2.5 Noise test

Noise hits seen by a drift tube are hits uncorrelated to the passage of any particle. The noise rate of an MDT should be small, to limit the number of fake hits in the track reconstruction and in order not to loose a significant number of 'good' hits due to dead time.

Noise rates strongly depend on the threshold at the front-end electronics' discriminator; for ATLAS MDT certification at CERN, the maximum acceptable noise rate has been defined as [13]

\[R_{noise}\leq 5\,\mathrm{kHz\ per\ tube} \tag{4}\]

Figure 7: MDT leak test PVSS graphical user interface.

for an effective threshold of

\[V_{eff}=-50\,\mathrm{mV}\,, \tag{5}\]

with the MDTs operated with the standard ATLAS Ar:CO\({}_{2}\) gas mixture and at the nominal high voltage of 3080 V.

Condition (4) serves as a guideline only; based on the fact that MDTs will be operated during ATLAS routine running most likely at a lower effective threshold than the one given in (5), a chamber showing a noise rate of 5 kHz or more for many tubes at \(V_{eff}\) = -50 mV should not be considered as 'good'. On the other hand, a chamber with an average noise rate per tube of a few hundred Hz or below, but having one or two tubes exhibiting a noise rate of 10 kHz is very well acceptable.

#### Test system

BM and BO chamber noise rates are measured since spring 2005 using a readout scheme close to final system8. Core components of the setup (Fig. 9) are a VME crate with a Concurrent Technologies crate controller and two PCs.

Footnote 8: Noise testing for part of the BMS and BML chambers was done with a predecessor system, still based on the CSM-0 prototype of the Chamber Service Module.

The first PC, running under Linux, receives data transmitted by the CSM. The PC is equipped for this purpose with a special, CERN-built GOLA/Filar card [14], which takes the role of the MROD [15] of the final ATLAS readout scheme. The

Figure 8: MDT leak rates \(\Delta p/\Delta t\cdot V_{tube}\) per drift tube, as measured during the chamber preparation phase in BB5. The dashed line corresponds to a leak rate of \(2\cdot 10^{-7}\) bar-l/s.

second PC, running the operating system Windows XP, is used for the setup and initialization of the chamber electronics, success of which is an important part of the test procedure. The Windows PC also provides the operator with a graphical user interface to control the data taking, using the MiniDAQ software developed by the University of Michigan. Details on the MiniDAQ package are given in [16].

Noise runs are done using a fixed-frequency trigger of 10 kHz, generated by a TTC VME module [17]. Summary information written by MiniDAQ to disk is analyzed and visualized with the help of a stand-alone Java application; the program is also used to upload data into the ATLAS certification database.

## Results

Typical noise distributions for different thresholds are shown in Figures 10 and 12. At the standard 'test' threshold of -50 mV (5), the noise distribution is characterized by a rather uniform rate of a few tens of Hz seen by the majority of tubes. This rate is due to the cosmic muon background.

'Dead' tubes can normally be very well detected, as can be seen in the given example of chamber BOF3A12 (Fig. 10) with three broken wires.

A phenomenon frequently observed are a couple of 'hot' tubes, exhibiting noise rates of - at standard threshold - a few times the average, on an otherwise 'quiet' chamber. This can be due both to tiny differences in the ground connections of the electronics and to channel-to-channel variations of the amplifier/discriminator

Figure 9: MDT noise test data acquisition system. The MDT chamber is connected to the DAQ system by two optical fibers, one for TTC trigger and timing information, the second for the data. Data is read by a CERN-built GOLA/Filar card. The GOLA card is housed in the Linux PC of the setup; the same PC is used for data storage. Initialization of the chamber electronics is done from a second PC with the help of a KVASER CanBus interface card.

chip. Lowering the threshold increases the overall noise rate dramatically, with noisy channels staying the same (Fig. 12). Noise rate distribution for the standard threshold of \(50\,\mathrm{mV}\) are shown in Figure 11 for BOL and BOS chambers.

Examples of abnormal noise distributions are shown in Figures 13 and 14. In both cases, one or more layers of drift tubes exhibit noise rates clearly different from the remainder of the chamber. Such a behavior is typical for a problem with high voltage discharges or high leakage currents. It is observed most often at high humidity.

Figure 11: Noise rates measured in BB5 for BOL (left) and BOS (right) drift tubes, at a threshold of \(V_{eff}=-50\,\mathrm{mV}\) with high voltage on. Please note the logarithmic scale. The uppermost histogram bin includes rates above \(1\,\mathrm{kHz}\).

Figure 10: Noise rates for chamber BOF3A12, taken at a threshold of \(V_{eff}=-50\,\mathrm{mV}\) with high voltage on. Data taken at a relatively high threshold are characterized by a rather uniform rate seen by the majority of tubes. This rate is due to the cosmic muon background. The chamber shown has a total of three dead tubes, due to broken wires, which can easily be detected by the absence of rate.

Figure 12: Top: Noise rates for chamber BML6C07, taken at different thresholds \(V_{eff}\) with high voltage on. Please note the logarithmic scale in the right column. Bottom: Noise distribution for \(V_{eff}=-34\) mV. ’Hot’ tubes are randomly distributed over the full chamber, which is the expected behavior in absence of a noise source, as for example a bad ground connection of a mezzanine card or hedgehog board.

Figure 14: Noise rates for chamber BOL6A11, taken at a threshold of \(V_{eff}=-50\) mV with high voltage on. The behavior of all tubes, except those belonging to layer 2 of multilayers 1 and 2 is abnormal. Big problems with both instable and large high voltage currents (discharging) were found for this chamber during the following cosmic ray test.

Figure 13: Noise rates for chamber BOL3A15, taken at a threshold of \(V_{eff}=-50\) mV with high voltage on. The behavior of the tubes in layer 2, multilayer 2, is abnormal. The increased rate seen by all tubes in this region is most likely due to a high voltage problem, causing small discharges.

### RPC plane preparation

All individual ATLAS RPC units are assembled at the University and INFN of Lecce (Italy). After the assembly, units undergo a cosmic ray test at either Lecce, Napoli or Roma 2 University [18], prior to their shipment to CERN.

At CERN, RPC units must be assembled into planes, before they can be integrated with the MDT chambers. The RPC plane preparation phase consists of

* Mechanically coupling the individual RPC units into planes and mounting the support bars to be connected to the station's common support (Fig. 15),
* Mounting the supports for the LV1 trigger boxes,
* Equipping the RPC plane with the signal cabling connecting the front-end electronics output to the LV1 splitter and PAD boxes (Fig. 16),
* Installing 'cable stops' on all \(\eta\)- and \(\varphi\)-front-end cables. The cable stop is a small printed circuit board, shown in Figure 17, which is screwed to the metal surface of the RPC plane. It reinforces the grounding of the front-end electronics, by connecting the GND wires of each front-end cable to the RPC common ground formed by the metallic parts of the RPC very close to the front-end board. Equipping a plane with cable stops improves the immunity against external noise, which can trigger oscillations of the front-end chip.
* Installing the high voltage distribution network,
* Installing the cabling necessary for gap current monitoring,
* Installing the distribution for front-end and LV1 trigger electronics power and for the threshold.

Checks on the continuity of the signal cabling are done at various stages during the assembly phase. In addition, the gas tightness of all RPC units is verified.

Figure 15: Individual RPC units are coupled into planes with the help of a triangular support bar running across the small side of the units.

### RPC testing

The individual RPC units, which are fully tested at their production site, are assembled into RPC planes and called in BB5, as described in the previous section. All the manipulation and changes, in particular with respect to the grounding, introduced by the cabling procedure (wired-OR of the \(\varphi\)- strips of different units, ground bridges/cable stops etc.) suggested to introduce a test step, usually referred to as pre-test, before and after the integration of the RPCs with their respective MDT chamber, and preceding the final cosmic ray certification.

The pre-test makes use of the power system to perform DC tests both on the high voltage and low voltage subsystems of the chamber, with the aim to diagnose and fix potential problems as early as possible. This aspect is of particular importance since in many cases interventions on the RPC become more difficult or even impossible

Figure 16: RPC planes are equipped with signal cables connecting the front-end electronics output to the LV1 PAD and splitter boxes.

Figure 17: RPC ’cable stop’. Cable stops are installed close to the front-end cards on all cables going to the LV1 trigger boxes, to reinforce the RPC grounding scheme and improve immunity against noise.

after the assembly with the MDT chamber.

The pre-test consists of four blocks of checks summarized in a check list which is stored in the pre-test database:

* Gas volume and gas connection tightness test,
* Mechanical structure, services and cabling checks,
* High voltage distribution and gap current measurement,
* Low voltage distribution grounding robustness and noise rejection test.

#### 2.4.1 Gas leak test

Once the RPC plane is secured on proper supports, the leak test is performed separately for each unit. Each unit, is made of two independent gas gap layers. Each layer can have one or two gas volumes connected internally in series. The leak test is done for the two layers together, serializing the outlets on one chamber side and closing the other side with a pressure meter. A small overpressure of about 4-5 mbar is applied to the volumes, carefully inflating them and then closing the gas input.

If the pressure drop is greater than 0.5 mbar after 10 minutes (pressure meter water column change by more than 5 mm), an inspection on the piping is needed. The problems encountered during this test were mainly cracks of the gas inlet, most of the times caused by collisions of the units during transports/plane movements or the mechanical assembly. In many cases cracked gas inlets can be cured by gluing the connection without having to open the RPC unit. In some cases, depending on the exact location of the leak, the plane however has to be dismantled.

In some instances, leaks were also traced to bad connection pieces or badly cut gas pipes. All encountered leaks were fixed, for individual planes before the assembly with the respective MDT chamber, for muon stations before the cosmic ray test.

#### 2.4.2 Mechanical, services and cabling checks

After the leak test is performed, the RPC chamber is connected to low and high voltage and to the DCS services (gap current monitoring and thresholds). Low voltage and DCS connections are concentrated on a special patch board called LV distributor board, located at the chamber edges. These boards distribute the voltages to the readout panels hosting the front-end electronics. The high voltage is delivered to separated distributors, one per side, each powering a single gas gap layer. For BOL confirm and BML pivot planes, as well as for chambers later located in the ATLAS feet region, extensions branches are installed both for low and high voltage services to ensure the connection points are in an accessible location once the chambers are installed in the ATLAS cavern.

While connecting the RPC services, their mechanical supports are checked and it is verified that all cables are properly secured. Another step is the verification of the mechanical tightness of the RPC Faraday cage; this is done be by checking that all screws and rivets are put in place and properly tightened, and that all cable stops are correctly installed. Finally is verified that the common support is insulated with respect to the RPC apart for the safety grounding point explicitly foreseen.

#### 2.4.3 High voltage distribution and gap current test

This step of the test procedure is logically divided into two parts: The proper connection of the high voltage circuit, including the current readout, and the verification of the gas gap current.

In the first part the presence of the 100 k\(\Omega\) resistors in the channels' high voltage return lines is verified including the correct polarity of the cabling. Next the high voltage circuit connection is tested by ramping up the voltage at a fixed rate of 30 V/s. The ramping current is a measurement of the gap capacitance, which depends on the gap area. Unconnected gaps can be detected by the ramp-up current being close to zero, due to the absence of any capacitive load on the high voltage line.

The voltage is then set to 3000 V, at which the multiplication phenomena in the gas can still be excluded, to evaluate the ohmic current contribution. If this exceeds 200 \(nAm^{-2}\), the gap undergoes a recovery cycle flushing the gaps with Argon [19]. This is performed accordingly with the gap certification procedures applied at the production site [20].

The last step consists of flushing the gaps with the standard RPC gas mixture9 for several hours and then checking the total current at a working point of 9600 V, which should be lower than 4 \(\mu Am^{-2}\) per gap.

Both at 3000 V and 9600 V the total current supplied by a given power supply channel is compared with the sum of the gap currents powered by that channel to check for current leaks, indicating a bad connector or gap insulation.

Footnote 9: C\({}_{2}\)H\({}_{2}\)F\({}_{4}\) : i-C\({}_{4}\)H\({}_{10}\) : SF\({}_{6}=94.7\) : 5 : 0.3%

#### 2.4.4 Low voltage, grounding and noise rejection test

This has proven to be the most delicate test in terms of reliability of the certification procedure; many improvements were made to chamber quality with time and experience.

The test is linked to the intrinsic features of the RPC front-end electronics chip. During RPC operation, a -2.1 V bias voltage \(V_{pd}\) ('pulldown-voltage') is supplied to the front-end boards via either the LV1 PAD or splitter boxes. This voltage is needed to form the ECL output signal of the front-end electronics.

Under normal operating conditions, the corresponding bias current \(I_{pd}\) is independent from the counting rate; signals are very short and the front-end electronics duty cycle is negligible. By lowering the effective threshold, a sudden increase in \(I_{pd}\) can however be invoked, corresponding to an 'exploding' counting rate: The front-end electronics is oscillating. This effect is referred to as radiofrequency (RF) noise. The threshold at which RF noise sets in and thus the chamber's immunity against external noise sources, depend crucially on the integrity of the Faraday cage and the ground connections. In case of defects, RF noise exhibits a hysteresis with respect to threshold variations; to stop the front-end electronics from oscillation, the effective threshold has to be increased to a value higher than the one at which RF noise set in. The procedure follows the steps below:

1. Power the front-end electronics (\(V_{ee}=+6\)V supply on the input connectors) and measure the current absorption being within the expected values (about 4 A per chamber depending on the size).
2. Set the threshold voltage \(V_{th}\) for all layers to a value of 0.5 V, which correspondsto a very high effective threshold; verify that there is no current drawn in the threshold lines.
3. Power the RO and HV side \(V_{pd}\) channels, to measure the transmission lines' (flat cables) bias currents in order to set reference values in absence of signals. An abnormal absorption at this stage is evidence for an interruption of the \(V_{ee}\) supply on one or more boards or panels. A low absorption indicates some unconnected block of channels.
4. Set the physical (effective) threshold for the j-th layer to a value close to zero (corresponding to \(V_{th}\approx\)2 V). The front-end electronics is oscillating under such conditions. Check that a high current absorption on both the RO and HV side \(V_{pd}\) channels is observed, indicating that the \(V_{th}\) supply is operative and does arrive to the front-end boards.
5. Increase progressively the j-th physical threshold by decreasing the value of \(V_{th}\), (keeping all remaining threshold voltages at 0.5 V), until the current of the i-th side \(V_{pd}\) channel returns to its original value (hysteresis check).
6. If the value of \(V_{th}\) at which the hysteresis curve closes is \(\leq 1.3V\), the read-out panel (i,j) undergoes further inspection and the necessary corrections are applied.
7. For a final check the step above is repeated by keeping all \(V_{th}\) voltages of a chamber but the j-th one at 1.1 V, which corresponds to the minimum foreseen threshold during normal ATLAS operation.

Typical reasons for an RPC plane showing bias current instabilities and noise problems were a bad reference of the front-end boards to the ground of the readout strip panel and the chamber chassis, either due to an imperfect inner geometry or due to broken soldering connections. In some instances noise problems could be fixed by improving the ground connections by adding external ground wires. In others, the RPC unit concerned had to be opened and repaired; the latter was the case in particular if broken soldering connections were involved.

A check is finally performed to verify that the threshold channel assignment to the different layers is consistent with the plane's signal cable routing, and that there are no mistakes in the low voltage distribution scheme. This test is done by disconnecting one layer at a time from the LV1 splitter and PAD boxes, and applying a threshold voltage \(V_{th}\)=2 V to the layer. No increase in \(I_{pd}\) should be observed for a correct cabling scheme, since channels'subjected' to a very low effective threshold leading to front-end electronics oscillations are not powered by \(V_{pd}\).

### Muon station assembly

After both the MDT chamber and its corresponding RPC plane(s) have been prepared and have passed their respective (pre)test procedures, they are integrated into the final muon station. Details of the station assembly process vary according to chamber type; as an example, the different steps necessary in the case of BML are illustrated in Figure 18.

BOF, BOS and BOG chambers have an additional step in the assembly procedure. For these chamber types, the common support forms a 'cradle' which completely surrounds the RPC plane and provides the mechanical stability of the station (Fig. 21).

Figure 18: BML muon station assembly procedure [21]. From top to bottom: 1. The confirm RPC plane is placed on the assembly table. 2. The readout side common supports are fixed to the RPC plane. 3. The MDT chamber is placed on top of the first RPC plane. The third common support is installed. 4. The pivot RPC plane is mounted. 5. The yellow storage and protection frame is put around the completed station and the station is removed from the assembly table.

Figure 19: Assembled muon station of type BOL. Stations of type BO have one RPC plane only, with the exception of some BOF and BOG stations later located in the feet region of the experiment.

Figure 20: Assembled muon station of type BML. Stations of type BM have two RPC planes with the MDT chamber ’sandwiched’ in between.

Figure 21: BOS common support – RPC package. Different from other chamber types the common support in the case of BOS completely surrounds the RPC in the form of a ’cradle’. The MDT chamber is added in a second step.

Station assembly in this case starts with integrating the RPC plane with the common support. This step includes the mounting of the LV1 trigger electronics. The MDT chamber is added to the RPC - common support package only in a second step.

Examples of completed muon stations are shown in Figures 19 and 20.

### Sag adjustment

For all but the smallest ATLAS barrel muon chambers gravitational effects on the position of the anode wire have to be taken into acount to reach the desired resolution. Due to the different stiffness of the wire and the aluminum tubes, gravitation leads to an off-center wire position, in particular in the chamber middle, if the tubes are not vertical. Off-center wire positions complicate the track reconstruction, and, if big enough, cause a distortion of the electric drift field.

For BM and BO stations the different gravitational sag of aluminum tubes and wires is compensated by deforming the chamber accordingly. This is done with the help of adjustment screws, located on the middle cross plate of the chamber. The compensation procedure is known as sag adjustment. It is part of the muon station assembly.

The sag adjustment for BOS, BOF and BOG chambers of all sectors and for BML chambers of sectors other than \(3,5\) or \(7\) is done supporting the station in the same way as later in the experiment, in the same orientation. Special rotation frames (Fig. 22) are used. Deformation of the chamber geometry is monitored with the help of the in-plane alignment system.

For BML stations of sectors \(3,5\) and \(7\) and for all BMS chambers, the sag adjustment is done in the storage frame in horizontal position. The chamber sag measured with the help of the in-plane alignment system at \(0^{\circ}\)-angle is extrapolated to the angle under which the chamber will be installed in the experiment; adjustments are made accordingly.

No sag adjustment is done in BB5 for BOL stations, due to their large size. The sag adjustment for these chambers is done during installation in the ATLAS cavern.

Figure 22: MDT sag adjustment for BML (left) and BOS (right) muon stations.

The BB5 Cosmic Ray Test Stand

The BB5 cosmic ray test is the final step in BM and BO chamber certification, as explained above. This section will describe the test stand, with 3.1 covering the mechanical setup and 3.2 giving an overview over the external trigger system for cosmic muons traversing the chambers under test. Parts 3.3, 3.4 and 3.5 give details on services (gas, low and high voltage), the detector control and monitoring system and the data acquisition.

### Mechanical setup

The mechanical setup of the cosmic ray test stand is shown in Figure 23. The test stand can house up to three muon stations simultaneously; its dimensions are such that all BM and BO chamber types can be accommodated. Stations are supported on frames which can be moved laterally on rails to allow for loading and unloading with the help of the overhead crane.

Two ATLAS RPC planes of type BOL-BB with a size of \(5\times 2\,\mathrm{m}^{2}\) are installed at the top and bottom of the setup, sandwiching the stations under test. (The lower RPC is located below floor level and can thus not be seen in the photograph). The two RPCs provide an external trigger on cosmic muons, as explained in more detail in the next paragraph.

### Trigger

The two trigger RPC planes each consist of \(2\times 4\) gas volumes, forming two independent layers. They are operated with the same gas mixture as the RPCs of muon stations to be certified. Only the signals from strips perpendicular to the length of the plane are used for trigger generation. Strips are connected to a special receiver module designed and built by the Roma 2 RPC group. Each output of the receiver

Figure 23: Side view of the BB5 cosmic ray test stand. Only the top RPC of the trigger is visible in the photograph.

module is the logic 'OR' of 8 strips and thus corresponds to an area of approximately \(25\times 200\,\mathrm{cm}^{2}\) of the RPC plane.

Figure 24 shows how the cosmic trigger is generated, using various NIM modules: Output signals of the receiver module are first passed to a discriminator10 for signal shaping; next the logic OR of all strips of an RPC layer is formed with the help of Fan-In modules11. Signals of the two layers of the upper RPC are delayed by \(16\,\mathrm{ns}\) in order to compensate for the muon flight time between the two RPC planes. A coincidence of hits in 3 out of the 4 RPC layers is required to generate the final trigger signal. This logic is implemented via a total of 6 logic ORs12, each being

Figure 24: Cosmic ray test stand trigger logic. External muons passing the test stand are triggered on by requiring a 3 out of 4 coincidence of the four RPC strip planes. The parts of the trigger logic responsible for the single event mode and veto logic described in the text are shown in red.

the OR of the signals of two layers, two triple ANDs13 and finally the AND of the output signals of the two triple coincidences, as shown. The trigger signal is sent as 'LV1-Accept' signal to - LHC experiment specific - TTCvi modules and from there to the on-chamber electronics for ther MDTs and RPCs.

Footnote 13: LeCroy 465

Typical trigger rates range from 150 to 200 Hz, varying to some extent with temperature and atmospheric pressure, despite correcting the working point for changes in the environmental parameters.

During all data taking the DAQ is operated in a strict single event mode: Generation of triggers is physically stopped after each trigger signal until all data of the corresponding event has been read out and processed. The advantage of the single event mode is that one avoids more complicated schemes of how to handle buffer overruns in the RPC or MDT readout modules in case data can not be processed quickly enough. For rates up to a few kHz - amply covering the rates observed with cosmics - the single event mode does not pose any limitations to the performance of the system.

The single event mode is implemented with the help of a timing unit set to infinity, generating a veto on the final coincidence unit of the trigger logic. The veto is cleared by an output signal created by a CAEN V262 VME Input/Output register controlled by the data acquisition, as can be seen from the trigger scheme in figure 24.

### Services, power distribution and gas system

#### 3.3.1 MDT gas system

During the cosmic ray test MDTs are flushed with the nominal ATLAS gas mixture consisting of 93% Argon and 7% carbon dioxide (CO\({}_{2}\)). Gas mixing is done with the help of two mass flow controllers14; they are operated in blending mode, in which the absolute flow of CO\({}_{2}\) is adjusted automatically according to the current flow of the major component, Argon. The Argon flow can be regulated between approximately 60 and 1200 Nl/h.

A system of oil- and lubricant-free valves and mechanical rotameters distributes the gas flow to the up to three muon stations under test at any given time. A common electronic pressure regulator15 in the gas line returning from the chambers ensures they are kept at 3 bar absolute pressure (Fig. 25).

Footnote 14: Bronkhorst F-201C-FAC-33-Z

Footnote 15: Bronkhorst P-702C-FAC-33-Z

Figure 25: Schematic view of the MDT gas system for the cosmic ray test stand.

#### 3.3.2 RPC gas system

Both the trigger RPCs and the RPCs under test are operated with a mixture of 94.7% tetra-fluor-ethane C\({}_{2}\)H\({}_{2}\)F\({}_{4}\), 5% iso-butane C\({}_{4}\)H\({}_{10}\) and 0.3% SF\({}_{6}\) at essentially atmospheric pressure. Gas mixing from the primary components is done with the help of three mass flow controllers16, as shown in Figure 26; these are operated in blending mode with the tetra-fluor-ethane flow determining the flow of the other two components. Gas mixing is done outside of the BB5 hall in a special gas building set up for the use of flammable gases, such as iso-butane.

The iso-butane content in the normally non-flammable mixture is continously monitored by a BINOS-sensor via the absorption of infra-red light. The BINOS controls a normally-closed shutoff valve which automatically cuts any gas flow to the cosmic ray test stand in case the flammability limit is reached due to a malfunction in the gas mixing (too high content of iso-butane).

Footnote 16: Bronkhorst F-201C-FAC-33-Z

Apron reaching the test stand, the gas flow is split into 8 individual controllable lines, supplying the two trigger RPCs and up to \(3\times 2\) RPC planes of the muon stations to test. Each line is equipped with a rotameter to regulate the flow and a bubbler which keeps the RPC under slight overpressure w.r.t. to atmospheric pressure.

#### 3.3.3 MDT high and low voltage

MDTs must be supplied with a single low voltage of 5 V; a separate power supply, type Delta Electronics SM 6020 or 7020, is used for each chamber. MDT low voltages are floating, i.e. there is no connection between the power supply GND/chassis and the chamber GND.

The MDT operating high voltage of 3080 V, corresponding to a gas gain of \(2\cdot 10^{4}\)

Figure 26: Schematic view of the RPC gas system for the cosmic ray test stand. A BINOS sensor is used to monitor the iso-butane content of the gas mixture; in case the mixture becomes flammable, the gas flow is automatically cut with the help of an electric valve.

is supplied individually for each chamber multilayer by a CAEN SY1833P module, housed in a CAEN SY2527 mainframe. The SY1833P is non-floating; the GNDs of all output channels are connected to each other at the power supply as well as to the chassis of the SY2527 mainframe. In addition, each MDT chamber is earthed during the tests by means of a separate cable clamped to the metal parts of the chamber for safety reasons. MDTs are operated with a limit on the current drawn by each multilayer of 20 \(\mu\)A.

#### 3.3.4 RPC high and low voltage

CAEN A1526P modules, housed in a CAEN SY2527 mainframe, are used to generate the RPC high voltage of nominally 9600 V. The current is limited to a maximum of 40 \(\mu\)A per channel. RPC high voltages are floating. For a BO station with one RPC plane only, one gas volume layer corresponds to one high voltage channel; for stations with two RPC planes the connections are done such that two layers in different planes are connected to the same channel.

The RPC low voltage situation is more complicated: In total 4 different voltages must be supplied to the RPC part of each muon station, usually refered to as \(V_{ee}\), \(V_{th}\), \(V_{pd}\) and \(V_{dig}\) (see also section 2.4):

* Powers the RPC front-end electronics, in particular the amplifier/discriminator chip. The nominal value of \(V_{ee}\) is 6 V, which is supplied by floating power supplies of type Delta Electronics SM 6020 or 7020. One power supply is used per muon station.
* This voltage of -2.1 V is supplied to the RPC front-end electronics boards via the LV1 PAD (pivot planes) and splitter (confirm planes) boxes. \(V_{pd}\) is the pulldown voltage needed to form the ECL output signal of the front-end electronics. \(V_{pd}\) is generated by a CAEN A1518 module housed in the same SY2527 mainframe as the RPC high voltage module. Two channels are used for each muon station, each corresponding to a half-station or trigger tower. \(V_{pd}\) voltages are floating.
* Is the threshold supplied to the RPC front-end electronics. The low voltage distribution board of each RPC plane provides separate thresholds for the different strip panels in \(\varphi\) and \(\eta\) (8 lines per plane). For simplicity, a single threshold is supplied to all strip panels of a muon station during cosmic ray certification. Threshold voltages are generated by a CAEN A1517 module housed in the same SY2527 mainframe as the RPC high voltage module. The nominal threshold for BB5 chamber certification is 1.1 V17. Larger values of \(V_{th}\) correspond to a softer threshold. \(V_{th}\) voltages are floating.

Footnote 17: The range expected for later ATLAS operation is 0.9 to 1.1 V.
* Is the voltage powering the digital part of the LV1 splitter and PAD boxes. Voltages of 4 V are needed at the PAD/splitter input, at currents of up to 7 A per trigger tower (PAD-splitter pair). \(V_{dig}\) voltage lines are operated with sense wiring to compensate for the voltage drop along the cable. Voltages are generated by floating power supplies of type Delta Electronics SM 6020/7020 or SM52-30/SM35-45.
*

### Dcs

The detector control system (DCS) for the BB5 cosmic ray test stand has been implemented using National Instrument's LabView software package. Tasks handled by the DCS application are

* Monitoring of environmental parameters, i.e. the temperature, recorded in two different locations of the setup, and the atmospheric pressure. Both quantities are needed to stabilize the RPC working point by applying a correction to the RPC's nominal high voltage as explained in section 5.1.
* Monitoring and displaying the gap currents of all RPC gas volumes, both of muon stations under test and of the trigger RPCs. Gap currents are measured as a voltage drop across a \(100\,\mathrm{k}\Omega\) resistor in the high voltage return line of each gap; the voltage is recorded using a CAEN EASY ADC A3801. RPC high voltages are automatically turned off in case the gas mixture deviates from its nominal composition by more than 5% or if the gas flow drops below a certain level.
* Controlling the MDT and RPC high voltages. MDT high voltages are set directly on the A1833P high voltage board to a fixed value of \(3080\,\mathrm{V}\). RPC high voltages are corrected for temperaure and pressure changes, as explained in section 5.1.
* Monitoring the RPC and MDT gas composition and the MDT pressure. The gas flow of each component of either the MDT or RPC mixture is obtained measuring the analogue monitoring output voltage provided by the flow controllers, using a National Instruments PCI 6013 board.

### Data acquisition system

A common data acquisition system (DAQ) is used for testing both MDTs and RPCs of a muon station. Depending on the needs of the user, data can be read either from the MDTs, the RPCs or both simultaneously. Up to three MDT chambers and up to 6 trigger PAD boxes, corresponding to three muon stations, can be read out at the same time.

The DAQ is based on the ATLAS ROD Crate DAQ software [22]; the complete acquisition runs on a set of three PCs and a Concurrent Technologies Single Board Computer (SBC) housed in a VME crate. The operating system for the PCs and the SBC is Linux in the CERN specific release SL3. An additional PC running Windows XP is used for the initialization of the MDT front-end electronics. Figure 27 gives an overview over the DAQ architecture and the purpose of the different processors.

MDT data is received from the CSM of a chamber via an optical fibre by a CERN-built PCI GOLA card [14]. RPC data is received from the PAD boxes by a special VME board known as the RPCRX. Trigger and timing information including the distribution of the \(40\,\mathrm{MHz}\) system clock is handled by two TTC (Trigger Timing and Control) modules, which are a custom-design for the LHC experiments [17]. Events written to disk have the same format as later used in the full ATLAS experiment [23], [24][25], [26]. Event building is done in several stages, shared between the different PCs. More details can be found in [27].

## 4 MDT cosmic ray certification

Certifying the MDT part of a BM or BO muon station with cosmics covers the following points:

1. Connecting the chamber to the test stand services described in 3.3. Checking the chamber pressure. If necessary, bringing the chamber up to 3 bar;
2. A test of the on-chamber temperature sensors and the ELMB;
3. Initializing the on-chamber electronics;
4. Applying high voltage to the drift tubes and checking the high voltage currents;
5. Taking data at the nominal ATLAS high voltage of 3080 V, triggering on cosmic muons;
6. Analyzing the data: 1. Hit profiles, cable maps and dead channels; 2. Noise rates; 3. Pulse charge spectra; 4. Drift time spectra.

Typical data runs have between one and two million events, taken over the course of several hours. If needed, the chamber is flushed before for some time with the nominal gas mixture; this is in particular necessary if initial high voltage currents are too high for a long-term safe operation, or if initial drift time spectra show evidence of a bad gas composition.

Figure 27: Architecture of the BB5 cosmic ray test stand data acquisition.

Based on experience, a minimum of around 100 000 events are necessary for the fits to the ADC pulse charge distributions to converge, while reliable fitting of the drift time spectra requires a higher number of events (\(\stackrel{{>}}{{\sim}}800\,000\)).

### Test of on-chamber temperature sensors and ELMB

MDT temperature sensors are tested as part of the chamber preparation phase, as explained in 2.2.1. Experience however has shown that the cables connecting the sensors to the ELMB become unplugged very easily. All temperature sensors are thus read out again and the values checked for plausibility during the cosmic ray test. In total, roughly 20 cases of un- or disconnected temperature sensors were found and fixed.

In addition to the temperature values of the sensors located on the chamber itself, the temperatures of all mezzanine cards can be read via the ELMB. The same holds for the voltages powering the analogue and digital part of each mezzanine card, after the voltage regulator. Consistency checks on these values are part of the test procedure. Three cases of bad voltage readings were found in the more than 350 chambers tested.

### Electronics initialization

The MDT on-chamber electronics, consisting of up to 18 mezzanine cards and the Chamber Service Module CSM, is initialized via the ELMB of the chamber using a CanBus connection. The JTAG protocol is used. Default parameters used for runs with cosmic muons are shown in Table 2. AMT parameters define the behavior of the TDC, ASD parameter the behavior of the amplifier-discriminator-shaper chips of the mezzanine cards.

After electronics initialization has been completed, the total current supplied to the chamber by the low voltage power supply is checked against the expected value of

\[I_{exp}=0.9+0.375\cdot N_{mezz}\,, \tag{6}\]

where \(N_{mezz}\) denotes the number of mezzanine cards. Any deviation from the expected value by more than 0.2 A is followed by a more in-depth checking of the individual mezzanine cards. No out-of-range currents where found, once the initialization was successful.

### High voltage currents

The internal current drawn by a single drift tube is given by

\[I_{int}=R\cdot\bar{N}_{p.e.}\cdot G\cdot 1.6\cdot 10^{-19}\,\mathrm{C}\,, \tag{7}\]

where \(R\) is the count rate, \(\bar{N}_{p.e.}\) the average number of primary electrons created per event and \(G\) the gas gain. In the absence of a radiation background and for a gas gain of \(2\cdot 10^{4}\), (7) implies

\[I_{int,MDT}<<1\,\mu\mathrm{A}. \tag{8}\]

The total current drawn by a full MDT chamber is

\[I_{tot}=N\cdot(I_{int,MDT}+I_{leak,MDT})+I_{leak,0}\,, \tag{9}\]where \(N\) denotes the number of tubes and \(I_{leak,MDT}\) the leakage current per tube. \(I_{leak,0}\) combines all leakage current contributions not dependent on the tube number, in particular those originating from the high voltage cables and distribution boxes. High voltage current distributions, taken at the standard working point of 3080 V, are shown in Figure 28 for the different chamber types. All multilayer currents are below 1 \(\mu\)A and thus within the cosmic ray acceptance criteria

\[I_{multilayer}<2\,\mu\mathrm{A}\,. \tag{10}\]

Current values were recorded only after the current had stabilized. Chambers showing an initial current above 0.3 \(\mu\)A per multilayer were flushed with the ATLAS Ar:CO\({}_{2}\) mixture for at least 12 hours before taken the final reading. Chambers with initial currents above 2 \(\mu\)A per multilayer were flushed with the high voltage switched off for several hours before putting the voltage back on.

Several different reasons for initially very high currents were found. The most frequent case was a bad gas composition, with either air, too little CO\({}_{2}\) or too much water in the mixture. Flushing the chamber with the correct mixture cured the problem in all instances.

A second effect leading to high currents was the collection of humidity on the high voltage hedgehog boards and cables. This happened in particular in the summer months shortly before, during and after rainy weather. Currents in this case flow outside the drift tubes. We found that such currents in most cases decreased rapidly as soon as high voltage was switched on. For some BOL chambers, flushing the Faraday cage with dry nitrogen was necessary; the use of nitrogen or dry air might also be needed in the ATLAS cavern in case humidity conditions are unfavorable,

\begin{table}
\begin{tabular}{|l|r|r|} \hline Parameter & Default value & Unit \\ \hline \hline AMT Reject Offset & 3955 & clock ticks \\ AMT Trigger Offset & 0 & clock ticks \\ AMT Time Offset & 3995 & clock ticks \\ AMT Event Offset & 0 & clock ticks \\ AMT Search Window & 75 & clock ticks \\ AMT Match Window & 50 & clock ticks \\ AMT Mask Window & 30 & clock ticks \\ \hline ASD Main Threshold & -42 & mV \\ ASD Hysteresis & 8.75 & mV \\ ASD Dead Time & 535 & ns \\ Wilkinson ADC Thresh. & 30 & mV \\ Wilkinson ADC Gate & 18.5 & ns \\ Wilkinson ADC Ramp-down Curr. & 4.5 & \(\mu\)A \\ \hline \end{tabular}
\end{table}
Table 2: Default parameters used for MDT JTAG initialization during BB5 cosmic muon data taking. AMT parameters relate to the TDC, ASD parameters to the amplifier-shaper-discriminator chip of the mezzanine cards. The effective threshold \(V_{eff}\) is the sum of the ’ASD Main Threshold’ and the negative of the ’ASD Hysteresis’ parameter. The given standard configuration corresponds to \(V_{eff}=\) -50.75 mV.

i.e. above 70 to 75% rel. humidity.

Last, several cases of bad cables between the high voltage splitter box and the hedgehog cards were found, both for BMS and (early) BOL chambers. A close inspection of the cables showed a badly done insulation close to the hedgehog side connector, resulting in discharges. Faulty cables were replaced.

### Hit profiles, cable maps and dead channels

Hit profiles are used to check for and identify dead channels. The correct relation between electronics channels, coded in the data written to disk, and the geometric tube position [6] is obtained from a mapping file, which is read by the analysis program.

The hit profile is checked manually for each of the 6 tube layers of a BM or BO MDT chamber. A typical distribution is shown in the top half of Figure 29. The parabola shape is a consequence to the geometrical acceptance of the two trigger

Figure 28: MDT high voltage currents measured during cosmic ray certification for different chamber types, at a voltage of 3080 V. Most BMS chambers were tested before current values were systematically recorded. Data exists thus only for a small number of chambers.

All current values for BOG chambers include a 0.3 \(\mu\)A contribution which stems from a 10 G\(\Omega\) resistor between HV and GND. This resistor ’translates’ the high voltage of the chamber into a low voltage, which then can be measured without danger with the help of a simple voltmeter, or via the DCS in the later experiment.

RPCs of the cosmic ray test stand. Errors in the cabling between mezzanine cards and CSM can be easily spotted, as shown in the bottom part of the figure.

The list of all dead channels found during cosmics data taking is given in Table 3 for the BO and in Table 4 for the BM stations. All instances of channels being dead due to faulty electronics boards or bad connections were repaired.

\begin{table}
\begin{tabular}{|l|c|c c||c|c c|} \hline Chamber & Dead & Mezz - Ch & Chamber & Dead & Mezz - Ch \\  & chan. & & & & chan. & \\ \hline BOS2C02 & 2 & 0 - 1 & 8 - 7 & BOS2C08 & 2 & 2 - 3 & 16 - 1 \\ BOS5A04 & 2 & 5 - 6 & 7 - 7 & BOS5A08 & 2 & 13 - 3 & 13 - 11 \\ BOS6A10 & 2 & 4 - 17 & 10 - 19 & BOS1A02 & 1 & 8 - 13 \\ BOS1C06 & 1 & & 10 - 23 & BOS2C10 & 1 & 7 - 2 \\ BOS2C16 & 1 & & 17 - 10 & BOS3A16 & 1 & 2 - 17 \\ BOS3C02 & 1 & & 1 - 17 & BOS3C06 & 1 & 5 - 9 \\ BOS3C16 & 1 & & 12 - 18 & BOS4A04 & 1 & 4 - 12 \\ BOS4A06 & 1 & & 15 - 23 & BOS4A16 & 1 & 5 - 7 \\ BOS4C16 & 1 & & 0 - 1 & BOS5A16 & 1 & 1 - 21 \\ BOS6A02 & 1 & & 5 - 6 & BOS6A16 & 1 & 14 - 16 \\ \hline \end{tabular}
\end{table}
Table 3: Barrel Outer MDT chambers with one or more dead channels (excl. BOG8).

Figure 29: Hit profile for an MDT tube layer, for correct cable mapping (top) and for a cabling error (bottom).

\begin{table}
\begin{tabular}{|l|c|c||l|c|c|} \hline Chamber & Dead & Mezz - Ch & Chamber & Dead & Mezz - Ch \\  & chan. & & & chan. & \\ \hline BMF1C14 & 4 & 2 - 19 & 3 - 20 & BMF2C12 & 4 & 3 - 18 & 7 - 17 \\  & & 12 - 18 & 16 - 12 & & 7 - 20 & 13 - 17 \\ \hline BMF1A12 & 1 & 14 - 1 & BMF2A14 & 1 & 4 - 21 \\ BMF3C12 & 1 & 8 - 20 & & & \\ \hline \hline BMS1A02 & 1 & 1 - 1 & BMS1C10 & 1 & 5 - 15 \\ BMS2A08 & 1 & 3 - 12 & BMS3A02 & 1 & 9 - 8 \\ BMS3A06 & 1 & 5 - 22 & BMS3C08 & 1 & 3 - 1 \\ BMS3C10 & 1 & 0 - 21 & BMS4A08 & 1 & 0 - 10 \\ BMS4A16 & 1 & 7 - 20 & BMS4C04 & 1 & 9 - 18 \\ BMS5C02 & 1 & 4 - 20 & BMS5C04 & 1 & 2 - 15 \\ BMS6A06 & 1 & 1 - 10 & BMS6A10 & 1 & 5 - 21 \\ BMS6C02 & 1 & 0 - 4 & & & \\ \hline \hline BML2A01 & 4 & 3 - 4 & 3 - 15 & BML2C07 & 3 & 2 - 11 & 5 - 16 \\  & & 5 - 2 & 10 - 15 & & & 12 - 6 \\ \hline BML2A07 & 2 & 2 - 10 & 2 - 14 & BML2C05 & 2 & 11 - 3 13 - 23 \\ BML2C15 & 2 & 13 - 19 & 7 - 19 & BML1A01 & 1 & 7 - 11 \\ BML1C03 & 1 & 1 - 15 & BML2A09 & 1 & 0 - 9 \\ BML2C03 & 1 & 3 - 15 & BML3A15 & 1 & 1 - 9 \\ BML3C01 & 1 & 10 - 19 & BML3C15 & 1 & 1 - 8 \\ BML4A01 & 1 & 0 - 22 & BML4C09 & 1 & 5 - 21 \\ BML6A07 & 1 & 5 - 19 & BML6A09 & 1 & 8 - 7 \\ BML6C07 & 1 & 8 - 4 & & & \\ \hline \end{tabular}
\end{table}
Table 4: Barrel Middle MDT chambers with one or more dead channels.

\begin{table}
\begin{tabular}{|l|c|c c c||c|} \hline Chamber & Dead & Mezz - Ch & Chamber & Dead & Mezz - Ch \\  & chan. & & & chan. & \\ \hline BOF1A12 & 3 & 1 - 19 & 2 - 1 & BOF3A12 & 3 & 5 - 21 & 6 - 17 \\  & & 8 - 1 & & & 12 - 19 \\ \hline BOF1A14 & 2\({}^{*}\) & 10 - 7 & 15 - 16 & BOF5C14 & 2 & 4 - 5 & 10 - 6 \\ BOF7C12 & 1 & 4 - 0 & & & \\ \hline \hline BOL4C01 & 4\({}^{*}\) & 4 - 22 & 4 - 23 & BOL1A01 & 1 & 10 - 6 \\  & & 6 - 1 & 6 - 3 & BOL3A13 & 1 & 6 - 18 \\ \hline \end{tabular} \({}^{*}\)Tubes with cracked end plugs

\end{table}
Table 3: Barrel Outer MDT chambers with one or more dead channels (excl. BOG8).

### ADC pulse charge spectra

MDT mezzanine cards include an ADC, which measures the pulse charge in the leading edge of a signal. The integration time is programmable from 11 to 33.5 ns. Figure 30 shows typical pulse charge distributions for muons, measured during BB5 cosmics data taking, with the electronics settings of Table 2.

MDT ADC spectra are particularly useful in analyzing noise phenomena. Pure electronics noise is characterized by a very small pulse charge, evident from the sharp peak close to zero in the right hand part of Figure 30. Such hits can be eliminated before track reconstruction by a cut on the ADC value. Noise signals due to high voltage discharges on the other hand normally have a non-zero pulse charge.

For all chambers, ADC spectra are analyzed after cosmics data taking. A Gaussian is fitted to the central part of the distribution of each individual drift tube. The center \(Q_{p}\) of the Gaussian and its width \(Q_{w}\) are extracted from the fit; the information is stored in the certification database. Typical \(Q_{p}\) and \(Q_{w}\) distributions are shown in Figure 31.

Figure 31: Distribution of the ADC spectrum peak position \(Q_{p}\) and width \(Q_{w}\) for a typical MDT chamber. Tubes with either of the two parameters differing from their mean by more than 5 standard deviations are flagged during the analysis.

Figure 30: Typical MDT pulse charge distributions for muon signals. The sharp spike at small values in the right plot is caused by electronics noise. During spectrum analysis, a Gaussian is fitted to the central part of the distribution.

The MDT pulse charge information can be used during ATLAS routine operation to improve the space resolution, by means of a time slewing correction [28]. The time slewing correction is easiest if the spread in the amplifier gain between different front-end boards is small. A single correction formula can then be used. During cosmic ray certification, tubes for which either the center of the fitted Gaussian or its width deviate from the mean by more than 5 standard deviations are flagged.

### Drift time spectra

MDT drift time spectra are very sensitive to the operating gas mixture; they are particularly useful during cosmic ray certification to detect anomalies in the gas system of a chamber.

A typical MDT drift time spectrum for operation with the nominal gas mixture at 3080 V is shown in Figure 32.

For each individual tube, the positions of the leading edge, \(t_{0}\) and the trailing edge, \(t_{end}\) are extracted from the distribution; this is done by fitting a Fermi function

\[f(t)=p_{1}+\frac{p_{2}}{1+e^{-\frac{t-t_{0}}{p_{3}}}},\ \ p_{3}>0, \tag{11}\]

to the leading edge and a modified Fermi function

\[g(t)=q_{1}+\frac{q_{2}+q_{3}\cdot t}{1+e^{-\frac{t-t_{end}}{q_{4}}}},\ \ q_{3},q_{4}<0 \tag{12}\]

to the trailing edge [29]. From the fit parameters, the maximum drift time is calculated as

\[t_{max}=t_{end}-t_{0}\,. \tag{13}\]

#### Maximum drift time distributions

The spread in obtained \(t_{max}\) values for the tubes of a well flushed chamber is of the order of a few ns, as can be seen from the left part of Figure 33. Two cases of a blocked gas tubelet, obstructing the gas flow to a tube, were found over the course of operating the BB5 cosmic ray test stand. The problem was detected by the corresponding tube having a maximum drift time differing significantly from the rest of the chamber (Fig. 33, right). The tubelet was replaced in both cases.

Figure 32: Typical drift time spectrum of an MDT operated at 3080 V with a gas mixture containing 93% Argon and 7% CO\({}_{2}\).

A deviation of the drift time spectra of a chamber from the shape shown in Figure 32 regularly observed is caused by a high water concentrations (several 1000 ppm) in the operating gas mixture. Drift times in this case are longer (Fig.34), since the electron velocity in the drift field is reduced. Longer than usual drift time spectra are seen in particular for chambers stored for some time without gas flow before the cosmic ray test.

A second reason for the MDT drift time spectra to be longer than usual is a CO\({}_{2}\) content above the nominal value of 7%. This second case can be distinguished from the case of excessive humidity by analyzing also the pulse height spectra: Water has a very small effect on the gas gain while additional quantities of CO\({}_{2}\) reduce the gain and thus shift the ADC spectra towards smaller values.

#### Bos-6

Unusual \(t_{max}\) distributions were found for many of the BOS-6 chambers (Fig. 35). These chambers are characterized by alignment cut-outs in both multilayers. Drift

Figure 34: MDT drift time spectrum in case of a high humidity content of the operating gas. Drift velocities in this case are slower.

Figure 33: Left: Maximum drift time distribution of a well flushed MDT chamber. The typical spread of obtained values is a few ns. Right: The maximum drift time \(t_{max}\) is very sensitive to obstructions in a tubes gas connection. In the shown case one of the gas tubelets of chamber BOS6C08 was found blocked and subsequently was replaced.

tubes in the cut-out regions are shorter than in the remaining part of the chamber. They are supplied with gas via a separate manifold, which is connected to the main manifold with a flexible stainless steel hose.

A possible explanation for the different maximum drift times observed for the cut-out region is water trapped on the inner surface of the stainless steel hose, with humidity getting from there into the operating gas. This explanation is however disputed, since BOS chambers were pumped out repeatedly before filling with gas, such that any accumulated water should have been removed. For all chambers the difference in \(t_{max}\) disappeared after flushing the chamber at high flow for several days.

## 5 RPC cosmic ray certification

Certifying the RPC part of a BM or BO muon station with cosmics covers the following points:

1. Connecting the chamber to the test stand services described in section 3.3;
2. Flushing the gas volumes with the ATLAS operating mixture for a minimum of 4 hours (\(\geq\)5 volume exchanges);
3. Initializing the on-chamber LV1 trigger electronics (PAD and splitter boxes);
4. A high voltage scan, gradually ramping the chamber voltage up to 9600 V while recording the individual gap currents;
5. Taking data at the nominal ATLAS high voltage of 9600 V and at a threshold of \(V_{th}=\)1.1 V, triggering on cosmic muons;
6. Analyzing the data:

Figure 35: Maximum drift times for chamber BOS6A04. BOS-6 chambers are characterized by an alignment cut-out in each multilayer. \(t_{max}\) values in the regions marked ’1’ and ’2’ belong to tubes located in the region of the chamber’s alignment cut-out. These tubes are shorter than the remaining ones.

1. Hit profiles, dead and noisy channels; 2. Cabling scheme; 3. Correlation between hits in different layers; 4. Correlation between hits in the confirm and pivot plane in case of a BM station.

### High voltage scan

The current versus high voltage behavior of an RPC gas gap provides important information about the gap integrity. High currents can be symptoms of a non-uniform distance between or an uneven inner surface of the bakelite plates forming the gap; the latter can for example be caused by dirt. In both cases, a stable chamber operation may suffer in the long term, due to high voltage discharges. RPC gap currents \(I_{gap}\) can be measured via the voltage drop over a \(100\,\mathrm{k}\Omega\) resistor in each gap's high voltage return line.

RPCs are - different from the MDT case - operated at atmospheric pressure \(p_{atm}\). Changes in \(p_{atm}\) lead to a different gas gain. To compensate for this, the actual voltages supplied to the RPCs are adjusted during cosmic ray testing for both atmospheric pressure and ambient temperature changes, according to

\[V_{set}=V_{nom}\cdot\frac{T_{ref}(\mathrm{K})}{T(\mathrm{K})}\cdot\frac{p}{p_ {ref}}\,, \tag{14}\]

where \(T_{ref}\) = 25\({}^{\circ}\)C and \(p_{ref}\) = 970 mbar.

During the high voltage scan the nominal voltage is increased in steps from 0 to the operation voltage of 9600 V; gap currents are recorded for the following values of \(V_{nom}\) (in V):

\[\begin{array}{ccccc}0&1000&2000&3000&4000\\ 5000&6000&7000&8000&8400\\ 8800&9000&9200&9400&9600\end{array}\]

For passing the cosmic ray test, the condition

\[I_{gap,i}\leq 4\,\mathrm{\mu A/m^{2}}\,, \tag{15}\]

must be met for all gas volumes \(i\) at \(V_{nom}=9600\,\mathrm{V}\).

#### Typical and abnormal current versus voltage behavior

Figure 36 shows a typical current versus voltage curve for an RPC. For voltages below approximately 7000 V the current depends linearly on the applied high voltage: The behavior is ohmic. Once gas amplification sets in (above approximately 8000 V), the current increases exponentially.

A type of abnormal current versus voltage behavior observed regularly is shown in Figure 37: Here for gap number 1, HV side, pivot plane, the current versus voltage curve is dominated over the full voltage range by a linear (ohmic) term. Such behavior is usually due to excessive humidity inside and on the inner surfaces of the gas volume. The excess current disappears in this case after a period of flushing the gas volume with the operating mixture, preferably with the high voltage switched on and at a value of a few kV.

The standard criteria for successfully certifying an RPC is an ohmic current below 300 nA per gas gap at an absolute voltage of 3 kV. This requirement is checked as part of the RPC pre-test procedure described in section 2.4.

Another type of abnormal behavior is shown in Figure 38; here the gas mixture contains air, either due to a leak or due to insufficient flushing of the gap with the operating gas prior to the high voltage scan. Air contamination is characterized by a sudden increase in the gap current around a voltage of 7 to 8 kV.

Figure 37: Ohmic current versus voltage behavior for an RPC gas gap: Gap 1, RO side, pivot plane, shows a current versus voltage curve that is dominated by a linear, ohmic behavior over the full voltage range. Such a behavior is in most cases caused by water adsorbed on the inner surface of the gas volume.

Figure 36: Current versus voltage behavior for a typical RPC (BOL1C05).

#### Gap current results

Figure 39 shows gap current distributions for the different chamber types tested in BB5. Only 5 out of more than 3100 gaps included in the graphs exceed the limit specified in (15). These gaps are listed in Table 5; they were accepted after a careful analysis of the current behavior.

#### Leakage currents

Currents flowing from the high voltage input of an RPC to GND along a path other than the intended one - from anode to cathode across the gas gaps - are known as leakage currents. Leakage currents have the potential to lead to the gradual destruction of a chamber, in particular if they are in the form of high voltage discharges or sparks, or if they occur along very narrow paths such that significant quantities of heat are dissipated into a small volume of material.

Leakage currents at a given voltage can be measured by comparing the current supplied by the high voltage power supply, \(I_{p.s.}\), to the sum of the individual gap

\begin{table}
\begin{tabular}{|l|l|c|c|l|} \hline Station & Plane & Gap & Current & Comment \\  & & & \(\mu\)A/m\({}^{2}\) & \\ \hline BMS6A04 & confirm & RO-L1 & 4.44 & cut-out chamber \\ BMS6A06 & confirm & RO-L2 & 4.08 & cut-out chamber \\  & confirm & HV-L1 & 5.0 & cut-out chamber \\ BML2A09 & pivot & HV-L2 & 4.91 & dominated by ohmic \\  & & & & behavior \\ BML3A13 & pivot & RO-L4 & 4.53 & \\ \hline \end{tabular}
\end{table}
Table 5: Stations for which an RPC gap current exceeds the standard limit of 4 \(\mu\)A/m\({}^{2}\). The comment ’cut-out’ refers to a chamber geometry with holes for the alignment rays; special L-shaped RPC units are used in this case for the construction.

Figure 38: RPC current versus voltage behavior for air contamination of the operating gas. A sharp sudden increase in the gap current occurs between 7 and 8 kV in this case.

currents, \(I_{gap,i}\). The total leakage current of an RPC is defined as

\[I_{leak,tot}=I_{p.s.}-\sum I_{gap,i} \tag{16}\]

for operation at \(V_{nom}\) = 9600 V.

Non-zero leakage currents were observed both for BML and (a few) BOL stations. They could be traced to

* Bad high voltage distribution boxes with current leakage even when not mounted on a chamber. A badly cured resin, used for insulation, was found as the origin, together with a few cases of badly assembled high voltage connectors. 'Leaky' high voltage distributors were found both for BML and BOL chambers; they were replaced.
* Not properly tightened high voltage connections in the on-chamber high voltage distribution (loose connectors).
* Discharges along the edge or around the corner of the gas volume near the gas

Figure 39: RPC gap current distributions for the different chamber types, for operation at \(V_{nom}=9600\) V. Please note the logarithmic scale. The dashed vertical lines correspond to the limit of \(I_{gap,i}\leq 4\,\mu A/\text{m}^{2}\) given in (15).

[MISSING_PAGE_FAIL:46]

2. Shorts between the signal wire and GND. Shorts were traced frequently to badly mounted cable stops (see section 2.3). In the case of \(\varphi\), some instances in which the end of the signal wires touched the metal structure of the RPC at the point where they were crimped to the connector were also observed. This possibility was eliminated by routinely insulating wire ends with a piece of plastic tape, after the problem was seen for the first time.
3. Damaged cables, with the signal path interrupted, either between front-end electronics and splitter/PAD, or between the LV1 trigger boxes.
4. Channels appearing dead due to excessive noise. It is a characteristic of the RPC front-end electronics chip that above a certain rate the output becomes a constant, flat voltage level. This happens in particular if the front-end electronics is oscillating. No pulses are observed any longer, and a sharp increase in the current \(I_{pd}\) drawn on the -2.1 V pulldown voltage \(V_{pd}\) line is observed at the same time. Chambers with 'dead' channels due to front-end electronics oscillations were encountered mainly when first starting the cosmic ray tests in BB5 and before

Figure 40: RPC hit profiles. Only the first hit found for each event and strip is counted. The global shape of the hit profiles reflects – as in the MDT case – the geometrical acceptance and efficiency of the trigger RPCs. In many instances RPC hit profiles however show additional internal peak structures. Dead channels are clearly visible.

improvements18 to the RPC grounding scheme were made. Footnote 18: Among other things equipping planes with cable stops, see section 2.3.
5. Front-end electronics power \(V_{ee}\) or threshold \(V_{th}\) not arriving to the amplifier-discriminator chip. Groups of 8 channels are affected in this case.
6. One or more non-working channels of the front-end electronics amplifier/discriminator chip.

In case of 1. to 3. the problem was fixed during the cosmic ray test. In the few cases of dead channels due to 5., the station had to be dismantled, the RPC unit concerned was opened and the faulty front-end board or connection replaced or repaired. The same was done in case of 6., if more than two channels of the same chip were affected.

Stations showing oscillations of the front-end electronics were returned for further debugging to the RPC pre-test stage.

#### Dead channels - results

Distributions for the number of 'incurable' dead channels per chamber are given in Figures 41 and 42, differentiated according to chamber type.

For BOS and BOL stations, even numbers of dead \(\varphi\)-strips are found far more frequently than odd numbers. This can be understood from the fact that all BOS and BOL RPC planes consist of two RPC units, with the \(\varphi\)-strips of the two units

Figure 41: Distribution of the number of dead \(\eta\)-strips per chamber found during cosmic ray certification, for different station types.

in 'wired-OR'. Certain failures of the front-end electronics chip connected to the strip of one unit, in particular those leading to a short between the signal wire and GND, cause the corresponding strip of the other unit to appear dead as well. From the distributions it can thus be seen that indeeed the major part of \(\varphi\)-failures is of a type affecting both strips of the 'wired-OR'.

The distributions for BMS/F and BML do not show a distinct difference between even and odd numbers of dead strips; this is because for these station types only the wide chambers are built from two RPC units per RPC plane, while the narrow planes consist of a single unit only.

The percentage of dead channels, taking into account the different chamber sizes, is summarized in Table 6; the ATLAS design goal of having no more than 1% of non-working RPC channels per muon station is met.

\begin{table}
\begin{tabular}{|l|c|c|} \hline Station type & fraction of \(\eta\)- & fraction of \(\varphi\)- \\  & channels dead & channels dead \\ \hline BOG & 0.0150 & 0.0122 \\ BOF & 0.0071 & 0.0035 \\ BOS & 0.0104 & 0.0035 \\ BOL & 0.0057 & 0.0019 \\ BMS/F & 0.0056 & 0.0032 \\ BML & 0.0082 & 0.0040 \\ \hline \end{tabular}
\end{table}
Table 6: Fraction of dead \(\eta\)- and \(\varphi\)-strips for the different muon station types.

Figure 42: Distribution of the number of dead \(\varphi\)-strips per chamber found during cosmic ray certification, for different station types.

### Timing plots

A typical time distribution for the hits seen by an RPC when taking cosmics data using the external trigger of the test stand is shown in Figure 43.

Hits form a well defined band in time. The width of the time band - between 25 and 30 ns - is larger than expected from the RPC timing resolution (\(<\) 2 ns [30])and from differences in the signal propagation time depending on muon impact point. This can be understood taking into account that the trigger signal of the cosmic test stand is sent to the LV1 PAD boxes by the TTC module (Trigger and Timing Control, see section 3) only with the next rising edge of the 25 ns system clock.

Examples of non-standard time distributions are shown in Figure 44: The behavior shown in the top plot for channels 8,14, 21, 22 and 31 is typical for noise. Hits are not correlated in time with the trigger signal, caused by a passing muon, in this case. The time distribution is flat.

Figure 43: Typical time distribution for RPC hits in the absence of noise.

Figure 44: Non-standard RPC time distributions. Top: Typical behavior in the presence of noise. Bottom: Timing behavior observed for a large fraction of BOL chambers.

Distributions as the one shown in the bottom plot have been observed for a large fraction of the chambers of type BOL and occasionally for other chamber types. A behavior as the one shown can in principle be explained by after-pulsing, i.e. by multiple hits in the same RPC strip caused by a passing particle. Simple after-pulsing within the same strip has however been ruled out by showing that similar distributions are obtained when including for each event and strip only the first hit in time in the analysis. More insight into this phenomena is expected from cosmics data taking with full sectors of the muon spectrometer in the near future, where both runs under different operating conditions and track reconstruction will be possible.

### Verifying cable maps

One of the most important tasks of the RPC certification with cosmic rays is verifying that the cable mapping is correct. An overview of the cabling scheme from front-end electronics to LV1 PAD and splitter boxes was given in section 1.2.3. A more detailed scheme is shown in Figure 45; the dashed rectangles indicate the position of common cabling errors.

Wrong cable maps cause RPC strips to be connected to different channels of the LV1 PAD than expected. If going unnoticed, tracks with high transverse momentum will be lost in this case in the final ATLAS setup, since their hit pattern is no longer compatible with high-\(p_{t}\) muons; no LV1 trigger signal is thus generated.

The main-tools for checking cabling schemes are correlation plots between the different strip layers and runs with the chamber high voltage switched off for a defined part of the station. Cabling errors regularly encountered are (letters refer to the different error locations shown in Figure 45):

* Swapping of adjacent front-end connectors in the same layer (A);
* Swapping of front-end connectors between the two layers of a plane (B);
* Swapping of the 16- (\(\eta\) and \(\varphi\) pivot) or 20-channel (\(\varphi\) confirm) cables exiting from the spider (C);
* Swapping between \(\eta_{0}\) and \(\eta_{1}\) (\(\varphi_{0}\) and \(\varphi_{1}\)), either at the input to the splitter or the input to the PAD (D);
* Swapping between layers at the input to splitter or PAD (E);
* Permutations in the cables connecting the \(\eta\)-output of the splitter to the PAD (F). Since there are 32 connections for each splitter-PAD pair, the probability for this to happen is relatively high.

Case (F) is different from the others in so far as the cabling scheme between splitter and PAD for \(\eta\)-channels is specific to the cosmic ray test. \(\eta\) splitter-to-PAD cable mapping in the final experiment differs from chamber to chamber, following the different curvature and angle of high-\(p_{t}\) muon tracks according to chamber location. Splitter-to-PAD \(\eta\)-cables were put in place for many chambers only during or after installation, implying that the correct mapping will have to be verified in situ.

Figure 45: Detailed RPC cabling scheme for pivot and confirm planes. Numbers shown next to connecting lines are the number of channels whose signals are carried on the same cable. All cables originating from the RPC front-end go to a board known as ’spider’, which combines them into a single cable for each layer and \(\eta_{0}\), \(\eta_{1}\), \(\varphi_{0}\) and \(\varphi_{1}\).

For pivot planes, the cabling scheme for \(\eta\) and \(\varphi\) is identical. For confirm planes, \(\eta\) and \(\varphi\) differ in the numbers of channels carried per cable connecting spider-to-splitter and splitter-to-PAD. The dashed rectangles drawn in red indicate the position of common cabling errors, as explained in the text.

Figure 46: Correlation between hits in RPC strip panels of the same plane. (1) and (2) show normal distributions, in the absence of any cabling error. (3) corresponds to the case in which the two 16-channel cables exiting the spider are swapped. (5) shows the case where two front-end connectors are swapped. Plot (4) appears almost empty, i.e. events do not contain hits seen simultaneously in both strip layers. In the case shown, \(\eta_{0}\,I_{1}\) was found swapped with \(\eta_{1}\,I_{0}\). The two bottom-right plots (6) for station BML6C13 appear normal; a swap between adjacent front-end connectors was discovered however in \(\eta\) for both layers \(I_{0}\) and \(I_{1}\). This case can not be detected with the help of correlations within a RPC plane alone.

### Correlation plots between strips of the same plane

Correlation plots between the two layers of either the pivot or confirm plane of a muon station are checked routinely for all chambers, both for \(\varphi\)- and \(\eta\)-strips. Examples of correct and abnormal distributions are shown in Figure 46. From the above list of possible cabling mistakes, cases A, C, D and F can be detected, if they involve one of the two layers only.

#### Correlation plots between strips of different planes

For muon stations with two RPC planes (BMS/F, BML, certain BOF and BOG) the correlation between hits in the two planes can be studied. Typical and abnormal distributions are shown in Figure 47.

Correlation plots between pivot and confirm strips are particularly useful to detect swaps between the two layers in a plane (error types B and E of the list given above). For layer 1, the strip order is inverted on the RPC spider boards; it is put back into the correct sequence at the input stage of the PAD electronics. A wrong layer assignment of RPC strips is thus equivalent to a wrong geometry, which is deadly for a correct LV1 trigger decision during ATLAS operation.

A wrong layer assignment causes the correlation plot between pivot and confirm plane to appear 'rotated', with a slope of -1 instead +1, as can be seen in plots (4) and (5) of Figure 47. It is important to note that swaps between layers do not affect the correlation plots between strips within an RPC plane.

#### Layer assignment

As discussed in the previous paragraph, channels assigned to a wrong RPC layer due to a cabling mistake can not be detected with the help of the correlation plots between the two layers within a plane. On the other hand, correlation plots between the pivot and confirm plane do not exist for BOL and BOS stations, neither for certain BOF and BOG chambers. These stations have a single RPC plane only.

A special run, with the high voltage for one of the two layers switched off, is thus taken for all stations. Hit profiles are then checked to verify that the expected channels disappear.

## 6 Other cosmic ray results

### RPC test pulse runs

The LV1 PAD boxes on each muon station contain a circuit which makes it possible to inject test pulses into the RPC strips. The test pulse functionality will play a crucial role in setting up the correct timing of the experiment once chambers are installed in ATLAS. Test pulses are generated at a fixed frequency equal to the LHC orbit frequency of approximately 11 kHz; they are thus correlated to the LHC (system) clock of 40 MHz.

During muon chamber certification, test pulse injection can be used to check the RPC front-end electronics, to detect dead channels and to distinguish between inefficient regions being caused by the gas volumes itselves and those being caused by a malfunctioning of the electronics.

### Time distributions

Figure 48 shows the hit versus time distribution for a \(\varphi\)-strip panel. A regular signal from a pulse generator running at a few kHz frequency has been used as trigger; such a signal seems a-priori independent from the test pulse signal generated by the PAD.

The band observed in the test pulse hits' timing however is a clear evidence for a time correlation between trigger and test pulse signals; this phenomenon can be understood by taking into account the fact that the TTC module receiving the trigger signal from the pulse generator passes it on to the PAD boxes only with the raising edge of the next 40 MHz system clock. Both trigger signal and injected test pulses thus have a fixed phase compared to the clock signal. The time distance between consecutive bands is 25 ns.

Figure 47: Correlation plots between RPC strips in different planes (pivot and confirm). (1) and (2) show normal distributions, in the absence of any cabling error. Plot (3) is based on the same data as plots (6a) and (6b) of Figure 46. Different from there, the underlying cabling error, a swap between adjacent front-end connectors in both layers I\({}_{0}\) and I\({}_{1}\), is visible. (4) and (5) show cases of a wrong layer assignment: \(\eta_{0}\,I_{0}\leftrightarrow\eta_{0}\,I_{1}\) in the former, \(\eta_{0}\,I_{0}\leftrightarrow\eta_{1}\,I_{1}\), \(\eta_{0}\,I_{1}\leftrightarrow\eta_{1}\,I_{0}\) in the latter case.

The deviation of the hit timing distribution from straight horizontal lines is due to slightly different signal propagation times caused by varying cable lengths. They can be compensated for by programming different delay times in the PAD logic.

Figure 48: Test pulse hits versus time for a \(\varphi\)-strip panel of the RPC plane of chamber BOS3C16. The origin of the band structure in time is explained in the text.

Figure 49: Hit distributions for test pulse runs at different threshold \(V_{th}\) for a \(\varphi\)-strip panel of the RPC plane of BOS3C16. Only even strips were pulsed. Please note that larger values of \(V_{th}\) correspond to a lower (‘softer’) effective threshold.

#### Hit profiles versus threshold

Studies have been done applying different threshold voltages to the RPC front-end electronics discriminator, with the particular emphasis on channel to channel cross talk when pulsing the RPC strips. The results are shown in Figure 49.

Pronounced variations in the behavior of different channels are visible: For some channels a threshold of \(1.1\,\mathrm{V}\), the softest threshold in standard RPC operation, is required for test pulse signals to pass the front-end electronics discriminator and register as hits; in other parts of the strip panel odd and thus unpulsed strips have the same number of hits as the pulsed 'even strips', due to channel to channel cross-talk.

#### Analyzing dead channels

Test pulse runs can be used to detect dead channels, by superimposing hit profiles of runs with odd and even strips being pulsed, as can be seem from Figure 50. No high voltage and no connection of the chamber to gas is needed in this case, different from data taking with cosmic muons.

Analyzing both test pulse and cosmics runs provides the means to distinguish between the case where a channel is dead or inefficient due to a broken soldering connection between the strip panel and the front-end electronics board or an electronics problem, and the case where the inefficiency is caused by a problem with the gas gap. In the latter case the test pulse hit distribution is normal.

### Cross talk between RPCs and MDTs

The term cross talk summarizes all phenomena in which a channel of either the MDTs or RPCs records hits which are not caused directly by a traversing ioniziting particle, but are induced by signals in other channels. Cross-talk can occur either within an MDT chamber or RPC plane, or between the MDT and RPC part of a muon station. Any cross talk must be carefully controlled, in order not to endanger the chamber and trigger performance.

Figure 50: Hit distributions for cosmics (top) and test pulse (bottom) data taking. The same dead channels are visible.

Cross talk is particularly dangerous if induced in the MDTs by signals'seen' in the RPCs. Symptoms in this case are

1. An additional contribution to the MDT noise rate;
2. A potential loss of MDT position information: RPC signals are by design fast, they occur within a short time after an ionizing particle traversed the chamber. If such signals induce signals in the corresponding MDTs, the real hit may be lost due to the long dead time of the MDT front-end electronics.

#### Cross talk studies with cosmics data

RPC to MDT cross talk19 was investigated during BB5 cosmic ray certification for a few chambers of each type, to check for potential design flaws and pecularities. During cross talk runs, the RPCs were operated at nominal conditions, with the high voltage switched on. The MDT high voltage was switched off. Under these conditions and when triggering on cosmics, cross talk appears as one or more peak(s) in the drift time spectra, as shown in Figure 51. Different from normal noise, cross talk signals are correlated in time with the cosmics trigger, since they are caused by cosmic muon hits in the RPCs.

Footnote 19: In the remainder of this section, cross talk always refers to RPC to MDT cross talk.

Figure 51: Hit time distributions for two tubes in station BOS6C08 affected by RPC to MDT cross talk. For the two upper plots, the MDT high voltage was switched off. In the lower plots, the MDT high voltage was on; the cross talk is visible as a distinct distortion of the drift time spectrum in this case. The number of events the distributions are based on is different for the top and bottom plots.

#### Results

The following results were found when checking for cross talk phenomena:

* No evidence for cross talk was observed for stations of type BOL, BML, BOF and BOG.
* Cross talk was observed for several BMS stations. Its origin was easily understood: For BMS stations, as for BML stations, cables connecting one of the RPC planes to the LV1 trigger boxes located on the second plane are routed via the region in which the MDT electronics (high voltage and readout hedgehog boards) is located. RPC front-end signals are single-ended and rather large in amplitude; whenever cross talk was observed, it was found that the MDT Faraday cage was not properly closed, leading to pick-up of RPC signals by the MDTs. Removing any gaps in the Faraday cage and ensuring that a good, multi-point electrical connection to the metallic part of the drift tubes existed, eliminated any cross talk in all instances.
* Cross talk was seen for several BOS-6 stations20. In each case, between one and five drift tubes were affected. Footnote 20: BOS6A04, BOS6A10, BOS6A16, BOS6C06, BOS6C08

Figure 52 shows the distribution of reconstructed muon track positions in the two RPC layers for such events in which a cross talk signal was observed in a specific MDTs (mezzanine card 6 channel 20). RPC hits leading to cross talk are spread over the complete plane; in particular no correlation with the MDT location, indicated by the dashed vertical lines, can be observed.

From this it was concluded that the origin of signals induced in the MDTs was not a signal in a close-by RPC \(\eta\)-readout strip (running parallel to the drift tube wires), but rather signals transmitted along either the \(\varphi\)-strips or the RPC cables connecting the front-end electronics to the LV1 trigger boxes. It remains however a puzzle why only certain drift tubes are susceptible to cross talk, while others - located far closer to the RPC cables - are not.

The fact that the induced hits in the MDTs are caused in most cases by muons not crossing the affected drift tube itself, but a different part of the muon station, mitigates the impact of cross talk; in particular, no MDT information of the real track is lost in this case due to front-end electronics dead time.

The five BOS-6 stations for which presence of a cross talk phenomenon was proven were accepted without modification. This decision was reached on the basis that in all cases a small number of tubes was affected only. Studies showed furthermore that no additional channels developped evidence for cross talk when 'lowering' the effective threshold from \(V_{eff}\)=-50 mV to a more ATLAS operations-like value of -42 mV.

## 7 Archiving of results

### MTF database

All equipment installed in the ATLAS experimental cavern is subject to French INB21 regulations. In particular, full tracability of all components is required for radiation protection purposes, once LHC operation has started.

Within ATLAS, components are uniquely identified by a 14 character long string; all pieces of hardware are marked with corresponding bar code labels. Information about the location of equipment, e.g. the list of electronics boards attached to a given muon station, is kept in the MTF22 database maintained centrally by CERN-TS.

Footnote 21: Installation Nucleaire de Base

Footnote 22: Manufacturing and Test Folders

Entering muon station assembly information into MTF forms an important step in the chamber preparation work carried out in BB5 and elsewhere. A set of Web interfaces has been developed for this purpose, simplifying the procedures of attaching, detaching and displaying equipment information. In addition to keeping track of on-chamber components, the database is heavily used to follow chamber movements and logistics in general.

Figure 52: Position of RPC hits having caused an induced cross-talk signal in a specific MDT (drift tube corresponding to mezzanine card 6 channl 20) for muon station BOS6C08.

### Chamber status report

The 'Chamber Status Report' is a Web application written in the Oracle PL/SQL language, designed to provide an easy overview about the status a muon station is in. The application is an example of accessing a distributed database, with information physically stored in four different databases23. The set of databases also holds all procedures of the web application itself.

Footnote 23: ATLAS_MUONCERT, EDMSDB, CERNDB1 and DEVDB10

The top-level display provided by the 'Chamber Status Report' tool is shown in Figure 53; the top level provides quick information whether a particular test has been already performed on a chamber or not, and if there is any additional information stored as a file in the database. HTML links point to a second level which offers a deeper view of each particular test.

For the MDT gas leak test and T-sensor test, raw values are accessible; in case of the MDT noise and cosmic ray test, the link points to the Ammonit web application described in section 7.5; last, in case of tomograph results the summary of the MDT X-ray tomograph analysis is displayed. For the remaining entries currently only the date and time when the test has been performed and the name of the operator are shown.

The user can upload and attach to each test a file of any type. The user authentication system is implemented within the web application, such that users can upload or update test data only for tasks they are responsible for.

### Cosmic ray test report

A standardized test report is created for all BM and BO stations undergoing cosmic ray certification in BB5. The test reports, which can be accessed from the main ATLAS Muon logistics web page [31], contain a sign-off for the individual steps of the test procedure as described in sections 4 and 5, a list with all abnormal channels for both the MDT and RPC, references to any corresponding data- or histogram files, a list of found a corrected bugs and problems and a comment field. Reports are stored in the certification database.

### MDT certification database

The MDT certification database is aimed at storing test results for individual MDT chambers. It is implemented as a set of tables in the central CERN-IT Oracle database. Data stored in the database correspond to results of the MDT leak test,

Figure 53: Chamber Status Report Web application.

the B-field sensor test, MDT noise test and the MDT part of the cosmic ray test described earlier in this document.

The design of the database tables grew in time according to the needs. Therefore each test has its own set of tables. Each set of tables consists of an overview table summarizing the general test conditions, a time stamp and the name of the operator and a table which holds the actual measured values. In addition to these two tables certain hardware information is also stored in the case of the noise and cosmic ray tests, to help debugging hardware problems.

For each test an individual software application exists to upload the test results easily into the database. In order to access data stored in the certification database, a common tool, known under the name Ammonit, has been developed. Details are given in the next section.

### MDT data visualisation using Ammonit

Ammonit is a web application written in Java using a server-client connection in order to retrieve data from the database. This way, the database access is well controlled and the size of the client software is fairly small.

Ammonit offers to search for a certain chamber or a specific test result. It then loads all corresponding data and displays them graphically. It first of all provides some general information about the selected chamber, attached hardware and the layout of the chamber, inlcuding the electronics channel mapping.

The test results can be displayed either as a zoomable histogram (Figure 54) or as a table. In both cases some statistical information can be added. Histograms can be overlayed by other histograms of the same or any other chamber, which makes the comparison of histograms easy.

In addition to ordinary histograms Ammonit provides the possibility to show each histogram as a color code in a chamber sketch. This functionality is especially useful in the search for a dead or noisy channel. An example is shown in Figure 55.

Beside the results from the certification tests described here, Ammonit also grants access to the data of tests performed during the commissioning and installation, which provides the possibility to keep track of the history of one chamber.

## 8 Conclusions

The last24 of the more than 400 ATLAS BM and BO muon stations have been assembled at CERN in November 2006, completing a major activity of the muon community which had been ongoing since summer 2004. Looking back, we can say that the well-defined sequence of tests the various steps in the assembly procedure was crucial to reach the good quality of stations declared'ready-for-installation' and sent to the ATLAS pit.

Both for MDTs and RPCs, the final certification with cosmic rays proved extremely useful in finding problems which would have affected the later operation in the experiment. Results obtained for the first RPCs tested at the beginning of 2005 lead to a number of improvements in the cabling and grounding scheme, and to the introduction of the RPC pre-test.

Footnote 24: with the exception of BOG-8

Last but not least, considerable experience with the ATLAS DAQ system was gained in routinely taking data with cosmic rays. For the RPCs, the BB5 cosmic ray test stand was indeed the first place where the final version of the LV1 trigger electronics could be tested under realistic conditions.

## Acknowledgements

Our special thanks go to Robert Broccard, George Juban, Alain Bode and Katharina Mair for the construction of the cosmic ray test stand. Without their work and expertise, we would never have been able to collect the results presented in this note. We are further grateful to Daniel Fromm, who put the various gas systems together, to William Andreazza for his techncial support, to Jim Cook for his help and advice with the MDT leak test software, to Enrico Pasqualucci for setting up the DAQ for cosmics data taking and to Jeff Gregory for the never-ending story of getting the MDT event building working.

Our summer students, Anne Keune, Ido Musche and Francesca Toglia, have earned a big 'thank you' for having started the statistical analysis of all the test data collected, finally convincing us to get our teeth in earnest into writing up the results in an ATLAS note.

It goes without saying that the work summarized in this note involved and still involves a huge number of additional people. To all of them - be it technicians, engineers, physicists or crane operators - we would like to express our thanks for a good working relationship, an open spirit in 'attacking' problems as well as their perseverance with the many difficulties encountered.

Figure 54: Ammonit tool used to visualize MDT certification data. Data from the various certification tests can be displayed as a zoomable histogram, shown here for the chamber noise rate.

Figure 55: Ammonit tool used to visualize MDT certification data. A color coding is used to plot test results, here the total number of hits per tube for a cosmics run, onto a cross-sectional view of the chamber. Such representations are particularly useful to locate dead and noisy channels.

Summary of muon station certification criteria

The following tables summarize the criteria required for certifying a BM or BO muon station prior to shipment from BB5.

The criteria listed have been systematically applied since autumn 2004 for the MDT leak- and noise- and since summer 2005 for the remaining tests. The full description of the muon station acceptance criteria for cosmic ray testing, as approved by the ATLAS Muon Chamber Completion Steering Group in July 2005, can be found in [32]. For more details on MDT leak and noise test criteria, refer to [13].

_Requirements for passing MDT pre-tests_

\begin{tabular}{|l|l|l|} \hline Quantity & Requirement & Comments \\ \hline \hline Temperature sensor readout & All sensors working & \\ via ELMB and CanBus & & \\ \hline B-field sensor readout & All sensors working & Certain chamber types only \\ via ELMB and CanBus & Field read in presence of small & \\  & magnet as expected & \\ \hline Alignment components & All sensors working & \\  & readout via RasMux ok & \\ \hline Leak rate & \(\leq 2\cdot 10^{-7}\,\mathrm{bar\cdot l/s}\cdot\mathrm{No}\) of tubes & For each multilayer \\  & at \(3\,\mathrm{bar}\) absolute pressure & \\ \hline Noise rate & \(\leq 5\,\mathrm{kHz}\) per tube & For \(V_{eff}=50\,\mathrm{mV}\) effective \\  & & threshold, with HV on \\ \hline \end{tabular}

_MDT requirements for passing cosmic ray certification_

\begin{tabular}{|l|l|l|} \hline Quantity & Requirement & Comments \\ \hline \hline Temperature sensor readout & All sensors working & A maximum of 1 faulty sensor \\ via ELMB and CanBus & & is tolerated in case of inaccessibility \\ \hline Mezzanine card temperature & Voltages and temperatures readable and reported correctly for & \\ \hline Electronics initialization & Initialization without & \\ via JTAG & errors for all mezzanines & \\  & and the CSM; & \\ \hline \end{tabular}

\begin{tabular}{|l|l|l|} \hline Quantity & Requirement & Comments \\ \hline \hline Low voltage current drawn & Within 200 mA of nominal & To be measured after JTAG \\ by CSM and mezzanines & value, calcuated according & initialization \\  & \(I_{nom}=(0.9+N\cdot 0.375)\) A & \\  & for \(N\) mezzanine cards & \\ \hline HV current & \(\leq\) 2\(\mu\)A per multilayer & Currents are typically far lower \\  & at 3080 V operating voltage & (\(\approx\,0.1\,\mu\)A), except during \\  & & periods of high ambient humidity \\ \hline Dead channels & \(\leq\) 2 per chamber & Tubes with broken wires: \\  & No dead channels due to & Wire removed or tubes insulated \\  & faulty electronics; & from HV \\ \hline Channel noise rates & No formal criteria for cosmic & Typical chambers show noise rates \\  & ray certification (rf. MDT & for the majority of tubes below \\  & noise test [13]) & 1 kHz at an effective threshold \\  & & of 50 mV, with a few tubes' noise \\  & & typically being a few kHz. \\ \hline Fraction of unpaired leading/trailing edges & \(\leq\) 5\(\%\) for all channels & Exact value depends on noise rate \\  & & the more noise, the higher the \\  & & number of unpaired edges \\ \hline Channel mapping & Hit profile consistent & \\  & with trigger acceptance & \\ \hline ADC spectrum & All spectra having expected & \\  & Landau shape & \\ \hline TDC spectrum \(t_{0}\) & Within \(\pm\) 5\(\,\sigma\) of mean for & \\  & all channels & \\ \hline TDC spectrum \(t_{max}\) & Within \(\pm\) 5\(\,\sigma\) of mean for & Rather large variations possible \\  & all tubes & in case of pronounced serial gas \\  & & system effect \\ \hline \end{tabular}

_RPC requirements for passing cosmic ray certification_

\begin{tabular}{|l|l|l|} \hline Quantity & Requirement & Comments \\ \hline \hline Gas tightness & No leaks & Qualitative check by checking bubblers in return lines. \\  & & Quantitative measurement as part of RPC pre-test \\ \hline Gap current readout & All gap current monitoring lines & \\  & connected and currents measurable & \\ \hline \end{tabular}

\begin{tabular}{|l|l|l|} \hline Quantity & Requirement & Comments \\ \hline \hline Pulldown current \(I_{pd}\) & Stable and within normal range & Baseline value depending on \\  & at 1.1 V threshold & station type/number of strips \\ \hline LV1 PAD initialization & Initialization successful for all & \\ via JTAG & PADs without error & \\ \hline LV1 splitter initialization & Initialization successful for all & \\ via CanBus connection to & splitters without error & \\ corresponding PAD & & \\ \hline Temperature and voltage & Values readable and within & \\ readout via CanBus connection to corresponding & nominal range & \\ PAD & & \\ \hline Power cycle of splitter LVDS & Successful without errors & Not for stations of type BOG \\ output stages (pigies) & & \\ \hline RPC HV scan & No evidence for air contamination & \\
0 to 9600 V & from current versus voltage behaviour & \\  & \(I_{gap}\leq 4\,\mu\)A/m\({}^{2}\) at \(V_{nom}\)=9.6 kV & \\ \hline RPC HV leakage current & \(\leq 6\mu\)A per station & Since 2006 stricter criteria: \\  & at \(V_{nom}=9.6\,\)kV & \(I_{leak,gap}\stackrel{{<}}{{\sim}}\) 1-2\(\mu\)A \\  & No leakage current from HV distribution & Check moved to RPC pre-test \\ \hline Trigger tower assignment & Consistent with design & \\ \hline Correlation plots between & Consistent with cabling scheme & \\ strip layers & & \\ \hline Dead channels & \(\leq 3\,\)per strip panel; & Rejection of a plane based \\  & No dead channels due to & on distribution of **all** \\  & repairable reasons (bad cables, & dead channels \\  & loose connectors, etc. & \\ \hline HV channel assignment to & Consistent with design & \\ layers/gas volumes & & \\ \hline \end{tabular}

## References

* [1] J. Chapman et al: _On-chamber readout system for the ATLAS MDT Muon Spectrometer_, Proceedings of the IEEE Nuclear Science Symposium, Portland (2003) 454-458
* [2] C. Posch, E. Hazen, J. Oliver: _MDT-ASD, CMOS front-end for ATLAS MDT_, ATLAS Note ATL-MUON-2002-003, Geneva (2002)
* [3] Y. Arai: _Requirements and Specifications of the TDC for the ATLAS Precision Muon Tracker_, ATLAS Note ATL-MUON-97-179, Geneva (1997)
* [4] Y. Arai et al.: _Development and a SEU Test of a TDC LSI for the ATLAS Muon Detector_, Proceedings of the 7th Workshop on Electronics for LHC Experiments, Stockholm (2001)
* [5] P. Binchi: _Chamber service module (CSM1) for MDT_ Proceedings of the 8th Workshop on Electronics for LHC Experiments, Colmar (2002)
* [6] P. Fleischmann, D. Salvatore: _Description of the Tube Mapping for the ATLAS Barrel MDT Chambers_, ATLAS Internal Note ATL-MUON-INT-2006-005, Geneva (2005)
* [7] G. Aielli et al.: _RPC front-end electronics for the ATLAS LVL1 trigger detector_, Nucl. Instrum. Methods Phys. Res., A 409 (1998) 291-293
* [8] R. Cardarelli et al.: _An 8 channel GaAs IC front-end discriminator for RPC detectors_, Nucl. Instrum. Methods Phys. Res., A 432 (1999) 440-449
* [9] N. Hessey et al.: _Cosmic Ray test stand at the LMU Munich_, ATLAS1 Note ATL-MUON-98-266, Geneva (1998)
* [10] O. Biebel et al.: _A Cosmic Ray Measurement Facility for ATLAS Muon Chambers_, ATLAS Note ATL-MUON-2004-004, Geneva (2004)
* [11] H. Boterenbrood, B. Hallgren: _The Development of Embedded Local Monitor Board (ELMB)_, Proceedings of the 9th Workshop on Electronics for LHC Experiments, Amsterdam (2003)
* [12] C. Amelung: _The alignment system of the ATLAS muon spectrometer_, Eur. Phys. J. C 33 (2004) s999-s1001
* [13] M. Berretta et al.: _MDT Commissioning Procedures Guidelines for Certifying RFI Chambers_, ATLAS Note ATL-MUON-2004-022, Geneva (2004)
* [14] W. Iwanski, S. Haas, M. Joos: _A PCI interface with four 2-gbit/s serial optical links_, Trans. Nucl. Sci. 52 (2005), 2861-2865
* [15] M. Barisonzi et al.: _The MROD : the read out driver for the ATLAS MDT muon precision chambers_, Proceeedings of the 8th Workshop on Electronics for LHC Experiments, Colmar (2002)
* [16] R. Avramidou et al.: _Michigan MDT Chamber Integration and Precommissioning_, ATLAS Internal Note ATL-COM-MUON-2005-017, Geneva (2005)
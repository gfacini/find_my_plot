[MISSING_PAGE_EMPTY:1]

Introduction

The ATLAS barrel calorimeter [1] is composed of two half-barrels, each of them containing 16 modules (figure 1).

Placed inside a cryostat, it works at the liquid argon temperature. Each module is made of 64 absorbers and 64 electrodes (figure 2), and weights 3.3 tons. These modules will be assembled one by one, and only six of them will be fully scanned at CERN with an electron beam. So to reach the goals driven by the physics requirements, a complete test procedure has to be developed to qualify all calorimeter modules before starting the experiment. To guarantee a small overall constant term in the energy resolution, the mechanical an electrical characteristics of the detector are carefully monitored. Similar tests are used to qualify the end-cap calorimeter modules.

These tests run in three steps:

* during assembling, we verify that the readout electrodes are not damaged due to their handling (_TBF-1 test_), then we monitor the cleanness of each component (_HV test_), and finally we check the mechanical assembling quality (_capagap test_).
* After cabling of the whole module, at room temperature, we check connections between HV bus and electrodes (_TBF-2 test_), we check if it holds high voltage (_HV test_), and we exercise each cell (_TPA test_).

Figure 1: Half-barrel calorimeter

* These tests are reproduced at the liquid argon temperature to eliminate problems induced by the thermal contraction.

The qualification procedure of the electromagnetic calorimeter modules is performed by a test bench to study the calorimeter behavior at room temperature and at liquid argon temperature, and to obtain a map of all cells.

All informations concerning the modules are saved in a database: it includes the measurements on the absorbers and on the electrodes before assembling and the tests results during assembling and after cabling. Moreover we make the procedure automatic to minimize errors.

## 2 General description of the electrical tests

### Test bench equipment

The test bench is composed of (figures 3 and 4):

* electronic boards to generate several test signals: a low frequency sinusoid (TBF board [2] + MUXCAPA board) and step pulses (TPA board [3]),
* a set of multiplexers (MUX board [4] + MUXCAPA board) to drive the output channels towards the readout system,

Figure 2: Readout electrode

* an interface board between GPIB bus and VME-like crate (IGPIB board [5]),
* a digital oscilloscope to proceed the output signals acquisition,
* a high voltage module (1469 board [6]),
* a precision capacitance [7],
* a PC to control the different boards and devices through a GPIB bus (drivers written with LabVIEW [8] software), and to analyse all the measurements.

Figure 3: Electrical test bench

* a set of cables for each test: lemo cables (10 m), HV cables (10 m), 25 \(\Omega\) and 50 \(\Omega\) Axon cables with ATI connectors (7 m for assembling tests and 4 m + 2 m for cabling tests).

### Electrical continuity test (_TBF test_)

#### 2.2.1 Principle

This test verifies the continuity of the electrical circuit to be sure that the high voltage is distributed everywhere. It checks connectors and resistors chains on the electrodes outer layers. The principle is to send (figure 5) a low frequency sinusoidal signal on the high voltage lines and to read the response from the signal layer by capacitive coupling. The signal amplitude collected on each cell depends on the decoupling capacitance. The capacitive part of the signal is extracted by a careful choice of frequencies to detect any damage in the resistor chain.

Figure 4: Picture of the electrical test bench

#### 2.2.2 Hardware for this test

The sinusoidal signal is provided by the MUXCAPA board. The frequency is programmable between 0.1 Hz and 100 Hz, by step of 0.1 Hz, and the amplitude is about 70 V. Another board, TBF, is used to distribute the signal on the HV lines. It has 16 channels remote controlled by a PC via a GPIB interface. Both boards use the VME mechanical standard. A digital oscilloscope reads the signal coming from the electrodes via a multiplexer, and a PC computes all parameters. The data are compared with reference values.

Figure 5: Electrical continuity test

### High voltage test (_Hv test_)

#### 2.3.1 Principle

This test detects any high voltage problem linked to a cleanness problem. For this, the leakage current of all channels is monitored. It is a test of absorbers, electrodes, and honeycombs cleanness, or any surface default. We can choose the voltage ramp to adapt the charge current. It should not exceed a given threshold (\(<1\)\(\mu\)A per channel and per electrode) to avoid damage on the electrodes.

#### 2.3.2 Hardware for this test

The collaboration has chosen a high voltage board from Lecroy with the characteristics given below:

* programmable DC voltage between 0 and 3500 V,
* independent current measurement for each channel with a precision of 1% for current higher than 10 nA,
* programmable trip for each channel between 0 and 100 \(\mu\)A.

This equipment is characterized by a current measurement threshold particularly low. It is controlled by a PC via a GPIB bus and a GPIB-RS232 convertor [9]. The high voltage cables are connected to a CQHT (SECUrity HT) board to discharge rapidly the whole module in case of emergency.

### Gap thickness measurement (_capagap test_)

#### 2.4.1 Principle

The ATLAS goal is to obtain a constant term contribution of 0.15% from the dispersion of the gap thickness, equivalent to a dispersion of 50 microns for a 4 mm gap. To test the gap thickness uniformity during assembling, we want to measure the gap capacitance with a precision of 0.1%.

#### 2.4.2 Hardware for this test

We use a capacimeter controlled by a PC. It sends a sinusoidal signal on a cell, and it measures the current and the voltage at its terminals to deduce the impedance module and phase. We deduce the distance between two absorbers from the capacitance measurement. To measure automatically all the capacitances for an electrode, we use the second part of the MUXCAPA board which multiplexes the different sectors.

### Cell capacitance measurement (_TPA test_)

#### 2.5.1 Principle

The purpose of this test is to detect cabling errors, and to test the whole calibration chain: boards, cables, connectors,... To do that, we send step pulses on the calibration lines and we record the cells response. The output signal is filtered by software, and the resulting amplitude, linked to the capacitance value, allows to detect the bad channels (grounded cells, short-circuits between channels, excessive cross-talk,...). The principle is described on the figure 6.

#### 2.5.2 Hardware for this test

10 V step pulses with a 2 ns rise time are provided by the TPA board. It has 64 relays remote controlled by a PC via a GPIB interface in order to pulse on calibration harness. The output channels are connected to a multiplexer system, and only one channel at a time is analysed on a digital oscilloscope. The filtering part is done by software. Multiplexers and pulse generator modules use a VME mechanical standard.

## 3 Tests development and measurement results

A more detailed explanation about tests development and the results on prototypes can be found in [10].

### Electrical continuity test during assembling

The main difficulty for this test comes from the output signal summation on the electrodes. During assembling, the channels are summed in \(\eta\) to decrease

Figure 6: Cell capacitance measurementthe number of cables and the measurement time. For the front, we sum 8 channels from sampling 1, for the back, we sum 4 channels from sampling 2 with 2 channels from sampling 3. This summation implies to distinguish an output signal variation proportional to the number of defective channels.

#### 3.1.1 Test condition

The first step is to determine the optimal frequency for this test. We consider only the sampling 1: it is the most complicated case, because this sampling is excited via another sampling.

First we choose a high frequency to obtain a negligible impedance of detector capacitance in comparison to the 1 M\(\Omega\) resistor on the HV bus. We obtain the conditions described on the figure 7.

We suppose that the second HV face is floating. This system is sensitive only to the resistive part of the electrode. However, if a resistor is broken (R1 on figure 7), the capacitance between HV layer and signal layer must decrease. That is why we must be sensitive to the capacitive part.

Figure 7: TBF test at “high” frequency (\(>\) 1 kHz).

At low frequency, we are in the conditions of figure 8.

To test one face at a time, we need to be sensitive to only one HV layer. To do that, the HV bus of the other outer layer is grounded. The typical value for a capacitance of a front sampling channel is \(8\) pF \(\times\) 200. To neglect the 1 M\(\Omega\) resistor in comparison with the impedance of the kapton capacitance, we choose a frequency such as:

\[1/C_{k1}\omega>10^{7}\Omega\Longrightarrow f<10\ \mathrm{Hz}\]

For the front, the output signal is given by the relation:

\[S_{1}=\frac{1}{2+1/jRC_{k1}\omega}E\]

and after simplification:

\[S_{1}=jRC_{k1}\omega E\]

Figure 8: TBF test at low frequency with the other face grounded.

We obtain a linear relation between output signal amplitude and sampling 1 capacitance which is proportional to the number of cells. So in these conditions, we are able to distinguish a defective cell.

#### 3.1.2 Signal variation versus the number of cells

For this measurement, we take the conditions of figure 8. We measure for the sampling 1 the signal corresponding to one strip, then two strips,...until eight strips to reproduce the effect of summation boards in \(\eta\). The result is given on figure 9.

We obtain a linear variation between the output signal and the number of connected strips, as expected. In case of problem, we are able to determine the number of missing cells.

#### 3.1.3 Final configuration

The prototype electrodes have highlighted a real problem concerning the inked resistors. The dispersion of measured values is so high that it is impossible to work with the same frequency on the whole electrode. Moreover, if we use a very low frequency for all channels, the test length can strongly increase. That is why it is necessary to modify the test to be less dependent to the electrode quality. Of course, we must keep the sensibility to the capacitive part but we use a couple of frequencies to extract capacitance and resistance. With such a method, we don't make any approximation anymore, and we keep an automatic test.

Figure 9: Output signal amplitude versus the number of cells at 5 Hz.

### High voltage test

For this test, the inner layer of each electrode is grounded via a 10 M\(\Omega\) resistor on the summation boards. the table 1 summarizes the main used parameters.

An example of charge currents on one electrode is given on figure 10.

These currents are dominated by the decoupling capacitance charge. We have:

\[i_{charge}=\frac{\varepsilon_{o}\varepsilon_{r}S}{e}\times\frac{\Delta V}{ \Delta t}\]

\begin{table}
\begin{tabular}{l l} \hline
**Parameters** & **Typical value** \\ \hline Nominal voltage & 1800 V (in air, humidity \(<\,50\%\)) \\ Voltage ramp & 5 V/s \\ Trip & 17 \(\mu\)A for 1 face (7 sectors) \\ Charge current & \(0,5<I_{avg}<1\)\(\mu\)A per sector (\(\propto\) surface) \\ Leakage current & \(<\) 200 nA after 30 mn for a whole electrode \\ \hline \end{tabular}
\end{table}
Table 1: Main parameters for the HV test.

Figure 10: Charge currents for each sector and for each face versus time.

So the charge current is proportional to the sector surface.

The high voltage software uses a linear voltage ramp. Moreover, a feedback loop on the current of each channel avoid inopportune trips in case of discharge. Above a given threshold, the voltage is stabilized until a significant decrease of the whole currents.

At the nominal voltage, we measure the leakage currents (figure 11).

These currents decrease in about one hour to the detection threshold of the HV system (10 nA).

So this test verifies not only the cleanness of the module (discharge or short circuit during the ramp), but also the electrode inner structure (leakage current).

### Gap thickness measurement

To do this test, we must take into account several constraints:

* there is a big dispersion of resistors values on the electrodes HV layers. So the measured capacitance varies with the frequency. It is necessary to become independent of this resistors effect.

Figure 11: Leakage currents for each sector and for each face versus time.

* we need 532 cables to have a measurement for each individual cell. This solution implies an increase of test duration and money.
* we must use a long cable (\(\simeq 10\) meters) which introduce a parasitic capacitance (100 pF/m). This is not acceptable for precision measurement on cells of several hundreds of pF.

To avoid these problems, we adopt the principles given below:

* we measure the three samplings in the same time (figure 12). In this condition, we are not sensitive to the capacitance variation with frequency.

* we measure the capacitance by sector of \(\Delta\eta=0.2\) to decrease the number of cables.
* we use a four terminal pair configuration to be insensitive to some parasitics effects.
* we choose a frequency of 100 kHz. A higher frequency is not a good choice because our system becomes sensitive to the cables inductive effect.

Figure 12: Measurement of capacitance between electrode and absorber by sector.

### Electrical continuity test after cabling

#### 3.4.1 Principle

In this test, we don't want to test the electrical continuity on the electrodes, but the HV cables and boards. Moreover, in the liquid argon, it is imperative to verify the connections between electrodes and HV boards. Like during assembling, we send a sinusoidal signal on the HV channels and we analyse signals induced by capacitive coupling. Nevertheless, several differences modify the test conditions:

* one HV channel is connected to 32 electrodes in \(\Phi\) on one face and one sector in \(\eta\).
* an output channel concerns one cell, i.e. a sum of 4 electrodes in \(\Phi\) for sampling 2. So our system includes 4 different resistors in comparison to 1 at assembling stage.
* due to the motherboard, each cell is connected to the ground through an injection resistor and an adaptation resistor.

We work on cells of sampling 2 because of the summation in \(\Phi\) by group of 4 instead of 16 on sampling 1, and because of the little capacitance variation in \(\eta\) in comparison with the cells of sampling 3. We obtain the system described on figure 13.

In this configuration, the output signal S depends on kapton capacitances and inked resistors. The main difficulty is due to the big dispersion on these resistors value. We can't work with 2 frequencies to extract resistive and capacitive parts like during assembling. So we must choose a frequency as low as possible to neglect the resistances. But a decrease of frequency causes a decrease of signal amplitude. The measured signals are very noisy and it becomes difficult to detect them. A solution is to use an FFT to extract the fundamental amplitude.

#### 3.4.2 Results

With this method, we look at the linearity between the output signal amplitude versus the number of electrodes. We work at 1 Hz to obtain a phase of \(-\pi/2\). We consider a complete cell and we disconnect successively the electrodes. We obtain the result given on figure 14. We are able to distinguish a missing electrode inside a cell without ambiguity. Moreover, on sampling 2, we have 8 cells in \(\eta\) for a given sector, all of them connected to the same HV channel. So for a given position in \(\Phi\), we calculate the mean value on these8 cells. We obtain a dispersion of about 1-2%, excepted in case of a bad cell with a dispersion of 9%.

With the same test, thanks to its good sensibility, we are able to detect a wrong cabling between the electrode outer layers. On figure 15, we have the amplitude of the output signal versus the cell number in \(\Phi\), for a given sector. The cells \(\Phi_{0}\) to \(\Phi_{5}\) have 4 electrodes, while the cell \(\Phi_{6}\) is empty and the cell \(\Phi_{7}\) has only 1 electrode. The two curves correspond to the two HV layers. The observed difference is due to the difference of the glue thickness between the copper layers.

Figure 13: Electrical continuity test after cabling, for a cell of sampling 2. The detector capacitances are not represented.

### Cell capacitance measurement

The main difficulty for this test comes from parasitic effects at high frequency and the distortion due to signal reflexions. That is why we can't exploit directly the raw output signal. The output signal is averaged in the scope and we save the 250 samples on the PC. We use a numerical filter (CR\(-\)RC\({}^{2}\) filter used in the ATLAS data acquisition) to become independent to the parasitic effects. An example of filtering is shown on figure 16. We measure the amplitude of the filtered signal which depends to the cell capacitance. Our measurement system is calibrate with real capacitors (from 100 pF to 2 nF) measured with a capacitance with a 0.1% precision. The measured values are fitted with a polynom to obtain the capacitance value versus the amplitude after filtering. Then we compare the measured values of another batch of capacitors obtained with our setup and with the capacitance. The results are shown on figure 17. On the right graph, each point corresponds to an average on 20 triggers. We obtain a precision better than 1%.

Figure 14: Output signal amplitude versus the number of electrodes in a cell.

Figure 15: Amplitude of the output signal versus the cell number in \(\Phi\), for a given sector.

### Cross-talk study [11]

This study is done with the same system as previously. We send a step pulse on a cell and we look at the response in the neighbouring cells. We can detect a defective cell and study all kinds of cross-talk in the detector. We can identify the origin of cross-talk coming from electrodes or from electronic boards.

Figure 16: Example of a signal before and after filtering.

Figure 17: Capacitance value versus the amplitude after filtering, and precision obtained using a batch of calibrated precision capacitors.

Different stages of the tests

### Tests during module assembling

To avoid any problem of dust, the assembling of a module is done in a clean room (class 100000). A last cleaning of the absorbers, the electrodes, and the spacers is done before assembling. All the components of a module have already been tested during production. So the goal of these tests is to detect any damage on the electrodes due to a wrong handling during assembling, and any high voltage problem connected to a bad cabling or a bad cleaning. The assembling sequence is as follows:

1. an absorber is installed on a rotating stand.
2. we install successively on it one spacer, two half-electrodes, one spacer, and a new absorber.
3. the last sequence is repeated 3 times (stacking of 4 absorbers per day).
4. each electrode is equipped with temporary connectors and cables for the different tests.
5. test of electrical continuity (_TBF-1 test_) for each face of each electrode.
6. high voltage test (_HV test_) at 1800 V by group of 4 electrodes.
7. gap thickness measurement (_capagap test_) for each gap.
8. the whole sequence is repeated with the next electrodes group (step 2).

With this scheme, we can raise the high voltage on the whole module before the final cabling. An additional gap thickness measurement on the whole module is also done after screwing inner rings.

### Tests at room temperature after the whole cabling

After assembling, the module is dismounted from the rotating stand and transported in the cabling room. The cabling sequence is as follows:

1. we remove all the temporary boards and cables.
2. the front face is then fully cabled: summation boards, motherboards, cables, patch panels.
3. _TPA test_ is performed for the front channels only.

4. a handling frame is bolted to the module and deported from the backbone.
5. the module is rotated by 180\({}^{\circ}\) to cable the outer face: summation boards, motherboards, high voltage boards, cables.
6. _TPA test_ for the sampling 2 and 3 cells and possibly cross-talk measurement.
7. test of the high voltage cabling (_TBF-2 test_).
8. high voltage test at 500 V in air.

The bench is designed to test one half module at a time.

### Tests in liquid argon

After cabling, the module is put in a home test cryostat and cooled at the liquid argon temperature. the last tests stage is as follows:

1. the same series of tests is done in liquid argon to eliminate problems possibly induced by the thermal contraction (_HV test_ at 2000 V).
2. the purity of liquid argon is monitored with an alpha source to detect pollution coming from the module.
3. the home test cryostat is driven by an automat.
4. measurements are done at regular intervals for studying the module stability in time.

The whole tests in the cold are summarized in the figure 18.

Figure 18: Tests at the liquid argon temperature

## References

* [1] The ATLAS collaboration. _ATLAS Liquid Argon Calorimeter TDR_. CERN/LHCC/96-41, 15 December 96.

* [4] F. Molinie. _Dossier de fabrication des cartes multiplexeur pour le test des modules_. SIG-ATLAS-FM-085/97.
* [5] M. Jevaud. _Documentation de la carte d'interface GPIB_. 12 juin 1997.
* [6] LeCroy Research Systems. _High voltage module 1469_. Operator's manual, mai 1996.
* [7] Hewlett Packard. _LCRmetre HP 4284A, manuel d'utilisation_. HP 04284-93000, mai 1991.
* [8] National Instruments Corporation. _Manuel de l'utilisateur LabVIEW_. 321190A-01, janvier 1996.
* [9] N. Massol. _Interface pour commander le module haute-tension 1469P de Lecroy sous Labview_. Note interne, 5 mars 1997.
* [10] N. Massol. _Conception et mise au point de la procedure de qualification du calorimetre electromagnetique a argon liquide du detecteur ATLAS_. These, Univ. de Savoie, avril 2000.
* [11] J. Colas, R. Lafaye, N. Massol, P. Pralavorio, D. Sauvage, C. de La Taille, L. Serin. _Crosstalk in the ATLAS Electromagnetic Calorimeter_. Note interne ATLAS, ATL-LARG-2000-004, 21-02-2000.
Atlas Internal Note

DAQ-No-79

November 03, 1997

**ATLAS LEVEL-2 TRIGger**

**USER REQUIREMIENTS DOCUMENT**

Issue:

Revision:

\begin{tabular}{l l} Reference: & LVL2-URD-1.00 \\ Created: & 02 November 1997 \\ Last modified: & 02 November 1997 \\ Prepared by: & Level-2 Requirements group \\ \end{tabular}

###### Abstract

This document describes the Users Requirements for the ATLAS Level-2 Trigger. A general description of the capabilities required of the Level-2 Trigger is given and specific requirements are listed and classified. Assumptions and constraints on other systems are given. PSS-05 Software Engineering Standards [1] are used as a guide in production of this document but no guarantee of conformity is claimed or given.

## Document Status Sheet

_ATLAS Level 2 Trigger User Requirements Document_**Resue: 1 Revision 0.0 Date: 02 November 1997**

**TABLE OF CONTENTS:**

**Abstract**

**Document Status Sheet**

**Document Change Record**

**Contents**

## 1 Introduction

1.1 Purpose of this document 5

1.2 Scope of Level-2 Trigger System 5

1.3 Document overview 5

1.4 Definitions and acronyms 6

1.5 References

## 2 General description

2.1 System description 10

2.1.1 Trigger/DAQ overview 10

2.1.2 Level-2 processing 10

2.1.3 Resolution and pattern-recognition capability at LVL2 11

2.1.4 Monitoring LVL2 performance 11

2.1.5 Readout buffers (ROBs) 12

2.1.6 Level-1 trigger system (LVL1) 12

2.1.7 Back End DAQ (BEDAQ) and Detector Control System (DCS) 12

2.2 Main capabilities 12

2.2.1 Event selection 12

2.2.1.1 Trigger menu 12

2.2.1.2 Geometrical limits 13

2.2.1.3 Energy and momentum limits 13

2.2.2 Operational modes 14

2.2.3 Partition 14

2.3 Main constraints 15

2.3.1 Input and output trigger rates 15

2.3.2 Error handling, fault tolerance and deadtime 15

2.3.3 Cost 16

2.4 User characteristics 16

2.5 Interaction with other systems 17

2.6 Assumptions 19

2.6.1 Assumptions on LVL2 actions 19

2.6.2 Assumptions on information available _ATLAS Level 2 Trigger User Requirements Document_ & Ref: LVL2-URD-1.0.0

**Issue: 1 Revision 0.0**

**Date: 02 November 1997**

## 3 Specific requirements

3.1 Capability requirements & 21

3.1.1 Event selection criteria & 22

3.1.1.1 Trigger objects and trigger menu & 22

3.1.1.2 Feature extraction for the muon chamber data & 24

3.1.1.3 Feature extraction for the calorimeter data & 27

3.1.1.4 Feature extraction for the TRT data & 30

3.1.1.5 Feature extraction for the precision-tracker data & 31

3.1.1.6 The global algorithm & 32

3.1.2 Performance requirements & 33

3.1.3 Control requirements & 34

3.1.4 Requirements on the output of the system & 38

3.1.5 Monitoring requirements & 40

3.1.6 Test requirements & 41

3.1.7 Error handling requirements & 43

3.1.8 Fault tolerance requirements & 44

3.1.9 Requirements imposed by Readout Buffers & 46

3.2 Constraint requirements & 47

3.2.1 Constraints on LVL2 system & 47

3.2.2 Constraints on Readout Driver and Buffers & 49

3.2.3 Constraints on LVL1 system & 50

3.2.4 Constraints on Event Filter system & 54

3.2.5 Constraints on BEDAQ system & 54

## 4 List of User Requirements

## 5 Appendices

5.1 Appendix A : Acceptance testing and verification plans & 60

5.2 Appendix B : Editorial and Review group & 61

5.3 Appendix C : Document Change History & 62

5.4 Appendix D : Editing tasks outstanding and missing requirements & 63

5.5 Appendix E : Missing Requirements and Constraints

## 1 Introduction

### Purpose of this document

This document attempts to establish the requirements which the ATLAS level-2 trigger system has to fulfil as seen from the viewpoint of the end users and those responsible for the systems and sub-systems with which the level-2 trigger interacts.

### 1.2 Scope of Level-2 Trigger System

The level-2 trigger system is part of the trigger and DAQ system of the ATLAS experiment [2]. The primary data flow connections in the T/DAQ system and connections between level-2 and the control systems are shown in Fig. 1.1

For the purpose of this document, the Level-2 trigger system is considered to comprise the hardware and software for the following items:-

* the interfaces to the level-1 system;
* the interfaces to the read-out buffers;
* the level-2 processing system including processors associated with the interfaces;
* the interfaces to the level-3/DAQ system;
* the interfaces to the Back-end DAQ and Detector Control systems;

The following items are not included for consideration here:-

* a separate URD [3]exists for these;
* these tasks are assigned to the Back-end DAQ [4]

### 1.3 Document overview

A general description of the LVL2 system and related external systems is given in Section 2.1. Some of the main capabilities are discussed in general terms in Section 2.2. Constraints are discussed in Section 2.3. These descriptions do not define system requirements; they are intended to make the requirements listed in Section 3 more easily understandable.

Figure 1.1: Trigger and DAQ system main data flow and control connections to level-2.

#### ATLAS Level 2 Trigger

_User Requirements Document_

The requirements are classified into capability requirements, which describe what the users want the level-2 system to be able to do, and constraint requirements, which place restrictions on how the capability requirements are to be met.

The capability requirements are given in Section 3.1. The constraint requirements, given in section 3.2, include constraints imposed on the LVL2 system and constraints imposed by the LVL2 system on the interfaces with related external systems. The LVL2 system cannot meet its own requirements unless these 'interface' requirements are satisfied by the external systems. The list of capability and constraint requirements is given in section 4.

Section 5 contains a set of appendices covering acceptance testing and verification plans; names of the editorial and review group; a detailed document change history for this version and a list of tasks still outstanding.

### Definitions and acronyms

**Backend DAQ System (BEDAQ)**:

an external system used to set and log the status of the LVL2 system.
**Candidate object:**:

entity to be considered against the criteria for trigger objects.
**Data Acquisition System (DAQ):**:

system external to LVL2 responsible for the permanent storage of data from events

accepted by all three levels of the ATLAS trigger system and data generated within the

trigger system.
**Detector Control system (DCS)**:

the system responsible for the control and monitoring of the hardware of ATLAS.
**Event builder (EB):**:

part of the Event Filter/DAQ system that usually collects full information from all parts

of all detectors, for a given bunch crossing. Only partial collection may be necessary for

certain classes of LVL2 accept. This operation occurs after acceptance of an event by

the LVL2 trigger.
**Event Filter (EF)**:

the third level of event selection, responsible for reducing the data volume to a value

acceptable for permanent storage (\(\sim 100\) Mbytes/s).
**Farms of processors:**:

multiple processors operating in parallel on different events, or on different parts of an

event, under control of a supervisor. Their use is made necessary when the realisation

of algorithmic tasks in a single processor introduces computational delays longer than

those allowed by the desired repetition rate of the tasks.

_ATLAS Level 2 Trigger User Requirements Document_ & **Ref: LVL2-URD-1.0.0**

**Feature extraction:**:

local algorithm parts encountered in decomposing level-2 algorithms; typically restricted to a region of interest and to a single detector system, feature extraction converts raw data to 'features', such as physics parameters for energy clusters or track candidates, and quality numbers like chi-square or hit counts.
**Global Processing:**:

the execution of algorithm parts encountered in decomposing level-2 algorithms; global algorithms combine multiple local features so as to obtain a final decision.
**Level 1 system (LVL1):**:

the first level of selection, responsible for reducing the trigger rate from the beam-crossing rate to no more than 75 kHz averaged over short time periods (e.g. 10ms).
**Level 2 system (LVL2):**:

the second level of event selection, responsible for reducing the trigger rate from 75 kHz to a level acceptable to the Event Filter system.
**Local Level 2 Control System (LL2CS):**:

a system internal to the LVL2 system used to control individual LVL2 partitions for test or stand-alone operation.
**Local Level 2 DAQ (LL2DAQ):**:

a system internal to the LVL2 system, controlled by the LL2CS, and used to collect data from an individual LVL2 partition during test or stand-alone operation.
**Local Processing:**:

(see Feature Extraction)
**Network:**:

a medium over which data or commands can be transmitted from a number of sources to a number of destinations.
**Overall Level 2 Control System (OL2CS):**:

a system internal to LVL2 used to supervise more than one local level 2 control systems.
**Overall Level 2 DAQ (OL2DAQ):**:

a system internal to the LVL2 system used to collect data from more than one local level 2 DAQ system.
**Partition:**:

one or more sub-divisions of the LVL2 system co-operating together and having its own control system and its own local DAQ system.

_ATLAS Level 2 Trigger_

_User Requirements Document_

**Preprocessing:**

preparatory local transformations necessary to convert raw data in the readout buffers to a format and content better suited for processing in level-2 algorithms.

**Primary Region of Interest (PRoI)**

a region of interest identified as a probable contributor to the LVL1 trigger acceptance decision.

**Raw Data :**

data as received in the readout buffer from the readout driver.

**Readout Buffer (ROB) [3]:**

the units which receive raw data as transmitted by detector frontend systems and keep them in memory until no longer needed by other sub-systems (e.g. Level-2, Event Filter).

**Readout Driver (ROD) [7]:**

the most downstream functional unit of the frontend electronics, which communicates directly with the readout buffer; its typical tasks are the collection of information from multiple frontend sources onto a single high-bandwidth link, the adaptation of data formats, and the addition of bunch crossing and LVL1 trigger number information.

**Region of Interest (RoI):**

a region limited in eta and phi, indicated by the level-1 trigger to contain candidates for objects requiring further computation. In the case of B-physics triggers at low luminosity, RoIs may also be defined internally within the level-2 trigger system.

**RoI Builder:**

a unit inside level-2 which uses level-1 information to identify regions of interest and formats the information for level-2.

**Run Control System (RCS):**

External system which provides a user interface for entering commands and for problem diagnosis.

**Secondary Region of Interest (SRoI)**

a region of interest which probably did not contribute to the LVL1 accept decision (e.g. too low an energy for the accepted trigger objects)

**Supervisor:**

the unit which controls the overall data flow and the allocation and status of processors.

**Tagging:**

operational mode where the LVL2 process is followed, the results appended to the data stream but no event selection is made.

_ATLAS Level 2 Trigger_

_User Requirements Document_

**Throttle:**

a means to reduce or inhibit data input to or from the level-2 trigger system.
**Trigger item:**

an entry in the trigger menu defining one set of trigger conditions and based on the detection of one or more trigger objects.
**Trigger menu:**

the list of all the Level 2 trigger items thus defining the event selection criteria.
**Trigger object:**

entity corresponding to muon, electron, gamma, single hadron, jet, or missing Et.
**TTC (Timing, Trigger and Control) system [8]:**

system for distribution of timing, trigger and control signals. The system delivers standard signals (e.g. LHC clock, LVL1 accept, Bunch Counter reset (BCR), Event Counter Reset (ECR), etc.) and permits the distribution of detector specific commands and data.

### References

* [1] Software Engineering Standards, C. Mazza et al., Prentice Hall, 1994.
* [2] ATLAS Technical Proposal
* [3] ROB-URD-V1.0.0 Readout Buffer for the ATLAS Experiment at LHC. User Requirements Document.
* [4] BEDAQ URD [http://atddoc.cern.ch/Atlas/DaqSoft/document/draft_1.html](http://atddoc.cern.ch/Atlas/DaqSoft/document/draft_1.html)
* [5] DCS URD
* [6] event filter project definition doc : [http://wwwcn1.cern.ch/ftouchar/URD.html](http://wwwcn1.cern.ch/ftouchar/URD.html)
* [7] ATLAS DAQ note 49, 23 Jan 1996, Atlas Trigger-DAQ Steering Group Trigger and DAQ Interfaces with Front-end Systems: Requirements Document
* [8] Timing, Trigger and Control (TTC) system, [http://www.cern.ch/RD12](http://www.cern.ch/RD12)
* [9] ATLAS DAQ note 54, Trigger Performance Group ATLAS Trigger menus at Luminosity \(10^{33}\)
* [10] ATLAS DAQ note 60, Dec 1996, Trigger Performance Working Group Trigger Algorithms in ATRIG version 1.30
* [11] ATLAS CORE costing
* [12] ATLAS DAQ note 62, 27 Jan 1997, R.K. Bock and P. LeDu. Detector and Readout Specifications, and buffer-RoI relations, for the level-2 trigger demonstrator programme. (see also Interface to Detectors : [http://atddoc.cern.ch/Atlas/DetfeIf/Welcome.html](http://atddoc.cern.ch/Atlas/DetfeIf/Welcome.html))
* [13] F/E DAQ summary doc and workplan : [http://atddoc.cern.ch/Atlas/FrontEnd/Welcome.html](http://atddoc.cern.ch/Atlas/FrontEnd/Welcome.html)
**Abstract**

A double-sided silicon strip module has been designed for the short-strip barrel region of the future ATLAS inner tracker for the High Luminosity LHC. University of Geneva and KEK have produced first module prototypes with common components and similar assembly procedures and jigs. This note reports on the electrical performance of the modules tested. The data acquisition system is described. Results from individual and combined module readout are shown.

###### Contents

* 1 Introduction
* 2 Principle of the front-end calibration
* 3 Module set-up
	* 3.1 Data Acquisition System
	* 3.2 Module adapter board
	* 3.3 Hybrid temperature reading
	* 3.4 High-voltage
	* 3.5 Single module test-box
	* 3.6 Complete set-up
* 4 Software
	* 4.1 LabVIEW classes
	* 4.2 Configuration files
	* 4.3 Scripted generation and multi-record acquisition
	* 4.4 _S-curve_ fit
* 5 Single module test results
	* 5.1 Leakage current
	* 5.2 Characterization analog tests
	* 5.3 Strobe Delay
	* 5.4 Trimming
	* 5.5 Gain and input noise
	* 5.6 Noise occupancy
	* 5.7 Linear analog voltage regulator
	* 5.8 40/80 MHz clock-rate readout
	* 5.9 DC-to-DC conversion.
* 6 Combined module test results
	* 6.1 Thermal measurements
	* 6.2 Electrical results
* 7 Summary
* 8 Acknowledgements

## Appendix A XML configuration file
* B Dynamic generation/acquisition state diagrams
* C TrimDAC step
* D Input noise
* E DC-to-DC conversionIntroduction

A two-phase upgrade scenario is planned in ATLAS to optimize the experiment for increased LHC luminosities. The Insertable B-Layer (IBL) [1] will be installed during the long shutdown foreseen in 2013-14. The IBL has been designed to stand a peak instantaneous luminosity of \(3\times 10^{34}\,\mathrm{cm}^{-2}\mathrm{s}^{-1}\) and an integrated luminosity of \(550\,\mathrm{fb}^{-1}\) during the so-called LHC Phase I (from 2016 to 2020). After that, a completely new inner tracker will be installed in \(\sim\)2022-23. During the LHC Phase II (High Luminosity LHC), the peak luminosity will be raised up to \(\sim 5\times 10^{34}\,\mathrm{cm}^{-2}\mathrm{s}^{-1}\). The target is to collect \(3000\,\mathrm{fb}^{-1}\) at the end of the LHC lifetime.

Although the final layout of the new ATLAS inner tracker has not been fully decided yet, it is expected to be an all-silicon based tracker. Its design must be optimized to ensure good tracking capabilities, with high efficiency and low fake-rate, within an environment of large particle multiplicity. New sensor and front-end electronics technologies are being developed with basic requirements of good radiation tolerance to very high fluences and high segmentation to ensure a low detector occupancy. The current benchmark layout [2] for the new ATLAS barrel inner tracker assumes four or five pixel layers at inner radii and five strip layers (three short and two long-strip layers) at outer radii.

A double-sided silicon microstrip module is proposed to be used for the short-strip region of the future ATLAS inner tracker. Its design has been justified and described in detail in [3]. This note reports on the electrical results of the first prototype modules built by the University of Geneva and KEK. Firstly, the calibration procedure of the Front-end (FE) electronics and the basic tests that are used to evaluate the module electrical performance are described in section 2. Then, the different components of the set-up are presented in section 3. The software developed for the module readout is explained in section 4. In section 5, results from single module testing are shown. Up to four modules in a common test-box have been tested simultaneously; the result of this combined module test are collected in section 6. Finally, a summary is given in section 7.

## 2 Principle of the front-end calibration

The current prototype of the Atlas Binary Chip Next front-end (FE) chip (ABCN-25) is a 128 channel ASIC produced in 0.25 \(\upmu\)m bulk CMOS technology [4]. It implements a binary readout architecture and includes both analog and digital stages. For each input channel, the analog block comprises preamplification, shaping and differential discrimination. The main digital blocks are the input register, the pipeline, the derandomizer buffer, the command decoder, the readout buffer and the data compression logic. The length of the digital pipeline is 256 bits (6.4 \(\upmu\)s latency time).

The discriminator is used to discard signals with an amplitude not exceeding a given threshold. The discriminator threshold is common for all channels within the chip and it is set as a differential voltage adjustable by an internal DAC with 8-bit resolution. To compensate for channel-to-channel threshold variations (each channel has a particular offset of its discriminator with respect to the common threshold), a 5-bit DAC (TrimDAC) is used to set an individual threshold correction for each channel, guaranteeing uniformity across the chip.

The calibration of the FE is made by injecting test charges into the analog circuitry. Each channel has an internal calibration capacitor connected to its input. A specific command triggers the generation of a pulse that simulates a hit in a strip (equivalent to the charge collected after the passage of a charged particle through the silicon sensor). Both the amplitude and the delay of the calibration pulse with respect to the clock phase (the relative delay of the rising edges) are controlled by a specific register (CalDelay) of the ABCN-25 chip.

The electrical performance of a module is evaluated by analyzing the data coming from parameter scans. In a scan, a parameter is varied according to a defined range and step. The most commonly used is the _threshold scan_: the discriminator threshold is varied and a fixed calibration charge is sent many times at each threshold point1. The hit occupancy (normalized count rate) is then determined as the fraction of input signal pulses exceeding the threshold. Ideally, the hit occupancy would follow a step distribution, but in reality the distribution is smeared by the electronic noise. Fig. 1 illustrates a threshold scan in which a calibration pulse is convoluted with a Gaussian-distributed electronic noise. Assuming the input charge distribution is described by a Gaussian probability distribution function \(f(x)\) of mean \(\mu\) and variance \(\sigma^{2}\), with \(x\) being the calibration signal amplitude, then the probability \(p(\tau)\) that the signal is larger than a given threshold \(\tau\) is:

Footnote 1: In fact it is the combination of the calibration pulse followed, a certain number of clock cycles after, by a L1 command (to trigger the data readout) which is sent at each threshold value.

\[p(\tau)=\int_{\tau}^{\infty}\!f(x)\,dx\propto\int_{\tau}^{\infty}\!\exp\left[- \frac{(x-\mu)^{2}}{2\sigma^{2}}\right]\,dx\propto\text{erfc}\left(\frac{\tau- \mu}{\sqrt{2}\sigma}\right) \tag{1}\]

where erfc is the complementary error function. Hence the resulting occupancy-versus-threshold curve is so-called an _s-curve_ (as due to the characteristic s-shape of the erfc function). The threshold at which the occupancy is 50% is called the \(vt_{50}\) point, and it corresponds to the input charge amplitude (_i.e._ the mean value of the Gaussian distribution). The width of the distribution gives a measurement of the noise amplitude at the discriminator output. The threshold difference between the 16% and 84% hit occupancies corresponds to \(2\sigma\).

Figure 1: Illustration of threshold scan. The threshold \(\tau\) is varied in steps and a calibration pulse is injected a certain number of times at each threshold point. The total input signal results from the convolution of the calibration pulse and some electronic noise that is described by a Gaussian distribution function. For a given threshold \(\tau\), the hit occupancy corresponds to the fraction of signals above the threshold (dashed area).

Module set-up

### Data Acquisition System

The Data Acquisition System (DAQ) is based on the National Instruments (NI) 6562 [5] card, a 16-channel digital Low Voltage Differential Signaling (LVDS) High-Speed (HS) Input/Output (I/O) device, available in either PCI or PXI formats. The NI-6562 has a maximum sample clock frequency of 200 MHz, and can operate in either single-data rate (SDR) with per-channel direction control or in double-data rate (DRM), in which case channels 0 to 7 are reserved for generation and 8 to 15 for acquisition. The maximum data rate is 400 Mb/s in DRM. The front-panel of the PXI NI-6562 card is shown in Fig. 2.

The Sample Clock is the primary timebase for the digital waveform generator/analyzer. This clock controls the rate at which samples are acquired or generated (each period is capable of initiating the acquisition or generation of one sample per channel). The clock source for the Sample Clock can be a signal coming either from the internal On-Board or from an external clock-source through the CLKIN SMB front-input. Because of the pipelined architecture of the NI device, whatever clock source used, must be continous, free-running and of a constant frequency for the duration of the generation and/or acquisition operation. It can be exported to either a specific line in the DDC Infiniband connector or to the CLKOUT SMB connector. The frequency range for the On-Board clock of the NI-6562 card is 48 Hz up to 200 MHz, configurable as 200 MHz/\(N\), where \(N\) ranges from 1 up to 4,194,304.

In SDR, every channel can be configured independently for static/dynamic generation/acquisition operations. Static operations are software-timed (non-clocked) operations in which the configured channel is set to a specific logic state. Dynamic generation/acquisition are clocked operations in which the data can be complex digital patterns synchronous to any of the clock sources. In order to generate commands that can be interpreted by the ABCN-25 front-end (FE) ASICS, specific data-patterns are stored to the device on-board memory as named waveforms (_i.e._ ordered array of samples). Waveform-naming allows to delete/recall them easily, and even to group several waveforms into complex scripts for generation operations. When the generation session is closed, the waveforms are automatically removed from the on-board memory.

The NI6562 device has up to four trigger lines (Programmable Function Interface or PFI lines), three (PFI1-3) in the DDC connector and one (PFI0) in the SMB terminal. The PFI lines can be used for input external triggers or for output device events. The admitted trigger types are _Edge_ (falling or rising), _Level_, _Pattern-match_ and _Software_. The PFI lines in the DDC connector only support LVDS signals; PFI0 on the SMB terminal can be configured for TTL or CMOS external input triggers.

### Module adapter board

A module-adapter-board (MAB) has been designed to route the LVDS signals between the module hybrids and the DAQ system, to drive both the low-voltage (LV) to the FE chips and the high-voltage (HV) to the silicon detectors. A picture of the MAB card is shown in Fig. 3.

Figure 2: The PXI NI-6562 front-panel, with three SMB jacks (CLKIN, PFI0 and CLKOUT) and one 73-pin digital Data & Control (DDC) 12x Infiniband connector. See text for further details.

The MAB card has been produced as a six-layers PCB, with two 0.8 mm surface-mount Samtec connectors on the top and bottom sides of the card. In addition, the MAB implements several high speed differential one-to-eight LVDS signal data/clock distributors (fanout of clocks, hard-reset, token, L1 and command signals) and LVDS cross-point switches (Data/LDO selection). A DIP switch is used to set the appropriate levels to the hybrid static lines: _ClkMode80_ (configuration of the ABCN readout clock at 40 or 80 MHz), _Select 0/1_ (selection of clock and command inputs for hybrid columns 0/1), _ShuntDisable_ (control of the ABCN Shunt Regulator "W"). The DIP also allows to select the input source for the readout data-clock.

Both LV analogue and digital inputs have been included, so that chips with or without internal regulation enabled can be tested with the same board. The HV bias is driven through a single coaxial connector to both detectors. Therefore, and unless stated otherwise in this note, the current measured at the module level using the MAB card corresponds to the sum of the two (top and bottom) silicon sensors.

### Hybrid temperature reading

Each hybrid is equipped with a NTC thermistor (103KT-1608-1P). The temperature is monitored with a system based on the NI-USB6009 OEM board [6] (see Fig. 4), a device that provides eight analogue input channels with a 14-bit differential resolution (in the range \(\pm 10\) V) and 48 kS/s sample rate. The corresponding temperature resolution is 0.05 \({}^{\circ}\)C. A custom-made mezzanine board, plugged into the NI-USB6009 OEM board, is used to route the signals coming from two IDC connectors. The whole is imbedded into a holding case. The system is interfaced with a PC via USB. A simple LabVIEW application is used to acquire, plot and save the temperature data.

### High-voltage

For the high-voltage (HV) power supply, an iSeg HV module is used. The iSeg ECH224 crate (see Fig. 5a) has 4 slots for 6U Eurocard format (\(\nicefrac{{1}}{{2}}\) - 19" width, 320 mm depth) multi-channel HV modules. Its total power is 130 W and integrates fan cooling. Three high precision 8-channel high voltage EHS 8210n-F modules (ee Fig. 5b) have been installed in the crate. Each single channel is independently controllable with voltage and current control. The outputs RTN - floating HV- GND - and HV of each

Figure 3: Module adapter board (top-side). The dimensions of the card are \(133.4\times 88.9\) mm\({}^{2}\).

channel float against each other and against ground. The HV output per channel is made through isolated built-in SHV connectors. Two potentiometers located in the front panel of each HV-module are used to set the global (for all channels) hardware voltage (current) current limit factor, defined as the relative fraction (expressed as a percent) of the nominal output voltage (current) for each channel. An absolute hardware current limit of 3 mA is set.

A CAN to USB interface (see Fig. 6) from _PEAK System_ (namely PCAN-USB) provides one CAN channel for the PC via a USB port. The adaptor provides one high-speed CAN channel (ISO 11898-2) compliant to CAN specifications 2.0A and 2.0B. The connection is made via a 9-pin D-Sub male connector on the front-panel of the crate. PCAN-USB uses the PHILIPS SJA1000/82C251 CAN controller

Figure 4: National Instruments USB-6009 OEM. The dimensions of the card are \(83.9\times 57.2\) mm\({}^{2}\).

Figure 5: (a) iSeg ECH224 crate. (b) EHS 8210n-F 8 channel module.

the hardware and is used to monitor the HV-modules and to perform IV-measurements.

### Single module test-box

After assembly and bonding, the module is placed inside an aluminum test-box designed to provide a light-tight environment including a cooling channel (aluminum pipes of diameter 4.2 mm). The test-box is used to verify the hybrid electrical functionality and to thouroughly study the module electrical performance. The test-box (see Fig. 7) consists of a main frame with two aluminum cooling-blocks and a support frame (that can slide trough lateral rails) for the MAB card. The module is positioned inside the test-box by means of four fixing screws tighting the AlN facings to the cooling-blocks.

The box has been designed to be flexible enough for the cooling-blocks to be exchangeable in case of a different cooling loop being used (_e.g_ change from liquid to gaseous coolant). Two T-shaped clamping pieces tighten the cooling tube to the overall frame. Again, the latter clamping pieces can be replaced in the future if the diameter of the cooling loop is modified. Nitrogen or dry-air can be flushed through an inlet connector to reduce the relative humidity inside the box.

Each of the four module hybrids is connected to the MAB card by means of a flex pigtail-extender, consisting in two individual copper/kapton flex circuits stacked together and sharing the same connector at each end. The pigtail-extenders are required to overcome the external aluminum frame of the module test-box (see Fig. 8). Fig. 9 shows a complete module installed in the module test-box, including hybrid pigtail-extenders and the module-adapter-board.

### Complete set-up

A schematic of the complete set-up for single module testing is sketched in Fig. 10. A LV power supply (PS) is used to power the module FE electronics and the iSeg HV PS provides the bias for the silicon sensors.A Huber chiller is used for the cooling. The NI-6009OEM board is connected to a control PC through USB for temperature monitoring. An intermediate board (without any passive component) is used to adapt the LVDS signals from the Infiniband connector of the NI-PXI6562 board to a 20 twisted-pairs flat cable with IDC connector for easier handling.

Figure 6: USB to CAN interface from _PEAK-System Technik GmbH_ (PCAN-USB).

Because the PXI is based on the industry-standard PCI bus, the master/slave implementation is made through a MXI-4 high-bandwith link, a technology that allows transparent control a PXI system from any PCI-slot (PCI-to-PCI bridge architecture). The configuration consists in a PCI MXI-4 card in the PC and a PXI MXI-4 module in the controller slot of the PXI-crate. The control commands and module data are then transfered through an electrically-isolated fiber-optic data link capable of 1.5 Gbit/s serial data rate.

A single NI-6562 board is used to calibrate a fully-populated double-sided silicon module (4 hybrids, 80 ABCN-25 chips). Ten of the sixteen available I/O channels (in SDR mode) are used (two per hybrid for data readout, one for the Hard-Reset static signal and one for sending commands). The L1 trigger signal is sent through the command line. An additional dynamic generation channel is required for double-clock mode operation. The full DAQ system as presented in this note consists of a PXI crate with four NI-6562 boards, thus allowing the testing of up to four modules simultaneously.

Figure 7: (a) Single module test-box (without top and bottom covering lids). (b) Detail of one exchangeable cooling-block. (c) Detail of one end of the cooling channel with a fixing T-shape clamping piece.

Figure 8: Detail of the single module test-box in the region of the hybrid flexes. The pigtail extenders are used to drive the LVDS signals between the MAB-card and the hybrids.

Figure 9: Double-sided silicon strip module mounted in test-box (top-side shown).

Figure 10: Complete set-up for single module testing.

Software

The software used for the DAQ as presented in this note, called ABCNIDAQ hereafter, has been developed using the National Instruments LabVIEW Professionnal Development System. LabVIEW is a graphical dataflow language in which graphic function blocks are wired on a diagram and the code executes according to the rules of data flow instead of the more traditional procedural approach of other programming languages. The main benefits are a reduced development cycle until a working application and a natural implementation of automatic parallelization (a common design pattern is a Producer/Consumer flow implemented by means of a queue).

LabVIEW programs are called Virtual Instruments (VIs). Each VI has a front panel (containing controls and indicators), a block diagram (with the source code), and an icon representing the programming element. The icon, which is a visual representation of the VI, has a connector pane for the inputs and outputs in the data flow. The ABCNIDAQ application contains \(\sim\)500 VIs, organized in \(\sim\)30 LabVIEW libraries (llb). Each library is a single binary file that contains several VIs grouped in terms of their related functionality. A few VIs are defined as top-level (only one allowed per library) and serve as a graphical interface for user interaction; the rest of VIs are used as subroutines within the application, coded to perform specific tasks. The ABCNIDAQ code is managed with the Subversion (SVN) software revision control system and it is stored in a repository [7] hosted by the IT-CERN Central SVN Service.

### LabVIEW classes

The basic data structures of the ABCNIDAQ system have been coded as specific classes in an Object-Oriented programming approach. Fig. 11 shows a Unified Modeling Language (UML) diagram of the classes and their relationships as defined in the software code. The class hierarchy roughly follows the organization of the system in terms of hardware components. The different classes are:

* ConfigData: top class of the application.
* LSDIO_Card: class abstraction of the NI PCI/PXI 6509 card [8], a device containing 96 TTL/C-MOS digital I/O channels. This card is used to set static levels during tests of single ABCN25 chips mounted on prototype PCBs (not required for module testing).
* HSDIO_Card: class abstraction of the NI PCI/PXI 6562 card (see section 2.1). The class attributes allow to configure the card identifier, trigger type, generation/acquisition handles, generation Marker Event identifier and output terminal, acquisition start/advance trigger source.
* HSDIO_Channel: class abstraction of a single channel of the NI PCI/PXI 6562 card. It is used to configure the channel number and channel type (dynamic/static acquisition/generation). In case of a static channel, its default state (low/high) at startup can also be specified.
* Module: class abstraction of a silicon strip module containing an array of Hybrid class instances.
* Hybrid: class abstraction of a hybrid, containing an array of Chip class instances.
* Chip: class abstraction of a ABCN25 front-end chip. The different class attributes allow to completely configure the chip. In particular, these are:
* _Register values_: each register (Configuration 1 and 2, Bias 1, 2 and 3, L1 Latency and Calibration Delay) is stored as a four-digit hexadecimal (hex) word. The mask pattern is stored as a 32-digit hex word.
* _Calibration results_: typically the output of the calibration tests (like the optimal calibration pulse delay obtained from a StrobeDelay test) is directly encoded online into the appropriate register. Indeed it is also useful to keep additional results produced by some tests. This is the case of the threshold target of the Trimming test and the fit parameters of the ResponseCurve test. For the Trim DAC threshold correction, a specific class TrimData is used, and the Chip class thus also contains an array of TrimData class instances.

In addition, each chip can be assigned with a particular identifier and can be disabled from the readout chain with a simple flag.

* TrimData: class developped to hold the trimming information: start channel, end channel and the Trim DAC threshold correction corresponding to each channel in the specified range. Each class instance can store the trimming values of 16 channels (the length of the Trim DAC data field is 32 and two hex digits are used for a single channel).

Figure 11: UML diagram with the LabVIEW classes used in the ABCNIDAQ application.

### Configuration files

The user configures the FE ASICs through so-called "configuration files" written in Extensible Markup Language (XML). Appendix A shows a complete example for a single chip. A validation of the configuration file is performed against an XML schema. If required, its format can be modified in the future by means of a schema evolution without breaking the ABCNIDAQ application. The different XML elements are used to specify the complete configuration state of the chips after startup of the software program. These have been implemented as human-readable strings and correspond to key-fields of the different chip registers. During the parsing of the file, the XML elements are combined into the appropriate register values which are stored internally as attributes of the Chip class as explained in section 4.1.

### Scripted generation and multi-record acquisition

As already introduced in section 3.1, a named waveform (_i.e._, the binary representation of a command to the FE ASICs) must be written to the NI6562 on-board memory before dynamically generating any digital data. The dynamic generation operation mode can then be configured to either _single-waveform mode_ (one waveform is generated at a time) or _script mode_ (several waveforms are linked and looped-over in complex combinations). The latter mode is used, simplifying coding and reducing processing overhead (the script uses a small amount of physical device memory to store the locations of the saved named waveforms it contains, but then the script execution just consists in moving sequentially to particular memory addresses). In addition, triggers and markers associated with the generation can also be specified within a script (_e.g._, a marker can be generated a certain number of samples after the start of a waveform).

The dynamic acquisition operations are configured to be _multi-record_ acquisitions, allowing to very quickly capture multiple triggered data waveforms without software intervention. The number of samples per record can be specified; the number of records to be acquired corresponds to the number of L1 triggers (limited to a maximum of 1000) sent to the readout chips. The main benefit of the multi-record acquisition is that the hardware rearming of the NI-6562 device is made before the data is fetched. The rearm time (time interval in which the device is not ready for a trigger) becomes extremely small (\(\sim\)us).

Appendix B shows the state diagrams of the dynamic generation and acquisition operations. A Marker event, asserted after each L1 command that is generated, is exported to one of the PFI trigger lines in the NI-6562 DDC Infiniband connector. The Marker event triggers the acquisition of each record.

### _S-curve_ fit

Most of the module electrical tests are based on data analysis that involves fitting the occupancy as a function of the discriminator threshold with a complementary error function2 (_s-curve_, see eq. 1). Since these fits are done many times during a test (in a channel-basis), a fast execution time of the fit implementation is mandatory for not degrading the overall performance of the ABCNIDAQ application. Based on its robustness and speed, the Levenberg-Marquardt algorithm (LMA)3 has been chosen to perform the _s-curve_ fits. A numerical parametrization of the complementary error function is used for the model function. A comparison of the LMA with the LabVIEW Mathscript node in fitting a threshold scan with 200 points shows a time difference of 3 orders of magnitude in favour of the former method [9]. By using the numerical minimization of the LMA, a single channel _s-curve_ fit is done in \(\sim\)10 ms.

Footnote 2: Indeed the test used to determine the optimal delay of the calibration pulse with respect to the clock edge (Strobe delay test) relies on fitting the occupancy as a function of the calibration delay value, the resulting distribution being fit to a function composed of an error (complementary error) function for the fit of the leading (falling) edge. See section 5.3 for more details.

Single module test results

### Leakage current

The sensors used for the module assembly are single-sided n-on-p silicon microstrip detectors produced by Hamamatsu Photonics (HPK) [10]. The substrate is p-type float-zone (FZ1) silicon with a crystal orientation \(\langle\)1 0 0\(\rangle\) and a resistivity of \(\sim\)6 k\(\Omega\cdot\)cm. The strip isolation structure is p-stop. The detector has a thickness of 320 \(\upmu\)m and its size is \(97.5\times 97.5\) mm\({}^{2}\). It is divided in four segments and it integrates both axial and stereo strips (rotated an angle of 40 mrad with respect to the sensor edge) in the same wafer. The total number of channels per detector is 1280 and the strip-pitch is 74.5 \(\upmu\)m. More details about the sensors can be found in [11, 12, 13].

The IV characteristics of the silicon sensors are measured at different stages of the module assembly process. Fig. 12 shows typical IV-curves of one double-sided module prototype. The leakage current is measured as a function of the reverse bias voltage, with probe-needles before bonding and through the MAB card once the module has been completed. The specification [14], set with large margin, is that the leakage current must not exceed 200 \(\upmu\)A for a bias voltage of 600 V (20 \({}^{\circ}\)C). The results for the bare sensors are in good agreement with the measurements performed by HPK, all of them well below the current limit. No significant increase of current is observed after gluing the sensor to the baseboard. The breakdowns observed in some cases typically disappear after re-measuring with dry-air flushed inside the single wafer probe test-box. No onset micro-discharges have been observed. Measurements on final modules are made regularly up to 1000 V bias voltage without major problems. In that case, the total leakage current (sum of the current of each sensor) is below 1 \(\upmu\)A.

Figure 12: IV characteristics at different stages of the assembly of a double-sided module. Silicon wafers W51 and W69 were respectively used for top and bottom sides of the module. The leakage current of the module is the sum of that of both sensors. Results are normalized at 20 \({}^{\circ}\)C.

### Characterization analog tests

As already mentioned in section 2, the characterization of the FE analog circuitry is performed with the internal calibration circuit implemented for every channel. A good calibration of the FE parameters is essential in a binary readout system where all analog information is lost. It is intended for obtaining the optimal working parameters (common chip threshold and individual channel threshold corrections) and the basic analog parameters of the front-end (for each channel: gain, noise and discriminator offset). Many of the test procedures implemented in LabVIEW for the ABCNIDAQ application to determine the electrical performance of the upgrade modules have been adapted from the existing routines used for the current Semiconductor Tracker (SCT) modules of the ATLAS Inner Detector [15]. Unless stated otherwise, the nominal bias currents listed in table 1 have been used.

### Strobe Delay

Since test charges are injected to every channel analog input, it's essential to optimize the delay between the calibration charge and the clock, so that the sampling is done at the maximum of the signal. Fig. 13 shows the occupancy as a function of the calibration delay setting (in DAC units) for all channels of a single hybrid. For each value of the strobe delay register (ranging from 0 to 63), a certain number of triggers (effectively a calibration charge followed by a L1 trigger after a certain number of clock cycles) is sent to each of the four calibration lines so that all channels in the chip are tested. The occupancy of each channel at each delay setting is calculated as the number of signals above the threshold divided by the number of calibration pulses sent. The hybrid has 20 chips arranged in two columns (namely column 0 and 1) of ten chips each, with 1280 channels per column. Variations of the response on a chip-basis are visible.

In order to set a unique delay for a given chip, a projection of the occupancy to the calibration delay axis is made for every channel. An example of the resulting projection for a single channel is shown in Fig. 14. A fit to an error/complementary error function is performed to the falling/rising edges of the occupancy vs delay curve. An optimum delay is calculated for each channel as the rising edge plus a fraction of the time between rising and falling edges (so that to be in the plateau at maximum occupancy). The optimum delay for a given chip is then taken as the mean of the distribution of the optimum delays of every channel of that chip.

\begin{table}
\begin{tabular}{l r} \hline \hline
**Component** & **Current** (\(\upmu\)A) \\ \hline Input transistor & 135.75 \\ Preamplifier buffer & 7.90 \\ Preamplifier feedback & 8.06 \\ Shaper & 7.90 \\ Shaper feedback & 8.06 \\ Differential stage & 29.76 \\ Comparator & 29.76 \\ \hline \hline \end{tabular}
\end{table}
Table 1: Nominal bias currents values used during module characterization.

### Trimming

The preamplifier and shaper in the FE analog stage are followed by a discriminator. The discriminator threshold is common to all channels in the chip, and it is set from a differential voltage (one positive and one negative) supplied by two 8-bit DACs (depending on the desired polarity typically one of the two DACs is set to zero). The effective threshold for a given channel is thus determined by the offset of its discriminator with respect to the common threshold and by the gain in the FE circuit. In order to

Figure 14: Occupancy as a function of the calibration delay setting (DAC units) for a single channel.

Figure 13: Occupancy as a function of the calibration delay setting (DAC units) for all channels in a hybrid. Columns 0 and 1 of a given hybrid are shown on top and bottom respectively. The vertical lines indicate the different chips within the column.

minimize the spread in the channel thresholds, a 5-bit DAC (TrimDAC) is used to provide an individual per-channel threshold correction. The range of the TrimDAC is set by three bits (8 possible values) in the configuration register, with 32 available steps4 (given the 5-bit resolution of the DAC) within a given range. Figure 15 shows the s-curves for a single channel set to a particular range and for eight different settings of the TrimDAC register. The s-cuves have a constant separation along the threshold axis, indicating a very good linearity. This is confirmed by Fig. 16, where the \(\mathit{vt}_{50}\) threshold points, extracted from the s-curve fits, are plotted as a function of the TrimDAC setting for all eight ranges available. As expected, the slope of the linear curves increases for higher ranges.

Footnote 4: also refered as TrimData

Figure 16: \(\mathit{vt}_{50}\) threshold points from s-curve fits as a function of the TrimDAC setting. All available ranges are shown. Eight settings (TrimData) of the TrimDAC have been taken at each range.

Figure 15: Single channel s-curves for a given range (5 in this case) and eight different values (3, 7, 11, 15, 19, 23, 27 and 31) of the TrimDAC register.

The specification of the ABCN-25 TrimDAC step has been checked. Given the good linear behaviour shown in Fig. 16, the \(vt_{50}\)-TrimDAC response characteristic has been fit to a straight-line for all ranges and all channels. Fig. 17 shows for each range the relative difference between the fitted slope and the specification of the voltage step. The value and vertical error bar shown for each chip corrrespond respectively to the mean and r.m.s. of a histogram filled with the relative difference for every channel within the given chip. The trend is similar for all chips. The same behaviour is observed for chips within distinct hybrids (see appendix C). For lower ranges, a constant difference of \(\sim\)15% with respect to the theoretical values is found. For higher ranges, relative differences of up to \(\sim\)20% are observed. It is noticeable that the measured discrepancy increases for higher ranges (roughly as \(\sim\)1.5% / TrimRange, for ranges \(\geq\) 4). These differences are in agreement with the resolution achieved for the input current of the TrimDac, defined within an accuracy of 20% [16].

The trimming procedure itself is relatively simple. For each channel and for all ranges, a fixed calibration charge is injected into the analog circuit and threshold scans are taken for different settings of the TrimDAC. Given the good linearity and in order to optimize the aquisition time, four steps per range-point are set. The \(vt_{50}\) thresholds are extracted by fitting the s-curves and then a linear fit is performed to the \(vt_{50}\) versus trim-setting as explained above. For several threshold targets, the number of _trimmable_ channels is computed. A channel is said to be trimmable if the setting that needs to be applied to correct for the offset with respect to the target lies in the available range of the DAC (_i.e._ in the range [0;32]). An effective correction outside the DAC range indicates that for that particular trim-range the channel offset can't be corrected with respect to the target.

Fig. 18 shows, for a single chip, the number of trimmable channels as a function of the threshold target. For a given target, the number of trimmable channels increases with range as expected. For that particular chip, all channels are trimmable starting from range 2. Typically it is found that the first two or three trim-ranges are not usable, since a maximum number of channels that can be trimmed is not achieved. It is expected that cumulated radiation damage will increase the channel threshold spread, so higher ranges will need to be used with time. It might be worth optimizing the threshold ranges of the TrimDAC in future versions of the ABCN ASIC so that the lowest ranges can be used before irradiation.

Figure 17: Relative difference (in percent) between the slope extracted from a linear fit to the \(vt_{50}\)-TrimData characterstics and the specification of the step of the TrimDAC. For each range, the results for each chip have been slightly separated for clarity.

Typically the target is chosen to be common to all chips within a given column5, so that a good threshold uniformity is achieved for all 1280 channels. Once the target selected, the individual per-chip trim-range is set as the lowest one that allows to trim a maximum number of channels within the chip (ideally 128 if no defective channels are present). The individual channel threshold corrections are then computed and stored in the XML configuration file. Fig. 19 shows a threshold scan for a column of ten chips before and after applying the trimming procedure. A good threshold uniformity is achieved after

Figure 19: Threshold scan for all 1280 channels of one column of ten chips, before (top) and after (bottom) trimming. The horizontal axis is the channel number, the left-vertical axis is the threshold [mV] and the right-vertical color-scale is the channel occupancy.

Figure 18: Number of trimmable channels for a given chip as a function of the threshold target.

trimming. This is also clearly visible from Fig. 20, where the s-curves for all 128 channels within a chip are shown before and after the TrimDAC corrections. Typically, the threshold spread is reduced up to \(\sim 1-2\) mV after trimming (see Fig. 21).

Figure 21: Distribution of \(vt_{50}\) points (threshold at 50% occupancy) before (hashed histogram) and after (filled histogram) trimming for all channels within a column of ten ABCN-25 chips. The mean of the histogram after trimming corrections corresponds to the selected threshold target for that column.

Figure 20: S-curves for all 128 channels of a chip before (left) and after (right) applying the individual channel threshold correction. The measurements correspond to a threshold scan for a 1 fC input charge. The data-points are fit to a complementary error function.

### Gain and input noise

The gain and noise at the discriminator input are extracted from threshold scans performed for different input charges. For three charges (so-called ThreePointGain test), a linear fit is performed to the \(vt_{50}\) threshold points versus charge, so that the slope and intercept of the fit correspond respectively to the gain and threshold offset. As the readout chips produce a signal proportional to the input charge, the 50% threshold values increase with higher amplitudes of the calibration charge. The standard deviation of the s-curve is a measurement of the noise at the discriminator output (see section 2) for that charge. The input noise is simply calculated as the output noise divided by the amplifier gain. It is typically given in Equivalent Noise Charge (ENC). Fig. 22 shows an example of the resulting disributions for all channels within a single column of ten ASICs and Fig. 23 shows typical gain and input noise distributions for all four hybrids within a module.

Figure 22: Gain (top), offset (middle-top), output noise (middle-bottom) and input noise (bottom) for all 1280 channels of a column of ten ABCN25 chips within a given module.

Figs. 24 and 25 show respectively the gain and the input noise at 1 fC input charge for all hybrids of all double-sided modules assembled by the University of Geneva and KEK as described in [3]. For each hybrid, both columns are taken into account. The uniformity of the gain is very good, with all values ranging between 103 and 114 mV/fC. In general, within a same module hybrids 1 and 2 tend to show a slight higher noise level than the other two. This feature is not thought to be a real issue, but it shall be taken into account in a future evolution of the module design. In any case, excepting module KMX2003, the maximum dispersion(relative difference) within a given module ranges between 8(1.2%) and 20(3.4%) ENC. All modules show an excellent noise performance, with all noise values being within the absolute range of 540 - 590 ENC. Noise results in a chip basis are shown in appendix D.

Figure 23: Gain (top) and input noise (bottom) for all four hybrids of a single module. For each hybrid, all channels from both columns are taken into account. The mean and sigma of a Gaussian fit (not shown in the plot) to the distributions are also indicated.

Figure 24: Gain for all modules assembled by the University of Geneva and KEK. The results are given for each of the four hybrids of each double-sided module. The yellow band just indicates the range in which all the measurements lie.

Figure 25: Input noise at 1 fC input charge for all modules assembled by the University of Geneva and KEK. The results are given for each of the four hybrids of each double-sided module. The error bar at each data point corresponds to the standard deviation of a Gaussian fit to the noise distribution for a given hybrid. The yellow band just indicates the range in which all the measurements lie.

### Noise occupancy

The noise occupancy (NO) is defined as the probability for a strip to give a hit in a certain event only due to noise. The NO can be determined by performing a threshold scan without any input charge being injected into the analog stage. The number of triggers sent is raised progressively with increasing thresholds. The number of samples per record is reduced a couple of times during the NO test to reduce the acquisition time for lower occupancies when a large number of triggers is needed. Typically, bursts of 1000 triggers are sent until a minimum number of hits in each strip is recorded at each threshold point. As running in standalone mode, if a chip is non-responding or dead, the chips coming after the problematic one are read-out through the other column of the hybrid, resulting in a longer data-stream for the acquisition channel. In that case, the number of triggers per burst is globally reduced to 500 so that not to fill the on-board memory at lowest thresholds (maximum channel occupancy). The test is stopped when a target occupancy (typically \(10^{-8}\)) is reached.

Fig. (a)a shows a typical threshold scan obtained from a NO test and Fig. (b)b the result of projecting all channels to the threshold axis. In that example, the threshold at which the hybrid was trimmed, and corresponding to 1 fC charge, is 121.6 mV. The noise occupancy reaches \(10^{-8}\) below 80 mV. The last threshold value of the occupancy plot typically corresponds to \(\sim 0.5\) fC. In the case of having noisy channels, either because non-masked before-hand or because suddenly appearing during the NO test (see Figs. (c)c and (d)d), the software tries to increase the number of triggers in order to reduce the occupancy with respect to the previous value. If after a few tries the occupancy remains unchanged because a noisy

Figure 26: Threshold scan of a Noise Occupacy test (left) and projection to the threshold axis (right) for all channels of a column of ten chips of a hybrid without noisy channels (top) and with one noisy channel (bottom). The noisy channel is visible around channel number \(\sim\)240 in (c).

channel is constantly giving rise to a signal above the threshold, the latter is increased by one step (3.2 mV). Excepting rare cases, results are rather consistent within a given module; Fig. 27 shows typical noise occupancy plots for all four hybrids of a single double-sided module.

The input noise can be estimated from the NO scans, given the fact that the occupancy follows the Gaussian functional:

\[\text{Occ}\propto\exp\left[-\left(\frac{\tau-\mu}{\sqrt{2}\sigma}\right)^{2}\right]\]

where \(\tau\) is the threshold. The noise \(\sigma\) is therefore simply determined from the linear relation between \(\ln(\text{Occ})\) and \(\tau^{2}\):

\[\ln(\text{Occ})\propto-\frac{1}{2\sigma^{2}}(\tau-\mu)^{2} \tag{2}\]

Fig. 28 shows \(\ln(\text{Occ})\) versus \(\tau^{2}\) for a single ASIC, the threshold being expressed in fC. The relationship between thresholds in mV and fC is obtained from the so-called Response Curve test, consisting in several threshold scans performed for 11 input charges ranging between 0.5 and 7 fC. After performing standard _s-curve_ fits, the resulting \(vt_{50}\) versus input charge relation is fitted to an exponential function:

\[\tau=p_{2}+\frac{p_{0}}{1+e^{-(q/p_{1})}} \tag{3}\]

where \(\tau\) and \(q\) are the threshold in mV and fC respectively and \(p_{0}\), \(p_{1}\) and \(p_{2}\) the fit parameters. The exponential fit is performed in a channel-basis. When dealing with column or hybrid occupancy distributions, and in the case of having the same trimming target for all chips within the hybrid, the parameters \(p_{i}\) are averaged to have a unique functional relation (eq. 3) applicable for the whole column or hybrid under study. A linear fit to the \(\ln(\text{Occ})\) vs threshold\({}^{2}\) plot is performed for thresholds above \(\sim 0.1\) fC. The resulting estimated noise (as computed from eq. 2) in the example shown in Fig. 28 is \(548\pm 14\) ENC, which gives a reasonable estimation of the input noise if comparing with the \(572\pm 32\) ENC obtained from a ThreePointGain test as explained in section 5.5.

Figure 27: Occupancy versus threshold from a Noise Occupancy test for a given double-sided module. Results for both columns of all four hybrids are shown.

[MISSING_PAGE_FAIL:27]

Figure 31: Occupancy versus threshold from a NO test for module KMX-2003. Results for both columns of all four hybrids are shown.

Figure 30: Threshold scan of a NO test for module KMX-2003. Results for column 0 of hybrid 3 and 2 are shown on top and bottom respectively.

### Linear analog voltage regulator

The ABCN25 ASIC includes a power management block that comprises two different (and independent) shunt regulators and a low drop linear voltage regulator. These regulators have been primarly implemented as on-chip support of the serial powering scheme circuitry, in which several modules are connected in series with a common current source. Even if not powered in series, the linear voltage regulator can be used to provide the analog voltage to the front-end circuitry from the digital power-line. The usage of the linear regulator is controlled via the REGDIS input of the ASIC [4].

The effect of the linear regulator has been checked. The same module was first tested with separated analog and digital inputs, and then with a single voltage input by means of the on-chip linear voltage regulators (by removing the wire-bonds corresponding to the REGDIS input). Fig. 33 and 34 show respectively the results on gain, input noise and noise occupancy from tests performed on the same module without and with the linear regulator enabled. Despite the fact hybrid 1 shows a slight noise increase, the usage of the voltage regulator does not seem to affect significantly the module performance. Further studies would help to provide a more solid conclusion, though the noise increase in just one hybrid out of four tends to indicate to be due to something other than the regulator itself.

Figure 32: Threshold scan of a NO test for module KMX-2003. Results for column 1 of hybrid 0 and 1 are shown on top and bottom respectively. Two noisy chips are clearly visible, plus a dead chip in hybrid 1 seen as empty entries in the distribution (zero-occupancy) for channels ranging between 896 and 1023.

### 40/80 MHz clock-rate readout

The ABCN25 chip receives two clock inputs: the main Bunch-Crossing (BC) clock (always running at 40 MHz in synchronization with the beam crossing rate) and the readout clock (DataClk) used for data throughput [4]. The FE can be configured (through its ClkMode80 input) to operate at two different readout clock frequencies, 40 or 80 MHz.

Since the the frequency range for the On-Board clock of the NI-6562 card is configurable as 200 MHz/N, where N ranges from 1 up to 4,194,304, the 80 MHz data-clock is generated from an Agilent

Figure 34: Occupancy versus threshold from a NO test for module without (left) and with (right) the on-chip linear voltage regulator. Some non-masked noisy channels are visible in hybrid 0, 1 and 3.

Figure 33: Difference in gain (left) and input noise at 1 fC input charge (right) from a ThreePointGain test performed on the same module without and with the on-chip linear voltage regulator. The mean and sigma of a Gaussian fit (not shown in the plot) to the distributions are also indicated.

81110A external pulse-generator and then routed to the CLKIN input of the NI-6562 board. The slower 40 MHz BCO clock is synchronously software-generated from the faster 80 MHz clock and then exported into one NI-6562 I/O line configured for dynamic generation. The same silicon module has been tested using both a single (40/40) and double (40/80) clock-scheme. As in the previous section, Figs. 35 and 36 compare gain, input noise and noise occupancy in the two cases. No significant differences are observed. The chips could be configured and tested without problems using a 40 MHz BCO clock and 80 MHz readout data-clock.

Figure 35: Difference in gain (left) and input noise at 1 fC input charge (right) from a ThreePointGain test performed on the same module at 40 and 80 MHz readout clock. The mean and sigma of a Gaussian fit (not shown in the plot) to the distributions are also indicated.

Figure 36: Occupancy versus threshold from a NO test for the same module tested with a 40 MHz (left) and 80 MHz (right) readout clock.

### DC-to-DC conversion.

The current powering scheme for the ATLAS Inner Detector is based on parallel powering from off-detector power supplies. However, the increase in the number of electronic readout channels for the upgraded tracker imposes severe constrains for the future powering strategy. More power must be delivered without increasing the cable density, because of the lack of physical space and because of the goal of minimising the amount of material inside the tracker [17]. In that sense two new powering approaches are currently under investigation: serial powering and DC to DC powering (DC/DC). In the serial powering concept [18], a chain of modules is powered in series by a constant current. The voltage across the module is generated by a shunt regulator. In a DC/DC conversion powering scheme, a buck converter with a coreless (air-core) inductor to store the energy is used for the voltage reduction [19].

The DC/DC prototype tested is the AMIS2 EMC, developed at CERN [19]. It uses the AMIS2 ASIC controller in a compact QFN32 package with a shield-case surrounding the air-core coil inductor (see Fig. 38). With an optimized placement layout of the passive components and traces in the board, the level of conducted noise measured with this prototype was found to be -5 dB\(\upmu\)A at 6 MHz. This value is compliant with Class B devices with more than 25 dB of margin.

A double-sided silicon strip module prototype was used to validate the AMIS2 EMC design. The module had separate digital (V\({}_{\mathrm{dd}}\)) and analog (V\({}_{\mathrm{cc}}\)) inputs for the ABCN25 FE power, thus two converters were needed. They were adjusted to provide \(\sim\)2.5 V and \(\sim\)3 A for V\({}_{\mathrm{dd}}\) and \(\sim\)2.2 V and \(\sim\)1 A for V\({}_{\mathrm{cc}}\). Each converter was supplied with a 10 V input voltage. The input noise at 1 fC input charge was calculated from a ThreePointGain test with the sensor biased to 250 V. A reference measurement was taken with a linear PS. The effect of the conductive and radiated noise emissions from the AMIS2 EMC prototype was evaluated by placing the converter in different configurations (see Fig. 38). The results are shown in Fig. 39. The conducted and radiated emissions are found to be negligible. A noise increase of 10% is observed when placing the converters on top of the FE ASICs where the electromagnetic coupling is maximized. Appendix E shows the difference in input noise between cases _(d)_ and _(a)_ as in Fig. 39, for all ten chips of the column where the DC-DC converters were placed on top.

Figure 37: AMIS2 EMC DC/DC converter prototypes with 500 nH coil (a) and with shield-case (b).

Figure 38: DC/DC AMIS2 EMC noise tests: (a) conducted noise test, (b) radiated noise test (corner) and (c) radiated noise test (top). In (a) the converters are placed over the aluminum lid of the module test-box while in (b) and (c) over a stiff plastic lid.

Figure 39: Input noise from a three-point-gain test at 1 fC input charge. The results shown correspond to (a) a linear PS, (b) AMIS2 EMC DC/DC converter conducted noise test, (c) radiated noise (corner) test and (d) radiated noise (top) test. The vertical dashed-lines delimit each chip boundary.

[MISSING_PAGE_FAIL:35]

Figure 41: CAD views of the four-module test-box. (a) Detail of the cooling-loop and connection of the top-side hybrids to the MAB readout card through flex-extenders. (b) Connection of the bottom-side hybrids.

Figure 42: Four double-sided modules (GMX-2008, GMX-2002, GMX-2006 and GMX-2004) installed in the combined test-box.

The low voltage is provided by a commercial TDK-Lambda [20] Genesys power supply (see Fig. 44), a source able to deliver a constant output voltage up to 20 V with a maximum current of 76 A. The power supply features voltage protection levels (over and under-voltage limits), an embedded microprocessor controller and voltage (and current) high resolution adjustment by digital encoders. The output load wires are connected to the power supply rear panel bus-bars through screwed terminal lugs and routed to a home-made power distribution board with four separated outputs.

The software used is exactly the same as explained in section 4. The usage of reentrant VIs6 allows to test several modules simultaneously using exactly the same LabVIEW routines as when testing modules individually.

Footnote 6: A reentrant VI has a separate data space allocated for each instance of the VI. Multiple instances of reentrant VIs can execute in parallel without interfering with each other.

Figure 44: TDK-Lambda Genesys GEN20-76 1U power supply [20].

Figure 43: Modules arrangement in the combined test-box. Dry-air was flushed at both input inlets.

### Thermal measurements

Fig. 45 shows the temperature evolution of all hybrids under different conditions. Dry-air was flushed constantly at room temperature at the two inlets on both sides of the test-box. After enabling the cooling (chiller temperature set to -4 \({}^{\circ}\)C), the hybrids achieve a stable temperature between -1 and +1 \({}^{\circ}\)C. The temperature rises by \(\sim\)20 \({}^{\circ}\)C after switching-on the LV (no input-clock). After configuration (clock enabled), the module temperatures are increased by \(\sim\)13 \({}^{\circ}\)C. In general, the temperature tend to increase with the distance to the cooling inlet / exhaust. Module GMX-2006 shows indeed a higher thermal resistance than the other modules. Without clock but with LV-on, the total current is \(\sim\)25.5 A (as measured in the PS), leading to a single module (4 hybrids) current of \(\sim\)5 A (each MAB card drives \(\sim\)1.3 A). The current increases by \(\sim\)5.5 A after each module configuration. The total current load with all modules configured is 47.7 A, corresponding to \(\sim\)10.6 A / module or \(\sim\)2.6 A per hybrid (2.6 V digital voltage).

Figs. 46 and 47 show some thermal images and temperature profiles (the latter taken along an axial straight-line) after the different steps described above. No emissivity correction-factor is applied. After chip configuration one can appreciate a double peak structure (two adjacent hybrids), with two local maxima in each peak (two chips within adjac

Figure 45: TDK-Lambda Genesys GEN20-76 1U power supply [20].

Figure 46: Thermal images and temperature profile at different run conditions: (a) chiller-on (no LV), (b) LV-on (no clock), (c) GMX-2008 configured, (d) GMX-2002 configured.

### Electrical results

As already mentioned, the modules are tested simultaneously. In order to be sensitive to possible common effects, both the clock, but more important, the L1 trigger command, need to be synchronous for all modules. Since the control and readout of each module is made through separated MAB cards, each of these being linked to a single NI-6562 acquisition board, it is not possible to get a hardware-based synchronous L1 (meaning commands to be sent synchronously to all modules). On the software-side, the tests are indeed started simultaneously7, however, delays due to different processing times certainly originate effective asynchronous commands.

Footnote 7: Typically by using “Wait on Occurrence” LabVIEW functions.

In order to get a BCO clock synchronous to all modules, two options are available:

1. _usage of the_ PXI_STAR _line_. The PXI_STAR trigger is implemened on NI PXI chassis as a trigger bus linked to all slots in the chassis. The PXI_STAR is a high-performance trigger signal that can be used to synchronize all the devices in a chassis with a propagation delay \(<\)5 ns and skew \(<\)1 ns.
2. _usage of a common external clock source_.

For the first case, a PXI_STAR controller (master) module had to be installed specifically in slot 2 of the PXI chassis, so that to route the clock signal through the PXI_STAR trigger line to the other four NI-6562 boards installed in the remaining peripheral slots. In order to avoid purchasing an additional PXI_STAR controller module, and due to time constraints, the second option was implemented as the most time and cost-effective solution.

Figure 47: Thermal images and temperature profile at different run conditions: (a) GMX-2004 configured, (b) GMX-2006 configured.

An external pulse generator is used to produce a continuous 40 MHz signal (2 ns rise-time, 50% duty cycle) with standard NIM logic levels voltages. This clock signal is sent to a linear _Fan-in/Fan-out_ NIM module to get four output signals. A _Level adapter_ module is then used to generate the required TTL signals and these are sent to the front-panel SMB ClkIn input of each NI-6562 card. Eventual delays introduced by the NIM electronics are corrected through cable delays. Fig. 48 shows a schema of the setup implemented and Fig. 49 a scope-screenshot of the clock signals as probed in each of the four MAB boards. The delay introduced by the clock fanout circuitry in each MAB card (the input clock is fan-out to each of the four hybrids) is estimated to be negligible. All four 40 MHZ BCO clocks are found to be within 2 ns (rise-time).

Figure 49: Input clock signals as probed in all four MAB cards. The top screen-shot shows the four BCO clock signals as probed in each of the four MAB boards. The bottom figure is just a zoomed view of the rising-edge of the signals. The horizontal timebase is 2 ns / division.

Figure 48: Setup for multiple synchronous BCO clock distribution.

[MISSING_PAGE_EMPTY:42]

Figure 51: Occupancy versus threshold for all four hybrids of the four modules tested in the combined test-box. Results of both columns of each hybrid are shown.

Figure 52: Comparison of gain (left), input noise (middle) and noise-occupancy (right) for a module tested individually and together with other modules in the combined test-box.

Summary

Several double-sided silicon strip modules designed for the short-strip barrel region of the future ATLAS inner tracker for the HLC have been produced by the University of Geneva and KEK. The electrical performance has been thoroughly evaluated after each module assembly. All different components required for single module testing (module test-box, MAB board) have been produced. The ABCNIDAQ DAQ system, based on the NI-6562 high-speed I/O card has been developed and used successfully to test all modules in a reliable and reproducible way.

Results of leakage current, trimming, gain, input noise and noise occupancy have been shown. It was found that typically the first two or three trim-ranges are not usable, since a maximum number of channels that can be trimmed is not achieved. A better optimization of the TrimDAC ranges is thus needed in future versions of the ABCN ASIC so that the lowest ranges can be used before irradiation. All modules were found to show an excellent noise performance. All seven double-sided modules reported in this note had an input noise in the range [540 ; 590] ENC. The noise occupancy was found to typically reach \(10^{-8}\) well below the threshold corresponding to 1 fC charge. No significant degradation in terms of input noise or noise occupancy has been observed by using the on-chip internal voltage regulator nor by operating the ASICs with a 80 MHZ readout clock. From several tests performed with the AMIS2 prototype DC/DC power converter, it was concluded that both conducted and radiated emissions from the converters are negligible in the current set-up.

Four double-sided modules have also been tested simultaneously in a combined test-box. No significant noise degradation has been observed. The results have been found to be very similar to those obtained while testing the modules individually.

## 8 Acknowledgements

The authors are deeply thankful to F. Anghinolfi, W. Dabrowski, J. Kaplan, P.W. Phillips, B. Gallop and A. Greenall for useful discussions concerning the ABCN-25 ASIC. The authors would also like to thank G. Blanchot and C. Fuentes Rojas for providing the AMIS2 DC-DC converters used in this note.

## References

* [1] The ATLAS Collaboration, _ATLAS Insertable B-Layer Technical Design Report_. CERN-LHCC-2010-013, 2010.
* [2] N. P. Hessey, _Strawman07: A Detailed and Improved Strawman Layout_, ATL-P-EP-0001 (2008).
* [3] G. Barbier et al., _Design and assembly of double-sided silicon strip module prototypes for the ATLAS upgrade strip tracker_, ATL-UPGRADE-PUB-2011-002 (2011).
* [4] F. Anghinolfi, _ABC-N ASIC specifications v1.3.1_,.
* [5]_National Instruments PXI/PCI-6561/6562 Specifications_. [http://www.ni.com/pdf/manuals/373772c.pdf](http://www.ni.com/pdf/manuals/373772c.pdf).
* [6]_National Instruments 6009-OEM Specifications_. [http://www.ni.com/pdf/products/us/371728b.pdf](http://www.ni.com/pdf/products/us/371728b.pdf).
* [7]_ABCN National Instruments DAQ (SVN repository)_. [http://svnweb.cern.ch/trac/abcnNiDaq](http://svnweb.cern.ch/trac/abcnNiDaq).
* [8]_NI PXI-6009 Data Sheet and Specifications_. [http://sine.ni.com/ds/app/doc/p/id/ds-110/lang/en](http://sine.ni.com/ds/app/doc/p/id/ds-110/lang/en).
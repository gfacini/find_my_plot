**Analysis and Results from**

**Measurements on an X-ray**

**Tomograph of Large Full-Scale**

**MDT Prototypes**

E. Gschwendtner, F. Rohrbach, Y. Sedykh

**Abstract**

An approach to the processing of the X-ray tomograph scan data is considered. The "scana" program as a basis of this approach, the methods used and the representation of main results are described. A summary of some parameters of the MDT chamber prototypes for scans made during the first measurement campaign (December 1996 - March 1997) is presented.

**1. Introduction**

The X-ray tomograph is the key tool for quality assurance of the MDT chambers delivered to CERN for the Muon System ([1]) of the ATLAS experiment ([2]). This project is the next step of the pioneer work described in Refs. [3], [4], [5], [6] toward a quality control platform at CERN for the MDTs.

The goal of the X-ray tomograph is a measurement of the space position of the tube wires of the MDT chambers with a precision of \(\sim\)10 \(\mu\)m. The technical description of the set-up may be found in Refs. [7] and [8]. In the present article the theoretical points of the X-ray tomograph are considered taking into account that the main constraint faced by the project was to provide the required precision of measurements at minimal cost.

As in all similar tasks we have to rely on some basic principles. There are two possible ways to obtain the required precision: either extreme precision in the mechanical construction that provides the movement of the X-ray sources or good standard mechanics but with accurateon-line measurement of the X-ray beam position. Indeed, in both approaches, it is necessary to calibrate the X-ray tomograph to find some global parameters: carrier1 angle and linear coordinates' zero positions, relative positions of the X-ray beams attached to the carrier, etc. A natural way is to use a reference wire system. We use a reference ruler, made of carbon fibre tube supporting a set of wires measured with another device of sufficient precision ( \(<3\,\mu\)m). By scanning the calibration ruler simultaneously with the chamber to be measured, we can solve not only the problem of the calibration but also check the X-ray tomograph precision:

Footnote 1: moving part of the X-ray tomograph which carries the beams

\(\bullet\) The calibration itself may be done by finding corresponding parameters so that predictions of the X-ray beams satisfy the reference ruler wires as well as possible.

\(\bullet\) Using a standard fitting approach, one can estimate the covariance matrix of the parameters and therefore the errors of the chamber wire position measurements.

\(\bullet\) Environmental conditions (temperature, pressure etc.) during calibration and measurements should be stable. However, control and compensation for variations can be made because for both calibration and chamber measurements the conditions are the same.

\(\bullet\) The calibration does not require additional time. Hence, it does not restrict the possibility of making changes in the mechanical parts of the scanner as the X-ray tomograph is continuously calibrated in parallel during measurements.

\(\bullet\) The quality and reliability of the measurements are higher as the procedure does not rely on any independent measurements of the mechanical parameters (except the measurements of the reference ruler which are stable) which might accidentally change.

\(\bullet\) The stability of the measuring system is checked permanently and allows one to detect any change in the values of the geometrical parameters.

\(\bullet\) The precision of the X-ray tomograph itself is permanently measured and checked with the reference ruler.

\(\bullet\) The software part becomes safer because the calibration ruler and chamber data are in the same file and processed in the same way.

Of the two approaches the method using on-line control of the carrier has been chosen because of much cheaper mechanics, the possibility to check permanently the parameters of the tomograph, more flexibility for upgrading, etc. Three interferometers have been installed to measure on-line, i.e. every scanning step (we used \(20\,\mu\)m), \(X\)(linear displacement), \(\Delta Z\)(straightness) and \(\alpha_{\nu}\)(pitch angle, i.e. rotation around the \(Y\) axis) values. A tiltmeter has been installed to measure angle \(\alpha_{x}\)(roll angle, i.e. rotation around the \(X\) axis). Owing mechanical inertia, the tiltmeter measurements had to be done by stopping the carrier for a few seconds every 2 mm.

Here we use the "natural" tomograph system of coordinates: the \(OX\) axis is across the wires in the chamber plane, i.e. along the scan direction, \(OZ\) is vertical, perpendicular to the chamber plane and \(OY\) is along the wires.

## 2 Analysis

To process the data taken from the X-ray tomograph two approaches were used.

### 1-Dimensional (projective) analysis

This approach was used for express analysis, to give some significant values as soon as possible to allow a comparison between different technologies for chamber production.

In the 1-dimensional analysis one considers the projective measurements of the X-ray tomograph. Only the laser measurements concerning the X position of the carrier are appraised and no corrections with other measured parameters are performed. In this analysis method the projected wire positions of the chamber and of the calibration ruler can be extracted.

From the X-ray measurements the projected coordinates of a wire can be extracted in order to give mainly the following information for the chamber:

\(\bullet\) The r.m.s. deviation of the nominal pitch

\(\bullet\) Measured pitch.

These results also yield information about the X-ray tomograph itself:

\(\bullet\) Position measurement accuracy of the X-ray tomograph without any corrections

\(\bullet\) Repeatability of the measurements.

In order to produce the above named information the 1-dimensional analysis program (written in C) is capable of the following tasks:

\(\bullet\) The pattern recognition of the wires for every X-ray beam. The wire absorption peaks are identified by finding manually the first wire of each layer. Then an equidistant grid with a chosen pitch is automatically put on the following wires and hence the peak regions can be defined. Because of the longbeams of the spacer structure some increased absorption can hide wire peak signals. Therefore a count threshold is set to prevent wrong peak positions.

\(\bullet\) Fitting a Gaussian + first order polynomial function around the absorption peaks. After identifying the peaks in each absorption spectrum the following Gaussian + first order polynomial function is fit to a region of \(\pm 200\,\mu\)m up to \(\pm 400\,\mu\)m, depending on the peak width, around each peak:

\[y\ =\ C\cdot e^{\frac{-\left(x-a\right)^{2}}{2\sigma^{2}}}+a_{x}\cdot x+b_{x}\]

where \(C\), \(a\), \(a_{x}\), \(b_{x}\) are free parameters and \(a\) is the wire position.

\(\bullet\) Analysis of the measured wire positions. Two methods for evaluating the wire pitchand the r.m.s. deviation of the nominal pitch are performed.

The position difference of two neighbouring wires is histogrammed for each X-ray beam and each layer. This gives the correct mean and the r.m.s. of the wire distances but only if the wire positions are not correlated. The r.m.s. of the distribution divided by \(\sqrt{2}\) corresponds to the r.m.s. deviation of the nominal pitch of the chamber.

Another method for calculating the measured pitch and the residual is to fit the measured grid of each layer to the ideal one with two free parameters, i.e. the pitch and the grid starting value. This is a more correct way when considering the wire position correlation effects.

The main results using 1-Dimensional approach may be found in Ref. [7].

### 2-Dimensional analysis

An analysis program called "scana" has been created to perform the calculations of parameters describing positions of the wires in the \(XOZ\) plane. It was created as a prototype for the processing program of the future serial scanning of the MDT chambers. Many algorithms were tried in it to develop better methods for various stages of processing: pattern recognition, geometrical calibration, presentation of results, etc. The final goal of the program is its implementation in the on-line system when the results could be obtained with the same speed as the scans and may be seen via the network from outside (of course, with necessary authority restrictions). From the point of view of methods and speed this task has practically been solved (up to the adaptation to mechanical changes in the future, mostly due to the new calibration ruler and its new position). All good (with no errors and faults during a scan) files have been processed with the same program without any changes in the user's input. The maximal (for the BMS chamber which has a maximum number of layers, width and height, that leads to the worst processing conditions, among all chamber prototypes scanned up to now) processing CPU time is about 600 seconds on the CERN HPPLUS cluster computers.

## 3 "scana" program design principles

To suit the ATLAS standard and to study new programming technology established by the Object-Oriented approach the "scana" program has been written in C\(+\).

One of the main advantage of C\(+\)\(+\) is the possibility to create and work with objects (classes and structures) which may be made functionally full and closed. But it immediately requires that the class or structure be described very precisely without bugs which might cause a lot of trouble (because they are inside and are not seen directly).

In particular it is extremely important for the memory management operations (order, change and free memory blocks). There are some well-known bugs which are difficult to detect. They may cause a very large spectrum of problems for programmers and users. That is why the first class developed for the "scana" was a template class "SimpleMatrix" the main goal of which was to manipulate arrays and matrices of arbitrary objects. This is the only object in the "scana" which may create, change or free blocks of memory in the program. The class has been debugged very carefully and on account on this no errors connected with the memory management (like the famous C++ programmer "Memory leakage") have occurred in one year the rather intensive work with the program.

The main features provided by the "SimpleMatrix" class are as follows:

\(\bullet\) The programmer can create arrays and matrices of any objects allowed as template classes (for example, the arrays of wire layers were used in program, i.e. arrays of arrays of wires).

\(\bullet\) The size of the array/matrix may be changed arbitrarily (of course in the frame of the computer possibilities). This operation has been optimized in such a way that if in the worst case the array size is increased/decreased by 1 (for example, when wires are found and added to the existing array) the number of memory management operations will be of order \(\log N\), where \(N\) is the maximal size of the array. This has been done to avoid the situation that occurred in practice when the memory management took a significant part of the CPU time.

\(\bullet\) An essential number of possibilities to manipulate arrays/matrices:

\(\bullet\) Copying

\(\bullet\) Copying with transformation (when the dimensions of the source and target are not the same).

\(\bullet\) Access to the elements via indexes with arbitrary bases, i.e. a number of the first element may be set up with an arbitrary integer number and it may be done at any time without changing the content of the array.

\(\bullet\) Access to the information about the array: dimensions and bases.

\(\bullet\) Sorting by number of operation of order \(N\cdot\log N\)  for array of length \(N\)  without any additional memory required. Only the operation "\(>=\)" must be provided for the corresponding class.

The "CalcMatrix" class naturally inherits the "SimpleMatrix" one. It allows one to manipulate matrices and arrays: subtract, multiply, etc. matrices or constants for every element, etc.

The "PackedMatrix" class has been created to provide a convenient and reliable way to work with symmetrical and triangular matrices. A lot of operations to manipulate them have been provided: the Choleski (modified or not) decomposition of symmetrical matrix to the left-lower and right-upper or vice versa triangular ones and back composition, inversion, multiplication with "CalcMatrix" matrices and solution of matrix equations, etc. These operations provide a basis for the fitting package.

The "SimpleFit" class allows one to fit parametrized functions to the measurements. It may be done simultaneously for any number of fits and series of measurements. The user has to provide just a function of the measurements and parameters which calculate residuals and a "risk" function which may be \(x^{2}\) for the "least squares" method or another function for the "maximum likelihood" or other methods. The parameters themselves may be described either with the pointers or with the value. In the first case the user's program works with a fixed variable and in another one the varied value is transferred as a parameter array element to the user's program and back. The class allows one to introduce a regularisation factor in the case of high or full correlation between estimated parameters and additional conditions which are to be made as external user's functions of parameters values of which must be equal to zero at the end of the fitting procedure. The parameters may be transferred by pointer or also by the value. On the output it may produce a covariance matrix of parameters.

The class "SimpleGraphic" simplifies drawing of the graphics. At low level it uses the HPLOT, HBOOK, HIGZ packages and allows one to produce 1- and 2-dimensional graphics and histograms just by values, that is after initialization of the graphic object the user has only to add point by point and then the graphics may be drawn in different ways: as 2-dimensional \(y(x)\) or \(x(y)\) functions with or without symbols or lines, 1-dimensional histograms for \(x\) or \(y\) values, the names of axes, global and histogram titles may be changed, etc.

The classes above may be considered as general, i.e. they may be useful for other programs. In addition there are a lot of local classes to describe the X-tomograph parameters, measurements and characteristics such as geometrical parameters of the carrier, measurements for the current event, parameters of one calibration ruler wire, parameters of one chamber wire, parameters to fit wire peaks and many others.

Logically "scana" consists of the following parts:

\(\bullet\) Initialization. Some global constants are set up, the HPLOT/HBOOK/HIGZ packages are initialized and optical measurements of the calibration ruler wires are read and processed to get wire inclinations, estimations of measurement errors, etc.

\(\bullet\) Read data file. The main data file is read, wire peaks are found for both beams, and parameters of peaks are calculated using the fitting procedure. Using parameters of the peaks a rejection of non-physical peaks is made.

\(\bullet\) Searching of layers. For every beam the layers of wires and walls are found, ordered, and identified. The matching of layers and wires for different beams is done. For calibration ruler layers the matching with optical measurements is done also. A 1-dimensional fit for every layer is made.

\(\bullet\) Geometry fit. Geometrical parameters of the X-tomograph are found.

\(\bullet\) Calculation of the chamber wire coordinates. The template grid (ideal wire structure with 5 free parameters) fit is done for every multilayer.

\(\bullet\) The final results are calculated and drawn.

\(\bullet\) Tables in WWW-compatible format are built and written to the file.

We describe below the main methods and approaches used in the "scana" program.

## 4 Pattern recognition

This is the most complicated part in the program from the point of view of the number of steps which must be made and the number of a priori parameters which must be chosen and, as consequence, the number of lines of code. Though the pattern recognition works now without mistakes for all files, there still exists a probability that some of the parameters will have to be tuned for future scans. The problem is that those parameters mostly rely on the mechanical and other parameters which may change during upgrade (for example, the width of the X-ray beam may change, owing to which the peak fitting interval must also be changed etc.).

### Searching of wire peaks

Figure 4.1: A fragment of a typical shadowgram. Scaler values vs position of the carrier (mm).

Figure 4.2: A shadowgram near the chamber spacer.

The X-ray tomograph data are just a sequence of values of interferometer measurements (\(X\), \(Z\) and \(\alpha_{Y}\)), tiltmeter measurements (\(\alpha_{x}\) and \(\alpha_{Y}\)) and 2 scalers which measure the intensity of the X-ray beams, i.e. just an absorption. A typical shadowgram for one period of measurements is shown in Figure 4. All peaks from wires and walls are seen very well at that part of the chamber. In the area of shadow of the chamber spacer the situation is much worse (see Figure 4.2). Many peaks are not seen at all and some peaks have a noisy background (of course, the background is constant but the peak height is smaller, we speak about relative values). So we have to find them. The idea is to calculate the first derivatives for every point and compare them with threshold to find a region with big enough negative and positive derivatives. The main problem as usual with numerical derivatives is a sensitivity to the measurement errors. A natural way to suppress the errors is to increase the number of points for calculation of the derivatives. There is an infinite number of combinations of coefficients \(a_{i}\) to approximate the derivative using \(N\) consecutive measurements of function \(y_{i}\):

\[y^{\prime}\equiv\sum_{i\ =\ 1}^{N}a_{i}\cdot y_{i}\]

with the second order precision using more than 2 points. Indeed,

\[y_{i}\ =\ y_{0}+h_{i}\cdot y_{0}{}^{\prime}+\frac{h_{i}^{2}}{2}\cdot y_{0}{}^{ \prime\prime}+\ldots,\mbox{ where }h_{i}\ =\ x_{i}-x_{0}\]

\[\sum_{i\ =\ 1}^{N}a_{i}\cdot y_{i}\ =\ y_{0}\cdot\sum_{i\ =\ 1}^{Ni}a_{i}+y_{0}{}^{ \prime}\cdot\sum_{i\ =\ 1}^{N}a_{i}\cdot h_{i}+\frac{y_{0}{}^{\prime\prime}}{2}\cdot\sum a_{i}\cdot h _{i}^{2}\ldots\]

But there exists only one such approximation minimizing the statistical error contributed to the derivative by measurements. One can compose a corresponding system of equations:

\[\left\{\begin{array}{l}\sum_{i\ =\ 1}^{N}a_{i}\ =\ 0\\ \sum_{i\ =\ 1}^{N}a_{i}\cdot h_{i}\ =\ 1\\ \sum_{i\ =\ 1}^{N}a_{i}^{2}\ =\ min\end{array}\right.\]

relative to the coefficients \(a_{i}\) which gives a corresponding approximation of first derivative with minimal statistical error. The solution of the system is the following:

\[a_{i}\ =\ \frac{\sum_{k\ =\ 1}^{N}h_{k}-N\cdot h_{i}}{\left(\sum_{k\ =\ 1}^{N}h_{k}\right)^{2}-N\cdot\sum_{k\ =\ 1}^{N}h_{k}^{2}}\]

### Peak fitting

When a peak has been found we have to find its parameters, first of all a precise position. The shape of a wire peak looks like a Gaussian distribution. The only thing we have to take into account is that the peak may be on a significantly inclined line. So to get the parameters we use just a fit by the following function:

\[y\ =\ C\cdot e^{-\frac{\left(x-a\right)^{2}}{2\sigma^{2}}}+a_{x}\cdot x+b_{x}\]

relative to 5 parameters: \(C\), \(a\), \(\sigma\), \(a_{x}\), \(b_{x}\).

At this stage bad peaks can be rejected analysing the values of the parameters and estimations of their errors.

### Wire layers

To separate wires in the layers we have to choose all those which may be put in an equidistant grid (Figure 3) with a reasonable precision (about 100-200 \(\upmu\)m). For that, some supposed pitch is chosen then a corresponding grid is built and the distances from real peaks to the nearest ideal position are put into the histogram.

Because the real pitch may be different from the supposed one, such histograms are built for pitch values which cover a whole range of possible pitches. In fact a 2-dimensional histogram as a set of 1-dimensional ones is a result of the procedure (Figure 4).

It is obvious that if the supposed pitch is near to the real one we have high peaks in the 2D histogram. For example (Figure 4), for the BMS chamber (\(2\times 4\) layers) 24 wire and wall layers with pitch about 30.08 mm and 2 peaks for calibration ruler wire layers with pitch 30.0 mm are seen very well. So the task is just to find them. It is done with a simple sequential

Figure 3: Layer search scheme. The layer is a set of wires with the same “Shift” value if the “Supposed pitch” is equal to the real one.

scanning of all channels of the 2-D histogram. Channels with small values are rejected. Channels with close pitches which belong to the same wire layer but are more spread out due to a larger error for the pitch are also rejected.

97/07/25 10.04

30.2

30.1

29.8

4.4 Identification of chamber and calibration ruler layers

It is necessary to distinguish chamber and calibration ruler layers and then to determine a proper order of those layers.

Unfortunately, attempts to make it simple just by analysing averaged parameters of the wire peaks for individual layers (height, width of peaks, their errors, etc. which must in the ideal

Figure 4.4: A typical 2-dimensional histogram to find wire layers as biggest peaks.

case change regularly from layer to layer going from top to the bottom) were unsuccessful. The main problem was the unreliability of this approach. It appeared impossible to find a set of parameters which allowed chamber layers to be sorted in a proper order for all measured chambers owing to rather big differences in their geometrical characteristics (dimensions, pitch values, especially compared with the calibration ruler pitch, number of layers, number of tubes, width of spacers, etc.) though it was possible to do it for individual chambers.

So a group of layers had to be found. A group of layers is wire and wall layers in the same multilayer. The idea is to use a geometrical configuration of the system. Looking at the Figure 4.4 we can see a typical layer structure. There must be 3 or 4 wire layers with distance about 0.6 mm and 2 sets of left and right walls with the same number of layers and with the same distances between them as for wire layers2). The distance between wall layers and wire layers must be about 17 mm. There are two groups like that (as many as number of multilayers). So the task is to look over all possible permutations and to choose the best one. Since there is a small number of layers it is a reasonable approach. The multilayers themselves are easily identified by the physical parameters mentioned above because of the big difference for different multilayers.

Footnote 2: Under distance between layers we suppose the distance as seen on Figure 4.4.

To identify calibration ruler layers two approaches are applied. The first one is based on different pitches for chambers and calibration rulers. If it does not work (for the Calypso chamber, for example, because of the same value of the pitches) the physical parameters are used. In all cases the calibration ruler layers are checked with the geometrical parameters (the distance between them must be about 3 mm).

### Matching of layers

The last step of the pattern recognition procedure is the matching of the layers for different beams. For the calibration ruler it is necessary also to match the layers with the optical measurements.

This task could be elementary in the case where all first and last wires in every layer have been found. But this practically never happens because of overlapping of the calibration ruler and chamber wires and pattern recognition errors due to that; also accidentally large statistical errors, and even physical absence of the wires. So for chamber wires again the best method is to look through all possible cases of design of the multilayer and choose one which fits to the real values best.

For the calibration ruler the approach for matching is based on the fact that we really had two calibration rulers and they were aligned with a gap about 100 \(\mu\)m so it is easy to see that if there were no pattern recognition errors. To avoid an influence of those errors the position of this gap was determined 4 times (indeed we have 2 beams and there are 2 layers of the calibration ruler). So we have an opportunity to find consistent measurements and to choose them as a reference point for the matching.

## 5 Geometry fit

As has already been mentioned, during scanning the X-tomograph set-up permanently (every 20 \(\upmu\)m) monitors the space position of the carrier using interferometers and tiltmeters. The interferometry provides us with a precision of linear position (along the _OX_ axis) and straightness (shift along _OX_ axis) better than 1 \(\upmu\)m and of the pitch angle (rotation around _OY_ axis) better than 1 \(\upmu\)rad. The tiltmeter measures the roll angle (rotation around _OX_ axis) with a precision of 1 \(\upmu\)m. The task is to determine positions of the X-ray beams as precisely as possible at any moment using those measurements. For that we need to know the geometrical parameters of the carrier which describe the positions of the X-ray beams relative to the interferometer sensors and interferometer laser beams. It is rather difficult to do it directly, for example, to determine the position of X-ray beams in space. Another difficult task is the determination of the laser beam positions. It becomes even more difficult because it is practically impossible to guarantee that those parameters don't change from time to time (for example, during installation or removal of the chambers, during maintenance operations etc.).

To do that we have chosen the following approach. It is necessary to measure some reference wire system with the precisely known position of the wires and minimize differences between those measurements and the X-tomograph predictions just by finding geometrical parameters. Clearly the reference system may be measured simultaneously with the chamber providing the same conditions for the chamber and reference system measurements. Such an approach guarantees that geometrical parameters are not changed for the calibration and for the scan.

Two calibration rulers have been made as a reference system with a common length about 2.5 m. Every calibration ruler consists of 2 layers of 42 wires in each with a distance between layers of 46 mm. The distance between wires is 30 mm. Positions of the wires have been optically measured at the CERN metrology division. Every wire was measured at 3 different points along the wire (-4.5 mm, 0 mm and 4.5 mm counting from the middle). This allowed all necessary parameters of the reference wires and the precision of optical measurements to be estimated. It was 1.1 \(\upmu\)m for the X coordinate and 2.5 \(\upmu\)m for the Z coordinate. Unfortunately inclinations of wires relative to one another appeared rather big (up to 15 mrad) and additional efforts were required to compensate for that.

### Determination of carrier position

The position of the carrier was determined according to the scheme on Figure 5.1. Geometrically the carrier consists of three interferometer sensors and two X-ray beams. Using the vector algebra approach, we can describe the relative position of two arbitrary points \(X\) and \(Z\) with the vector _RXZ_ and the position of some straight line relative to some reference point (for example, beginning of coordinate system) with the perpendicular vector \(R\). The rotation of any vector by the angle \(\alpha\) may be described with the matrix _M_\({}_{\alpha}\) (we use _M_\({}_{90}\)).

So, supposing that the relative positions of the \(X\) and \(Z\) sensors and the X-ray beam are known (fixed and turned by the angle measured with the angle sensor) we can describe the 2-dimensional orientation of the carrier as follows: the \(Z\) sensor must be at the straight line parallel to the \(Z\) beam at a distance _Zmeas_, the _Xsensor_ must be at the straight line perpendicular to the \(X\) beam at a distance _Xmeas_ from the zero point of the \(X\) beam. In this case the 2-dimensional configuration may be described with 3 known vectors: _RZmeas_, _RXbos_, _RXZ_ and 2unknown vectors \(\overline{\mathbf{R}}_{X}\) and \(\overline{\mathbf{R}}_{Z}\). This geometrical composition allows one to find the vector \(\overline{\mathbf{R}}_{Z}\) (and \(\mathbf{R}_{X}\)) and hence the position of the \(Z\) and \(X\) sensors (see Figure 1).

One can easily calculate that in such an approach 10 parameters are needed to describe the 2-dimensional position of the carrier with sensors and X-ray beams. Experimentally it was proved that the position of the \(X\) interferometer beam in the \(Z\) direction (even taking into account the inclination) is not essential and leads to a singular normal matrix during fitting and was fixed. So the total number of parameters of the carrier is 9.

There are 2 additional parameters needed to make corrections from the point of view of 3-dimensional space. The "Roll" rotation (around the \(OX\) axis) requires the "effective centre" of rotation. It may only be effective because of the absence of the measurements for the carrier shift along the \(OY\) axis. Anyway we need a precision of tens of microns for the \(OY\) axis so it seems to be a rather reasonable approach. Another parameter has to be introduced because the \(Z\) sensor is not in the working (\(XOZ\)) plane. So to make corrections to the \(Z\) measurements we

Figure 1: Scheme for determination of the space position of the carrier.

need to know the distance from the \(Z\) sensor to the working plane.

### Calibration ruler parameters

Another set of parameters determines the positions of the calibration rulers. For every calibration ruler it is necessary to have the position and inclination in the \(XOZ\) and \(XOY\) planes. The \(XOY\) plane is necessary for corrections due to rather big inclinations of the calibration ruler wires in the \(XOY\) and \(YOZ\) planes. Because of it we have to describe a trace of every X-ray beam which may be shifted and inclined relatively to the \(OX\) axis in the \(XOY\) plane near the calibration ruler. For the same reason it is necessary to take into account the angle of the rotation of the calibration ruler around the \(OX\) axis. One can easily calculate that the total number of parameters without fixed ones (for example, the positions of both rulers in the \(XOY\) plane are relative, one ruler has to be fixed in that plane) is 11.

Two more parameters have been added to describe the "hanging" of the calibration rulers. They were measured with the vertical position of the wires but used with the horizontal one. This means that there may be an additional saggita in the position of the wires in the middle and near the edges of the rulers. The simplest way to describe this is a parabolic approximation.

### Fitting

Having X-ray measurements of the positions of the calibration ruler wires and their real coordinates in space, we can find the parameters described above to minimize the difference between predictions with the X-ray beams and optically measured positions of the wires. It is necessary to stress that only global parameters are found so the worst case which may happen during the fitting procedure is the redundancy of parameters, i.e. some parameters may be partially or completely (in certain cases) correlated. To avoid problems connected with this we used regularization.

To decrease an instability due to statistical fluctuations of the measurements, the \(3\sigma\) cut was applied to the individual measurements. The \(\sigma\) was taken from r.m.s. measurements of the previous iterations or a large number for the first one.

Analysis of the real data showed that this approach appeared rather stable and gave an r.m.s. of the residuals for the calibration ruler between 4.5 and 5.5 \(\mu\)m for all scans.

## 6 Chamber wire position analysis

In the next section the standard muon chamber system of coordinates will be used: \(OZ\) scan direction, \(OY\) - vertical direction, \(OX\) - along wires.

### Fitting of the wire positions

Practically the same approach as for the determination of the geometrical parameters was used. The only difference being that only parameters describing the carrier were taken into account. Then the difference between predictions with the X-ray beams (with known geometrical parameters) and the estimated wire coordinates was minimized.

### Layer and multilayer fits

Layer and multilayer fits were done to estimate the quality of the chamber. This means that the ideal hexagonal structure (template) of the wires was fitted to the layer or multilayer. The parameters of the template are the following:

\(\bullet\) Position of the template along the \(OZ\) axis.

\(\bullet\) Position of the template along the \(OY\) axis.

\(\bullet\) Distance between wires in the \(OZ\) direction.

\(\bullet\) Distance between layers of wires in the \(OY\) direction. This value is multiplied by \(1/(\cos 30^{\circ})=1.1547\). In such a case both distances must be equal for the ideal hexagonal structure that allows to easily compare parameters of the chamber for both directions. This parameter is used only for the multilayer fit.

\(\bullet\) Rotation angle of the layer around the \(OX\) axis.

Using the parameters of the closest ideal template we estimate the fluctuations of the wires from the ideal positions and build the corresponding array of 2-dimensional vectors of wire shifts.

Using the array of shifts we estimate global parameters of the chamber multilayers: \(|S|\) - mean absolute value of the shifts, \(\sigma_{|S|}\) - r.m.s. of their distribution and \(\sigma_{S}=\sqrt{\sigma_{Z}^{2}+\sigma_{Y}^{2}}\) as a common shift fluctuation in both directions. In the case when fluctuations in both directions are the same (let say, 20 \(\upmu\)m) and are not correlated \(\sigma_{S}=\sqrt{2}\times\sigma_{Z}=\sqrt{2}\times\sigma_{Y}\) (\(=28\)\(\upmu\)m).

## 7 Results

### Presentation of the results

Results obtained from analysis are saved in different ways. The wire shifts from the ideal template are drawn as shift maps. Each wire is surrounded with a circle corresponding to the 60 \(\upmu\)m absolute value of shift. The shift itself for every wire is drawn as a line starting from the wire position. Its length is proportional to the absolute value of the shift with a scale such that the 60 \(\upmu\)m length would be just on the circle, and its direction shows the real direction of the shift (Figure 7.1).

On the same picture the multilayer and integral parameters are also shown. Missing wires correspond to the shadows from the chamber spacers and can not be seen with the X-tomograph.

To help producers and other interested people to estimate the quality of the chambers, a table of some important parameters has been prepared for every scan in the WWW compatible format [9]. An example may be seen on Figure 2. In the first table the following values may be seen: horizontal pitch values with the r.m.s. value of their distributions in parentheses, the r.m.s. value of vertical fluctuations of the wires, mean values and the r.m.s. values of distances between wires in neighbouring layer (2 values: for left and right lower wires).

In the second table a comparison of the 2D and 1D estimations is shown. The values of pitches and r.m.s. values of the distributions of the wire shifts from the template (grid) positions are found from the fit of the wire \(Z\) coordinates with the grid function:

\[Z_{Wire}\sim i_{Wire}\times Pitch+Shift\]

The mean value of pitches for both beams of the 1D results (second and third columns) gives an estimation for the real horizontal pitch and must be close to the estimation of the pitches with the 2D approach (first column).

Figure 1: Example of wire shifts map.

### Systematics

After first results had become accessible for interested people, it was soon obvious that some systematic errors were present in the result. To understand where the systematics came from, the residuals on the calibration ruler were investigated first. An example of the final residuals may be seen in Figure 7.3.

One can see an obvious superposition of the statistical fluctuations (which seems to be about 2.5-3 \(\upmu\)m and corresponds to the expected value) and the systematic effect. It means that the systematics is seen even by the calibration ruler. So there might be two reasons for that: prediction errors (systematics in measurements by interferometers) or errors of the optical measurements of the calibration ruler. Investigations of the source of the problem were made in attempts to find a polynomial compensating function for the angles of the beams in the \(XOZ\)

Figure 7.2: Example of 2D-analysis results in the WWW format.

plane or for errors of optical measurements of \(X\) or/and \(Z\) coordinates of the wires of the calibration ruler. The result of the investigations showed that it was certainly not prediction errors because any attempt to introduce a compensation for them led to a catastrophic deterioration of the chamber wire positions and their characteristics. A compensation of the optical measurements improved the residuals of the calibration ruler (Figure 7.4) but the characteristics of the chamber wires did not change significantly. So because of that and because the polynomial corrections are very artificial, that is they don't cure the source of the problem, it was decided not to use such corrections. So the note "No corrections" appears on all pictures and tables produced by the "scana" program.

_97.09/09 09.01_

_Figure 7.3_ Final residuals on the calibration ruler. The systematics is seen very well and may be estimated as about 10 \(\mu\)m.

A new series of measurements of the same calibration rulers proved that a precision of the optical measurements is not enough for calibration of the X-tomograph. On Figure 7.5 the differences between two measurements of \(Z\) coordinates of points of the same layer [3] are shown. Before comparison the system of coordinates of the measurements was aligned one relative to another with a fitting procedure varying the \(X\), \(Y\), \(Z\) coordinates of the first point and two angles. So even for the same two measurements (from the point of view of the position of the ruler, the methods of measurements etc.) one can see an obvious systematics (about 10 \(\mu\)m). It can not be an effect of the change of the shape of the ruler (the time between measurements was about 5 months) because the effect is different for other layers of points.

Footnote 2: The calibration ruler has two wire layers. Every wire was measured at three points (-4.5, 0 and 4.5 mm along the wire) so we have six layers of measurement points along the calibration ruler.

Another thing which had been detected is that there was a common shift of two sides of the wire layers of the calibration ruler by up to 7 \(\mu\)m along the ruler and up to 15 \(\mu\)m in the perpendicular direction (that is the distance between layers has an error of 15 \(\mu\)m).

Figure 7.4: Final residuals on the calibration ruler with polynomial compensation of the optical errors for X and Z coordinates. The systematics looks much less and is about 2-3 \(\mu\)m.

[MISSING_PAGE_EMPTY:20]

[MISSING_PAGE_FAIL:21]

[MISSING_PAGE_FAIL:22]

The second column contains the scan name and the relative position of the scan cross section along the chamber tubes counting from the HV side.

The next three columns show parameters of the lower multilayer. The first one is the mean absolute value of wire shifts from ideal positions. The ideal position was taken as a position of the corresponding wire in the ideal grid template. Then the difference from the calculated with the 2D analysis pitch values of 30 mm is shown. Finally, estimated interlayer distances are shown. To make them easier to compare with the pitches the values are divided by \(\cos 30^{\circ}\) and subtracted by 30 mm. The same three parameters are for the upper multilayer.

The last two columns contain the mean absolute value of the shift of wires from ideal positions and the RMS value of the corresponding distribution for a whole chamber. To simplify a comparison with other values both histogram and precise numbers are shown.

## References

* [1] ATLAS Muon Spectrometer Technical Design Report, CERN/LHCC/97-22 (1997)
* [2] The ATLAS Collaboration, ATLAS Technical Proposal for a General-Purpose pp Experiment at the Large Hadron Collider at CERN, CERN/LHCC/94-43. LHCC/P2 (15 December 1994)
* [3] L. Vertogradov, High Precision Wire Positions Measuring in the Drift Tube Package by the X-ray Scanner (XTomograph), ATLAS Internal Note MUON-NO-041 (1994)
* [4] G. Alexeev et al., XTOMO, A Prototype of the X-ray Tomograph for High Precision Measurements of the MDT Muon Chambers, ATLAS Internal Note MUON-NO-142 (1997)
* [5] D. Drakoulakos et al., XTOMO, One-dimensional X-ray Scanning of a 8-layer MDT Prototype Using the 'Passive Mode', ATLAS Internal Note MUON-NO-151 (1997)
* [6] D. Drakoulakos et al., XTOMO2, Stereo-Measurements of the MDT Muon Chambers Using a High Precision X-ray Tomograph, ATLAS Internal Note MUON-NO-155 (1997)
* [7] J. Berbier et al., X-ray Tomograph Prototype for MDT Quality Control, ATLAS Internal Note MUON-NO-174 (1997)
* [8] D. Drakoulakos et al., The High Precision X-Ray Tomograph for Quality Control of the ATLAS MDT Muon Spectrometer, CERN-OPEN-97-023, 30 July 1997
* [9] X_Tomo WWW reference address: [http://wwwcn.cern.ch/~sedykh/X-tomo](http://wwwcn.cern.ch/~sedykh/X-tomo)
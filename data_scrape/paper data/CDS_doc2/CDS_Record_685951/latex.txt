[MISSING_PAGE_FAIL:2]

0 Appendix B Preliminary specifications for the future single element detector test station STS-camac S

The STS is housed in a 3M CAMAC module Voltage is set and controlled via computer and is indicated at the front panel. An additional control on the front panel allows manual change of the voltage in a simple up-down mode by 1V step. A special button on the front panel allows manual switch-off the voltage. Another button allows restoration of the previously set voltage. The voltage growth rate is about 100V/s.

The output current is measured via computer and is indicated at the front panel A temperature sensor at a cable of up to 5m is connected to the module via a connector at the front panel. Temperature is measured via computer and also is indicated at the front panel. Optionally STS-1 may provide a measurement of capacitance between the high voltage and the ground electrodes of the biased device. The capacitance value is available via computer with simultaneous indication at the front panel.

1 Appendix B Preliminary specifications for the future single element detector test station STS-camac S

\begin{table}
\begin{tabular}{|l|l|} \hline \hline \multicolumn{1}{|l|}{OUTPUT DC VOLTAGE} & \\ \hline Output voltage & 0-1000 V (any polarity) \\ \hline Voltage setting accuracy & 0.1V in the range 0-100 V \\ \hline Voltage oscillations & \textless{} 0.1\% AND \textless{} 0.1 V \\ \hline Temperature stability & better than 0.01 V/1C \\ \hline OUTPUT DC CURRENT & \\ \hline Maximum output current & 10 mA \\ \hline Measurement accuracy: & 0.01â€™lout + 1 nA \\ \hline TEMPERATURE MEASUREMENTS & \\ \hline Measurement range & -40C - +60C \\ \hline Accuracy & 0.1C \\ \hline CAPACITANCE MEASUREMENT & \\ \hline Frequency & 0.1 - 1000kHz (variable by factor 10) \\ \hline Amplitude of the AC signal & 0.5V \\ \hline range & 0 - 200 pF \\ \hline accuracy & 0.2 pF \\ \hline \hline \end{tabular}
\end{table}
Table 6: Characteristics of the STS

\begin{table}
\begin{tabular}{|l|l|} \hline \hline common & common \\ \hline
32 & 64 \\ \hline
31 & 63 \\ \hline...... &...... \\ \hline...... &...... \\ \hline
2 & 34 \\ \hline
1 & 33 \\ \hline common & common \\ \hline \end{tabular}
\end{table}
Table 5: bottom connector 

[MISSING_PAGE_FAIL:4]

The tests confirmed the specifications of MC128. The module operation was stable and robust. The use of 1.5m unscreened flat cable for the connection between MC-128 and the detector did not increase significantly the noise level.

### Plans for further developments

One natural direction for a further development is to supplement MC-128 by a compact Detector Power Supply Unit in CAMAC that will be able to change programmably a bias voltage in a range 0 - +- 1000 V. This module will allow also a measurement of the total output current and of the temperature

Figure 4: **Current distribution for 128 strips of a real detector measured at the depletion voltage 40V. The typical current is slightly below 1nA. Note the reliable measurement of the current at this level..**

Figure 3: **MC 128 connection**

* - F16, A3, N\({}_{\rm ch}\) Writes channel number, Resets LAM, starts calibration only if channel number=0, starts measurement. When data is ready sets LAM=1. It is recommended only with calibration mode=1, otherwise unpredictable results may follow. Switching of a commutator from channel 0 to any other channel always requires recalibration, so this command can't be used in that case. Instead use of F16,A0,N\({}_{\rm ch}\) is recommended.
* F0, A0, data Reads data from output register.
* F0, A1, data Reads data from output registers and starts measurement in same channel.
* F0, A2, data Reads data from output register and starts next channel measurement. See also F16,A2.
* F0, A3, data Reads data from output register and starts repackaging of data so that bits 24-17 can be read after that command through lines R1-R8.

Data is a result of measurement in a form of 24 bit word. To obtain the actual current the following formula should be used :

I(nA) =10250.0*(0x800000-data)/0x800000 for channels 1-136.

The same formula gives a current in microamperes for channel 0.

### Programming for MC128.

The following example shows how to measure current in all channels.:

F9 Initial reset F26 Enable LAM Wait for LAM F16,A1,10 Set notch freq 10Hz. Wait for LAM F16,A2,0 Set calibration mode 0 Wait for LAM F16,A0,0 Set starting channel number =0 and start measurement for(i=0:i<129;i++) { Wait for LAM F0,A2,data Read 24 bit data and start next channel measurement /* alternative for 16 bit CAMAC controller */ /*F0,A3,lowdata read low 16 bits */ /*F0,A2,highdata read high 8 bits and start next*/ /* data = ldata+highdata<<16 */ I[i]=10250.0*(0x80000-data)/0x800000 }

### First practical results

The first practical tests of MC128 were performed at CERN in March - April 1995 in measurements with ATLAS prototype strip detectors produced by the MSU (Moscow) group within a framework of RD2. The connection diagram between the detector, high voltage source and external voltmeters are shown in Fig. 3. The system was connected to a Macintosh through a Micron card and MAC-CC crate controller. The software was developed under LabView 3.10. Some of the results obtained are illustrated in Figs.4-5.

[MISSING_PAGE_FAIL:7]

capacitance. A 100pF cable capacitance at frequency 10KHz has a 150K\(\Omega\) impedance to ground, compared with the MC128 10K\(\Omega\) input impedance to ground. So only 7% of AC current will be lost,limiting the error due the cable capacitance. Using a sample capacitor for calibration procedures in one of the channels, both the slow drift and cable errors can be reduced down to 0.1-0.2%.

### Digital part.

The digital part consists of: Intel 8051 microprocessor, CAMAC interface, LED indicator and manual control keys.

#### 3.2.1 The 8051 microprocessor

Most CAMAC functions are interpreted by the microprocessor. One of its main functions is ADC and commutator control. It also provides a proper measurement sequence: switch commutator to next channel, invoke calibration sequence when amplifier offset changes, wait for filter setting time, get data and transfer data to CAMAC interface.

The microprocessor allows the easy addition of new CAMAC functions to MC128 module. For example, to operate the module via a Macintosh Computer with Micron card and a MAC-CC crate controller working only with 16 bits of CAMAC bus, a new CAMAC function was added, which allows to read bits 24-17 of a data through the R8-R1 lines. To implement the new function it was sufficient to reprogram the ROM chip that contains the program executed by the microprocessor.

The microprocessor also supports manual operations, with the MC128 used as a commutator and current amplifier. The commutator can be switched to any channel by pressing front panel keys, and doesn't require any computer control.

#### 3.2.2 Calibration

There are two different calibration modes, mode 0 and mode 1, differing in the way the ampllifier offsets are treated.

In mode 0 a calibration is performed during the setting of a new channel, switching to a next section of the commutator or a switching to the Common Bus channel. In this case the calibration routine will include the amplifier offsets, so that the measured data do not contain the offsets.

In mode 1 a calibration is performed only when the ADC input is switched and theADC inputs shorted, so that the measured data will include amplifier offsets. The offsets can be measured separately and subtracted by software.

#### 3.2.3 CAMAC interface

The CAMAC interface consists of input register, output register and a logic which decodes CAMAC functions. It can execute the simplest standard CAMAC functions such as F8, F24, F26. All other functions only reset the Module Ready Trigger of CAMAC interface and then this functions can be executed by the microprocessor. After finishing the execution the processor sets the Ready Trigger up. The Ready Trigger of CAMAC interface affects Q and LAM signals. When the module is not ready there is no LAM or Q.

### Front panel

At the front panel there are two 68-pin input connectors. Each connector contains 4 pins connected directly to the Common Bus and 64 input pins. (See Appendix A.).

It also contains:

* output of analog multiplexer.
* output of common bus current amplifier. The signals from these two connectors always contain amplifier offsets, which should be measured separately.
Note that a connection of an external voltmeter to the control connector can increase the conversion noise of the MC128.

#### 3.1.2 The AD7710 ADC

Both U\({}_{\textrm{out}}\) and U\({}_{\textrm{com}}\) are connected to the AD7710 ADC. The AD7710 consists of: input commutator, internal reference, charge balancing ADC and output digital filter.

The first notch of the digital filter can be programmed via the on-chip control register. The data rate of the ADC is equal to the first notch frequency of the digital filter. This data rate can be obtained in one channel measurements. In case of sequential channel measurements the data rate is reduced by a factor 6. One period of data rate is used for synchronisation, 4 periods is a filter setting time and 1 period is used for a measurement. The AD7710 can execute a calibration sequence, which allows the subtraction of the input amplifiers offsets. The microprocessor of the MC128 automatically forces this calibration sequence when the input amplifier offset changes. The calibration sequence also requires some time.

The AD7710 provides up to 24 bits of no missing codes performance. The effective resolution, defined as the magnitude of the output RMS noise with respect to input full scale at 10 Hz first notch frequency, is 21.5 bits. It means that at \(+10\mu\)A range of module the internal ADC convention RMS noise is less than 7pA. It corresponds approximately to 40pA peak-to-peak noise. The full noise, including switches, amplifiers and ADC, is less than \(+\)50pA. Note that this noise included in an amplifiers offset during calibration sequence can give an offset error up to \(+\)-50 pA for a group of measurements.

#### 3.1.3 Capacitance measurement

In the capacitance measurement option, a built-in generator and a synchronous detector are added. A front panel switch allows the choice between current and capacitance measurements.

The generator provides a 0.5V sinusoidal signal at a 10KHz frequency. This signal is added to bias voltage applied to the detector. The AC component of the current of each channel is detected by a synchronous detector, which can be connected between the second step of the multiplexer and the analog low-pass filter (Fig 1). The synchronous detector selects the reactive current component and suppresses the active AC component, allowing the measurement of the capacitance current only. The full scale range for capacitance measurement is 100pF with a resolution of better than 0.1pF.

The gain error, mainly due to a slow drift of the generator amplitude and phase, is not more than 5%. Because of the MC128 low input impedance to ground, practically all input current flows directly to the input amplifier, and only a small part of the AC current flows to the ground through the cable

Figure 2: **Schematics of the switch**

The switch functionality is illustrated in figure 2 The input current is converted to voltage using the current amplifier (1) while the potential at the input is kept at ground potential by the feedback resistor (2). The advantage of switching channels at ground potential is that, since no recharge of input capacitance is required, the setup time after each channel switching can be reduced. Another advantage is the reduction of leakage current, because all signal lines and the grounded guard rings have the same potential  Each input switch consists of two field effect transistors especially selected for low leakage currents. The first one (4) is an n-channel FET that connects the current of an "off" switch directly to the Common Bus, which is also at ground potential. The other (5) is a p-MOS that connects the input to the amplifier. The use of different transistors allows to connect together the gates of both transistors, so that one is opened when the other is closed. This switch provides a good electrical shock protection. The input resistor (3) of each channel provides negligible voltage drop for normal input current, but reduces the input current in case of electric shock. Excess positive voltage will open the diode between channel and substrate of the p-MOS transistor and a current will be drained to the Common Bus. Excess negative voltage will be drained through the gate of n-channel transistor to a protection circuit at a control line..

The second multiplexing stage is a single 8-\(>\)1 multiplexer. It has an analog low-pass filter at it's output. The filter's output is also accessible at the front panel as:

\[\mathrm{U_{out}=1M\Omega^{*}I_{inp}.}\]

The Common Bus amplifier converts the Common Bus current to a voltage, that is also available at the front panel as:

Figure 1: **MC-128 functional diagram.**

### MC-128 specifications

### MC128 functional description

The MC128 can be divided into an analog and a digital part (Fig. 1) The analog part consists of: analog multiplexer, low pass filters and ADC. The digital part of consists of: microprocessor, CAMAC interface, LED indicator and manual control keys.

### Analog part.

#### 3.1.1 Multiplexer

The analog multiplexer is separated in two stages. The first consists of 8 identical 16\(>\)1 sections operating simultaneously. Each section contains 16 switches and one amplifier. For single channel measurement only one channel is be connected to the amplifier input, all other being connected to the Common Bus. For Common Bus current measurement or for a measurement of amplifier offsets all channels are connected to the Common Bus.

\begin{table}
\begin{tabular}{|l|l|} \hline Number of switching channels & 128 \\ \hline Number of permanently connected channels & 8 \\ \hline Output CAMAC code & 24 bits \\ \hline Single channel measurement rate & 10-100Hz \\ \hline Switching channel measurement rate & 1.5-15Hz \\ \hline \end{tabular}
\end{table}
Table 1: Main parameters of the MC-128

\begin{table}
\begin{tabular}{|l|l|} \hline Current measurement range for a switching channel & +-10\(\mu\)A \\ \hline Current measurement range for Common Bus & +-10mA \\ \hline Maximum allowable current in each channel & +-5mA \\ \hline Maximum allowable Common Bus current & +-100mA \\ \hline Peak-to-peak noise for switching channel current & +-50pA \\ \hline Peak-to-peak noise for Common Bus current & +-50pA \\ \hline Offset error & +-50pA \\ \hline Gain and nonlinearity error & +-1.0\% \\ \hline Maximum input voltage drop for 10\(\mu\)A current in a switching channel & +-0.1\% \\ \hline Maximum input voltage drop for 10mA Common Bus current & +-0.1\% \\ \hline \end{tabular}
\end{table}
Table 2: Current Measurements

\begin{table}
\begin{tabular}{|l|l|} \hline Test AC frequency & 10KHz \\ \hline Amplitude & 0.5V \\ \hline Full scale range & 100pF \\ \hline RMS noise & +-0.1 pF \\ \hline Offset errors & +-0.1 pF \\ \hline Gain and nonlinearity errors (not including cable errors) & +-5\% \\ \hline \end{tabular}
\end{table}
Table 3: Capacitance measurements in switching channels (optional)

**MC-128: Current Commutator for Silicon Strip Detector Tests**

F.Anghinolfi(1), R.Bonino(2), A.Chilingarov(3),

M.Kollegov(3), E.Kuper(3), A.Ledenev(3)

1) CERN, Geneva, Switzerland.

2) DPNC, Geneva University, Geneva, Switzerland.

3) Budker Institute of Nuclear Physics, Novosibirsk, Russia

## 0 Introduction

The MC-128 is a CAMAC module designed to simplify routine tests of multichannel semiconductor detectors. It was developed at Budker Institute of Nuclear Physics (BINP), Novosibirsk in collaboration with RD2, as part of the ATLAS SCT development program.

The module provides 128 channels, offering sequential measurement of the currents flowing from detector strips to a grounded Common Bus. Each input stays virtually connected to the Common Bus independently on whether its current is measured or not. Eight inputs are permanently connected to the Common Bus, allowing the connection of additional elements like guard ring structures. The total detector current can be measured as the current flowing through the Common Bus. Measurements are accessible via a CAMAC bus and in analog form via a front panel connector. Optionally, the MC-128 allows the measurement of the capacitance between each strip and the common (high voltage) electrode of the detector at 10 kHz frequency.
**ATLAS TDAQ/DCS. Global Issues**

**Working Group**

**Partitioning**

**Document Version:** **1.0**

Abstract

Oxford English Dictionary. _Partition_. n.

**4.** Each of the parts into which any whole is divided, as by boundaries or lines; a portion, part, division, section. **a.**_gen._ (Formerly applied to the divisions of a book or literary work.) Now _rare_.

**1561** T. NORTON tr. _Calvin's Inst._ I. xiii. (1634) 56 He...affirmed, that there be part, and partitions in the essence of God, of which every portion is God.

**Authors**

H. Burckhart, Ph. Farthouat, B. Di Girolamo, B. Gorini, S. Kolos, D. Liko, G. Mornacchi, R. Spiwoks, F. Touchard, F. Wickens, H. Zobernig

## 1 Introduction

### Readership

This document is primarily intended for the ATLAS TDAQ Steering Group. However we also anticipate that it will be of interest to the ATLAS Detector Interface Group (DIG), to members of the ATLAS TDAQ community and anybody in ATLAS who is involved with or has an interest in the issue of partitioning.

### Objectives

This document summarises the analysis of the working group in the area of partitioning of the ATLAS TDAQ system. Its objectives are:

* To define the concept of partitioning the TDAQ system, intended as the final ATLAS TDAQ system and excluding test beds, laboratory prototypes and other preliminary implementations.
* To classify, in terms of the required functionality, how sub-sets of the TDAQ system may be meaningfully defined.
* To highlight issues which may constrain the practical definition or use of a partition (e.g. cabling).
* To highlight implications for TDAQ sub-systems, e.g. the online sub-system.
* To maintain a view which is global and coherent across the ATLAS TDAQ system.

### Glossary, acronyms and abbreviations

#### Acronyms and Abbreviations

BCBunch Crossing

\begin{table}
\begin{tabular}{|c|c|c|c|} \hline
**Title:** & \multicolumn{2}{c|}{ATLAS TDAQ/DCS. Global Issues Working Group} \\ \hline
**ID:** & \multicolumn{2}{c|}{ATLAS TDAQ-2002 XXXX} \\ \hline
**Version** & **Issue** & **Date** & **Comment** \\ \hline
1 & 1 & 22-07-02 & \\ \hline \end{tabular}
\end{table}
Table 1: Document Change Record

#### Glossary

Bunch Crossing Identifier [BCID]. Number that defines the bunch crossing at which an event occurred. Potential bunch crossings are numbered 0 to 3563 per LHC orbit, starting with the first following the LHC extractor gap.

Bunch Counter Reset [BCR]. Signal broadcast by the TTC system once per LHC orbit (89 \(\upmu\)s) to control the phase of the local bunch counters.

Central Trigger Processor [CTP]. The place where the LVL1 trigger is generated.

Configuration database

The configuration databases store the parameters necessary to describe the TDAQ system's architecture, hardware and software components, running modes and status

Data Collection [DC]. It is a sub-system of the ATLAS TDAQ responsible for the movement of event data from the ROBs to the ATLAS High Level Triggers.

Data Flow Manager [DFM]. Part of the Data Collection sub-system, it provides the synchronisation necessary to move event data from the ROS to the Event Filter.

Derandomizer

Place where the data corresponding to a LVL1 trigger accept are stored before being read out.

Detector Control System [DCS] It comprises the control of the subdetectors and of the common infrastructure of the experiment and the communication with the services of CERN (cooling,ventilation, electricity distribution, safety etc.) and the LHC accelerator.

Event Counter Reset [EGR]. Signal broadcast by the TTC system to reset the local event counters.

Event Builder [EB]. Part of the Data Collection sub-system, it merges all the fragments belonging to a unique L1ID into a full event at a single destination.

Event Filter [EF]. It provides the third level of event rate reduction in ATLAS. It is based on the full event read-out and detailed event analysis.

Event Filter Farm [EF Farm] The farm of processor in which the Event Filter runs. The same farm may also be used for different purposes, e.g. calibration, by running different software on the farm.

Event Filter Sub Farm [EF sub-farm] A sub-set of the Event Filter Farm. Input and output are provided, respectively, by the Sub Farm Input and Output elements.

Extended Level-1 ID [EL1ID] The L1ID extended to 32 bit by concatenating an 8 bit ECR counter in the high end bits.

Fast Controls Control signals broadcast by the TTC system in synchronism with the LHC clock and orbit signals, such as BCR, ECR, Clear, Run, Pause, Restart, Abort, Stop, selective Resets and synchronous Test commands.

FE Data Stream Virtual or real link between the derandomizer and the ROD, through which the FE data are transmitted.

High Level Triggers [HLT] The combination of the ATLAS Level-2 and Event Filter.

Level -1 Buffer Buffer (analogue or digital) included in the FE electronics which retains the data until the L1A is received.

Level-1 Trigger Accept Identifier [L1ID] A L1ID is built at different levels of the read-out system. The TTCrx provides a 24 bit L1ID with each L1A signal. In conjunction with the BCID, it defines uniquely an event.

**Level-1 [LVL1]**

ATLAS first level trigger system.

**Level-2 [LVL2]**

ATLAS second level trigger system. It provides a software based decision aiming at reducing the Level-1 rate by two order of magnitude. It exploits the Regions of Interest defined by Level-1 to selectively process a sub-set of the ATLAS detector.

**Level-2 Farm [LVL2 Farm]**

The farm of processor supporting the Level-2 sub-system.

**Level-2 Sub Farm [LVL2 sub-farm]**

A sub-set of the Level-2 farm.

**Level-2 Processing Unit [L2PU]**

An element of a Level-2 sub farm incorporating the calculations from which the Level-2 trigger decision is derived.

**Level-2 Supervisor[L2SV]**

The interface between the Level-2 and Level-1, it assigns events to the Level-2 sub farms or processing units.

**Level-1 Accept [L1A]**

LVL1 trigger Accept signal produced by the Central Trigger Processor (CTP) when an event has met the LVL1 trigger criteria.

**Online system**

All the software for configuring, controlling and monitoring of the ATLAS

TDAQ. It excludes: the management, processing and transportation of physics

data.

Raw Data

Data provided by the front-end electronics to the read-out buffer.

**Read-Out Buffer [ROB]**

Standard module which receives data from the ROD, stores them and makes

them available to the LVL2 trigger processors and, for LVL2-selected events, to

the EF trigger processors.

**Read-Out Driver [ROD]**

Functional element which gathers data from the derandomizers over one or more

data streams and builds event fragments to be sent to the ROB or RoIB.

**Region of Interest [ROI]**

A region limited in eta and phi, indicated by the level-1 trigger to contain

candidates for objects requiring further computation. In the case of B-physics

triggers at low luminosity, some ROI's may be defined internally within the

level-2 trigger system.

**Region of Interest Builder [RoIB]**

The element which combines RoI information from different parts of LVL1 and

forwards it to a LVL2 supervisor.

**Read-Out link [ROL]**

Physical link between ROD and ROB through which the data are sent at the event

rate of the LVL1 trigger.

Read Out System [ROS] A sub-system of the ATLAS TDAQ responsible for reading out the ATLAS RODs and for supplying event fragments to the LVL2 and EB sub-systems. Run Control Controls the data taking activities by coordinating the operating of the TDAQ sub-systems, online software components and external systems. Sub-detector Physical grouping of the system that corresponds to a whole element of the detector using the same FE electronics (ex: calorimeter, TRT...). Sub Farm Input [SF] Part of the data collection sub-system. The location where full event are built by the Event Builder. Sub Farm Output [SFO] It outputs to mass storage the complete events received from the Event Filter. Level-I Trigger Type An 8-bit word transmitted with the L1A and giving information about the type of event. Timing, Trigger and Control [TTC] Standard system which allows the distribution of timing, trigger and control signals, using the technology developed in RD12. The system delivers the standard TTC signals such as the LHC clock, L1A and Fast Controls, and provides for the distribution of other detector-specific commands and data. TTC Receiver [TTCrx] TTC receiver ASIC which delivers the decoded and deskewed TTC signals, bunch and event counters required by FE electronics controllers. TTC VME Interface (TTCvi) The TTCvi is a VME module which delivers the A-channel and B-channel signals to the TTC transmitter crate. These two signals carry timing, trigger and control information. The TTC A-channel is used only to transmit the L1A signal, the TTC B-channel is used to transmit framed and formatted commands and data. User The entity (the ATLAS detector or one of its sub-detectors) requiring data taking

### Definitions internal to the document

TDAQ system element Any ATLAS TDAQ component part (hardware or software). Stopping a run The data taking process, on a TDAQ partition, is terminated1. Pausing a run The data taking process, on a TDAQ partition, is temporarily interrupted.

## 2 Partitioning

### ATLAS TDAQ System structure

The notion of partitioning is strongly related to the organisation and hierarchy of the ATLAS TDAQ system.
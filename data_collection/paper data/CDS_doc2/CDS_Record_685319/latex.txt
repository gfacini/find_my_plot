# Event Fragment Size Distributions for the Inner Detector

R. Scholte

_NIKHEF, Amsterdam_

also at University of Twente

## 1 Introduction

The aim of this note is to provide distributions for event fragment sizes for each of the Read Out Buffers (ROBs) of the Inner Detector (Pixel, Semiconductor Tracker (SCT) and Transition Radiation Tracker (TRT) detectors). The distributions can be used as input for computer based simulations. Distributions have been generated for low luminosity (\(1\cdot 10^{33}cm^{-2}s^{-1}\)), intermediate luminosity (\(2\cdot 10^{33}cm^{-2}s^{-1}\)) and high luminosity (\(1\cdot 10^{34}cm^{-2}s^{-1}\)) running of the ATLAS detector at the LHC.

## 2 Method

Events that contain only information at the particle level have been passed through a full GEANT3 detector simulation. For each of the detectors of the inner detector the digitization information has been extracted for each module from these data samples. The modules are grouped into "Minimum Units of Readout" (MURs). One MUR usually consists of six modules, where one module is for instance one SCT module. The event fragment size distributions are generated for different mappings of modules to MURs, MURs into RODs, and a 1 to 1 correspondence of ROD to ROB. In this note the phrase "event fragment size distribution of a ROB" refers to the distribution of sizes of the event fragments output by a ROBIn.

### Datasamples

After the submission of the Physics TDR, the geometry of the Pixel detector has changed. The new Pixel detector layout is commonly referred to as the "Insertable Pixel layout". Also small changes in the endcap SCT detector geometry have been made. Throughout this note the new geometry is referred to as "fall 2001 geometry" and the old geometry as "TDR geometry". Distributions for the TDR geometry are presented in cases where the deviations between the old and new situation are significant. The results for the TDR geometry are compared to the event fragment sizes used for the 2001 version of the paper model [1]. The distributions for the fall 2001 geometry are given for endcap SCT and Pixel detectors. The data sample for the fall 2001 geometry is generated usingthe Dice version of June 28, 1999 with updated geometry information from fall 2001. The signal sample consists of \(b\bar{b}\) pairs where one of the b's decays into a muon with \(P_{T}\geq 6\) GeV, and the other can decay into anything (this is commonly written as \(b\bar{b}\rightarrow\mu\)6X). The background are QCD minimum bias events. For low, intermediate and high luminosity, 2.4, 4.8 and 24 QCD minimum bias events respectively, were added to the trigger bunch-crossing (BX) and subsequently digitized. The QCD minimum bias background was generated using the MSEL=1 switch of Pythia 6.1 [2]. The same procedure is used by the ATLAS B-physics simulation group to generate minimum bias events [3]. The standard low luminosity LVL1 trigger cut (an event should contain one \(\mu\) with a \(P_{T}\geq 6\) GeV) was used for both low and intermediate luminosity data samples. For high luminosity a \(\mu\) with a \(P_{T}\geq 20\) GeV was used, so that in this data sample electromagnetic RoIs dominate. For the distributions made with the TDR geometry, in the low luminosity case, for the endcap SCT and Pixel detectors, a sample of H(400) \(\rightarrow\bar{b}b\) with minimum bias is used [4].

For the event fragment size distributions for the TRT detector, a different sample was used in order to use the full digitization information. Again it is a \(b\bar{b}\rightarrow\mu\)6X sample with minimum bias added but now four BXs before and two BXs after the trigger BX were taken together and subsequently digitized. In comparison to the Pixel detector and endcap SCT detector data sample, this a different procedure, since the digitization routine of the TRT takes into account the longer drift times of the ionisation electron clusters in the TRT straw tubes. These drift times typically span a few BXs.

For the event fragment size distributions for the SCT detector, when an electron Region of Interest (RoI) occurs, a data sample was used which was passed through the trigger simulation program ATRIG [5].

### Software used

The digitization information was extracted from the data samples and was written to plain ASCII text files. The text files produced contain geometry information, local coordinates of the pixel, strip or straw hit and the digitized output of the respective sensitive volumes. C++ classes for barrel modules and endcap modules have been made for the different detectors. A program using the ROOT [6] package reads in the text files and stores the information from the files per event into a list of endcap module objects and barrel module objects. The module objects are subsequently ordered in a list of MURs by module-to-MUR maps detailed in Appendix A. A MUR usually consists of 6 modules (for the SCT barrel for instance one half ladder). For every object representing a module its position in (\(\eta\), \(\phi\), z(r)) space is stored as well as a (unique) MUR number that is assigned to it. A general ROB class is also defined. For the Pixel detector and SCT detector then various mappings from MURs to ROBs are used to generate the event fragment size distributions per ROB, by adding module objects with the appropriate MUR numbers to a ROB object. The range covered in (\(\eta\), \(\phi\), r(z)) space by a ROB object is defined by the coordinates of the module objects going into that ROB object. The size of the event fragments received by the ROB is equal to the sum of the sizes of the event fragments produced by the modules (including headers). Finally, to get the total event fragment size produced by a ROB a ROB header is added. For low, intermediate and high luminosity the distributions summed over of all ROBs are presented (see section 3). For low and intermediate luminosity this corresponds to the case, in which the whole inner detector is read out when a B-physics trigger occurs. In the high luminosity case, it is shown that the distributions can be used when a ROB receives data from modules located inside an electron RoI.

Event fragment size distributions

In this section the event fragment size distributions for ROBs of the SCT, Pixel and TRT detector are given for low, intermediate and high luminosities. Per detector different mappings are explored. The results are compared to paper model values.

### SCT detector

The SCT barrel consists of four concentric cylinders (layers). Each layer is assembled from ladders, each ladder contains 12 modules. Layer 1, 2, 3, 4 (in order of increasing radii) have 32, 40, 48 and 56 ladders respectively. One MUR is 6 modules on a half ladder. With 768 strips on one side, a barrelmodule has 1536 strips in total (the back side having a 40 mrad stereo-angle w.r.t. the front side). The SCT endcap detector is made up out of nine endcap wheels. Each wheel is assembled from up to three rings of endcap modules depending on the z position. An endcap module has two sides, with 768 strips on each side, so there are 1536 strips in total (2 detectors are joined lengthwise and subsequently glued back-to-back with an 40 mrad stereo-angle). Two different versions of the endcap modules exist, with lenghts of 12 and 7 cm respectively. The strips of the endcap modules fan out radially, so one module covers a fixed region in phi, independent of z.

The configuration of layers, modules and ladders of the SCT barrel has not changed due to the Insertable Pixel layout. The geometry of the endcap SCT detector has changed with respect to the positioning of the endcap wheels in z. The length of the inner modules has shrunk, increasing the inner radius of the endcap wheels. Also the first wheel in the fall 2001 geometry has two rings and the second wheel has three rings of modules (counting the wheels from the barrel), as opposed to the TDR geometry where it was the other way around. The following information is used for obtaining the event fragment sizes :

* each strip hit gives 2 bytes
* each module sends headers with a size of 2 bytes
* each ROB sends headers with a size of 8 bytes

#### 3.1.1 SCT barrel

On average 3% of the strips are considered to be inefficient, as assumed in the Inner Detector TDR [7], and are not taken into account. Three different MUR to ROB SCT barrel maps have been used and two MUR to ROB SCT endcap maps. The maps are specified in Appendix B.

Results for SCT barrel tower mapping A, used in the paper model [1] are displayed in fig. 1. In fig. 1(a) the distributions of the barrel ROBs for low, intermediate and high luminosity are plotted (on a log scale to show the tails of the distribution). In fig. 1(b) the average event fragment size per individual ROB is shown for the three different luminosities. From fig. 1(b) (high luminosity graph) it can be seen that 12 of the 44 ROBs give a smaller event fragment size than the other ROBs. This is caused by the fact that these ROBs do not receive data from modules in the inner barrel layer. As can be seen the occupancy of the SCT layers differ (see fig. 2) significantly. Results for SCT barrel tower mapping B (see fig. 3(b)) show that the average event fragment size per ROB has a more homogeneous distribution. The ROBs with the larger event fragment sizes contain 2 instead of 1 MUR in the inner barrel layer. A note of caution is appropriate here : in the figures presentedin this note the ROB numbers are counted starting from the first ROB in one of the endcaps, then the ROBs in the barrel are counted up to the last ROB in the endcap. In Appendix B, however, the ROB numbers start counting with each half barrel or half endcap. Because of the symmetry of the detectors, comparison between the figures and Appendix B should be straightforward.

The event fragment size distribution using the SCT barrel layer mapping is shown in fig. 4. It shows clearly the effect of using ROBs per barrel layer as opposed to an (approximate) projective mapping. The ROBs which receive data from the inner barrel modules only (The ROBs which give the largest average event fragment size) are clearly visible. The mean from the event fragment size distribution where SCT barrel tower mapping A is used, the preferred paper model mapping, is 1059 bytes. It is smaller than the average event fragment size quoted in the paper model (1600 bytes), where the worst case occupancy in b-jets has been used. In this note the fragment size is determined mainly by minimum bias background with an underlying b-physics event.

#### 3.1.2 SCT endcap

The event fragment size distributions for the two MUR to ROB maps for the SCT endcap TDR geometry are given in fig. 5. Fig. 6 and fig. 7 contain results for the fall 2001 geometry. The average event fragment sizes per ROB are not given for the map used in fig. 7, since the results are almost the same as presented in fig. 6(b). Due to the fact that an intermediate luminosity file has not been produced for the TDR geometry, only low and high luminosity distributions are given. In the fall 2001 geometry the inner radius of the endcap disks went from 25 cm to 26.7 with the inner endcap modules becoming accordingly shorter [8]. Note that the two data samples used for TDR and the fall 2001 geometry are somewhat different, and so the differences seen here cannot be entirely attributed to the change of geometry. The average event fragment size per ROB

Figure 1: _(a). Event fragment size distribution for barrel SCT ROBs using SCT barrel tower mapping A. (b). Average event fragment size per barrel SCT ROB using SCT barrel tower mapping A, for the three luminosities. Low, intermediate and high luminosity are indicated by triangles, squares, and circles respectively. The error on the average event fragment size is given by the (hardly noticeable) vertical error bars._

Figure 3: _(a). Event fragment size distribution for barrel SCT ROBs using SCT barrel tower mapping B. (b). Average event fragment sizes per barrel SCT ROB using SCT barrel tower mapping B._

Figure 2: _Fractions of strips hit per SCT barrel module for the four different layers of the SCT barrel. These distributions are for high luminosity, SCT barrel tower mapping A._

presented in fig. 6(b) shows considerable differences between individual ROBs. This is due to the fact that a layer mapping is used instead of a projective mapping. The last few ROBs in the fall 2001 geometry endcap layer mapping of fig. 7 show a smaller average event fragment size. These ROBs are mapped to the last three endcap wheels, which have 3, 2.5 and 1 ring respectively. The 2.5 means that smaller modules are used in the inner ring of the 8th wheel.

The mapping used for 2001 version of the paper model, corresponds to the SCT endcap tower mapping and the TDR geometry gives event fragment size distributions which have means of 160 and 894 bytes for low and high luminosity, respectively. The average event fragment size in the high luminosity case is again smaller than used for the paper model (1600 bytes), for the same reason that was mentioned in section 3.1.1.

#### 3.1.3 Event fragment size distribution for barrel SCT ROBs in an electron RoI

All event fragment size distributions given until now have been obtained by taking all ROBs in a subdetector into account. Thus the distributions are only applicable when a B-physics trigger occurs at low or intermediate luminosity. In this section it is verified whether the event fragment size distributions obtained for high luminosity taking into account all ROBs can also be used for a ROB receiving data from modules located within an electron RoI. Two event fragment size distributions are given for SCT barrel tower mapping A and the SCT endcap tower mapping, the two mappings used in the paper model. Only ROBs that lie within an electron RoI are taken into account. In the data sample used here an electron RoI is defined such that the summed \(E_{T}\) off all particles in the electromagnetic calorimeter in a square grid of size 0.12 \(\times\) 0.12 ( \(\Delta\phi\times\Delta\eta\) ) is bigger or equal than 17 GeV, excluding muons and neutrinos [9]. Furthermore, the isolation cut in the electromagnetic calorimeter is set to 6 GeV, while the cut on energy in hadron calorimeter is 3 GeV, see [9] and [10]. The datasample was taken from [11].

The means of these distributions differ only slightly from the means from fig. 1 (1081 vs. 1018

Figure 4: _(a). Event fragment size distribution for barrel SCT ROBs using the SCT barrel layer mapping. (b). Average event fragment sizes per barrel SCT ROB using the SCT barrel layer mapping._

Figure 5: (a). Event fragment size distribution for endcap SCT ROBs using the SCT endcap layer mapping (TDR geometry). (b). Event fragment size distribution for endcap SCT ROBs using the SCT tower layer mapping (TDR geometry).

Figure 6: (a). Event fragment size distribution for endcap SCT ROBs using the SCT endcap layer mapping (fall 2001 geometry). (b). Average event fragment sizes per endcap SCT ROB using the SCT endcap layer mapping (fall 2001 geometry).

Figure 8: _(a). Event fragment size distribution for barrel SCT ROBs receiving data from modules located within an electron RoI, using the SCT barrel tower mapping A, high luminosity (b). Event fragment size distribution for endcap SCT ROBs receiving data from modules located within an electron RoI, using the SCT endcap tower mapping, high luminosity._

Figure 7: _(a). Event fragment size distribution for endcap SCT ROBs using the SCT endcap tower mapping (fall 2001 geometry). (b). Average event fragment sizes per endcap SCT ROB using the SCT endcap tower mapping (fall 2001 geometry)._

for the barrel and 816 vs. 801 for the endcap). The RMS of both distributions is also of comparable size (476 vs. 418 for the barrel and 109 vs. 267 for the endcap). The reason for these numbers being comparable is that at high luminosity the average event fragment size of a ROB is dominated by the minimum bias background. Note that this is only true for a ROB which does not receive data from modules that are hit by a jet. Consequently it is assumed that the high luminosity event fragment size distributions given in this note can be used when a ROB is receiving data from modules located within an electron RoI.

### Pixel detector

The Pixel barrel detector consists of three concentric cylinders. Each cylinder is assembled from a number of ladders. Each ladder contains 13 modules. In this note it is chosen to have 6 modules in a MUR in one half barrel and 7 modules in a MUR in the other halfbarrel. Results are given for the fall 2001 geometry and, to make a comparison with the 2001 version of the paper model, with the TDR geometry. Results for low luminosity, TDR geometry are not given for the Pixel detector, since the appropriate digitized detector data samples for this luminosity could not be found. The following information is used for obtaining the event fragment sizes :

* each strip hit gives 2 bytes
* each module sends headers with a size of 4 bytes
* each ROB sends a header with a size of 8 bytes

#### 3.2.1 TDR geometry

As mentioned earlier, the TDR Pixel barrel geometry is made up out of three concentric cylinders (layers). The first layer (The B-layer) is close to the interaction point and has a notably higher occupancy than the other two layers. A Pixel module consists of 320 (\(\phi\) direction) \(\times\) 192 (z or r direction) pixels. The Pixel TDR endcap geometry consists of five identical disks, each with 72 modules in phi. It is chosen to put 6 modules in a MUR in the halfbarrel with z \(<\)0 and 7 modules in the halfbarrel with z \(>\)0.

In fig. 9 and fig. 10 event fragment size distributions made with a tower mapping and a layer mapping, respectively, are presented. The MUR to ROB Pixel barrel map used for the paper model corresponds to the map which is used for fig. 11. The differences stem from the fact that in the barrel tower mapping 18 ROBs are used for the Pixel barrel, in the barrel layer mapping A 15 ROBs are used and in the barrel layer map B 34 ROBs are used. For the paper model mapping, the number of 800 bytes assumed in the paper model [1] is higher than the result here. This is due to the fact that the worst occupancy, i.e the occupancy of modules in the B-layer when a module is hit by a jet, for the barrel is chosen in the paper model. The occupancies of the outer two Pixel barrel layers differ significantly from the B-layer. This can be seen in fig. 10(b): here the first two ROBs each are mapped on 8 ladders of the B-layer, the third ROB is mapped on two ladders of the B-layer and subsequent ROBs are mapped on the second and third layer. The division between 6 MURs/ROB and 7 MURs/ROB is visible in figs. 9(b), 10(b) and 11(b). The average event fragment size scales with the number of modules within one ROB as one would expect.

Figure 10: _(a). Event fragment size distribution for barrel Pixel ROBs using Pixel barrel layer mapping A (TDR geometry), high luminosity. (b). Average event fragment sizes per barrel Pixel ROB using Pixel barrel layer mapping A (TDR geometry), high luminosity._

Figure 9: _(a). Event fragment size distribution for barrel Pixel ROBs using the Pixel barrel tower (TDR geometry), high luminosity. (b). Average event fragment sizes per barrel Pixel ROB using the Pixel barrel tower mapping (TDR geometry), high luminosity._

Figure 11: _(a). Event fragment size distribution for barrel Pixel ROBs using Pixel barrel layer mapping B (TDR geometry), high luminosity. (b). Average event fragment sizes per barrel Pixel ROB using the Pixel barrel layer mapping B (TDR geometry), high luminosity._

Figure 12: _(a). Event fragment size distribution for endcap Pixel ROBs using the Pixel endcap tower mapping (TDR geometry), high luminosity. (b). Average event fragment sizes per endcap Pixel ROB using the Pixel endcap tower mapping (TDR geometry), high luminosity._

#### 3.2.2 Fall 2001 geometry

The Pixel barrel geometry has changed with respect to the Pixel TDR-layout [12]: the B-layer is at a larger radius of 5.05 cm (instead of 4.15 cm), the two outer cylindrical layers have new radii of 8.85 cm and 12.25 cm (instead of 10.1 cm and 13.2 cm). The radii of the disks in the fall 2001 layout (R=8.877-15.957 cm) are smaller than quoted in the Pixel TDR (it was 12.63-18.67 cm). The number of endcap disks was reduced to from 5 to 3, and the new z-position of three disks are 49.5-65.0 cm instead of 49.5-92.6 cm. Since the three barrel layers are shifted with respect to the TDR geometry, the number of ladders per barrel layer has also changed. From [13] it is known that the B-layer RODs are designed for 6-7 modules, the first layer RODs are designed for 13 modules and the second layer RODs are designed for 26 modules. It is assumed that one ROD in the B-layer receives data from one halfadder, one ROD in the first layer receives data from one ladder and one ROD in the second layer receives data from two ladders. The software has been written in such a way that only half ladders can be grouped into RODs. One halfadder corresponds to one MUR. Thus the mapping here is done such that 1 B-layer ROD receives data from all the modules on one B-layer halfladder, one first layer ROD receives data from two adjacent first layer halfadders and one second layer ROD receives data from 4 adjacent second layer halfadders. Again, since there are 13 modules on one ladder, one half of the barrel contains 6 modules/MUR, while the other half contains 7 modules/MUR. See also Appendix A for the mapping.

The event fragment size distributions are shown in fig. 13. The average event fragment size per ROB is presented in fig. 14.

Since the endcap of the Pixel detector now contains three endcap disks instead of five, a new mapping is proposed here. With the information from [13] it seems reasonable to use 8 modules/MUR, with 3 MURs in a ROD, so that one ROD receives data from 24 modules. Then, the number of MURs/ROD (MURs/ROB) is the same as in the endcap Pixel tower map (TDR geometry), and there are now 6 ROBs per Pixel endcap. The result is shown in fig. 15.

Figure 13: _(a). Event fragment size distribution for barrel Pixel ROBs using the Pixel barrel layer mapping (fall 2001 geometry), shown for MURs with 6 modules. (b). Event fragment size distribution for barrel Pixel ROBs using the Pixel barrel layer mapping (fall 2001 geometry), shown for MURs with 7 modules._Figure 14: _Average event fragment sizes per barrel Pixel ROB using the Pixel barrel layer mapping (fall 2001 geometry)._

Figure 15: _(a). Distribution of event fragment sizes of all endcap Pixel ROBs with 8 modules/MUR (3 MURs in one ROB). (b). Average event fragment sizes per endcap Pixel ROB using 8 modules/MUR._

### Results for TRT

A true projective mapping [14] is assumed here, for the TRT barrel and endcap. The division in ROBs is fixed, 32 ROBS in one half barrel, 96 per TRT endcap. The data into the RODs contains for each straw 3 bits to indicate the state of the high threshold discriminator for 3 consecutive BX intervals. In addition it contains 3 \(\times\) 8 bits, indicating in eight bits per BX the state of the low threshold discriminator. Every bit in this eight bits represents a 3.125 ns time interval. Thus there are 27 bits per channel. The data is compressed in the RODs before it is sent to the ROBS. The low threshold bits are inspected in a 12 ns window set at approximately 42 ns from the LVL1 accept BX. This corresponds to the maximum drifttime. The narrow gate around 42 ns ensures a large suppression of particles from other BXs. If any bit of the low threshold bits is set in this window then the straw is declared VALID. In this case the number of 0-\(>\)1 transitions ('leading edges') determines the amount of data that is to be sent.

\(<\)11\(>\)\(<\)ttt\(>\)\(<\)ttt\(>\)\(<\)H\(>\)\(<\)T\(>\) for two leading edges

\(<\)10\(>\)\(<\)tttt>\(<\)H\(>\)\(<\)T\(>\) for one leading edge

\(<\)01\(>\)\(<\)1\(>\)\(<\)L&H\(>\)\(<\)T\(>\) for zero leading edges

where:

\(<\)tttt\(>\) or \(<\)ttt\(>\) are a 4-bit or 3-bit encoding of the location of the 0-\(>\)1 transition(s), 3 bits encoding for one BX, 4 bits encoding for two BXs.

\(<\)H\(>\) / \(<\)L\(>\) are one bit ORs of all of the high / low threshold bits,

\(<\)L&H\(>\) is a one bit encoding of all low and high threshold bits,

\(<\)T\(>\) is one bit to indicate that a trailing edge occurred in the third BX.

For NOT VALID straws all low threshold bits are checked. If no bit is set two bits are transferred, else four bits are transferred:

\(<\)00\(>\) if no bit is set

\(<\)01\(>\)\(<\)02\(>\)\(<\)L&H\(>\) if at least one bit is set

In table 1 an overview of the five possible formats of the TRT data sent to the ROBs is given.

Each event fragment in the ROB has a header and trailer. The header is 32 Bytes long, the trailer 12 Bytes [14].

#### 3.3.1 TRT Barrel

In the high luminosity case an eleven bit header is used to give each straw an unique adress, and this header + the drift time data is sent from the ROBs to the LVL2 processors. For the low and

\begin{table}
\begin{tabular}{|l||c|c|c|c|c|} \hline
**Data type** & \(<\)00\(>\) & \(<\)01\(>\)\(<\)0\(>\) & \(<\)01\(>\)\(<\)1\(>\) & \(<\)10\(>\) & \(<\)11\(>\) \\ \hline
**Validation** & NOT VALID & NOT VALID & VALID & VALID & VALID \\ \hline
**Size (bits)** & 2 & 3 + 1 & 3 + 2 & 2 + 6 & 2 + 8 \\ \hline \end{tabular}
\end{table}
Table 1: _Different types of data in the ROBs for the TRT._intermediate luminosity a zero suppression scheme is assumed. It is assumed here that this zero-suppression will be done in the RODs [15] to reduce the datavolume across the links and switches going to the LVL2 processors. This zero suppression scheme does not give each straw an unique header but a header indicating the number of straws (_offset_) to the previous straw that has been hit. This header can be much smaller than eleven bits. The optimum header size N depends on the percentage of straws hit and their spread among the straws in a readout segment. Here it is always a 5 bit header for the low and intermediate case. In fig. 16 the event fragment size distribution for low, intermediate and high luminosity is presented.

The mean of the event fragment size distribution is 200 bytes, the number used for the 2001 version of the paper model is 300 bytes for low luminosity. The values are 325 bytes vs. 560 bytes, respectively for intermediate luminosities. These agree very well with the results presented in [15] where a digitization procedure for the TRT is described, which is used here for generating the data sample. In that note the size of event fragments in the ROBs is estimated assuming the zero suppression is done in the ROD, and using a toy monte carlo to generate the number of VALID straws. In the current note fully simulated events are used. The average event fragment size for the high luminosity case is again in agreement with number used for the 2001 paper model (1100-1200 bytes in this note vs. 1000 bytes in the paper model).

#### 3.3.2 TRT endcap

One TRT endcap consists of 18 wheels. One ROB reads out a projective wedge in phi of 1/96 \(\times\) 2\(\pi\) of all wheels. Fig. 17 shows the event fragment size distributions for the TRT endcap detector. The mean values agree very well with those used for the 2001 paper model. The mean value of the distributions of barrel event fragment sizes and endcap event fragment sizes for the different luminosities are very similar, as a consequence of the similar sizes of eta-phi space covered by one ROB. \(\eta\times\phi\) is 0.2 \(\times\) 0.7 for the barrel (0.14) and 0.07 \(\times\) 1.8 for the endcap (0.13).

## 4 Probability density functions in simdaq

The simdaq [16] program provides a computer model of the ATLAS LVL2 system. Usually only average event fragment sizes are used in simdaq. A small extension has been implemented, so that it is also possible to read in distributions. Separate distributions for endcap and barrel can be used, since it is possible to define an event fragment size distribution for individual ROBs and groups of ROBs.

Simdaq was run in three ways. First, with mean values used in the 2001 paper model [1]. Second, with only the mean values of the distributions shown in this paper for the TDR geometries. The third run was done using the full distributions for the TDR geometries, presented in this paper. For the SCT detector SCT barrel tower map B and the SCT endcap tower map were used. For the TRT detector the projective mappings of 1/32 \(\times\) 2\(\pi\) for one TRT half barrel and 1/96 \(\times\) 2\(\pi\) for one endcap TRT were used. The mapping used for the Pixel detector were Pixel barrel map layer mapping B and the Pixel endcap tower mapping.

Only results for intermediate luminosity running are shown, since it was found that the impact of using distributions instead of fixed mean event fragment sizes is largest at this luminosity. Since only low and high luminosity distributions were available and the impact of the Pixels is assumed to be negligible, in run three a fixed value for the Pixel event fragment size (350 bytes) was used Figure 16: _Distribution of event fragment sizes of all barrel TRT ROBs. One ROB covers a wedge of 1/32 \(\times\) 2\(\pi\) of one half barrel. The distributions are given for low, intermediate and high luminosity._

Figure 17: _Distribution of event fragment sizes of all endcap TRT ROBs. One ROB receives data from modules located in a wedge of 1/96 \(\times\) 2\(\pi\) of one endcap barrel. The distributions are given for low, intermediate and high luminosity. The former two use a zero suppression scheme, while the latter does not (see text)._

[MISSING_PAGE_FAIL:18]

\begin{table}
\begin{tabular}{|c|c|c|c|} \hline  & Paper model & new mean fixed & distribution \\ \hline
**SCT ROB proc. utilization (\%)** & 87.77 & 87.79 & 87.64 \\ \hline
**TRT ROB proc. utilization (\%)** & 85.91 & 85.93 & 85.78 \\ \hline
**PIXSCT FEX queue (nr. of fragments)** & 55.55 & 54.92 & 54.66 \\ \hline
**TRT FEX queue (nr. of fragments)** & 25.74 & 25.66 & 25.63 \\ \hline
**SCT volume out (Mbytes/sec.)** & 3.43 & 2.82 & 2.82 \\ \hline
**TRT volume out (Mbytes/sec.)** & 4.69 & 3.12 & 3.13 \\ \hline \end{tabular}
\end{table}
Table 2: _ROB parameters for SCT ROBs and TRT ROBs. Results from runs with paper model values, with new mean fixed values and with distributions with the same mean values as the former, are compared._

Figure 19: _(a). Distribution of the size of the queue of the feature extractor buffer sampled at the moment when a RoI data fragment (coming from a TRT ROBIn) has arrived, for fixed event fragment sizes. (b). Distribution of the size of the queue of the feature extractor buffer sampled at the moment when a RoI data fragment (coming from a TRT ROBIN) has arrived, for event fragment sizes following a distribution._

## 5 Summary

In table 3 an overview of average event fragment sizes is presented for the mappings that seem appropriate to be used in the future in the paper model and the computer model. The numbers are given for the low, intermediate and high luminosity. Note that these numbers are not for worse case scenario's, but are more realistic averages.

## 6 Conclusions and possible future work

In this note event fragment size distributions are presented for Pixel, SCT and TRT ROBs and for low, intermediate and high luminosity. Distinction is made between endcap and barrel ROBs. Where appropriate, distributions for fall 2001 geometries arising from the use of a new insertable Pixel layout, are given. The means of the distributions compare well with the paper model values, with the comment that worst case scenarios are used in the paper model, whereas in this note more realistic values are obtained. Further conclusions that can be drawn are :

* The average event fragment sizes of endcap ROBs and barrel ROBs differ significantly in some cases. This is not taken into account in the paper model.
* A new mapping is introduced for the insertable layout geometry of the Pixel detector. The mapping is chosen such that the mean of the event fragment size distributions for ROBs of the Pixel detector is roughly the same as in the TDR geometry. The new Pixel detector endcap mapping is dictated by the fact that the number of MURs/ROB is the same as in the TDR mapping.
* The difference between using fixed event fragment sizes or event fragment sizes chosen from a distribution can hardly be seen for the computer model based on the 2001 paper model.

Regarding possible future work with this software one can think of the following :

* The software written to extract the event fragment size distributions from data samples, can also be used for other detectors, such as the eletromagnetic calorimeter or the muon precision tracker.
* Instead of making a distinction between barrel and endcap ROBs, one can extract for each ROB an individual distribution, which subsequently can be used in for instance simdaq.

\begin{table}
\begin{tabular}{|c|c|c|c|c|} \hline
**detector part** & map name & low lumi & int. lumi & high lumi \\ \hline \hline
**SCT barrel** & tower mapping A & 180 & 308 & 1081 \\ \hline
**SCT endcap** & tower mapping & 141 & 239 & 822 \\ \hline
**Pixel barrel** & layer mapping (fall 2001 geometry) & 75 & 118 & 359 \\ \hline
**Pixel endcap** & tower mapping (fall 2001 geometry) \({}^{*}\) & 113 & 180 & 514 \\ \hline
**TRT barrel** & barrel mapping & 200 & 325 & 1106 \\ \hline
**TRT endcap** & endcap mapping & 204 & 330 & 1185 \\ \hline \end{tabular}
\end{table}
Table 3: _average event fragment sizes for the preferred mappings. The name of the maps refer to the names used in Appendix B. \({}^{*}\) The map chosen here has 8 modules/MUR, 3 MURs/ROB._- \(\phi\) range, it is possible to combine this information with for instance ATRIG (or a future version of ATRIG) in order to identify RoIs. One can then think of a generating distributions for different classes of RoIs, such a jet-RoIs or isolated muon RoIs.

## References

* [1] Draft version 0.99 of "Paper model results for the ATLAS Trigger/DAQ system" M. Abolins and J.C. Vermeulen, [http://www.nikhef.nl/pub/experiments/atlas/daq/papernote-2001.pdf](http://www.nikhef.nl/pub/experiments/atlas/daq/papernote-2001.pdf)
* [2][http://nimis.thep.lu.se/tf2/staff/torbjorn/Pythia.html](http://nimis.thep.lu.se/tf2/staff/torbjorn/Pythia.html)
* [3][http://msmizans.home.cern.ch/msmizans/production/minbias.html](http://msmizans.home.cern.ch/msmizans/production/minbias.html)
* [4] files taken from Tape Y00347
* [5][http://www.cern.ch/Atlas/GROUPS/DAQTRIG/ATRIG/index.html](http://www.cern.ch/Atlas/GROUPS/DAQTRIG/ATRIG/index.html)
* [6][http://root.cern.ch](http://root.cern.ch)
* [7] ATLAS Inner Detector Technical Design Report, chapter 3.
* [8] J.Pater, private communication
* [9] ATL-PHYS-97-102, "1997 ATLAS Jet Production", A. Dell'Acqua, D. Froidevaux et al.
* [10] First-Level Trigger Technical Design Report
* [11] files taken from Tape Y00039
* [12] A. Rozanov, private communication
* [13] P. Lujan, private communication
* [14] ATL-DAQ-99-014, "Detector and Read-Out Specifications, and Buffer-RoI relations, for Level-2 Studies", P. Clarke, S. Falciano et al.
* [15] ATL-INDET-2001, "A study of ROD compression schemes for the TRT", M. Dam.
* [16] "SIMDAQ Users Guide", [ftp://ftp.nikhef.nl/pub/experiments/atlas/tdaq/Paper](ftp://ftp.nikhef.nl/pub/experiments/atlas/tdaq/Paper), J.C. Vermeulen
ATLAS DAQ note 25

Revision 2

14 December 1994

Rudolf Bock and Patrick LeDu

###### Abstract

We describe in this note a subset of ATLAS detectors to be used for a detailed modelling of full-scale level-2 trigger architectures. We restrict the model to the detectors defined best: Silicon (barrel), transition radiation tracker (barrel and endcap), electromagnetic (with preshower counters) and hadronic calorimeter (barrel and endcap), and muon chambers (up to \(\eta=2.5\)). Detectors follow the detector description as given in the Technical Proposal (CERN/LHCC/94-43, 15 Dec 94). An earlier version of this note (revision 1.1) was used as input for the modelling done as input to the Technical Proposal; in that version, we had followed mostly the 'Cosener's House' definition of detectors. Readout parameters are not yet fully defined for the endcap region in part of calorimetry, and muons; future updates are unavoidable.

We specify the readout segmentation in a schematic form, and define regions of interest, for each of these detectors. The specification is, in principle, intended to be complete enough to define a set of algorithms, in which are included region-of-interest collection, format transformations, data preprocessing, local feature extraction and global decision. The algorithm definitions and benchmark results have been collected in a separate note (EAST note 94-34/ATLAS DAQ note 19). The timing of data availability is not covered.

## I. Detectors and their transmission parameters

We present all detector data in a schematic form, which corresponds to the readout diagram below.
Our ultimate intention is to describe the data content on and the grouping of the fibres between frontend boards and L2 buffers (we assume here fibre and buffer to be in one-to-one correspondence), and the data from L2 buffer to the L2 local processors. We acknowledge that at the time of writing, this information is incomplete. Our numbers correspond to a snapshot of the ATLAS detector at the time of the Technical Proposal. We acknowledge the contributions to the detector definition of E.Auge, J.Colas, S.Falciano, Ph.Farthouat, D.Froidevaux, R.Hawkings, F.Honore, L.Nisati, and T.Weidberg; obviously, they are not responsible for the model.

_1. Silicon Tracker (SCT)_

**1.1 Geometry**: the SCT is arranged on 5 cylindrical surfaces at radii from 52 to 105 cm, each wafer being about 5x6 cm in \(\phi\) and z, and containing 256 channels (r-\(\phi\) strips or z strips). A layer from the vertex detector at r=30 cm is also used in the rigger. Pairs of wafers are bonded together, to give a double wafer with 256 strips. The total number of double wafers is 4600, with the highest number at the outermost radius. In detail, the information is given in the following table (describing one side of the barrel):

\begin{tabular}{c c c c c c c} Layer\# & Radius & \(\phi\) pitch & z pitch & board size & \# of boards & \# of channels \\  & & (cm) & (cm) & (cm) & \(\phi\) x z & (thousand) \\
1 & 30 & 0.01 & 6 & 6 x & 6 & 34 x 12 & 244 \\
2 & 52 & 0.02 & 12 & 5 x 12 & 74 x 8 & 148 \\
3 & 53 & 2.5 & 0.1 & 5 x 12 & 76 x 8 & 152 \\
4 & 79.5 & 0.02 & 12 & 5 x 12 & 112 x 8 & 224 \\
5 & 80.5 & 2.5 & 0.1 & 5 x 12 & 114 x 8 & 228 \\
6 & 105 & 0.02 & 12 & 5 x 12 & 148 x 8 & 296 \\  & & & & & & 4600 & 1'292 \\ \end{tabular}

**1.2 Transmission:** each double wafer (256 channels) is read via one readout controller board (chip), two boards are multiplexed onto a low-bandwidth fibre. The large scattering factor (2300 fibres) is eased by a concentrator, which reads up to 16 input fibres and multiplexes some 8000 channels onto a single fibre (\(<\) 150 Mbit/s average). The 16-to-1 reduction can be optimised for the needs of facilitating L2 (e.g. grouping as best one can the fibres from a cone of the same \(\phi\)-z values). The total number of fibres after reduction is of the order of 300 (full detector).

**1.3 Format:** the information is thresholded, only 1% of the channels being active for a given bunch crossing. The assumed SCT information format from the original fibres (low-bandwidth) is the following (bytes):

Header (ID etc.) 6 bytes

 wafer address = chip address and 2 highest bits of strip address,

 leftmost bit =1 as marker

 strip address

 pulse height

 strip address

..... (repeated)

 wafer address = chip address and 2 highest bits of strip address,

 leftmost bit =1 as marker

 strip address

  pulse height

..... (repeated)

 terminator (2 bytes, with pulse height =255 as marker)This addressing scheme allows up to 32 chips and 512 strips in each of them, hence is suited for the output of the concentrator board. Upon output to the L2 local processors, a translation of the wafer/strip addresses into a more global system or an RoI-related one is necessary.

#### 2.1.2 Transition Radiation Tracker (TRT)

**2.1 Geometry**

**a) barrel**: the barrel TRT (half) is arranged in two layered cylinders covering respectively the z region from -0.8 m to 0, and from 0 to +0.8 m (\(|\Delta\)m\(|\leq 0.69\)). Each cylinder contains straws arranged in layers of constant r, with a total of 64 layers, at constant \(\Delta\)r=.7104 mm. They are grouped into three types of modules (see figure), radii vary from 0.630 to 1.070 m. In each layer, straws are at approximately constant distance (about 6.5 to 6.8mm), the \(\Delta\phi\) covered by each module is the same (2\(\pi\)/34 = 0.1848), therefore the number of straws varies from layer to layer (from 34x17 to 34x29 straws). The total number of straws is 50048 x 2 for the two halves.

In more detail, the types of modules are described in the following table:

\begin{tabular}{c c c c c c c c} Module & Inner & Outer & \(\phi\) slant & \# layers & \# straws & \# straws & \# straws \\  & radius & radius & = \(\Delta\phi\)/2 & along r & inner r & outer r & total \\  & (mm) & (mm) & (radians) & & & & & \\
1 & 630 & 751.7 & -0.0924 & 18 & 17 & 20 & 336 \\
2 & 751.7 & 896.8 & 0.0924 & 21 & 21 & 24 & 470 \\
3 & 896.8 & 1070 & -0.0924 & 25 & 24 & 29 & 666 \\ \end{tabular}

**b) endcap**: the endcap TRT (half) is arranged in 18 wheels, each containing 8 or 16 planes equidistant along z. Wheels are mounted non-equidistant along z, from z=89 to z=331cm. Planes in the first 13 wheels contain 768 straws each at equal distance in \(\phi\), but with small \(\phi\) offsets from plane to plane. The inner radius is 0.64, the outer 1.03 m. Planes in the last 5 wheels contains 608 straws, again equidistant and staggered in \(\phi\), with the inner radius of 0.50 m. The total number of planes is 224 x 2, the total of straws is 160512 x 2 (two halves).

### Transmission:

**a) barrel:** 34 zig-zag groups of three TRT modules each are at roughly the same \(\phi\), and each contains (336+470+666) = 1472 straws; the readout groups these into three readout modules, each less than 512 straws, so that each group of three modules (covering fully a \(\Delta\phi\) of 0.0924), is transmitted via three fibres. The total number of fibres is 34x3 (x 2 for both endcaps). Readout tables describe the positions and the grouping of fibres, and are needed as part of the algorithm.

**b) endcap:** the readout is arranged so that 32 identical slices in \(\phi\) are formed over the full length of the endcap. In the first 6 wheels (@ 16 planes), the readout groups 24(\(\phi\))x16(z) = 384 straws onto a single fibre; the next 7 wheels (@ 8 planes) are spread onto 4 fibres carrying each 24x14 (= 336) straws in \(\phi\) x z. The last 5 wheels subdivide their 72 planes into 4 equal readout groups of 19(\(\phi\))x18(z) = 342 straws. The total number of fibres in a \(\phi\) slice of 2\(\pi\)/32 thus is 6+4+4 = 14, for an overall total of 448 x 2 (two endcaps).

**2.3 Format:** each straw (barrel and endcap) produces 15 bits of information, 3 bits for drift time, a low and a high threshold bit, all for three successive time slices. The readout is uncompressed, viz.not thresholded, the required fibre capacity is given goes up to 432*15bits*100KHz = 0.65 Gbit/s)

### Electromagnetic calorimeters (integrated preshower option)

**3.1 Geometry**

**a) barrel (LAr)**: the barrel e.m.calorimeter (half) covers the \(\eta\) region from 0 to \(\pm\)1.4. There are three layers in depth, individual cells are.025/8 x.1 in \(\Delta\eta\) x \(\Delta\phi\) in the first layer (preshower),.025 x.025 in the second, and.025 x.05 in the third layer, giving 56*8*64 + 56*256 + 56*128 cells for a total of 100'352 (two halves).

**b) endcap (LAr)**: the endcap e.m.calorimeter (half) covers the h region from \(\pm\)1.4 to \(\pm\)3.0, the region is subdivided into an 'outer' endcap (h from \(\pm\)1.4 to \(\pm\)2.2) and an inner' endcap (h from \(\pm\)2.2 to \(\pm\)3.0). The outer endcap has the same granularity as the barrel, resulting in 32*8*64 + 32*256 + 32*128 cells for a total of 57'344 (two halves). The inner endcap has a granularity coarser by a factor 2 in both h and \(\phi\) up to n=2.6; for n from \(\pm\)2.6 to \(\pm\)3.0, the preshower granularity (.05/8 x.2) is replaced by cells of size.05 x.05. This results in a total of 12'288 cells for the two halves of the inner endcap.

### Transmission:

**a) barrel:** the readout is organised by frontend'supermodules' grouping all fibres going through the same feedthrough. 64 such modules are foreseen, each containing all information for a region of 1.4 x 0.2 in \(\Delta\)n x \(\Delta\)\(\phi\), or 896+448+224=1568 channels corresponding to 28 level-1 towers. The number of transmission fibres to the level-2 buffer is four from each supermodule, each fibre transmitting a region of 0.7 x 0.1 in \(\Delta\)n x \(\Delta\)\(\phi\) and operating at a bandwidth of close to 1 Gbit/sec. We assume that a single time-extracted sample is transmitted, leaving signal extraction from multiple time samples to the frontend electronics. An individual buffer contains the output of one fibre, i.e. all cells in depth for a \(\Delta\)n x \(\Delta\)\(\phi\) of 0.7 x 0.1.

**b) endcap:** The arrangement of the readout modules coresponds to the convention in the barrel: a strip of level-1 towers along h is read into a single module, which contains 1.6 x 0.2 in \(\Delta\)n x \(\Delta\)\(\phi\) or 1088 channels. Again, we distribute the information, time-extracted as before, onto four fibres, each of which feeds one buffer of \(\Delta\)n x \(\Delta\)\(\phi\) = 0.8 x 0.1.

**3.3 Format:** 3 bytes per cell (16 bits of information, 1 quality byte), not compressed.

_4. Hadronic calorimeters_

**4.1 Geometry**

**a) barrel (scintillator tiles)**: the barrel hadronic tile calorimeter (half) covers the h region from 0 to \(\pm\)1.4. This is the useful region called 'barrel'; there are in the same z-region cells covering n up to 1.7, that have to be combined with endcap cells (LAr). There is a central part covering \(\pm\) 2.95m, and, after a gap, another piece of 2.7m length. Inner/outer radii are 2.25 and 4.20m.There are three (logical) layers in depth, obtained from 4 physical layers by reading the two middle layers by a single group of PMT-s. Individual cells are.1 x.1 in \(\Delta\)n x \(\Delta\)\(\phi\) in the first two layers,.2 x.1 in the last layer, giving 14*64 (7*64) cells for a total of 4480 (two halves). As all cells are bounded by planes of constant z, the coverage in \(\Delta\)n is approximate. There are cells smaller in \(\Delta\)z in the central part, close to the gap. All cells are read by two PM-s.

**b) endcap (LAr)**: the endcap had.calorimeter (half) covers the n region from \(\pm\)1.4 to \(\pm\)3.0. There are three (logical) layers in depth, they are divided into 'inner' (from n=\(\pm\)2.2) and 'outer' (from \(\pm\)1.4 to \(\pm\)2.2) cells. Outer individual cells are.1 x.1 in \(\Delta\)n x \(\Delta\)\(\phi\) in the first two layers,.1 x.2 in the last layer, giving 8*64 (32) cells. Inner individual cells are.2 x.2 in \(\Delta\)n x \(\Delta\)\(\phi\) in all layers, giving 4*32 cells. The total cell count is 3424 (outer + inner, two halves).

**4.2 Transmission:**

**a) barrel:** like for the e.m. calorimeter the readout is organised into (2 x 32)'supermodules' grouping all information for a region of 1.4 x.2 in \(\Delta\)n x \(\Delta\)\(\phi\) (28 level-1 towers), or 70 channels. We assume that this \(<\)5% of additional information could be transmitted on the same fibres and into the same buffers as the e.m. channels. Again, we assume that a single time-extracted sample is transmitted.

**b) endcap:** to be defined

**4.3 Format:** 3 bytes per cell (16 bits of information, 1 quality byte), not compressed

_5. Muon Chambers_

**5.1 Geometry**

**a) barrel**: The barrel muon detector consist of muon drift chambers (MDT-s) with wires perpendicular to the beam, arranged in 8 slightly overlapping sectors. Each chamber is a tube of 3cm diameter, with a max. drift time of 500 nsec. In each sector, there are three'stations' in radius (radii go from 5 to 10m, approximately). Each station is made of 2 x 4 individual chamber layers. A sector has three small stations (\(\Delta\phi=0.2\)) and three large stations (\(\Delta\phi=0.6\), divisible in 3*0.2). The chambers extend in z over \(\pm 10\)m (middle radius of 6.7 m), and over \(\pm 14\)m (outer radius), covering in \(\eta\) approximately \(\pm 1.12\). Only stations 2 and 3 will be used in L2 triggering.

In addition, there are layers of resistive plate chambers (RPC-s) for the level-1 trigger in stations 2 and 3; two layers of RPC before and after the drift chamber layers in sector 2, three layers before (at smaller radius) for station 3. RPC-s in alternate layers are arranged perpendicular and parallel to the beam. RPC information will have to be used in L2 triggering as providing \(\phi\) information.

**b) endcap:** to be defined

**5.2 Transmission:**

**a) barrel:** the level-1 trigger provides a region of interest of 0.22 to 0.34 x 0.2 in \(\Delta\eta\) x \(\Delta\phi\). The readout of MDT-s will provide small and large stations together in a sector, meaning a region of 0.22 (or larger) x 0.8 in \(\Delta\eta\) x \(\Delta\phi\). Eight such zones are grouped on each fibre (i.e. full barrel x 0.8 in \(\Delta\eta\) x \(\Delta\phi\)). The same volume is read for the RPC-s on a single fibres; 16 fibres for all informatin in the barrel, RPC and MDT together.

**b) endcap:** to be defined

**5.3 Format:** the information is thresholded, only 0.1% of the RPC channels and 10% of MDT-s (drift time!) being active for a given bunch crossing. The assumed information format is the following:

Header (ID etc.) 6 bytes and hit counter

tube address (7 bits)

layer address (5 bits)

station address (4 bits)

sector address (3 bits)

z-module address (open)_II. Definitions in tabular form_

The following table includes only detectors described in this note. More detectors and more complete information, in particular about transmission parameters, will be required; this will be made available as discussions in the various detector working groups converge.

_III. Data in regions of interest (RoI), sent to L2 local processor_

The size of an RoI varies with a) the precision of the L1 indication, and b) the extent of the physical object that is to be triggered upon. The construction of the detector also plays an important role. We consider only L1 triggers for electrons, muons, or jets. The RoI sizes given are minimal, and may be extended if local organisation is facilitated by doing so. Possible preprocessing of data (integration over cells in the calorimeters, both laterally or longitudinal) must be discussed in function of the algorithms used. The output formats of RoI collection remain 'images' where uncompressed data are concerned (TRT and calorimeters); for the SCT and muon chambers, an address transscription to a global system is necessary (to be defined).

In the SCT, a lepton (e or \(\mu\)) trigger defines a RoI of.2 x.2 in \(\Delta\eta\) x \(\Delta\phi\), a jet trigger is ignored.

In the TRT, both barrel and endcap, only a \(\Delta\phi\) of 0.2 is used as RoI for a lepton trigger, with no limitation in \(\Delta\eta\) (see figure below). This information in the barrel is most frequently contained in 6 fibres, occasionally (\(<\)10%) needs 9 fibres. In the endcap, the number of fibres is nearly always 28. Jet triggers cause no tracking in the TRT.

In the calorimeters, the minimal size of a RoI for a lepton trigger is.3 x.3 in \(\Delta\eta\) x \(\Delta\phi\), and 1.2 x 1.2 for a jet trigger. In the case of a jet trigger, the granularity of transmitted cells will be 0.1 x 0.1.

In the muon chambers, a \(\mu\)-trigger defines a RoI of.2 x.2 in \(\Delta\eta\) x \(\Delta\phi\), other triggers are ignored.

### Information from the RoI builder

The RoI builder is the L1-driven unit that issues a list of RoI parameters guiding L2 operations, in particular the data selection in the Router. The number of RoI-s may vary from 1 to 8, with an average of 3. The following information can be expected from the RoI builder:

Event header

Trigger identifier (general pattern)

trigger identifier (RoI1)

rapidity \(\eta\)

azimuth \(\phi\)

trigger identifier (RoI2)

rapidity

azimuth

......(repeated)

terminator

_IV. Other RoI collection requirements:_**Overlapping RoI-s:** Individual cell information may participate in several RoI-s, and the RoI collection algorithm must be able to cope with this situation.
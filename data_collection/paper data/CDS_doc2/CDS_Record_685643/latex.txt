**ATLAS Internal Note**

**CAL-NO-030**

**29 October 1993**

**A Study of a Calorimetry Based Trigger System**

**Using Single Electron Events and Two Jet Events**

**Damian Johnson and John Strong**

**Royal Holloway University of London**

## 1 Introduction

The simulation of a multi-threshold trigger system, using the electromagnetic and hadronic calorimetry of ATLAS, has been discussed before[1]. In this note we will report on work in progress to measure one of the important parameters that must be determined before such a system can be designed. This parameter is the number of Regions Of Interest (ROIs) per event. An ROI is an angular road through the detector, the position of which is determined by the Level 1 (L1) calorimetry and muon triggers. Each element of an ROI must be processed by the local Level 2 (L2) trigger electronics before a global L2 trigger decision can be made. Given the constraint that a global L1 decision must be made within 2 \(\mu\)s of a bunch crossing and that a global L2 decision must be made in a further 1 ms, an accurate estimate of the expected number of ROIs per event effectively determines the processing power required by the L2 trigger systems.

## 2 Description of Datasets

The events used in this study were simulated using the EAGLE-A geometry but with the standard SLUG[2] calorimetry replaced by homogeneous media to speed up the simulation. as is described in reference [1]. A sample of 1 500 single electron events were generated1 in the energy range 35 to 100 GeV with \(\mbox{mod}\,(\eta)\leq 1.0\) and then fully simulated. Of these events 1 279 pass the local L1 single isolated cluster calorimetry trigger (see section 3) and have been used in this study. A sample of 117 735 two jet events were generated2 with \(\mbox{mod}\,(\eta)\leq 0.5\) and with the initial parton transverse energies above 35 GeV. These eventswere filtered before simulation by requiring that there be at least 35 GeV of energy in the event contained in a cone of dimensions \(\Delta\eta\times\Delta\phi\)= \(0.2\times 0.2\). A total of 40 850 events passed this filter and were simulated fully in SLUG. Of these events 529 pass the local L1 single isolated cluster calorimetry trigger (see section 3) and have been used in this study. A complete description of the simulation of these events can be found in reference [4].

## 3 The L1 Algorithm

The L1 calorimetry trigger algorithm[1], operates by scanning a search window of dimensions \(\Delta\eta\times\Delta\phi\)= \(0.4\times 0.4\) over the entire surface of the calorimeter. This scan proceeds in steps of 0.1 in both \(\eta\) and \(\phi\) and involves making energy sums around a reference cell (see figure 1 for cell numbering). In the first stage the energy sums

\[\sigma_{1}=E(em)_{1}+E(em)_{2} \tag{1}\]

and

\[\sigma_{2}=E(em)_{1}+E(em)_{4} \tag{2}\]

are made, where \(em\) refers to the electromagnetic section of the calorimeter. In the second stage the energy sum

\[\sigma_{3}=\sum_{i=5}^{16}E(em)_{i}+\sum_{i=1}^{16}E(had)_{i} \tag{3}\]

is made, where \(had\) refers to the hadronic section of the calorimeter.

For the local L1 single isolated cluster calorimetry trigger3 the core energy, defined as, \(E_{core}=max(\sigma_{1},\sigma_{2})\), is required to be \(>35\) GeV and the isolation energy, defined as, \(E_{iso}=\sigma_{3}\), is required to be \(<5\) GeV. In order to see how these requirements operate, consider figure 2, which shows a typical energy deposition map for an electron in the electromagnetic section of the calorimeter. Note that the hadronic section is not shown as it contains zero energy and that the 1 GeV threshold on the cells has not been applied. This map contains fully the L1 search window and is binned in bins of size \(\Delta\eta\times\Delta\phi\)= \(0.1\times 0.1\).

Footnote 3: This is the trigger expected to produce the dominant rate.

As can be seen, the sequential application of the L1 algorithm described above, produces one cluster of three cells, each of which is referenced by a different \((\eta,\phi)\) address. In order to identify the ROI4 for a trigger cluster, a declustering algorithm must be applied to produce a single \((\eta,\phi)\) address to be passed to the L2 trigger processors.

Footnote 4: Multiple ROIs are not excluded if the trigger clusters are sufficiently separated in \(\eta\) and \(\phi\).

## 4 The Declustering

In a suggested im'mentation of a multi-threshold local L1 calorimetric trigger system[1] the cluster finding 1: performed using a search window of size \(\Delta\eta\times\Delta\phi\)= \(0.4\times 0.4\) and the results stored in an array of size 60 (in \(\eta\)) by 64 (in \(\phi\)), such that one element of the array maps onto one L1 cell. The cluster information from other requirements on \(E_{core}\) and \(E_{iso}\)5 (see table 1) are stored in arrays of size 15 (in \(\eta\)) by 16 (in \(\phi\)) such that each element of the array maps onto four L1 cells and contains the logically ORed combination of the result of the cluster finding for those cells. The aim of this multiple threshold approach is to be able to have several trigger configurations operating simultaneously on a single event without increasing drastically the required processing time. The lower granularity layers can be logically combined with the high granularity layer (layer 1) to provide sufficiently accurate cluster positions for further processing. Note that layer 0 has been added in this study, in order to allow certain consistency checks to be carried out (see section 5) and does not represent a realisable trigger configuration.

Footnote 5: Each set of requirements will be referred to as a layer.

The declustering algorithm operates by scanning, in the same sequential order as the cluster finding algorithm, an L-shaped veto window (see figure 3) over the entire surface of the calorimeter. This scan proceeds in steps of 0.1 in both \(\eta\) and \(\phi\). The veto operates by selecting only that cell of the cluster, found using the L1 algorithm above, which has no hit in cells 2 to 5 (see figure 3). As can be imagined, for different cuts on \(E_{core}\) and \(E_{iso}\) the declustered \((\eta,\phi)\) address for a cluster can change. This is not an important effect as regards this study, however it may have implications for the design of the multi-threshold trigger system.

## 5 Consistency Checks

In order to be sure that the declustering was behaving correctly the following consistency checks were carried out.

1. The hitmaps of several events were checked carefully by eye and using the coded algorithm. Two such hit patterns are shown in figures 4(an electron) and 5(a jet). The hit patterns represent the number of 0.1 \(\times\) 0.1 cells that have passed the level 0 thresholds. The hit map for the electron event is very clean having only one electron-like object whereas that for the jet event has two electron-like objects along with several low energy objects. As can be seen in figure 4 the declustering is working as expected.
2. The hit maps of events overlapping the \(\phi=2\pi\)\(\phi=0\) boundary were checked carefully by eye and using the coded algorithm at level 0. Again the declustering works as expected.
3. The declustering algorithm was applied with the added requirement that in order for a cell to be vetoed it had to contain less energy than the veto cell (cell 1). In this setup the number of ROIs was the same but the declustered \((\eta,\phi)\) address never changed from layer to layer, as expected.

## 6 Results

The results of running the L1 clustering and declustering algorithm on the 1279 single electron events and the 529 di-jet events are shown numerically in tables 2 and 3 and graphically in figures 6 and 7. Note that these numbers represent the number of ROIs per event given that all the events pass the local L1 single isolated cluster calorimetric trigger (\(E_{core}>35\) GeV and \(E_{iso}<5\) GeV6.) The behaviour of the NROIs as a function of trigger thresholds is compatible with expectations but the general shape of the NROI distributions are best observed in the two jet events corresponding to layer 1 as shown in figure 7. This layer uses the lowest thresholds currently foreseen for any input to the L1 calorimetric trigger. The distribution for the declustered regions of interest, see Fig. 9, has a mean of 1.53 \(\pm\) 0.64 but with a tail reaching 5 for the sample used. These figures imply that an asynchronous T2 system must be able to handle a mean rate of approximately 2 ROIs and that a systolic system must be capable of handling at least 5 ROIs in any one event. As some physics processes have signatures with more than 5 ROIs the specification of the systolic system ROI capability is given by the physics processes and not the number obtained here. The percentage of two jet events having a given number of declustered ROIs at layer 1 is given in Table 4.

Footnote 6: This is the trigger expected to produce the dominant rate.

## 7 Conclusion

This study used data generated over a limited eta range and selected by the L1 single isolated calorimetric cluster trigger. Further work is needed before a firm determination of the distribution of the number of regions of interest can be made. For example the effects of pile-up, other L1 triggers and the full eta coverage need to be studied. The available data sample was limited in size and the effort involved in it's generation indicates that further work in this area should wait until the full ATLAS simulation is operational. Based on the result presented here, the use of a mean level of 5 regions of interest by second level trigger groups is conservative as this, when coupled with a rate capability of 100kHz7, would indicate a safety margin of about a factor of eight.

Footnote 7: Compared to a current best estimate of 40kHz.

## References

* [1] The ATLAS collaboration, CERN/LHCC/92-4 N. Ellis et al, ATLAS Note DAQ-NO-005
* [2] R.S. DeWolf, SLUG Users Guide V 1.07
* [3] Pythia manual available from CERN DD
* [4] R.J. Hawkings et al. INDET-NO-013 and AddendumFigure 2: An energy deposition map for an electron-like object.

\begin{table}
\begin{tabular}{|c|c|c|c|} \hline Level & \(E_{core}\) & \(E_{iso}\) & Granularity (\(\Delta\eta\times\Delta\phi\)) \\ \hline
0 & 0.0 & 0.0 & 0.1 \(\times\) 0.1 \\
1 & 6.0 & 0.0 & 0.1 \(\times\) 0.1 \\
2 & 10.0 & 0.0 & 0.4 \(\times\) 0.4 \\
3 & 20.0 & 0.0 & 0.4 \(\times\) 0.4 \\
4 & 35.0 & 0.0 & 0.4 \(\times\) 0.4 \\
5 & 65.0 & 0.0 & 0.4 \(\times\) 0.4 \\
6 & 10.0 & 5.0 & 0.4 \(\times\) 0.4 \\
7 & 20.0 & 5.0 & 0.4 \(\times\) 0.4 \\
8 & 35.0 & 5.0 & 0.4 \(\times\) 0.4 \\ \hline \end{tabular}
\end{table}
Table 1: The layer configurations used in this study.

Figure 3: The declustering window and veto cell.

Figure 4: An electron event hitmap and its declustered ROI.

Figure 5: A two jet event energy map.

\begin{table}
\begin{tabular}{|c|c|c|c|c|} \hline Level & \(E_{core}\) & \(E_{iso}\) & Jets(undeclus) & Jets(declus) \\ \hline
0 & 0.0 & 0.0 & 53.09 \(\pm\) 20.98 & 1.65 \(\pm\) 0.71 \\
1 & 6.0 & 0.0 & 12.11 \(\pm\) 5.99 & 1.53 \(\pm\) 0.64 \\
2 & 10.0 & 0.0 & 7.62 \(\pm\) 3.89 & 1.39 \(\pm\) 0.59 \\
3 & 20.0 & 0.0 & 4.39 \(\pm\) 2.08 & 1.24 \(\pm\) 0.47 \\
4 & 35.0 & 0.0 & 2.62 \(\pm\) 1.48 & 1.08 \(\pm\) 0.25 \\
5 & 65.0 & 0.0 & 2.48 \(\pm\) 1.44 & 1.09 \(\pm\) 0.34 \\
6 & 10.0 & 5.0 & 1.87 \(\pm\) 0.93 & 1.11 \(\pm\) 0.34 \\
7 & 20.0 & 5.0 & 1.61 \(\pm\) 0.75 & 1.02 \(\pm\) 0.12 \\
8 & 35.0 & 5.0 & 1.46 \(\pm\) 0.74 & 1.00 \(\pm\) 0.04 \\ \hline \end{tabular}
\end{table}
Table 2: The results for the two jet events.

Figure 6: The results for the two jet events.

\begin{table}
\begin{tabular}{|c|c|c|c|c|} \hline Level & \(E_{core}\) & \(E_{iso}\) & \(\mathrm{Elecs(undelus)}\) & \(\mathrm{Elecs(declus)}\) \\ \hline
0 & 0.0 & 0.0 & \(5.25\pm 1.46\) & \(1.00\pm 0.03\) \\
1 & 6.0 & 0.0 & \(3.68\pm 0.97\) & \(1.00\pm 0.03\) \\
2 & 10.0 & 0.0 & \(3.39\pm 0.78\) & \(1.00\pm 0.03\) \\
3 & 20.0 & 0.0 & \(3.13\pm 0.45\) & \(1.00\pm 0.03\) \\
4 & 35.0 & 0.0 & \(2.84\pm 0.51\) & \(1.00\pm 0.03\) \\
5 & 65.0 & 0.0 & \(2.45\pm 0.89\) & \(1.00\pm 0.03\) \\
6 & 10.0 & 5.0 & \(2.53\pm 0.68\) & \(1.00\pm 0.03\) \\
7 & 20.0 & 5.0 & \(2.48\pm 0.76\) & \(1.00\pm 0.03\) \\
8 & 35.0 & 5.0 & \(2.39\pm 0.84\) & \(1.00\pm 0.03\) \\ \hline \end{tabular}
\end{table}
Table 3: The results for the electron events.

Figure 7: The results for the electron events.

Figure 8: The NROI distribution for the two jet events (undec).

Figure 9: The NROI distribution for the two jet events (dec).

\begin{table}
\begin{tabular}{|c|c|} \hline NROI & Percentage of Events \\ \hline
1.0 & 56.25 \\
2.0 & 35.98 \\
3.0 & 7.20 \\
4.0 & 0.38 \\
5.0 & 0.19 \\ \hline \end{tabular}
\end{table}
Table 4: The percentage of events as a function of NROI.
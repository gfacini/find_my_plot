# High Speed Backplane links for the L1 Trigger Cluster Processor Module.

R.Staley

The University of Birmingham

###### Abstract

The design of the Cluster Processor Crate within the ATLAS L1 Calorimeter trigger requires a large number of high speed data links between modules. Data signals are sent at 160Mb/s across the backplane to reduce the number of module inter-connections and the pin count of onboard processing devices, while covering the largest possible area of the calorimeter. A transmission scheme is needed to reliably carry these signals across a backplane through module connectors and into the processing devices. This report describes the evaluation of CMOS and GTL transmission schemes which can be used for direct connection to either ASIC or FPGA devices.

27 March 2000

## 1 Background

The previous Cluster Processor backplane tests ( 1997 - 1998 ) chose ECL as the transmission technology. ECL parts were available in a wide range of functions with specifications more than adequate for the data rate of 160Mb/s. Although the ECL devices performed very well they do consume an appreciable amount of power. The large number of signals present on the final CPM suggests some integration of the backplane drivers and receivers into the processor devices where possible, to reduce the number of packages. This was the baseline scheme presented in the Level-1 Trigger Technical Design Report [ See Reference 1]

However ASICs with fast ECL I/O pads are expensive and the choice of FPGAs with ECL I/O is very limited. Recently available FPGAs ( with a gate capacity we require) have a choice of fast I/O schemes including Low Voltage CMOS and GTL.

At the time that the previous demonstrator was designed, there were no alternatives suitable for 160Mb/s transmission. CMOS drivers suffered from large ground-bounce crosstalk problems due to large signal swings and inadequate power supply connections, and produced large supply transients. Since then however, newer CMOS parts have been introduced that are much easier to use; faster propagation delays with slower transition times, smaller output voltage swings and packaged with a higher ratio of ground to signal pins.

The specifications of the Fairchild VCX CMOS family look promising, [Reference 2]. These are compared alongside the existing industry standard FCT CMOS family

\begin{tabular}{|l|l|l|} \hline  & FCT & VCX \\ \hline Maximum Propagation delay & 5ns & 2ns \\ \hline Ratio of Ground pins to Signal pins & 1:8 & 1:2 \\ \hline Output voltage swing & \textgreater{} 4V & 2V \\ \hline \end{tabular}

Another candidate for the backplane links is GTL technology, with devices now available specified to operate at 160Mb/s.

GTL was created for bus based connections and in that environment will outperform CMOS transceivers due to the latter's higher capacitance loading. However GTL transceivers have asymmetric output drive with only the low-state conducting. These outputs have a very large current sinking capacity of around 100mA.This asymmetry may produce different rise and fall times, leading to reduced timing margins.

CMOS transceivers having a symmetric output drive may be more suitable for point-to-point links than 'Bus' oriented transceivers such as GTL.

## 2 Test Set-up

The test set-up used a module designed to transmit and receive 160Mb/s signals over a path similar to that foreseen on the production CP module (Fig. 1).

Two 160Mb/s test signals are driven through a short backplane connection onto three destination receivers on another module. The signals paths under test are surrounded by further traces activated as a group to create realistic crosstalk on the channels under test (Fig. 3).

An ALTERA EPM7064SLC44-4 - CPLD performs pattern generation (PG) and error detection (ED) at 160 Mb/s. This generates a 127 length PRBS at 160Mb/s for the test signals, and also drives the adjacent traces with alternating 1s and 0s at 160Mb/s. (Fig. 3) This CPLD also contains the error counter and 7-segment display driver.

The 160 Mb/s clock is generated by a PLL device, TriQuint TQ1090, which also distributes the 40MHz reference from an onboard crystal oscillator.

The CMOS section used devices from the Fairchild VCX family, and the GTL section used devices from the Texas Instruments GTL+ family.(Fig. 2)

In the following tests, two evaluation modules were inter-connected using a short JEM-2 Test Backplane PCB kindly supplied by colleagues from Stockholm University. This backplane board cross-connects signals so that data can be transferred between two modules in both directions. The connectors used are AMP Z-Pack type which are likely to be adopted in the production crate.

Figure 1: Data Transmission PathFigure 3: Connection detail ( CMOS and GTL )

Figure 2: Layout

## 3 CMOS Evaluation

The following waveforms were recorded using a 500MHz HP Infinium Oscilloscope. These are typical of waveforms seen on either test module. Figure 4 below shows the test setup with signals being driven in both directions across the backplane.

\begin{table}
\begin{tabular}{|c|c|c|} \hline Normalised delay & Card\#2 Rx & Card\#1 Rx \\  & Forward direction & Reverse direction \\  & Error rate & Error rate \\ \hline
0.0 & 0 & 0 \\ \hline
1.0 & 0 & **Many** \\ \hline
2.0 & 0 & **Many** \\ \hline
3.1 & 0 & 0 \\ \hline
4.1 & **Many** & 0 \\ \hline
5.1 & **Many** & 0 \\ \hline \end{tabular}
\end{table}
Table 1: Timing scan of CMOS links

Figure 4: Module connections

Figure 5: CMOS with ‘crosstalk’ activeHaving set the timing to be well inside the safe region, the boards were left to run over a long period. The CMOS links ran without errors over a period of 8 hours.

2 links @ 160Mb/s x 8 hours = 9 x 10\({}^{12}\) bits transmitted error free.

### Operation of CMOS devices at different supply voltages

Because these parts performed so well, their operation at different supply voltages was investigated. Timings were adjusted in steps of 1ns on the receiving board#2 to find errors on the forward channel. The return channel on board#1 behaved in a similar manner. Each test was run for 5 minutes.

Where High = Error rate > 1kHz and Low = Error rate < 1kHz

At each of various supply voltages of 3.3V, 3.0V and 2.5V, the timing was set to be well inside the safe region and the boards were left to run over a long period. The CMOS links ran in all cases without errors over a period of 8 hours giving 9 x 10\({}^{12}\) bits transmitted error free.

Using single test card with 11 signals looped back at backplane connector, the Power Supply current was measured and recorded in Table 3 below. This was the current taken by 3 CMOS devices and a signal termination supply circuit, while sending 160Mb/s data. (1 signal PRBS, 1 signal low, 9 signals alternating 1s and 0s.)

\begin{table}
\begin{tabular}{|c|c|c|c|} \hline Normalised & Supply = & Supply = & Supply = \\ delay / ns & 3.3V & 2.5V & 2.0V \\  & Error rate & Error rate & Error rate \\ \hline
0.0 / 6.25 & 0 & 0 & High \\ \hline
1.0 & 0 & 0 & 0 \\ \hline
2.0 & 0 & 0 & 0 \\ \hline
3.0 & 0 & 0 & 0 \\ \hline
3.1 & 0 & 0 & 0 \\ \hline
4.1 & High & 0 & 0 \\ \hline
5.1 & High & High & High \\ \hline
6.1 & 0 & Low & High \\ \hline \end{tabular}
\end{table}
Table 2: Timing scan of CMOS links at different supply voltages

\begin{table}
\begin{tabular}{|c|c|c|} \hline Supply voltage /V & Current drawn /A & Power taken /mW \\ \hline
3.6 & 0.22 & 792 \\ \hline
3.3 & 0.20 & 660 \\ \hline
3.0 & 0.16 & 480 \\ \hline
2.5 & 0.10 & 250 \\ \hline
2.0 & 0.06 & 120 \\ \hline \end{tabular}
\end{table}
Table 3: Power consumption vs Supply VoltageRunning the devices at 2.5V instead of 3.3V reduces the power consumption by a factor of 2.6, but only adds 0.2ns to the propagation delay.

Using single board with 160Mb/s signals looped-back at backplane connector, the following waveforms were recorded (shown in figure 6 below ) at the error detector input, having passed through two buffer stages;

There was little variation seen in the eye crossing voltage, as the supply was varied between 3.3V and 2.0V.

\begin{table}
\begin{tabular}{|c|c|} \hline Supply voltage / & Delay /ns \\ \hline
3.6 & 0.90 \\ \hline
3.3 & 0.95 \\ \hline
3.0 & 1.0 \\ \hline
2.5 & 1.15 \\ \hline
2.0 & 1.45 \\ \hline \end{tabular}
\end{table}
Table 4: Propagation Delay vs Supply Voltage

Figure 6: Waveforms at lower supply voltages

[MISSING_PAGE_FAIL:8]

## 5 Summary

The CMOS devices from Fairchild ( 74VCX16244 ) performed well at 160Mb/s. The CMOS links were run error free for a period of 8 hours, giving 9 x 10\({}^{12}\) bits transmitted error free, even over a large range of supply voltages.

These VCX Parts were much easier to use than those from older CMOS technologies, having more ground pins, slower signal transitions and lower voltage swings due to a reduced supply voltage.

The GTL device from Texas ( SN74GTL1655 ) was unusable in our application at this data rate, even though specified to operate up to 160MHz. Power dissipation of the receiver was far too high for our intended application, and the parts produced a lot of switching noise.

## 6 Conclusion

These tests show the Fairchild VCX CMOS devices to be a good choice for backplane drivers in the production CPM. A backplane transmission system using this type CMOS device can operate from either a 3.3V or 2.5V supply, the latter giving a useful reduction in power consumption.

Any ASIC or FPGA on the Cluster Processor Module connected to the 160Mb/s backplane should have I/O levels compatible with these low voltage CMOS devices.

## References

* [1] ATLAS Level-1 Trigger Technical Design Report, Section 7.3 Cluster Processor.
* [2] Fairchild Semiconductor, Advanced Logic Products Databook, 1998 Section 4. Crossvolt Family
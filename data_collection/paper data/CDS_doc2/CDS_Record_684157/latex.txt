# Calibration of the X-ray Tomograph

R. Avramidou, J. Berbiers, C. Boudineau, D. Drakoulakos,

C. Fabjan, S. Grau, E. Gschwendtner, Z. Kroumchtein,

J.M. Maugain, S. Rangod, H. Rieder, F. Rohrbach,

E. Sbrissa, S Schuh, E. Sedykh, Y. Sedykh, Y. Smirnov,

L. Vertogradov

###### Abstract

An X-ray Tomograph has been constructed to measure the mechanical accuracy of the ATLAS Muon chambers. Here we report on the choice of the measurement scheme, the global calibration procedure and practical aspects of the calibration. We reached for the measurement accuracy a value of 2 \(\upmu\)m systematic and 2 \(\upmu\)m statistical uncertainties in the horizontal and vertical directions. The measurement area is up to 220 cm (horizontal) by 60 cm (vertical).

2001

## 1 Introduction

The X-ray tomograph for the quality assurance of the MDT chambers delivered to CERN for the Muon System ([1]) of the ATLAS experiment ([2]) has been described in Refs. [3], [4], [5], [6]. The tomograph was built and developed at CERN by the X-QC group over the last 4 years (1996-1999). The project is almost completed and the tomograph will be fully automated by mid-2000. The technical description of the set-up may be found in Refs. [7] and [8]. Theoretical aspects of the measurements are described in Ref. [9]. Current status, results of measurements and news are presented and frequently updated at the WWW page ([10]). In the present article an approach to and practical aspects of the calibration of the tomograph are considered.

## 2 Measurement scheme

It is obvious that for a 2-dimensional measurement we have to use at least two non-parallel X-ray beams. In principle, more beams may be used as well to provide better statistical characteristics. But practical consideration (for example, number of water cooling tubes, high tension power supplies and cables, geometrical restrictions, etc.) require to minimize their number. Industry suggests two methods to change a position of the beam in the space: linear and rotating carriers. It leads to three possible schemes of measurements. The simulation of the performance from the point of view of accuracy convinced us that the accuracy of measurements is comparable for all three schemes, provided the geometrical parameters can be reliably found and will be stable in time. Hence, only practical aspects were decisive.

In the first scheme two rotative X-ray beams are considered. Its main disadvantage is a variable angle of measurements which will not result in stable, well distinguished shadows of wire peaks because of the unavoidable overlap with shadows of other wires and tube walls.

The second scheme uses one linear carrier on which one rotating carrier with the X-ray source is installed. It requires two or more passes with different angles to make one scan. Besides more cost for 2 carriers (linear and rotating), the passes must be done with the same parameters except the beam angle. This is really quite difficult and unreliable. In addition it doubles the time for a scan.

For the measurements we have chosen a third scheme. Two X-ray beams with different scan angles are fixed on one carrier moving along straight line. It allows to control a movement of the carrier in space using interferometers and requires only one scan (therefore there is no problem with repeatability of few passes). This approach allows also to solve the difficult problem of long term calibration of the system which is described below.

## 3 ONLINE calibration

Measurements with an accuracy of few microns require the precise control of all geometrical parameters. For example, it is necessary to control the beam angles, their positions in space, i.e. relative to another and to the interferometer1) sensors. But this requires to know positions of the interferometer laser beams in some external system of coordinates and origin of all laser axes. The latter is unattainable in principle because the interferometer loses its zero point in the case of beam blocking which is unavoidable during installation of the chambers, maintenance works, etc. It means that the calibration must be done permanently and, preferably, at every scan. This procedure provides reliable control of the quality of the measurements.

Footnote 1: To control the carrier position in the space industrial interferometers have been chosen. They provide reliable long term measurement accuracy (better than 1 \(\upmu\)m for linear and 1 \(\upmu\)rad for angle measurements) of all necessary axes: linear position (along the scan direction), straightness and flatness (perpendicular to the scan direction shifts of the carrier), pitch, roll, yaw (carrier orientation angles, i.e. rotations around axes X, Y, Z). The measurement may be done in the ONLINE regime, up to 2000 per second.

The approach chosen allows us to use the following calibration scheme. Two referencerulers consisting of 2-dimensional set of wires each, are installed above and below the measured chamber respectively (in such a case errors introduced by the calibration rulers are interpolated to chamber wires and not extrapolated). The wires of the reference rulers must be seen by the tomograph. They have been measured independently in an optical machine. During the scan both the wires of the chamber and the reference rulers are measured. In the analysis using the known relative positions of the reference ruler wires the basic geometrical parameters of the tomograph are calculated([9]). This calibration provides the basis for the calculation of the positions of the chamber wires.

This approach allows also to control the accuracy of the tomograph in the case of unpredictable circumstances or accidents, for example, failures in the interferometer measurements. Indeed, after calculation of the geometrical parameters one can simply estimate the tomograph accuracy using residuals between predictions by the X-ray beams and real positions of the wires of the reference rulers. This approach can be summarized as follows: two reference rulers are measured with a known accuracy, therefore the chamber between them must be measured with similar accuracy because all measurements are done in the same scan, all calculations for the chamber and reference ruler wires are made with the same geometrical parameters. Moreover in the "scana" program ([9]) the same functions are used for geometrical calculations for reference ruler and chamber wires.

In this reason the calibration is performed for every scan, i.e. in ONLINE regime. Therefore for every scan the geometrical parameters are calculated and the tomograph accuracy is checked.

## 4 Initial calibration

During the initial operating with the tomograph we observed large systematic uncertainties in the measurements. This effect was noticed in the wire positions of measured chamber (shifts and their correlations which could not be explained by assemble problems) as well as in the reference ruler residuals, for which we could predict the theoretical accuracy from fits of the wire peaks of the shadowgrams2). We observed a standard deviation of 8-9 \(\mu\)m for reference ruler residuals, compared to the estimated theoretical value of 1.5-2 \(\mu\)m. The difference was too large for reaching our requirements in accuracy. Two obvious reasons might have explained that: either the predictions by the X-ray beams were calculated improperly (for example: due to a wrong geometrical model), or the optical measurements were not precise enough or contained systematic errors.

Footnote 2: Shadowgram is a dependence of the count rate of scintillators registering the X-ray signals from position along the scan of the carrier with X-ray beam sources ([7], [8]).

Because the latter looked quite improbable we started with investigation of the predictions by the X-ray beams. For this purpose we introduced artificial corrections for such predictions to decrease reference ruler wire residuals. However any attempt to correct deteriorated the chamber wire position measurements (of course, the residuals for the reference rulers improved after the corrections).

Hence, we had to investigate the optical measurements from the point of view of intrinsic systematic errors. An obvious approach was to remeasure the calibration rulers. Comparison of two measurements showed that real errors and systematic errors were higher than we could have expected from the knowledge of the technical characteristics of the metrology table on which the reference rulers were measured. So, a new problem arose: we needed to make the optical measurements more precise.

## 5 Autocalibration of linear parameters

### Theoretical aspects

First, we address the question of linear systematics effect of the absolute scales: the scales for the X and Z axes and their relative angle (non-orthogonality of the system of coordinates)3. The X scale is determined by the interferometer measurements because the corresponding laser beam is parallel to the OX axis (with second order errors of non-parallelism of laser beam and scan direction). The OZ scale and the non-orthogonality errors however are completely determined by the optical measurement errors and can not be determined from the tomograph measurements themselves because the effect of any change in values of these parameters may be completely compensated with corresponding changes of the geometrical parameters of the X-ray beams. Therefore some external measurements are necessary.

Footnote 3: We use the following system of coordinates: OX - along scan direction, OZ - perpendicular to it in the working plane, i.e. vertical.

The autocalibration approach has been developed for that. Let us consider three hypothetical wires A, B, C of the same rigid chamber not lying on the same straight line. Let us imagine that they are measured by the tomograph in the original position (Fig. 1, a) and after rotation of the chamber by 90\({}^{\circ}\) (Fig. 1, b). Due to the Z scale error, instead of the positions determined by points A, B, C, the positions of points A\({}^{\ast}\), B\({}^{\ast}\), C\({}^{\ast}\) in the first and points A\({}^{\ast}\), B\({}^{\ast}\), C\({}^{\ast}\) in rotated orientation will be found. Putting both measurements in the same system of coordinates (for that we need three points because the angle about which these three points are rotated is not known precisely and in general does not equal 90\({}^{\circ}\)) we can estimate the Z scale error (Fig. 1, c).

Figure 1: Z scale error calibration

A similar analysis applies for the non-orthogonality error. Three wires A, B, C are measured as points A', B', C' in original (Fig. 2, a) and as points A", B", C" in rotated by 90deg (Fig. 2, b) orientations. Putting both measurements in the same system of coordinates (Fig. 2, c) we can evaluate the non-orthogonality error introduced by the X-ray tomograph.

Having determined the values of the Z scale and the non-orthogonality errors it is necessary to correct the horizontal and vertical shifts between layers of the reference ruler because these values lead to the mentioned errors.

### Practical realisation

To realise the described approach a small calibration chamber ("gauge chamber") was made with a rigid aluminium frame (Fig. 3). It consists of two horizontal layers (5 wires in one layer and 6 wires in the other one with a spacing convenient for the optical measurements) of wires about 200 mm length each and a distance of 60 mm between wires and 300 mm between layers. It covers a working area of \(\sim\) 300 x 300 mm\({}^{2}\).

For better statistical errors and their estimation the gauge chamber is measured in 8 different orientations: 4 ones with rotations by 90deg around the wire direction and the other similar 4 ones after rotation of the chamber by 180deg around the vertical axis. To describe a position of the system of coordinates of the gauge chamber for every measurement we introduce 3 parameters to be determined: \(x_{j}^{0}\), \(z_{j}^{0}\), \(\alpha_{j}^{0}\), \(j=1\ldots N\) (N = 8 in our case), i.e. position of one wire and rotation angle of the chamber (which must be close to 0deg, 90deg, 180deg, 270deg). Position of every wire of the gauge chamber may be described in its system of coordinates as \(x_{i},z_{i},\ i=1\ldots M\) (M = 11 in our case). To determine the tomograph contribution to the measurement errors due to non-orthogonality and Z scale error, we have to enter 2 additional parameters: \(\beta_{Z}\), Y\({}_{NO}\). So, after the corresponding transformation for every chamber orientation, we are able to put all wire measurements in the same system of coordinates and they must coincide. Because of measurement errors we can do such an operation only approximately, therefore we have to make a global fit finding the parameters \(\beta_{Z}\), Y\({}_{NO}\), \(x_{j}^{0}\), \(z_{j}^{0}\), \(\alpha_{j}^{0}\) and \(x_{j}\), \(z_{i}\) by a minimization of differences of coordinates of the same wires in the common system of coordinates for all chamber orientations. In our case we use for the minimization the least square method because of the Gaussian measurement errors. To determine the common system of coordinates we fix the parameters \(x_{j}^{0},z_{j}^{0}\), \(\alpha_{j}^{0}\) for one chamber orientation. To determine a position of the chamber in it we fix the coordinates \(x_{j}\), \(z_{i}\) for one wire (it fixes one point of the

Figure 2: Non-orthogonality error calibration

chamber in the chosen system of coordinates) and one of coordinates for any other one (it fixes the rotation angle of the chamber in the chosen system of coordinates).

Having found parameters \(\beta_{Z},\Upsilon_{NO}\) we correct similarly the shifts between the layers of the calibration rulers which provoked such errors, reanalyse the data for 8 chamber orientations (because the ONLINE calibration changes), find new more precise gauge chamber wire coordinates and again make the fit. We repeat such iterations until we have small enough values (less than errors of these parameters estimated in the fit procedure) for parameters \(\beta_{Z},\Upsilon_{NO}\).

### Results

The procedure described above allowed us to obtain the values of horizontal and vertical shifts between layers of the reference rulers (Table 1).

Remember that distance between layers of the reference rulers is 45 mm. It means that an error provoked by these shifts might be up to 100 \(\upmu\)m because the chamber height may be up to 500 mm. Effects of similar order were observed during investigations of the X-tomograph measurements for first prototypes ([11]).

Another result is that we measure different offsets of the layers of different calibration rulers. This is seen in the residuals for reference rulers: the effect was observed. Before applying the linear autocalibration we had 8-9 \(\upmu\)m RMS residuals, and after we had 7-8 \(\upmu\)m. But the effect appeared quite small relative to expected values for residuals which must be about 2 \(\upmu\)m. So, further investigations were necessary.

## 6 Autocalibration of non-linear parameters

### Investigation of the errors

Analysing the residuals after geometrical reconstruction using optical measurements of the calibration ruler (typical example may be seen at Fig. 1), one notices a big systematic contribution. This hypothesis is proven, first, with big systematic changes of the residuals at some scan distances (for example, near 600 mm scan distance at Fig. 1) which can not be explained by the X-ray tomograph measurement procedure and second, more importantly, those residuals repeated from scan to scan with an accuracy of a few microns.

One arrives at the following conclusion: the optical measurements of the calibration rulers are responsible for an error of about 6 \(\upmu\)m standard deviation. It was seen already during calibration of the linear parameters (Table 1). Similar error values come from the measured residual standard deviation (7-8 \(\upmu\)m) and the expected one (about 2 \(\upmu\)m). The values of the same order are seen in the Fig. 1: statistical fluctuations correspond to the value 2 \(\upmu\)m and systematic jumps must increase the standard deviation of the residuals to 7-8 \(\upmu\)m.

So, if such systematics is seen by the X-ray tomograph it can be used to correct optical measurements of the calibration rulers. Having two beams it is possible to obtain 2-dimensional corrections to the wires optical measurements of the calibration ruler.

\begin{table}
\begin{tabular}{c|c|c} \hline \hline \multicolumn{1}{c|}{Ruler} & \multicolumn{1}{c|}{Horizontal shift error} & \multicolumn{1}{c}{Vertical shift error} \\ \hline
1 (left upper) & 8.2 & 2.9 \\ \hline
2 (right upper) & 1.5 & 0.4 \\ \hline
3 (left lower) & 8.3 & 5.5 \\ \hline
4 (right lower) & 9.0 & 0.0 \\ \hline \hline \end{tabular}
\end{table}
Table 1: Vertical and horizontal shift errors between layers of reference rulers (\(\upmu\)m)

### Practicalities of the calibration

The scans of the gauge chamber were used for the corrections. They are better with respect to the chamber scans because there are no hidden wires and accuracy of the X-ray tomograph peak measurement is better due to less material. In addition the same scans may be used afterwards for the linear calibration.

There are also problems with wires which are seen by only one beam due to geometrical construction of the tomograph. For these wires the error (residual) of the missing beam measurement was taken as zero. This assumption can not influence the future measurements because the corresponding measurements never appear as the scans of the gauge chamber were done with maximal scan range.

To make the corrections 18 scans of the gauge chamber were used. The average value was calculated from measurements for every wire and every X-ray beam. Using the average

Figure 1: Example of the calibration ruler residuals before non-linear correctionsresiduals of two beams the corrections for 2-dimensional positions of calibration ruler wires were calculated.

The procedure is iterative because the pattern recognition changes when optical measurement values change (mostly due to rejection of bad points during geometrical reconstruction).

The residuals after applying of the described procedure were reduced to about 1.5 \(\upmu\)m and are completely consistent with our expectations. The residuals for calibration ruler wires after the autocalibration are shown in Fig. 2. Some systematics is still seen but it is much lower than requirements to the X-ray tomograph accuracy which must be less than 10 \(\upmu\)m.

Figure 2: Example of calibration ruler residuals after autocalibration

## 7 Final results, estimation of the X-ray tomograph accuracy parameters

The described procedure allowed not only to calibrate the tomograph but also to estimate parameters characterizing the accuracy of the tomograph.

The statistical error of wire coordinates measured by the X-ray tomograph is estimated directly from the wire peak fits. The peak position error fluctuates from 0.5 to 1.5 \(\upmu\)m. This range is due to different background levels of the shadowgram determined by the absorption varying during the scan. In some cases the peak position error may be much worse, up to 30 \(\upmu\)m. It happens in the area of high absorption due to material in the chamber (support beams, cables, for example) where the absorption may increase up to tens times[4]. In practice peaks with the estimated position error of more than 5 \(\upmu\)m are rejected because they may provoke improper

Figure 1: The final results for relative errors after autocalibration of the scalesinterpretation of the results (with probability more than 5% their position may be 10 \(\upmu\)m away from the real value and is inconsistent with the requirements to the tomograph).

The systematic errors as it was described above have two contributions: linear and non-linear. Non-linear systematics is seen directly by the tomograph. For every scan the RMS value of the calibration ruler residuals are calculated. After the calibration this value is typically 1.3 - 1.5 \(\upmu\)m for scans with the gauge chamber and 1.7 - 1.9 \(\upmu\)m for the real chamber scans. It is necessary to stress that now the tomograph accuracy may be really controlled for every scan. As it is seen from the last numbers even quite small deterioration of accuracy (about 1 \(\upmu\)m of the statistical error) can be noticed.

_1999/03/23 09.09_

_Space precision test. March, 1999._

_Figure 7.2_ Test of accuracy of the tomograph in all working space

The linear systematic error is estimated from the linear autocalibration. In Fig. 7.1 the final results of the linear autocalibration are shown. The gauge chamber wires for all 8 scans (See "Autocalibration of linear parameters" on page 4.) were put in the same system of coordinates. The shifts from the average positions of all wires are shown. For convenience the circles corresponding to 5 \(\upmu\)m shifts from the average positions are drawn. The standard deviations of errors of the X and Z coordinates (in the tomograph system of coordinates) measured by the X-ray tomograph have been estimated as 1.58 \(\upmu\)m.

In the same picture the estimate of the parameters of the linear calibration have been shown. Note that the values are much smaller than their errors. This is a direct result of the calibration procedure. Hence, the error values must be used as uncertainties in the tomograph calibration. They mean that if the difference between Z (vertical) coordinates of two wires measured by tomograph is 1 m, the standard deviation of possible systematic error in X coordinates will be 2.1 \(\upmu\)m and in Z coordinate 1.9 \(\upmu\)m. Or for the real chambers because the maximal difference between vertical coordinates of any two wires of the chamber is less than 500 mm, the systematic error introduced by the X-ray tomograph with probability 95% will be

Figure 3: Comparison of the optical and tomograph measurements of the gauge chamber

less than 2.1 \(\upmu\)m for X coordinate and 1.9 \(\upmu\)m for Z coordinate.

Because the gauge chamber has dimensions 300 x 300 mm in the working plane and all 8 scans with rotations were made in the same place of the tomograph, near its centre, the investigations of the tomograph accuracy over the full working space were done. The same gauge chamber was measured in the same orientation but in different places of the tomograph in such a way that to cover all working space. The measurements of all wires were put in the same system of coordinates (Fig. 7.2). The accuracy is typically 2.5 \(\upmu\)m. It is the upper estimation. One reason is that the gauge chamber is not made with perfect precision. Its wires are not parallel (up to 15 \(\upmu\)m). During measurements it is necessary to measure the same section of the gauge chamber. For the same place it is quite easy to provide that (for measurements with rotations of the gauge chamber). For space measurements it is more difficult. Therefore, a contribution from this uncertainty also exists in the estimated accuracy.

After assembling of the gauge chamber it was optically measured at the metrology table on which the calibration rulers had been measured earlier. The measurements of the gauge chamber wire positions with the tomograph (the average values were taken) and optical measurements were compared. The result is shown at Fig. 7.3. The value 6.5 \(\upmu\)m agrees very well with values shown in the paragraph "Results" on page 6 assuming that the metrology table accuracy is the same during the gauge chamber and calibration ruler measurements.

## 8 Conclusion

Let us summarize the main methodological and practical results obtained during the development of the X-ray tomograph.

1. The accuracy of the tomograph is better than 2 \(\upmu\)m (statistical error) and 2 \(\upmu\)m (systematic error) for both vertical and horizontal wire coordinates.

2. The adopted measurement procedure does not in principle require any optical measurements of the calibration rulers if they are mechanically good enough+). Indeed, we started the autocalibration procedure from optical measurements which were corrected afterwards. Alternatively we could start with, for example, nominal (foreseen by design) wire positions of the calibration rulers and correct them. An absolute precision of the horizontal coordinate of the wires is guaranteed by the linear interferometer. The vertical coordinate and non-orthogonality of the X-ray tomograph is provided by the autocalibration procedure. As a consequence we were able to estimate a precision of optical measurements which is about 6 \(\upmu\)m. That was not enough for precise measurements.

Footnote †: \({}^{5}\) Unfortunately in our case it is not like that. The wires of the calibration rulers are not parallel with required accuracy. It leads to necessity to know projections on the planes YOZ and XOY of the angles between wires. So, the optical measurements are used for that.

3. The adopted measurement procedure allows to automatically adapt the geometry reconstruction procedure to the geometrical parameters change: zero values of the interferometers, positions of the calibration rulers, X-ray beams, etc.

4. As a consequence the proposed scheme of measurements of the chambers of the ATLAS Muon system allows automated serial scanning of the chambers with maximal scanning rate. The scanning rate is restricted mostly by physical parameters of the setup (counting rate of the scintillators, necessary statistics to obtain enough precision, etc.).

5. The adopted procedure allows to automatically control the precision of the tomograph for every scan, checking each time the residuals of the calibration ruler wires.

## References

* [1] ATLAS Muon Spectrometer Technical Design Report, CERN/LHCC/97-22 (1997)
* [2] The ATLAS Collaboration, ATLAS Technical Proposal for a General-Purpose pp Experiment at the Large Hadron Collider at CERN, CERN/LHCC/94-43. LHCC/P2 (15 December 1994)
* [3] L. Vertogradov, High Precision Wire Positions Measuring in the Drift Tube Package by the X-ray Scanner (XTomograph), ATLAS Internal Note MUON-NO-041 (1994)
* [4] G. Alexeev et al., XTOMO, A Prototype of the X-ray Tomograph for High Precision Measurements of the MDT Muon Chambers, ATLAS Internal Note MUON-NO-142 (1997)
* [5] D. Drakoulakos et al., XTOMO, One-dimensional X-ray Scanning of a 8-layer MDT Prototype Using the 'Passive Mode', ATLAS Internal Note MUON-NO-151 (1997)
* [6] D. Drakoulakos et al., XTOMO2, Stereo-Measurements of the MDT Muon Chambers Using a High Precision X-ray Tomograph, ATLAS Internal Note MUON-NO-155 (1997)
* [7] J. Berbier et al., X-ray Tomograph Prototype for MDT Quality Control, ATLAS Internal Note MUON-NO-174 (1997)
* [8] D. Drakoulakos et al., The High Precision X-Ray Tomograph for Quality Control of the ATLAS MDT Muon Spectrometer, CERN-OPEN-97-023, 30 July 1997
* [9] E. Gschwendtner, F. Rohrbach, Y. Sedykh. Analysis and Results from Measurements on an X-ray Tomograph of Large Full-scale MDT Prototypes. ATLAS Internal Note MUON-NO-175 (1997)
* [10] X_Tomo WWW reference address: [http://wwwinfo.cern.ch/~xtomo](http://wwwinfo.cern.ch/~xtomo)
* [11] : C. Bini, G. Ciapetti, Analysis of the X-ray tomograph measurements of Calypso prototype. ATLAS Internal Note MUON-NO-187 (1997)
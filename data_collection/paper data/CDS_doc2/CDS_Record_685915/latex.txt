**ATLAS Internal Note**

**INDET-NO-074**

**28 November 1994**

_IDSC Electronics Review_

Silicon/GaAs/MSGC Front-end Electronics Review

_T.Akesson, P.Jarron, R.Nickerson_

20 July 1994

**1. Content**

The ATLAS inner detector steering committee requested a review of the status of front-end electronics being developed for use with Silicon and GaAs strip detectors and Gas Microstrip chambers. In part the purpose of the review was to determine to what extent the three different detector types may share a system. This is the final report resulting from the review.

1.1 Groups

There are several different groups working on front-end electronics for the read-out of precision strip detectors for ATLAS, with the majority of the work being focused on silicon strip detectors. These groups originated in RD collaborations or in other experiments. The groups have developed and are developing a range of different methods to read out detectors. Different approaches have different strengths and weaknesses. Since each group is developing a complete system one result is that there are several important issues that no group has yet studied and several more areas that are considerably less developed than the most 'obviously' required parts. Section 5 outlines the most urgent areas in need of more careful study.

1.2 Specification

In part the different groups have developed different solutions as a result of having differing goals. In order to review the different approaches it was necessary to choose a specification. This was done iteratively in consultation with many people. The review specification is given in 2.1 below and a brief justification for the various items is given in section 2.2. A complete specification is not given; in particular the extensive set of requirements that revolve around the read-out, sparsification and testing are omitted. However section 5 outlines the areas that must be defined in future work by the groups.

1.3 Architectures

There are three substantially different architectures under development: _Binary_, in which only hit/no-hit information is recorded; _Digital_, in which digitised pulse-height information is transmitted off-detector; and _Analogue_, in which the pulse-heights are transmitted off-detector as analogue voltages. Section 3 describes these architectures in more detail and lists the advantages and disadvantages seen by the proponents.

1.4 Technical Status

Section 4 describes the status of the various developments.

1.5 Conclusions

An architecture could be selected _ab initio_, however to make an informed choice much ongoing work must be completed. We draw a number of conclusions which are given in section 6. Our primary concerns are the short time scales, and the need for both a clear programme with concrete milestones and a well defined mechanism for architectureselection. We also see a need for a more strongly collaborative effort amongst the several participating groups in order to facilitate these.

**2. Specifications**

The front-end electronics has to be able to operate under the harsh LHC conditions; this produces a number of requirements from both the detector and system viewpoint. Documenting these is essential to ensure that the front-end scheme is designed with all requirements in mind, giving a satisfactory system without incurring the cost penalty associated with being over ambitious. The specifications described in this document are those used by the review group and not 'official' ATLAS specifications (which do not yet exist). They were presented and discussed at an open meeting on the 20th of June 1994; many valuable points were made, motivating change in some of the original specifications.

From the front-end point of view the detectors are current generators on the input, and the characteristics of these current generators are different for the MSGCs as compared with the semi-conductor detectors (Si, GaAs). Some specifications will then be different for these so that the information can be handled in an optimal way. In the case of MSGCs, a low avalanche gain is desirable, so good signal-to-noise ratio (S/N) is required. This is improved with integration time for the length of the ionisation drift. However, a long integration time means increased occupancy and less clear bunch tagging so that the optimal integration time and signal processing method must be determined carefully.

The occupancy also gives the reference level for the maximum amplifier output pulse duration, large signal recovery time and the double pulse resolution.

External factors determine a number of specifications. It will take a certain time from when the particles are produced until a first level trigger is formed and transmitted to the front-end electronics This latency is composed of both processing time and cable lengths and determines the length of the pipe-line.

The front-end system should produce a minimum amount of deadtime. Dead-time can be produced in several places and care must be taken that each is not considered in isolation or several small contributions could sum to an unacceptable total.

i) Double pulse resolution in the amplifiers

ii) The recovery time after a trigger

iii) Data transmission buffering

Whilst ideally these should be zero, removing small dead-times is of only academic interest and could have expensive implications on the front-end design. One example is the destructive read pipelines in which several timeslices are read for each trigger. Here the ability to read consecutive triggers would demand duplication of the data storage.

The detectors do not only put electrical demands on the front-end, but in some detector module designs also geometrical constraints. In some designs, the pitch of front-end electronics channels should match that of the detector, so that the connectivity is reasonable. In practice the smallest design pitch is usually preferred for economic reasons (smallest silicon chip area).

An area of considerable debate is that of power dissipation. The amount of power that can be removed depends of the capacity of the cooling system, which can be expressed as power per unit surface area. Specifying a power per channel is common, but this ignores the fact that cooling ability is limited by geometry. Here it is assumed that the area available for cooling is proportional to the detector area serviced, so that twice as much power is allowed per channel for a system with twice the pitch, but same strip length.

A second area that has been discussed without complete consensus is power supply. The electronics requires a low voltage power system. The voltage will not be identical everywhere due to power losses in the cables. The electronics must therefore be operational over a range of low voltage levels. Since a small allowable range of voltages would imply large power cables the voltage compliance of the circuits is important and must be a part of the specifications.

For the review, only specifications which are relevant to the bulk of the work on-going have been examined. There remain a long list of detailed specifications that must be defined. Some of the functionality to which these relate is listed in section 5.

2.2.1 Noise level of the front-end system.

The electronics noise after 10 years of LHC operation, i.e. 10\({}^{14}\) neutrons/cm\({}^{2}\) and 10MRad ionising radiation, should not produce a noise hit level seriously degrading the occupancy, for a retained high detector efficiency. This requires that the effective noise with all effects included should be less than **1300e - 1500e**. This noise level should include all signal processing, radiation induced series noise from detector leakage currents, and channel to channel variations in thresholds or gains. This is a detector dependent specification, so as a _guide_ to the performance required of the amplifier itself it is possible to specify that the noise level should be dominated by the noise produced by a good quality input transistor (an equivalent input noise voltage power specral noise density of 1.8nV/Hz) with low power operation (1 mW), and that this should be minimally affected after 10 years at the LHC. The noise specification derived by this procedure is:

ENC < 700 e- + 70 e-/pF _guide only_

excluding all detector induced noise, but including the ballistic deficit. In the case of MSGCs the gain can be altered to increase the signal size, however under the preferred operating conditions the input charge expected for MSGCs, integrated over a suitable time, is comparable to that from silicon, so the same noise figures are adopted.

2.2.2 Minimum dynamic range for a pulse-height system

Fluctuations in the energy loss distribution and pile up determines the required dynamic range. The pile-up probability is significant, despite the low occupancy per bunch crossing, because in the CMOS pulse-height designs being considered the analogue pulse is expected to last for around 15 bunch crossing. It is reasonable to allow for energy loss up to 2 MIPs. A further factor of two is required to allow for a single pile-up pulse. A third factor of two is required for geometrical effects, i.e. particle inclination angles. This implies a required dynamic range of 8 MIPs. The probability for two pile up hits is negligible given the detector granularities and pulse lengths considered. In the case of MSGCs, where the occupancy is higher, this dynamic range might need to be higher:

Dynamic range (15 bunch pulses), Si/GaAs 8MIPs

Dynamic range (15 bunch pulses), MSGCs 12MIPs?
**2.1 Table 1 Specifications**

\begin{tabular}{|l|l|l|} \hline Item & Si/GaAs & MSGC \\ \hline Noise & \(<\) 1500e, ENC \(<\) 700 e- + 70 & \(<\) 1500e, ENC \(<\) 700 e- + \\  & e-/pF & 70 e-/pF \\ \hline Dynamic range & (15 bunch pulses), 8MIPs & (15 bunch pulses), \\  & & 16MIPs? \\ \hline Pulse-duration: & Binary, 3 BC Pulse- & \\  & height\(<\)15bc (assumes & \\  & correlated sampling) & \\ \hline Large charge recovery time &? &? \\ \hline Double pulse resolution & 50ns (2bc) & 50ns \\ \hline Dynamic range of Pulse- & 7bits &?. \\ height & & \\ \hline Bunch Crossing Tag & 1bc & 2bc \\ Resolution: & & \\ \hline Maximum L-1 trigger rate & 100kHz, stochastic & 100kHz, stochastic \\ \hline L-1 trigger spacing & \(>\)2bc &. \(>\)2bc \\ \hline Pipeline Length & 2\(\mu\)s (80 locations) & 2\(\mu\)s (80 locations) \\ \hline Derandomising Buffer & \(<\)0.1\% data loss & \(<\)0.1\% data loss \\ \hline Voltage Compliance & 0.3V & 0.3V \\ \hline Operating temperature Range & nominal +2.5C & nominal +2.5C \\ \hline Functionality Range & -10C to +30C & -10C to +30C \\ \hline Power (per side for double sided detectors) & \(<\)40mW/cm\({}^{2}\) & \(<\)40mW/cm\({}^{2}\)? \\ \hline Pitch Minima & Si binary or direct analogue & 150 \(\mu\)m \\  & \(\cdot\cdot\cdot\cdot\) & \(\cdot\cdot\cdot\) \\ \hline \end{tabular}

2.2.3 Pulse duration

A long pulse duration has a negative effect on the system since it increases the pile-up. Pile-up reduces the two pulse resolution for a binary system and can cause saturation in direct pulse-height system. For an analogue charge division system it would degrade the precision of charge division. For the expected occupancy (Si/GaAs) the amplifier output pulse duration should be less than 15 bunch crossings for a pulse-height system. The pulse duration should be less than 3 bunch crossings for a binary system.

Pulse-duration: Binary & 3 bc \\  & Pulse-height & \(<\)15bc (assumes correlated sampling) \\ \hline \end{tabular}

#### 2.2.4 Front end recovery time

A low rate of large charge deposition can be expected because of low energy protons and ions. The front end electronics must recover from this sufficiently fast that the effective occupancy is not significantly worse than that given by the MIP occupancy. A MC estimate of the frequency of large charge depositions has to be made to rigorously estimate the recovery time needed.

Large charge recovery time? TBD

2.2.5 Double pulse resolution

In the case of Si/GaAs for the inner layers, at the highest luminosity, and including safety factors an estimate of the occupancy is 2% per bunch crossing. A double pulse resolution of two bunch crossing will double this occupancy number to 4%, or, if the double pulse effect is to loose the hit, cause an inefficiency of 2%. A resolution of three crossings will increase this to 6% occupancy, or 4% inefficiency. This seems unacceptable, therefore the double pulse resolution should be no more than 50 ns; clearly 25 ns is preferable. For MSGCs the situation is more complicated since a typical track will leave charge deposited on a number of adjacent strips. The MIP occupancy is lower than the charge deposition occupancy. Clearly the situation is worse than for Si/GaAs, but since the ion drift time is already two bunch crossings specifying less than 50ns for double pulse resolution seems unrealistic.

Double pulse resolution 50ns (2bc)

2.2.6 Analogue resolution

This is determined by one of several possible uses of pulse-height information. For a charge division system, which should identify the pitch both at the lowest threshold and at the highest charge depositions on which charge division will be measured. a 7 bit resolution is probably adequate, perhaps even 6bits. If the goal is to measure the noise in a channel, then an extended dynamic range is needed and 8bits or 9bits are required. Here charge division is selected as the deciding criteria.

Dynamic range of Pulse-height 7bits

2.2.7 Time stamping

This requirement cannot be the same for the semi-conductor detectors as for the MSGCs, since a strong intrinsic requirement on the latter would result in high inefficiencies. The semiconductor detectors should unambiguously identify the correct bunch crossing, and MSGCs to within two crossings

Bunch Crossing Tag Resolution: Si/GaAs 1bc, MSGCs 2bc

2.2.8 Trigger rate

The ATLAS trigger group gives the maximum L-1 trigger rate as 100 KHz, and the front end must be able to handle this. There is virtue in graceful failure beyond this value since it is not desirable that this trigger rate becomes a brick wall. It is assumed that the L1 triggers are stochasticaly distributed.

Maximum L1 trigger rate 100kHz, stochastic

#### 2.2.9 Consecutive triggers

Ideally one would like to be able to record consecutive triggers, since otherwise deadtime is introduced, but since such a requirement has been demonstrated to have strong hardware implications the requirement should be slightly looser. The specification here therefore allows 2 dead crossings after a L-1 trigger. For a 100kHz L-1 rate, this would produce a 0.5% deadtime. Clearly all of ATLAS must agree to this.

L-1 trigger spacing >2bc

#### 2.2.10 Pipeline length

This is specified by the trigger group to be 2 us, and is therefore also the specification in this document. The cost implication of extending this should be investigated and if possible it would be advantageous to incorporate a margin for expansion.

Pipeline Length 2us (80 locations)

#### 2.2.11 Front-end buffering

It takes some time (us) to serially read the information from the front-end system, and the average time between L-1 triggers is 10 us, but stochastic in nature. The front-end system should therefore be able to buffer the triggered detector information for the case of several temporally close L-1 triggers. This buffer should be deep enough so that not more than 0.1% of the information is lost (or 0.1% deadtime is introduced).

Derandomising Buffer <0.1% data loss

#### 2.2.12 Supply voltage compliance

Some voltage drops must be allowed over the power distribution system to avoid introducing too much material. The chips must operate to the other specifications on a power distribution system that has a maximum voltage variation of 0.3 V.

Voltage Compliance 0.3V

#### 2.2.13 Operating temperature ranges

The silicon detectors have to be run at low temperature (<5C) while the MSGCs and the GaAs can operate at the ambient temperature of about 20 C. It is reasonable to expect that this temperature will have some variation, perhaps 5C. However, the functionality of the chips should be maintained over a larger temperature range to allow for testing during assembly etc. Functionality should be maintained from-10C to 30C.

Operating temperature Range nominal +2.5C

Functionality Range -10C to +30C

#### 2.2.14 Power dissipation

This specification is set by the amount of power that can be removed by a low radiation length cooling system. It seems that a combination of liquid cooling and helium blowing is likely to be required, the latter to avoid catastrophic detector temperature run away (for semi-conductor detectors). R.Apsimon has estimated the power removal that one can expect to get for such systems. By assuming an aggressive use of a water cooling systemor a comfortable use of binary ice, and accounting for power losses in the detectors and power buses, it emerges that the early estimate of allowable power dissipation should be below 40 mW/cm\({}^{2}\). This is per side of active detector. For a 200 \(\upmu\)m pitch, 6 cm long, strip detector the limit will then be 4.8 mW/channel.

Power \(<\)40mW/cm\({}^{2}\)

2.2.15 Electronic pitch for the front-end

In some layouts, the electronics pitch has to match the detector pitch so that the connectivity is reasonable. This produces the following requirements on the pitch. It should be noted that with fan-in these are not requirements, so that the numbers should be interpreted as the smallest values that might be required by geometry.

\begin{tabular}{l l l} Pitch Minima & & \\ MSGCs & : & 150 \(\upmu\)m \\ Si binary or direct analogue & : & 44 \(\upmu\)m \\ Si analogue charge division & : & 95 \(\upmu\)m \\ GaAs & & 95 \(\upmu\)m \\ \end{tabular}

**3. Architectures**

Figure 1 shows the three basic architectures. The two different kinds of shading distinguish the parts of the system which are analogue circuitry from those which are digital.

3.1 Basic Division

The analogue scheme, figure 1, has an amplifier followed by an analogue pipeline for each channel. The pipeline is a switched capacitor array. At each beam crossing, BC, the value of the input voltage is stored on the next capacitor in the array. If a L-1 trigger arrives the value representing the input voltage for the corresponding BC is transmitted off the detector along an optical fibre. Several channels share a fibre so the data for (typically) 128 channels is multiplexed into a single fibre. Digitisation of the analogue values takes place off-detector, at the remote end of the fibres.

In the digital scheme, figure 1, all the same functions are performed as in the analogue case. The distinction between the schemes is that the digitisation and zero-suppression of the analogue pulse-height information is performed on the detector in the digital scheme. This means that the fibre-optic links transmit digital information and that fewer optical links are required. The links do not transmit analogue information.

The binary scheme, figure 1, is qualitatively different from the other two since the pulse-height information is not preserved. The amplifier output is discriminated immediately so that only hit no-hit information is available. In this case the bulk of the circuitry is strictly digital, including the pipeline, and the quantity of data that is moved off-detector is at a minimum.

### Element Choices

Within an architecture there remain choices of technique. Figure 2 shows the major subdivisions that are being considered.

#### 3.2.1 Amplifier

There are three approaches to the amplifier. There is a CMOS design with a fast rise-time. If the specifications could be met, this would a priori seem the most desirable system since the CMOS amplifier could be integrated with the rest of the circuitry and high speed operation allows a minimum of pile-up and correct BC identification. In practice this kind of amplifier is designed with a fast rise time and a slow fall time and is planned to be used with double correlated sampling. The performance that can be achieved is close to that required, but the technique needs to be pushed very close to the theoretical limiting case.

The difficulty that emerged in designing a fast low power CMOS amplifier led to a parallel development effort based on the use of a CMOS amplifier with a long shaping time. In order to recover identification of the correct BC a triple correlated sampling scheme is used which deconvolutes the amplifier shaping from the input signal. Whilst the amplifiers have been demonstrated to perform close to expectation, there remains disagreement over how well the complete chain can work under real conditions.

Figure 1: Basic ArchitecturesFactors of between 1.4 and 1.8 degradation in amplifier noise are expected from the signal processing scheme. Some rather detailed calculations have been done, however the discussion will only be resolved by a complete set of measurements. A variation on this calls for use of the deconvoluted signal only for bc identification, with the pulse-height extracted from the sampled values; clearly this is a complication, but would yield better signal to noise in the case of low leakage currents.

The third amplifier option is fast bipolar. This requires a separate chip in most views, although a radiation hard bi-CMOS process is under development. The advantage of bipolar is that for a given speed and noise performance the power consumption can be lower (in the relevant regime).

3.2.2 Pipelines

The analogue pipelines are in large part identical. The control logic surrounding them is the same, the difference between implementations lies in the requirements imposed on them by the systems and the choice between charge and voltage sampling. A philosophy of double correlated sampling coupled with demanding that it be possible to read adjacent BCs results in two capacitors per pipeline step being required. (Two also helps with technical problems). By relaxing the requirement to read adjacent crossings the number of capacitors is reduced to one. In the case of triple correlated sampling a single capacitor per location results in two 'dead' BCs after each L-1 trigger (which is widely held to be acceptable).

For binary systems the pipelines are much simplified since only 1 bit resolution is required. There are two basic types of pipeline, clock-driven and data-driven. A clock-driven pipeline is simply a one-bit version of the switched capacitor array used in the analogue case (although static storage is usually used, not capacitors). A data-driven pipeline zero suppresses the data as it arrives by recording only the time of arrival for hits, as opposed to a hit/no-hit result for each BC. The data driven pipeline is advantageous in the case of very long L-1 latencies, however is probably inferior for the ATLAS case since it has an intrinsic inefficiency when the occupancy is high.

3.2.3 Signal Processing

There are three different forms of signal processing under development for use with Silicon strip detectors. The simplest is that intended for use with bipolar amplifiers, in which case simple RCCR shaping with fast fall and rise times is adequate. For the NICON approach, where the fall time is long, double correlated sampling of the amplifier output is required. This is simply a subtraction of the amplifier output for adjacent BCs after the L-1 trigger identifies a crossing of interest. Clearly the noise associated with two samples contributes in this case. Triple correlated sampling, for use with a slow CMOS amplifier, requires that three samples be added with weights adjusted to deconvolute the amplifier shaping. The noise associated with this procedure in the case of real systems is a source of some debate.

An additional form of processing has been suggested in the case of a fast CMOS amplifier to help combat the small margin between the required and possible signal to noise levels. Some fraction of the noise is the result of the interstrip capacitance, especially in detectors optimised for use with charge division. This noise is correlated between adjacent strips and can be reduced by summing the outputs for sets of three channels. The gain from this proceedure is highly dependent on the geometry of the detector (for eg see NIM A309(1991)545). It is a measure of how close to acceptable these systems are in terms of noise performance that techniques of this kind need to be considered.

In the case of MSGCs several kinds of other signal processing are also being evaluated at the software level. These stem from the variable signal shape expected from a gaseous chamber. However no final conclusions have been drawn as yet. A further complication in this case is that it is as yet unclear that the gain after irradiation across an MSGC will be sufficiently uniform to allow a single threshold over a detector. Some proponents of MSGCs believe that it will be necessary to allow for a different threshold for each channel in the binary or digital approaches. It is also unclear as yet if the additional signal processing involving information from several adjacent channels will be required to reduce the effective occupancy before transmission of information off-detector. In all, the current uncertainty (as perceived by a non-expert) surrounding the exact requirements for MSGCs makes it difficult to assess the likelihood that even the same range of basic architectures are applicable to both MSGCs and Si/GaAs. It may be that the most suitable architecture is the analogue approach, with the various processing steps done off-detector. It should be noted that more than one fibre per 128 channels may be required in this case if multiple time slices are required for processing. At the opposite end of the spectrum are experts who believe that the binary approach is adequate for use with MSGCs. The view taken here is that insufficient data is available to form a final opinion at this time.

3.3 Hybrid

Given an architecture there remain choices relating to the location of the various elements required in the system, the 'back-end' elements. In one extreme all the elements required are contained in a single front-end chip. At another extreme there are separate chips for amplifier; pipeline, its control & mux; and the ADC and read-out control. Figure 3 shows some commonly suggested systems, although relatively little work has been done in this area. Section 5.1 lists some of the issues as yet unresolved.

3.4 Comparison

3.4.1 Pulse-Height & Charge Division

The digital and analogue schemes offer pulse-height information. This allows the possibility of using charge division to reduce the number of detector channels required for a given spatial resolution. In part the motivation to reduce the number of channels arises because of an over simplistic method of costing which simply assigns 3SF per channel for electronics. This is incorrect; even very simple costings shows that one might expect as much as a factor of two difference in cost between an electronics channel that supplies pulse-height information and one which supplies only binary information. (For example, the area estimated for the front-end chips, excluding amplifiers, is more than a factor of two different). There remains uncertainty as to whether charge division can be used in the LHC environment. In addition, if employed, the mean occupancy rises in proportion to the read-out area; in some estimates the rise would be to approaching 4% in the worst case layers at the inner barrel, which is high for a system with a low number of detector planes.

**Figure 3 Hybrid Layouts**

\begin{tabular}{l l} Example Binary & Digital CMOS chip (pipeline, R/O etc.) \\ Analogue Bipolar chip (amp, discr.) & Clock/Control Bus \\ Data Ring \\ \(\approx\)1 bond/channel & Integrated PIN/receiver \\ Integrated LED/driver \\ Hybrid substrate & Fibre Links \\ Clk/Ctl in \& Data out \\ Threshold voltages \\ Power Lines \\ Example Analogue & Clock/Control Bus \\
1 data source/chip \\ ROC chip & Mult-channel modulator/PIN \\ Optical Links & package \\ Power Lines \\ Example Digital & Clock/Control Bus \\ Data Bus \\ ROC chip & Integrated PIN/receiver \\ \& LED/driver \\ Power Lines \\ \end{tabular}

Other potential advantages of pulse-height information are: A direct measure of the signal to noise for each channel (but requires a larger dynamic range than would be the case for charge division alone); A greater range of signal processing algorithms can be employed during analysis; A larger subset of possible correlated noise problems can be handled off-detector (analogue scheme only except at very low trigger rates). There areother possible advantages associated with analysis such as two-hit separation, but these do not seem to be seen as a major motivation by most proponents of pulse-height.

In summary, it cannot be argued that pulse-height information is essential, however a list of advantages can be found. Some additional cost for pulse-height information might be money well invested.

3.4.2 Analogue

The analogue approach has the advantage that the pulse-height information is available off-detector without any zero suppression. This maximises the flexibility that can be envisioned in processing the data. For example event dependent correlated noise can be subtracted out. The method offers the most flexibility in the face of unexpected noise sources. It has a minimum of functionality on-detector and requires less silicon area (on-detector) than the digital system. A more disguised advantage is that all front-end chips send the same quantity of data for a given L1, allowing the external control system to have a complete knowledge of data buffer status (the system is essentially synchronous).

Against these advantages must be set the need for more data transmission links than other schemes (typically a factor of four more). The links must be capable of sending analogue information and are therefore potentially more sophisticated and complex. Any analogue transmission scheme adds noise to the system, which must then be designed to be small. In addition there are large areas of the chip where digital and low-level analogue signals must co-exist, which makes control of noise and pedestals harder (a problem shared with the digital scheme). The advantage of all front-ends being in identical states is also a disadvantage since, for example, it maximises the possibility of large coherent supply current fluctuations. The analogue scheme also has a hard brick wall in terms of the trigger rate that can be handled. The limit is simply given by the data transmission bandwidth of the system. In schemes that employ zero suppression a very low occupancy allows a high trigger rate to be tolerated (at least from the data transmission viewpoint). This might be of value for b-physics at low luminosity.

3.4.3 Digital

The digital approach offers pulse-height information (advantages listed in 3.4.2) with zero suppression on-detector. This minimises the data transmitted and allows use of digital fibre links. A marginal advantage over the analogue scheme is that the 100kHz trigger rate is a softer limit. It would be possible to design the system so that at low occupancies the system could be triggered at substantially higher rates. Since this exceeds the specifications it cannot be taken as a compelling advantage.

The drawback to the scheme is that it is the most complex on-detector and loses some flexibility in terms of dealing with correlated noise. Since zero suppression is used, the external system cannot know the status of data buffers.

3.4.4 Binary

The binary architecture is the simplest system in practice, using the smallest amount of silicon on (and off) the detector. It allows the maximum possible separation of analogue and digital functions, which are most often seen as confined to separate chips. The data transmission bandwidth is lowest for this architecture and for this reason tends to be the most robust against increasing occupancy or L-1 trigger rates.

The primary disadvantage is that there is no pulse-height information. Zero suppression is used, so the external system cannot know the status of data buffers exactly.

**4.Technical Status**

Several groups have contributed to the development of ASIC front end electronics prototypes for the readout of precision strip detectors. The performance of separate components such as input amplifiers, analogue memories, analogue multiplexers, and ADCs are close to the specifications required by the ATLAS inner detector. However there is no solution fully tested nor a readout system fully developed to the final specification.

Although there are preliminary studies relating to implementation of front end electronics using GaAs technology, only the technical status of the main efforts with bipolar and CMOS technologies is reported. There are 4 major different projects on front end electronics, the results from which are the fruit of many years of R&D activities:

\(\bullet\) 1.The ADAM chip front end developed in the framework of DRDC project RD2

\(\bullet\) 2.Front end chips with a deconvolution filter developed in the framework of DRDC project RD20.

\(\bullet\) 3.Binary front ends with bipolar input amplifier developed in the framework of SDC collaboration (SSC) and NA50.

\(\bullet\) 4.The binary front end FASTPLEX

Projects 1, 2 and 3 have been conceived and developed for the readout of precision silicon strip/pad detectors, whereas FASTPLEX is a development specifically for the readout of MSGC. Preliminary tests were pursued in projects 1 and 2 to study compatibility of the developments with readout of MSGC detectors. [Perugia proceeding and RD2 report]. There is no obvious front end electronics project specifically aimed at the readout of GaAs detectors, however the characteristics are sufficiently close to silicon that a specific development is probably not required. Intrinsic advantages/disadvantages of one approach versus another are not obvious because of many conflicting requirements, e.g.. noise, power, speed, detector capacitance, channel density, radiation hardness and cost. In addition to developing different technical approaches, this large parameter space has lead R&D teams to put different weight on different optimisation criteria. A fair evaluation firstly requires that a set of specifications which are accepted by all groups are established and can be used as a reference. In this section the review of different solutions is done after partitioning the front end electronics into its fundamental functions. This is because it should be possible to select the best features from each development for use in a final system.

It is also recognised that many technical issues are driven by the detector type, semiconductor or MSGC, and by readout style; binary, direct-analogue or charge division. This also leads to different front end optimisations.

### Status of the main efforts

A summary of the main efforts is compiled in tables 2 and 3

#### 4.2.1 Input amplifier

The ADAM chip employs a current mode amplifier, NICON, which has a rise time sufficiently short, 15 ns, to collect the detector charge in one BC of 25 ns. The circuit configuration has a grounded gate input n-channel transistor followed by a cascode which enables a fast rise time (15 ns @ Cdet=15 pF) with a large gain(50 mV/22 000e ) at a low power of 300\(\mu\)W-500\(\mu\)W, (5 Volts, 60 \(\mu\)A-100 \(\mu\)A). The input resistance of this preamplifier is low and stable (300\(\Omega\)) with a good frequency stability because of the use of a grounded gate configuration without feedback. The stage gain Vout/Qdet=1/Co relies on the internal integrating capacitance Co(50 fF). The operating DC conditions (output DC voltage and standing current) are controlled by a slow speed servo-loop amplifier which forces the output DC voltage to be equal to a reference voltage independent of the input current, supply voltage variations, and parameter drift of the substrate caused by process variations or radiation damage. This makes the preamplifier robust against environmental conditions. An additional advantage in the case of DC connection to the semiconductor detector is that the DC stabilised grounded gate configuration easily handles a large leakage current.

Series noise measurement indicates a noise slope of 80 e/pF for a pulse peaking time of 25ns. Nevertheless, this configuration has the drawback of additional parallel noise when compared with a charge sensitive amplifier. It has been measured to be around 800e rms (10 K\(\Omega\) parallel noise resistance). Full optimisation of this circuit can improve this parallel noise figure, but not to better than 25 K\(\Omega\) of parallel noise resistance, which is equivalent to the shot noise of a junction current of 2 \(\mu\)A. In this case it is comparable to a bipolar transistor with a current gain of 50.

#### 4.2.2 Project 2

The FELIX and APV3/5 chips employ a traditional charge sensitive amplifier (CSA) based on a folded cascode CMOS transconductance amplifier. The nominal bias current of the p-channel input transistor is 270 \(\mu\)A with the possibility to increase this value (up to 600\(\mu\)A) to lower the series noise. The supply voltage has been reduced at 2 Volt in order to minimise the power consumption. The feedback consists of a capacitance of 1pF in parallel with a MOS resistor network which shifts the output DC level to enable 2V supply operation. The output signal of the CSA (which has a gain of 3.5mV/MIP), is amplified by a second stage shaper amplifier (gain of 20) using the same circuit configuration and biased at 100\(\mu\)A. This amplifier shapes the signal with a peaking time of 75ns or 50ns with a pulse height of 70 mV/MIP. The peaking time can be adjusted by tuning the MOS feedback resistor of the second stage shaper. Extrapolated series noise after deconvolution indicates a noise slope of 78e/pF for a pulse peaking time of 25ns. This preamplifier exhibits the lowest parallel noise of all the solutions.

**Table 2 Status of the "analogue front end"**

\begin{tabular}{|l|l|l|} \hline
**Key points** & **1.ADAM /APC\_front end** & **2. FELIX/APV\_front end** \\ \hline
**Technology** & CMOS 1.5 \(\upmu\)m & CMOS 1.2 \(\upmu\)m \\ \hline
**Input** & Fast current mode amplifier & Charge sensitive, folded cascode \\
**preamplifier** & NICON, charge integration no & OTA configuration \\  & feedback & feedback,Cf=1pF, Rf=1M\(\Omega\) \\ \hline
**Signal** & Impulse response of & RC-CR pre-processing +time \\
**processing** & NICON+Time variant filter & variant filter \\ \hline
**Filtering** & Correlated double sampling & Sampling filter using 3 or 4 \\
**technique** & acting as a sampling & weighted samples. 2 types \\  & differentiator. & • 25ns,0,+25ns, tp =50ns \\  & 2 samples : 0ns, +25ns & • 25ns,0,+25ns,+75ns, tp =50ns \\ \hline
**Local memory** & Analogue memory cell: 2, (1) & Analogue memory cell: 1 capacitor \\  & capacitors of 0.25pF 112 cells & of 0.4pF 112 cells/channel cell size: \\  & =80+32/channel & 50\(\upmu\)mx40\(\upmu\)m \\  & cell size: 100\(\upmu\)m x 40\(\upmu\)m & \\  & future : 50(60)\(\upmu\)m x 40\(\upmu\)m & \\ \hline
**Readout chip** & • Analogue mux & 3 architecture styles \\
**architecture** & • Sparse data scan & • 1) Similar to ADAM \\  & • 6 bits,4 ranges 10 Mhz ADC & • 2) same with ADC off chip \\  & • & Off chip:ROC interface+ & • 3) analogue transmission, no \\  & digital optical link 80 Mbs-1 & local ADC \\ \hline
**Present status** & • DHARP(32ch112cell) tested & • Separate components tested \\
**of the** & MIETEC 1.5\(\upmu\)m soft & • \(\bullet\) & APV3 (32ch112cell)tested \\
**prototype** & • APC3 (32 ch-112cell) tested; & • \(\bullet\) & FELIX (32ch112cell)tested \\
**chips and** & HARRIS 1.2\(\upmu\)m rad hard & AMS 1.2\(\upmu\)m, soft \\
**components** & Separate componant tested; & • \(\bullet\) & APV5 (128 ch)chip submitted \\  & ADAM chip submitted & HARRIS 1.2\(\upmu\)m rad hard \\ \hline
**Radiation hard** & Hardening of ADAM in & APV3 and APV5 HARRIS CMOS \\
**final prototype** & discussion APC3 HARRIS & \\  & CMOS & \\ \hline
**Time scale** & End of 1995 & End of 1995 \\
**final prototype** & & \\ \hline \end{tabular}

Potential drawbacks of this preamplifier are:

\(\bullet\) The low supply voltage of 2 Volt and the relatively large bias current require a precise supply voltage on chip. This technical problem can be overcome with extra control circuitry, though threshold voltage variation effects caused by ionising radiation have to be mastered.

\(\bullet\) The simple pulse shaping used can make the signal pulse shape sensitive to variation of process parameters, radiation damage and the value of the detector capacitance. This makes difficult the construction of precise RC-CR pulse shaping.

\(\bullet\) The pulse shaping used can make the signal pulse shape sensitive to variation of process parameters, radiation damage and the value of the detector capacitance. This makes difficult the construction of precise RC-CR pulse shaping.

#### 4.2.3 project 3

Three versions of bipolar front end amplifier/discriminators developed for SDC and NA50 have been identified. A fourth version, labelled VD94 in table 3 also exists. Here we do not compare these different versions but rather try to clarify the technical characteristics of the bipolar front end amplifier in general. All versions are based on the transimpedance preamplifier configuration using a feedback pair of npn transistors. The

\begin{table}
\begin{tabular}{|l|l|l|} \hline
**Key points** & **3. Binary-bipolar front end** & **4. FASTPLEX Front end** \\ \hline
**Technology** & Bipolar +CMOS & CMOS \\ \hline
**Input** & \(\bullet\) & Bipolar current sensitive & Fast current mode NICON \\
**preamplifier** & \(\bullet\) & Series shunt feedback & (or Charge sensitive \\  & \(\bullet\) & feedback, Cf=0.35pF, Rf=100kQ & preamp) \\ \hline
**Filtering** & Time invariant filter pulse shaper & Time variant filter Sampling \\
**technique** & & & differentiator \\ \hline
**Signal** & \(\bullet\) & continuous time, pulse shaping RC- & \(\bullet\) Correlated double \\
**processing** & \(\mathrm{CR^{B}}\), n=3 & \(\bullet\) & Sampling every 25ns \\  & \(\bullet\) & Peaking time 25ns to 75ns & \(\bullet\) Integrating time 50ns \\  & \(\bullet\) & continuous discriminator & \\ \hline
**Local** & 1) digital delay=4 us of the discriminator & Clock driven \\
**memory** & signal & : digital delay of the \\  & 2) Digital memorisation of the time stamp & discriminator signal \\  & (8 time address) & \\ \hline
**Readout** & Binary digital readout 1)Clock driven: & Clock driven synchronous \\
**architecture** & synchronous & \\  & 2) Data driven asynchronous & \\ \hline
**Present** & **Bipolar amplifier/discriminator chip** & Only components \\
**status of the** & 1) LBL-SDC :64ch-preamp-shaper-discri & fabricated and tested \\
**prototype** & bipolar chip CBIC-U2 AT\&T - tested & \(\bullet\) \\
**chips and** & 2)NA50 64ch-preamp-shaper-discri & NICON tested \\
**components** & bipolar chip tektronik - tested & \(\bullet\) \\  & 3)UCS-SDC under test 64ch-preamp- & tested \\  & shaper-discri bipolar chip tektronik & \(\bullet\) \\  & **CMOS readout chip** & \(\bullet\) \\  & 1)Data driven-RAL-OXFORD, HARRIS & tested \\  & tested & \(\bullet\) \\  & 2)Clock driven-UCS,Honeywell: to be & phase \\  & tested & \\ \hline
**Time scale** & not required & Mid 1995 \\
**soft proto** & & \\ \hline
**Time scale** & existing & End 1995 \\
**rad hard** & & \\
**prototype** & & \\ \hline \end{tabular}
\end{table}
Table 2: Status of the binary front end approachesfeedback network consists of a resistor of about 100KQ in parallel with an integrating capacitor of 0.1 to 0.3pF which performs the frequency compensation. The bias current is set to 100-140\(\upmu\)A in order to achieve an equivalent input noise voltage of about 1.6nV/NHz. This preamp is followed by two amplifier stages to obtain a gain of about 300 or 400 mV/MIP. Present versions have this very large gain because they are adaptcd to the binary architecture (precise signal discrimination; linearity unimportant), but adaptation for compatibility with analogue and digital architectures are possible. The basic advantages of the bipolar front end in comparison to MOS are the lower series noise characteristic (noise coefficient 1/2, MOS 1 or more) at a given bias current and the noise-power law which is going as the second power for bipolar whereas it is the fourth power for MOS (in strong inversion). This makes bipolar design much more attractive for large detector capacitance. The measured noise slope is 56 to 63 e/pF for a pulse peaking time of 20 ns, and 39 e/pF for a peaking time of 50ns. The noise at Cext=0pf is not worse in comparison with preamp project 1 and 2, because the additional parallel shot noise due to the contribution of the base current is compensated by the smaller input capacitance. In addition bipolar devices do not suffer from 1/f noise, which can be a critical issue for MOS.

The weak point of bipolar front ends is the degradation of the current gain after radiation damage. The impact of this effect is not only on the parallel noise of the input npn bipolar transistor but also on the bipolar transistors used in the following stages which are biased at low current. This adverse effect, which is technology dependent, has to be carefully understood, particularly for high radiation doses.

#### 4.2.4 Project 4

The FASTPLEX development is dedicated to the readout of MSGC which is supposed to have a charge collection time of 50ns. As a result the FASTPLEX group has chosen to use a signal processing technique which enables to retrieve the maximum MSGC signal in two BCs (50ns) in order to improve the signal-to-noise ratio (but at the cost of an increase of the channel occupancy). This implies the use of a fast preamplifier and the choice in the present development is NICON. However another fast amplifier, such as a bipolar front end, would be also compatible with this readout philosophy assuming that the pulse shape of the preamp has a sufficient long tail ( few 100ns time constant) to perform signal integration during 50 ns with a good efficiency. There is also some attempt to use components of project 2 for the MSGC readout.(Perugia meeting). A specific requirement of MSGCs, which is not necessary for silicon, is a good input protection of the preamplifier against gas micro-discharges which can severely damaged the input device. This has to be taken seriously because it is not a trivial problem, especially when low noise performance is also required.

#### 4.2.5 Pros and cons

Noise, detector capacitance, leakage current, speed, power consumption, radiation hardness and die area are amongst the relevant parameters in an evaluation of the relative benefit of each preamplifier. For detector capacitance smaller than 10pF, noise performance of the 3 solutions are almost comparable (to within 20 %) with the best figure for preamplifier 2 at low detector leakage current because its low parallel noise is beneficial. Preamplifier 1 has the advantage of a low power and high speed characteristic.

It is also fully compatible with a DC connection to the silicon strip detector. For larger detector capacitances (longer strip and/or wider pitch), the series noise voltage of the input transistor is the dominant contribution to the noise and therefore a bipolar front end is the best choice. The stability of the series noise of bipolar devices after radiation damage seems to be better than MOS transistors which suffer from surface mobility degradation and a 1/f noise increase. On other hand, base current, surface recombination, Rob' (generally not significant), and junction leakage current of bipolar devices increase with radiation. The net impact is an increase of parallel noise, however this can be acceptable if the current gain remains above 50.

An obvious risk to using bipolar technology is that there are no radiation hard process qualified by the manufacturer and therefore qualification is the full responsibility of the user. There is an emerging rad hard BiCMOS technology (DMILL) which could be promising if its industrialisation schedule is compatible with the ATLAS time scale.

In conclusion, the choice of preamplifier and technology depends on the detector geometry. At low detector capacitance, CMOS preamplifiers have the advantage of being technology compatible with the rest of the read-out chain with a competitive noise and power consumption. For large detector capacitance (>10 pF), a bipolar preamplifier is clearly the best choice.

4.3 Signal processing technique/shaping

Pulse shaping employed in the different ATLAS tracker projects has 2 main goals

\(\bullet\) To enable unambiguous identification of the bunch crossing of the event.This implies discrimination in less than 25 ns of the signal belonging to the BC and rejection of parasitic hits in neighbouring BCs.

\(\bullet\) To maximise the signal to noise ratio.

The optimisation of these two requirements leads to an optimal weighting function of triangular shape, peaking at 25ns. This pulse shape corresponds to optimisation for a parallel noise resistance of 50 k\(\Omega\). (A parallel noise resistance of 50 k\(\Omega\) is equivalent to the shot noise of a detector leakage current of about 1\(\mu\)A). The theoretical corner noise time constant, tc, is defined by the relation tc2= Rp.Rs.(Ca +Cdet)2. For Rs=300 \(\Omega\),Ca +Cdet=20 pF and Rs=300\(\Omega\) (The noise resistance), tp=25ns for Rp=50k\(\Omega\). This shows that the noise optimisation can be better for low detector leakage current with a slower filter time constant. For example, at low luminosity LHC operation, it is beneficial (as proposed in the framework of the project 2), to measure the peak amplitude at 75ns which enables a substantial improvement of the signal to noise ratio.

The optimal 25 ns-triangular weighting function is actually not completely ideal if timing uncertainties are expected. A flat top of few ns width would make the amplitude measurement of the readout system more robust against jitter at the cost of a small increase in parallel noise.

#### 4.3.1 Correlated Double Sampling (CDS)

CDS is the filtering technique used in the ADAM readout. The weighting function obtained with a NICON settling time of about 20 ns and a CDS filter has a triangular shape with a flat top of 5ns. This ideal shape is slightly degraded by the presence of the pulse decay which adds a negative lobe. The amplitude of the two samples are stored in a dual memory cell which consists of 2 capacitors of 0.2pF and 4 MOS switches. The CDS differentiation is obtained during the readout operation. The two samples are subtracted by the readout amplifier without any other processing operation. The efficiency of CDS depends on the matching precision of the differential read buses.

One potential advantage of this technique is good common mode rejection of the substrate noise, which is one of the concerns with an analogue memory since the digital switching is a source of common mode noise. In principle, the same scheme can be applied with only one capacitor per memory cell.

\begin{table}
\begin{tabular}{|l|l|l|l|} \hline
**Key points** & **NICON** & **CSA, folded** & **Bipolar preamp** \\  & & **cascode** & \\ \hline
**Input device** & n-channel MOS & p-channel MOS & npn bipolar \\ \hline
**Supply voltage** & 5 V & +2V, -2V & 3.5V \\ \hline
**Supply current** & 60-100\(\upmu\)A+20\(\upmu\)A & 600\(\upmu\)A, 150\(\upmu\)A & 100-140\(\upmu\)A+50\(\upmu\)A \\ \hline
**Power** & 400-600\(\upmu\)W & 840\(\upmu\)W - 1.2mW & 500\(\upmu\)W - 1.2mW \\ \hline
**Electronic noise** & 800e +80e/pF & 386e +34 e/pF & \(\bullet\) NA50,Tp=25ns 476 \\  & Tp= 20ns & Tp=75ns & e +63 e/pF \\  & (measured with & 706e+62e/pF after & \(\bullet\) SDC, Tp=50ns \\  & an external & deconvolution & 785+38e/pF \\  & shaping filter) & & \(\bullet\) UCSC, Tp=25ns \\  & & & 500e +56e/pF \\  & & ** Preliminary\(\rightarrow\) & \(\bullet\) VD94**, Tp=23ns \\  & & & 391+27e/pF \\ \hline
**Rise time,** & 12ns & 35ns & 10ns \\ C=10pF & & & \\ \hline
**Linear dynamic** & +300 000e to - &? & + 16000 e to \\ range & 200 000e & & -16000e \\  & & & (binary designs, range \\  & & & can be increased) \\ \hline
**input capacitance** & 3 pF & 4pF & \(<\)1pF \\ \hline
**Pulse occupancy** & 300ns & 500ns & 50ns \\ \hline
**VS compliance** & High & Low & Medium \\ \hline
**2nd stage noise** & High & Low & Medium \\ rejection & & & \\ \hline
**Scaling with det** & Cgs=1/3Cdet & Cgs=1/3Cdet & Cjb=cte\(<\)1pF \\
**capacitance** & ENCs\(\sim\)power3 & ENCs\(\sim\)power4 & ENCs\(\sim\)power2 \\ \hline \end{tabular}
\end{table}
Table 3: **preamplifier characteristics**

#### 4.3.2 Signal- deconvolution with Correlated Triple Sampling

Correlated triple sampling is a more complex sampled data filter than CDS. Firstly the CSA preamplifier signal is pre-processed by a CR-RC filter of 50ns (APV3/5) and 75 ns (FELIX) time constant (here equal to peaking time) and sampled every 25ns by the analogue memory. After a L1 trigger, the system reads three successive samples -25ns, 0ns, +25ns plus optionally a 75ns forth sample. The fourth (optional) sample is anticipated to be used in the case of low detector leakage to give the signal pulse-height and is not involved in the deconvolution. Following the read operation, the analogue pipeline signal processor, APSP, weights and sums the samples. The weights, 1.54, -2.2, 0.7 are determined for optimal deconvolution of the RC-CR pulse shape. This technique has the main advantage that it does not require a very fast preamplifier; a CSA with 30 or 40 ns rise time is compatible with this filtering scheme.

The technique has the disadvantage that it samples the signal on its leading edge (+25ns), where the signal amplitude is particularly sensitive to pulse shape variation and timing uncertainty (which is overcome for low leakage current by using the fourth sample). The ideal resulting triangular weighting function can be degraded by the presence of secondary poles in the shaper. In addition, second stage noise can be an issue because of the low gain in the CSA. This has to be well understood.

#### 4.3.3 Fast shaping with bipolar front end

The signal processing used with bipolar front ends consists of a RC-CR[3] amplifier shaper followed by a discriminator. All the electronic chain is kept differential for noise rejection reasons. The filtering technique is continuous and therefore time invariant. Pulse shaping is achieved by RC active filters distributed in the different stages of the channel. The overall effect is to shape the signal pulse into a quasi-gaussian form prior to signal discrimination or sampling.

In the case of binary systems, the fundamental difference between this method and those described previously is that the sampling time for discrimination is asynchronous and determined by the pulse shape, propagation time of the discriminator and overdrive signal (above threshold). To optimise precision and response time (time walk) of the discriminator, all the binary systems considered use a very large gain, around 150mV/fC. This minimises the time walk and the effect of the offset spread of the discriminator. These are what determine the time stamping precision.

One basic advantage of the continuous time filter is the absence of clock lines in the analogue part of the circuitry, thus minimising digital to analogue interference. In the binary case the discriminator output is a clean low level current mode logic level, with a good decoupling from the digital chip, which helps preserve this advantage. The detector modules have to be carefully designed to avoid digital interference. Bipolar pulse shapers also have the advantage of having much larger gain-bandwidth product at a given power than CMOS amplifiers.

#### 4.3.4 Pros and Cons

The choice of the filtering technique, continuous time or sampled data, depends on the technology employed. If bipolar technology is chosen for the analogue front end, it isbetter to use fast continuous time filtering because of its compatibility with bipolar processes. Conversely, in the case of CMOS process, sampled data filters are much more appropriate. This means that the choice of the filtering technique is strongly linked to the choice of the preamplifier.

Noise optimisation methods used in the semiconductor readout projects give very similar weighting functions, triangular(analogue) or gaussian(binary) peaking at 25 ns. Therefore, the resulting theoretical noise for identical preamplifier output noise spectra is very similar. At least in principle, it is therefore more in the details of the robustness of the filter against common mode noise, process and timing variations that one can distinguish pros and cons. In project 2, if the fourth measurement of the pulse is at the peak amplitude at 75 ns and used for the amplitude measurement, then for low detector leakage current (less than 0.5\(\upmu\)A), the signal to noise ratio can be attractive because the slower pulse shaping significantly reduces the series noise. In this case, the time instability of the deconvolution is reflected in terms of detection efficiency and not in terms of signal to noise ratio.

For robustness against timing uncertainty, the best is the fast continuous time shaper because the filtering precision is not dependent on time synchronisation. Correlated double sampling has good timing characteristics if there is a sufficient flat top to accept jitter (which means settling time of the analogue chain must be slightly faster than 25 ns). Triple correlated deconvolution is less robust to jitter by the nature of its algorithm and also because signal sampling is not done at the maximum of the signal amplitude as previously discussed.

## 5 Other Issues

There are two major aspects of front-end design that have received less attention. In order to complete a design all the secondary functionality must be designed into the system. Only the binary solution has a design with a large fraction of this already incorporated and even in that case several aspects require attention. The other major set of issues are less design oriented and revolve around ensuring the long term survivability of systems.

5.1 Back-ends

A partial list of issues is:

Control signal system and protocols

Inter-chip communication signal levels

Bus structures

Data transmission protocol and data structure

Error tolerance scheme in data transmission

Information in header: L1 count, BC count,..

Overflow communication

Bypass scheme (redundancy)

X-ray & Cosmic ray data taking modes

Inter-chip clock synchronisation modes

Talk-to-me (and other) diagnostic modes

Bad channel masking

Register read-back

Calibration pulse generation

Reset modes

Power on status

Monitor data, temperature, humidity, pressure, voltage,...

Bias control, DACs for thresholds etc..

Boundary scan

5.2 Lifetimes

Early estimates seem to indicate that the life-time of the CMOS chips may not be infinite on the time scales of the ATLAS experiment, even before irradiation. To our knowledge there is no data on the lifetime of chips after irradiation in an environment such as that planned for the front-end electronics in the ATLAS inner detector. A test of the survivability of the chips seems essential.

5.3 Processes

There are several radiation hard processes under consideration. Some mechanism for selecting a process or processes is required. A strategy must be developed regarding the danger of single sourcing.

5.4 Quality control

QC impacts even very early design. For example if the only way to test chips economically is to design them with some form of boundary scan, this must be fed into thespecification for design now. Similarly there may be testing issues for the hybrid construction which demand features in the electronics; these should be identified.

5.5 Environment

It is planned to use the front-end chips unpackaged. The long term effects of water vapour, and various gases that they might contact should be studied. Apocryphal tales are not encouraging. It may be that either some form of environmental seal over the chips must be planned on, or that the electronics will place strict requirements on the gas handling systems.

5.6 Cost Evaluation

Cost evaluation is critical to architecture and vendor selection. A scheme must be agreed to allow proper comparison. For example, tested chips may be purchased for digital designs, but for analogue chips it is more common to purchase wafers and take responsibility for yield. A strategy for understanding yield as a function of chip size is probably required; certainly an agreed mechanism for costing is needed.

**6. Conclusions**

6.1 Si/GaAs/MSGCs

The front-end amplifier must be optimised for the detector capacitance and anticipated leakage currents. Si and GaAs can be almost identical, but in the case of the MSGCs the different pulse shape characteristics require a filter which is not naturally identical to that used for silicon. It is only at the back-end that the systems can be genuinely the same.

The difference between MSGCs and Si/GaAs may extend to architecture selection. Partly the problem is that the requirements of the system are not yet finalised, nor in some cases completely understood. For example, it is suggested by some that gain non-uniformity's after irradiation will mandate that there be a separate threshold for each MSGC channel in a binary or digital system. This is a major complication which might change the balance in any evaluation of the choice between analogue, digital and binary systems.

However, the data transmission protocols, clock and control systems and much of the back-end functionality can be identical, and in our view should be. (The meaning of the data is clearly different, but formats and protocols can be the same).

6.2 CMOS vs bipolar amplifiers

An important motivation for developing CMOS amplifiers was the desire to have a single monolithic chip which had the entire electronics chain in it. One result of all the work that has been done is that the chip size is known to be large and that, because yield drops with chip size, it is likely that two chips will be required in any system. This makes the choice of a bipolar amplifier less unattractive since the interconnection penalty may need to be paid in any case. It is widely accepted, certainly for larger detector capacitances, that bipolar amplifiers have the best noise performance at a given power and speed. With a bipolar amplifier there is less motivation to consider the triple correlated sampling with slow shaping. Our conclusion is that, noting the substantial advantages in terms of noise and power, ATLAS groups would be well advised to re-evaluate bipolar amplifiers in the framework of both pulse-height and binary systems.

6.3 Pipelines

\(\bullet\) At 40MHz and for a L-1 latency of 2\(\upmu\)s a clock-driven binary pipeline seems superior to a data driven one. (Comparable power consumption and chip area, but more robust against high occupancies).

\(\bullet\) Strenuous attempts should be made to use only one capacitor per step in analogue pipelines since the size of the die is large and yield may be a concern.

6.4 Architecture

The merits and drawbacks of the architectures have been listed in section 3.4. The decision on architecture requires a careful evaluation of the relative costs. Assuming all the technical issues can be resolved there will remain a spectrum of opinion on the value of the advantages of the various systems. Cost may well be the deciding factor.

6.5 Cost Estimates

The ATLAS practice of simply using a flat 3SF/channel for the cost of electronics is insufficiently accurate for the purpose of developing and selecting electronics. As a guide price for the whole experiment it may be acceptable, but in particular there are substantial differences in the cost per channel for schemes supplying pulse-height information and those which do not. This has led to an over emphasis on channel count reduction as a motivation for wanting pulse-height information. Indeed if this was the only value of pulse-height (which it is not) one could probably not justify keeping it.

Crude estimates suggest that on economic grounds one is compelled to use charge division in a pulse-height system to reduce channel count, otherwise binary systems are cheaper for a given spacial resolution.

6.4 Schedule

Assuming a 2002 turn-on, the schedule for development of the front-end electronics is becoming critical. Examination of both the ATLAS mechanical construction schedule and the more detailed SDC schedule shows that at the end of 1995 one must have made a final choice of system. Also at this time all the elements required should have been built and tested, preferably in a radiation hard process. During 1996 the selected elements must be incorporated into a final chip and tested in a pre-production module. By the end of 1996 one needs to have completely finished the development and be ready to place large scale orders early in 1997. Urgency, and a well defined scheme leading to convergence must be injected into the ATLAS precision electronics effort.

6.5 Organisation of ATLAS group

In section 5 we listed the easily identified areas associated with this development that have had little concentrated effort to date. There is also a degree of overlap between the efforts of the several disparate groups. There is probably just enough manpower in total working on ATLAS front-end electronics to develop a viable system on the requisite time scale. However it seems essential that a mechanism be found to ensure that all aspects of the development are worked on, and not just parallel efforts on different approaches to the 'most difficult' aspects. We have also found that many of the engineers, in particular, are not very enthusiastic about working on systems that may not be used at all.

Our view is that a group with the formal task of working on the ATLAS front-end electronics for Si/GaAs/MSGCs should be formed. There should be a single effort on those aspects that are in common (for example, see section 5 and 6.1) and very close collaboration on those aspects which are different. In the case of parallel approaches it seems important to find a mechanism to ensure that participants do not feel they are wasting their time. If possible, and provided it does not affect the final system performance or cost, we favour partitioning the work in such a way that at least some aspect of most people's work is likely to be incorporated in the final system. (Even if this costs something in terms of efficiency). Overlap between this effort and the pixel systems should also be explored. In the case of data formats and clock/control there may even be a case for a degree of uniformity with the straw systems.

Some of the less developed areas are not the most exciting to work on. It seems clear that the group must have a co-ordinator with the responsibility for ensuring that volunteers are found to work on all the relevant aspects of the systems. Without such an individual there will be a tendency for some areas to continue to be'someone else's worry', or more likely something that 'can be done later'. We feel that the amount of work required in the 'less difficult' areas may be underestimated, which may have a serious impact on the overall ATLAS schedule if not corrected.

It is vital that time scales be recognised and that a schedule with clear milestones be agreed. The gross milestones in the previous section are insufficient; many shorter term goals need to be defined so that progress can be monitored.
# Status of the Front End Electronics for the MDT System

Eric Hazen, Jim Shank

_Boston University_

Tom Giordano, John Huth, John Oliver

_Harvard University_

March 12, 1996

###### Abstract

Considerable progress has been made towards the goal of an integrated front-end readout system for ATLAS monitored drift tubes (MDTs). We have studied MDT cosmic ray pulse shapes from prototype tubes and from GARFIELD simulations. We have fabricated two prototype CMOS IC's, a charge-sensitive preamplifier and timing discriminator. Test results for the CMOS preamp show a sensitivity of 4.5mV/fC with a peaking time of 11ns. The discriminator has channel-to-channel offsets of less than 3mV, and time walk of 500ps in the planned operating region. Both meet the performance requirements of the ATLAS system.

_For current information and an HTML version of this document, see_

[http://gauss.bu.edu/bmc/asd/asd.html](http://gauss.bu.edu/bmc/asd/asd.html)

## 1 Introduction

In this note, we describe the status and specifications of the front end electronics for the MDT system. The single tube resolution requirement of an 80 \(\mu\)m RMS puts severe constraints on all aspects of the MDT system. The front end electronics is no exception. For typical maximum drift times of order 500 ns, corresponding to 1.5 cm of drift, the electronics contribution to the resolution must be less than, or of order 30 \(\mu\)m. In terms of time, this corresponds to a leading edge resolution of less than 1 ns RMS.

Beyond this requirement on the resolution, there are a number of additional pieces of information that may be extracted from the MDT front end electronics. These include the arrival time of the last electron, the ability to distinguish two nearby tracks, and a crude charge measurement. The last requirement may help reduce the backgrounds associated with soft neutrons and/or photons. Before describing these issues, it is worth focusing on the primary goal of the leading edge measurement.

The requirement of finding the last electron does have some implications for the noise expected at the preamp input. In particular, one seeks to eliminate reflections at the far end of the tube that would interfere with the last electron timing measurement. This implies that we need a termination resistor to ground matching the MDT characteristic impedance of 370 \(\Omega\). The noise contribution of the termination resistor sets an effective floor to the noise in the tube (equivalent to \(\approx 4000\)\(e^{-}\) at the preamp input. See reference [1] for details of the noise calculation. Figure 1 shows the basic configuration of the tube, preamp and termination resistor.

Since one of the critical specifications of the system is the leading edge resolution, it is worth examining the some of the factors that enter. First, the average primary ionization expected is roughly 1000 \(e^{-}\). The gas gain is \(2\times 10^{4}\), giving a total charge collected on the wire of \(\approx 2\times 10^{7}\) electrons. This is not the relevant charge to be used in evaluating the signal to noise ratio, however. Due to the arrival time distribution of the electrons and the charge development on the wire from positive ion motion, most of the charge is not, in fact, collected on the leading edge. One must evaluate the charge collected in the integration time of the preamp. The net charge seen due to electron arrival times alone, within the relevant integration time of the preamp, \(\tau_{p}\) (10-15 ns), is roughly 18 % of the total. This factor implicitly assumes that the response of the

Figure 1: MDT tube, preamp and termination resistor.

wire to each arriving electron is a delta function, which it is not. In addition to this, each arriving electron will generate only \(\approx\) 8 % of its charge in the preamp integration time due to the positive ion motion. With the degradation of these two factors taken into account, the net charge seen by the preamp within \(\tau_{p}\) is roughly \(3\times 10^{5}\)\(e^{-}\) (50 fC). These factors are listed in table 1. The relevant noise contribution in \(\tau_{p}\) is 5000 \(e^{-}\), giving a signal to noise ratio of roughly 60:1 for the current operating parameters of the MDT.

Now, studies [2] have indicated that the optimum threshold for resolution in the MDT system should be set at the equivalent of 20 primary electrons. Note that this threshold is _above_ the threshold that would be dictated by some number of standard deviations above the noise pedestal, and hence represents a more relaxed criterion. In principle, one could lower this threshold substantially, but this would presumably degrade the resolution due to the loss in primary ionization statistics.

Because we are trying to optimize the resolution of the system, we would like to set the discriminator threshold in a region where the time-walk is minimal. Preliminary studies (see below) indicate that a preamp followed by two simple stages of amplification can produce a net gain of roughly 30 mV/fC. For the discriminator, we anticipate a further stage of amplification after the shaper. This will put the discriminator threshold equivalent to the 20\({}^{th}\) electron at a level where the time walk should be negligible.

\begin{table}
\begin{tabular}{|l|l|} \hline Ave. Primary ionization in track & 1000 electron s \\ \hline Gas Gain & 2 \(\times\) 10\({}^{6}\) \\ \hline Signal Strength & 8 \% \\ relative to \(\delta\) fcn. calibration & \\ due to positive ion drift, int. time & \\ \hline Signal remaining, due to & 18 \% \\ late \(e^{-}\) arrival & \\ \hline Typical Charge Collected & \(\approx\) 3 \(\times\) 10\({}^{5}\) \\ \(0.08\times 0.18\times 1000\times 2\)\(\times\) 10\({}^{4}\) & \(\approx\) 50 fC \\ \hline Noise with terminated tube & \(\approx\) 5000 \(e^{-}\) \\ \hline SNR (Ave. pulseheight/noise) & 60 \\ \hline Collected charge due to 1 prim. \(e^{-}\) & 1600 \(e^{-}\) \\ \(0.08\times\)\(2\times 10^{4}\) & 0.25 fC \\ \hline Pulseheight at discriminator (MIP) & 1.5 V swing (differential) \\ \hline Preamp/shaper gain & 30 mV/fC \\ \hline Gain after 1st stage of discriminator & 150 mV/fC \\ \hline V\({}_{thresh}\) for 20 \(e^{-}\) & 850 mV \\ \hline RMS noise at discriminator & 125 mV \\ \hline \end{tabular}
\end{table}
Table 1: MDT Front-End Design ParametersProposed MDT Readout

### Leading and Trailing Edge Timing

As mentioned above, the primary job of the front-end electronics is to measure the timing of the leading edge of pulses to 1ns. We are designing the front-end circuit to allow us to measure more than just the leading edge timing, namely the time of the trailing edge of the pulse. The trailing edge of a pulse from a drift tube is caused by the last arriving clusters of electrons which drift from the outer wall of the tube together with the tail caused by positive ions from earlier clusters. The last clusters arrive at the anode at a fixed time (the maximum drift time) with respect to the interaction time regardless of the impact parameter of the track. This is illustrated in Figure 2 which also shows a real cosmic ray waveform recorded on a digital oscilloscope. The leading edge of the pulse can occur any time during the maximum drift time, depending on the track impact parameter. The maximum drift time for the ATLAS muon system is approximately 500 ns. Thus, from the leading edge timing alone, the track could come from any of 20 LHC bunch crossings (25 ns each). This complicates the pattern recognition problem of reconstructing which hits go with a given track and from which bunch crossing the track originated. If the time of arrival of the last cluster can be determined to within any time smaller than the maximum drift time, it can be used to assign the track to a smaller set of bunch crossings, thus improving the pattern recognition problem. Ideally one would like to determine this time to within the 25 ns LHC bunch crossing time.

Studies reported below show that this trailing edge timing resolution is obtainable.

The trailing and the leading edge timing measurement can be made from the same Amplifier/Shaper/Discriminator (ASD) circuit. The shaping time can be tuned to optimize the trailing edge resolution and does not affect the leading edge resolution.

### Multi-track and Background Rejection

We intend to add further capability to the front-end chip: two extra analog signal paths for each channel to allow multi-track rejection and a pulse height measurement. The envisaged block diagram of the ASD is shown in Figure 3.

The three separate circuits are required because different shaping times are required for each measurement. The two track separation channel requires strong tail cancelation. The feasibility of this measurement is still under study. Early results are not very promising: A single muon track pulse put through a simulated strong tail cancelation filter crosses a threshold multiple times, thus leading to false double tracks. Details of two track separation study are presented below.

The last of the three circuit paths is for a pulse height measurement. The motivation for this channel is that we would like to distinguish real muon tracks from neutron and gamma background hits. A program to study the feasibility and resolution requirements of this measurement are under way and described below.

The three measurement capability comes at little additional cost as far as the front-end ASD development/production is concerned. There is additional cost to put these channels into a TDC and read them out. The physics motivation and readout cost Figure 3: Readout signal paths. Three different signal paths allow a measurement of leading and trailing edge timing, two-track separation and pulse height.

Figure 2: Trailing edge timing. Illustrating the region along a track which contributes to the leading edge of a signal and the trailing edge. The waveform shown is from cosmic ray muon recorded on a digital oscilloscope.

implication of this scheme are still under study.

## 3 Pulse Shape Studies

### Trailing Edge Resolution

Measurements are underway using single drift tubes and cosmic rays at Boston University and Harvard. Results on trailing edge timing resolution have been reported[3].

The electronics used for these tests are the L3 preamp[4] with no shaping amplifier. The preamp outputs were connected directly to a digital oscilloscope.

Some typical waveforms are shown in Figure 4 for HV = 4100 Volts and Figure 5 for 4200 Volts. Note the leading edges of the waveforms occur over an approximately 400 ns interval, corresponding to the total drift time, but the trailing edges are all at about the same time. Figure 5 also shows a streamer mode pulse.

Figure 6 shows the trailing edge timing resolution presented at the LERB, Lisbon meeting. The rms of the distribution is about 20 ns or comparable to the LHC bunch crossing. This is good enough to assign the pulse to an LHC bunch crossing (or limit it to a few with a higher confidence level).

### Neutron and Photon Background Rejection

We are in the final preparation stages of tests with neutron beams. The first stage will be an exposure at the MIT RFQ facility. This facility produces neutrons via a deuteron beam impinging on a thick beryllium target. Energy spectra from this technique are published[5] and are typically 1-2 MeV (Average \(\approx\) 2 MeV with strong peak at 1.6 MeV). There is typically one gamma for every neutron using this facility. The gamma spectrum has strong lines at 718, 2151, and 3580 keV. Our goal in this first stage is to measure the drift tube sensitivity to both the neutrons and gammas as well as to get waveform samples of each.

We also have acquired a 2.5 Curie Pu-Be source for laboratory studies. This will be used to further study pulse shapes of neutron and gamma interaction events to see if there is a way to distinguish these background hits from real minimum ionizing particle interactions. This source could also be used for neutron damage studies of our CMOS ASD chip.

The second stage of this study will be an exposure at the University of Massachusetts, Lowell neutron source. This source uses a 5 MeV Van-de-Graaff accelerator to collide protons on a Lithium target. Key parameters that make this facility attractive are:

* Very few gammas. Typically one 422 keV gamma/20 fast N.
* Fairly high fluence (\(6\times 10^{10}\) N/s). Point like source (\(1/r^{2}\) fluence).
* Capable of pulsed operation with 25ns burst width.
* Slow (\(<10\) keV) : fast N ratio of\(<0.1\)%Figure 4: Waveforms recorded on the digital scope with high voltage = 4100 Volts

Figure 5: Waveforms recorded on the digital scope with high voltage = 4200 Volts

Figure 6: Trailing edge timing resolution. The pole-zero corrected waveforms from cosmic rays were used with a threshold of 3 mV

This will allow us to study pulses resulting from neutron interactions separate from the gammas normally associated with neutron sources.

### Double-Track Rejection

It is well known that two-track separation is inherently poor in round drift tubes owing to the large drift distances in the tail of the pulse. This situation for MDTs is significantly improved due to their high pressure operation at three atmospheres which provides denser and smoother ionization as compared with atmospheric pressure tubes. The general shaping technique for two track separation is to use two or three pole/zero shaping sections with significantly shorter shaping time than is used for positive ion tail cancelation. The resulting "strong tail cancelation" has the effect of locating the leading edge of each pulse and therefore identifying overlapping pulses. We must, however, be cautious since this technique may still be sensitive to fakes due to late arriving clusters. Typical results of strong tail cancelation applied to unshaped pulses are shown in Figure 7 where three pole/zero shaper sections with zero and pole time constants of \(T_{z}/T_{p}=1000\) ns/100 ns, 200 ns/40 ns, 200 ns/40 ns are used.

The two relevant questions with regard to such shaping are (a) the rate of fake or spurious tracks due to late arriving clusters in single track events, and (b) the efficiency of detecting true two track events as a function of track separation and impact parameter of the track closest to the wire. Figure 9 shows the fake rate vs impact parameter for several values of threshold in primary electrons. Figure 8 is a plot of a parameterization of the efficiency for identifying genuine two track events. Thus current simulations show that two-track events can be identified with high efficiency and reasonably low fake rate,

Figure 7: The typical response of an unshaped pulse to strong tail cancellation.

although fairly high thresholds must be used.

One of the issues associated with the above studies is the question of whether the GARFIELD simulations were properly giving the high ionization tail associated with Landau fluctuations. This is potentially serious, and will require more work [6, 2].

## 4 Current Development Status

### Pre-Amp Test Chip

The preamp section consists of two individual preamplifiers whose outputs are connected to two cascaded differential stages. This topology [7] has been used in large scale drift tube systems, in sures a high common mode pickup rejection, and is highly stable with respect to stray capacitance induced oscillations. The latter can be particularly problematic in single ended designs.

The preamplifier section, implemented in 1.2 micron n-well CMOS, is designed to meet the noise and risetime specifications previously described [1, 8]. It is a basic cascode of n-channel transistors utilizing resistive and capacitive feedback as shown in Figure 10. The passive resistors and capacitors are fabricated as polysilicon and double poly structures respectively.

One of the design parameters is input impedance. This is a function of several variables, depending on frequency of interest. At low frequency it is given by

\[Z_{in}\,=\,\frac{1}{g_{m}}\frac{R_{fb}}{R_{train}}\frac{1}{\alpha} \tag{1}\]

while at high frequency we have

\[Z_{in}\,=\,\frac{1}{g_{m}}\left(1\,+\,\frac{C_{stray}}{C_{fb}}\right) \tag{2}\]

Figure 8: Probability of finding a single track as two ( double pulse probability) plotted as a function of impact parameter (\(b_{k}\)) for three different pole/zero configurations (see text).

In the above equations, \(g_{m}\) is the transconductance of the input transistor M1, \(R_{fb}\) is the feedback resistance (R1 in schematic), \(R_{drain}\) is the load resistor in the drain circuit of the cascode, and is the gain of the source follower transistor M5 and is typically \(\thickapprox 0.8\). \(C_{stray}\) is the stray capacitance at the drain node of the cascode. The crossover between the two frequency regions is determined by the feedback components and is of order 10 MHz. The input transistor size and passive component values have been chosen to give a value of 170 \(\Omega\) input impedance over the frequency response of the amplifier. This value is approximately half the characteristic impedance of the MDT and is so chosen to give adequate charge collection. Its precise value is unimportant to within a fairly large tolerance (\(\thickapprox 25\) % or more) as it affects charge collection and noise gain equally. The signal to noise ratio is thus not dependent on its value.

Following the preamplifier sections are two identical differential amplifiers, only one of which is shown in the schematic. In addition to providing gain, these differential amplifiers serve to shorten the pulse tail with the resistor and capacitor (pole/zero) which connect the sources of the gain transistors. Physical layout of the preamplifier and differential gain stages is shown if figures 4.1 and 4.1. Centroid matching has been used extensively in these layouts to minimize accumulation of offset voltages.

Measurements were made on the preamp and differential sections by active and passive probing of on-chip test pads. The results are compared with SPICE simulations and are summarized below.

* Preamp input impedance 1. Design : 170 \(\Omega\)

Figure 9: Efficiency of finding two tracks as separate as a function of separation, and impact parameter.

Figure 11: Layout of the preamplifier stage. Note that this consists of two sets interdigitated sets of transistors, representing the two polarities of the pseudo-differential scheme (see previous figure).

Figure 10: Preamplifier design for MDT ASD. The basic circuit is a cascode design. The circuit elements in the cascode circuit are labeled. Note that with a pseudo-differential input, a “mirror” of this circuit appears on the right hand side of the figure. In the middle are two further gain stages.

Figure 12: Layout of the secondary gain stage of the preamplifier.

2. Measured : 220 \(\Omega\)
* Preamp transimpedance 1. Design : 15 k\(\Omega\) 2. Measured : 13 k\(\Omega\)
* Sensitivity and peaking time (delta function response) 1. Preamp 1. Design : 0.9 mV/fC @ 4.5 ns 2. Measured : 0.62 mV/fC @ 9.4 ns 2. First differential stage 1. Design : 2.9 mV/fC @ 6.0 ns 2. Measured : 1.9 mV/fC @ 10.8 ns 3. Second differential stage 1. Design : 7.6 mV/fC @ 8.0 ns 2. Measured : 4.5 mV/fC @ 11.3 ns

A digital scope trace showing the output of the second differential amplifier due to a 100 fC input pulse into the preamp is shown in Figure 13. Overall gain is seen to be only 60 % of the design (SPICE) value while overall peaking time is some 40 % (\(\approx\) 3 ns) longer. The discrepancy is attributed to two factors. First, the value of \(K\), the transconductance parameter was \(\approx\) 50 \(\mu\)A/V\({}^{2}\) in the SPICE model. DC chip measurements, easily done on bias transistors, gave a value of 36 \(\mu\)A/V\({}^{2}\). This factor accounts for the larger than expected input impedance as well as reducing the discrepancy in overall gain. It is also believed that the values of stray and interconnect capacitance were underestimated in the SPICE model.

Since we intend to AC couple the preamplifier to the discriminator section, offset voltages in the preamp are not particularly critical. Nonetheless, they cannot be so large as to seriously unbalance the last differential stage and use up the available dynamic range. Centroid matching and interdigitating the design has resulted in acceptable offsets of \(\leq\) 20 mV at the output.

Noise measurements were, unfortunately, not able to be made on the first iteration of this chip. This was due to a layout error in which a bias line was omitted from our output pad drivers. The lack of this pad driver prevented the preamp signal from appearing on the output pad, which in turn required that all measurements be made via internal probe pads. This arrangement could not be adequately shielded and with the 10\(\times\) attenuation in the active probe, precluded a reliable noise measurement.

The next iteration of this preamp will address the shortcomings of this version. Firstly, it will be fabricated in the HP 1.2 \(\mu m\) n-well process which has a considerably higher transconductance parameter than that of the Orbit process. The input transistor will be made larger to further reduce the input impedance. Finally, an additional gain factor of \(\approx\) 6 is required to increase the overall gain to its desired value of 30 mV/fC.

This will be obtained by an incremental increase in preamp stage gain plus an easily obtainable increase of about \(2\times\) in each of the differential stages. Future iterations will include tail cancelation stages which will provide additional opportunities for gain.

### Discriminator Test Chip

The primary requirements for discriminator performance are low time jitter, low time walk (delay versus signal amplitude) and operation over the desired threshold range. In addition, the channel-to-channel variation in threshold offsets should be low compared with the typical operating threshold.

We have fabricated and tested an Orbit 1.2\(\mu\)m N-well CMOS test chip with three different discriminator designs, "small", "medium" and "large" (referring to the size of the input transistors). We briefly describe here the topology of each design and present test results to date. The medium and large designs have externally programmable hysteresis. The small design illustrates that the required performance can be achieved in a very compact layout. The small and medium designs both gave good results.

The portion of the discriminator we have fabricated so far is the \(2^{\,d}\) stage of what will ultimately be a two-stage device. We plan to add a simple differential amplifier with about x10 gain in front of the current \(2^{\,d}\) stage design.

#### 4.2.1 Circuit Design

Our basic design philosophy was to use the simplest possible circuit topology which would give the required performance. We started with a basic differential comparator and added symmetrical, differential class-AB outputs using current mirrors. We also added positive feedback to give hysteresis. Two different techniques were used, giving rise to two circuit topologies, shown in Figures 14 and 15.

Figure 13: Trace of the impulse response of the preamplifier test circuit.

In each circuit, the differential pair consists of M1/M2, with diode-connected loads M3/M4 and tail current provided by M5. The basic gain of the differential stage is

\[A_{V} = \frac{g_{m\,2}}{g_{ds2}+g_{ds4}}\] \[= \frac{2(K_{2}^{\prime}W_{2}/L_{2})^{1/2}}{I_{5}^{1/2}(\lambda_{2}+ \lambda_{4})}\]

Where \(W\) and \(L\) are the width and length of the transistor channels, \(g_{m}\) is the transconductance, and \(\lambda\) is the channel-length modulation parameter. The important thing to note is that the gain is dependent on the square root of \(W_{2}/L_{2}\) (and of course \(W_{1}/L_{1}\)), so the larger (wider) the input transistors, the more gain is achieved. For good discriminator performance, all other things being equal, one would like the largest gain. However, larger transistors mean potentially larger input offsets (threshold errors) and larger input capacitance.

In the "small" design, hysteresis is provided by voltage-shunt feedback through transistors M6/M7. The amount of hysteresis is determined by the ratio \(\beta_{6}/\beta_{3}\). As long as this ratio is greater than one (providing positive feedback) the circuit will have hysteresis. This circuit has the advantage of simple topology, but the amount of hysteresis is fixed at design time. For our test chip, a hysteresis of approximately 12mV was chosen, based on our estimate of about 25mV RMS noise at the discriminator input (see Table 1). For more details on this circuit topology, including the equations which determine the hysteresis value, see [9].

In the "medium" and "large" designs, positive feedback is provided by paralleling the input transistors M1/M2 with smaller ones (M1A/M2A) which are driven by inverters

Figure 14: “Small” Discriminator Circuit. Fractions, i.e. \(\frac{50}{1}\) are length/width ratios of transistor channels

from the final comparator outputs. This effectively forces the comparator to remain "on" once the input threshold is reached. The amount of hysteresis can be conveniently controlled by varying the current in the common source node of M1 A/M2A using the current mirror formed by M6/M6A. This gives a big advantage in flexibility at the expense of six additional transistors.

From SPICE simulation, there was no clear advantage of one topology over the other, so we elected to fabricate both on our test chip. In addition, two versions of the topology shown in Figure 15 were designed, with significantly different transistor sizes. The transistor sizes were optimimized before layout through SPICE simulation.

The discriminator subcircuits shown do not have nearly enough current capability to drive an IC output pad. Several stages of CMOS inverter of increasing transistor size were added to drive the chip outputs. The design of these drivers was completely conventional and will not be elaborated here.

#### 4.2.2 Layout

Design layout was performed using Magic[1 0], a public-domain VLSI layout program running on various Unix work stations and personal computers. A layout overview of the three discriminators is shown in Figure 17. The layouts will not be described in detail, but a couple of special considerations will be discussed.

One of the major concerns was threshold offset due to variations in the CMOS manufacturing process. Chip-to-chip variations are not a major concern to us, but channel-to-channel variations within a chip would result in annoying calibration requirements. Matching accuracy for transistors separated by 100\(\mu\)m is typically 5mV[11], and a typical discriminator design can span more than this distance (see Figure 17). We have used an "interdigitated" layout technique which results in both transistors in a differential pair sharing the same area of silicon, which should minimize any offset. An example

Figure 15: “Medium” and “Large” Discriminator Circuits

of this is shown in Figure 16, which shows a layout of a pair of \((W/L=100/1)\) transistors. Each transistor is layed out as five 40/1 "fingers" which are interleaved. This basic layout technique was used carefully throughout all of our discriminator designs, and was extended to include the load and current mirror transistors (_i.e._ pairs M3/M4, M9/M10, M8/M11...).

Various other techniques were used to maximize discriminant or performance. The two available metal layers were used for all lengthy interconnections (polysilicon makes lousy wires) and the designs were kept as compact as possible.

#### 4.2.3 SPICE Simulation

The designs were simulated using SPICE1. Level 2 models from ORBIT were used. It is interesting to note that the transconductance (\(K^{\prime}\) parameter) of the models supplied by ORBIT was roughly a factor of two higher than what was measured on the test chip.

Footnote 1: Berkeley SPICE v3f4 and P-SPICE for unix were both used. Results were cross-checked and found to be essentially identical

The first test was a DC-sweep, simply a plot of the transfer function, \(V_{OUT}\)_vs_\(V_{IN}\). The results are shown in Figure 18. The X axis shows differential input voltage, with the comparator switching point at zero. Each curve is for a different value of \(I_{HYST}\), the hysteresis control current. Because of the positive feedback in the circuit, the gain in the transition region (\(0.5V<V_{OUT}<2.0V\)) is essentially infinite, and is not represented by the drawn slope of the curve on the plot.

The second simulation was of time-walk, or propagation delay versus input signal amplitude. This is usually plotted as \(T_{PD}\)_vs_\(V_{OD}\) where \(V_{OD}\) is the signal voltage above threshold or "overdrive". A separate SPICE simulation was run at each point. A step function input was applied, with a DC level (threshold) of -60mV, and an amplitude

Figure 16: Layout of Interdigitated Stacked Differential Pair

Comparison of CMOS discriminator sizes

T (large) design

120u/1.2u diff pair, 96u/1.8u mirrors

Figure 17: Three Discriminator Layouts

Figure 18: SPICE DC Sweep Simulation of “Medium” Discriminator. Note that the reverse voltage sweep is not shown, though it was noted to be completely symmetrical, producing a hysteresis “loop” for each curve.

of 60mV+V\({}_{OD}\). A SPICE transient (time domain) analysis was run, and the delay was measured between the input step function and the output threshold (2.5V) crossing time. The simulation results are shown in Figure 19 together with measured values. As expected, the delay increases significantly for small signals, though we plan to operate with typical signal inputs to the second stage of 700mV and above. The SPICE simulations agree well with the measured results.

Many more detailed simulations were performed to understand the discriminator performance in detail and will not be described here.

Figure 19: Confirmation of SPICE Simulation of Time Walk (for small signals only)

#### 4.2.4 Testing

The fabricated ICs were tested in two test setups, on an Alessi probe station for measurements of nodes within the circuit, and a simple PC board test circuit. Our primary tasks in testing were:

1. Establish basic functionality
2. Compare AC and DC parameters with SPICE simulation
3. Measure channel-to-channel and chip-to-chip variations in performance, particularly threshold offsets
4. Evaluate the overall performance in the context of our ATLAS MDT requirements.

After establishing basic functionality, we compared test results with SPICE simulation for a DC sweep. We injected a low-frequency triangular waveform from a signal generator into one input, and recorded the output on a digital oscilloscope. The SPICE simulation was shown in Figure 18, and the corresponding test results are shown in Figure 20. The hysteresis was measured as a function of control current, and plotted in Figure 21 in addition to the SPICE simulation using measured value of \(K^{\prime}\). They are in good agreement.

The time walk was measured using a differential signal (the configuration we expect in the final octal ASD chip) over the expected range of MDT signal inputs to the discriminator. A test pulse with risetime of about 1ns from an HP8l 30 pulse generator was injected, and the propagation delay measured using a LeCroy 2228 CAMAC TDC (set to 250ps per channel). The result is plotted in Figure 22. The expected range of input signals is 700mV-4V, and the time walk is about 500ps in this range. This is consistent with our goal of overall timing precision of 1ns.

We then measured the channel-to-channel variation of input offsets. The DC sweep test was performed for each of four identical discriminators on a test chip. The results are shown in Figure 23, and the channel-to-channel variation is less than 3mV, better than the accuracy of our measurement.

In conclusion, we have fabricated three different fast discriminator designs in 1.2\(\mu\) CMOS, and have shown them to meet our basic performance in the ATLAS MDT readout system.

## 5 Future Plans

### Tube tests

As mentioned above, our short term plan for tube tests is to measure shapes of pulses induced by neutron interactions. We will also continue cosmic ray tests to study double track resolution. These studies will be aimed at understanding the need for multiple shaping times and pulse amplitude measurement in the front-end electronics.

Figure 20: DC Sweep (hysteresis) Measurement for “Medium” Discriminator

Figure 21: Hysteresis vs Control Current, Measurement vs SPICE Simulation for “Medium” Discriminator

Figure 22: Propagation Delay vs Input Amplitude. Note that the Y axis units are 250p s

## 6 Conclusion

Figure 23: Channel-to-channel Variation in DC Response for “Medium” Discriminator.

In addition, we are working on a small multilayer chamber which will be use as a test bed for our future chip runs described below. This will require us to make a mother board that has the same mechanical specifications as the real ATLAS muon front-end board but be capable of mating to our prototype chips.

### Chip Submission Plans and Schedule

We plan to submit two or three further test chips this year.

96AThe first chip (dubbed "96A") will be fabricated in HP's \(1.2\mu\) process instead of Orbit. This is for two reasons: the transconductance is about twice that of the Orbit process (for a given transistor geometry), and the fabrication cost is significantly less. The first chip will contain two sections. First, a section with a pre-amp with pad driver, and various discriminator designs. This will allow us to compare in detail the HP process performance with the Orbit process. The second section will have four complete Preamp+Discriminator+Driver sections, which can be used for on-chamber testing. A block diagram of chip 96A is shown in Figure 24.

96BIn our second submission, we will include a variable time-constant shaper, plus another four complete channels for on-chamber testing.

96COur third test chip will include baseline restoration and input pad protection.

Figure 24: Proposed Block Diagram for First HP \(1.2\mu\) Test Chip

### Radiation Tolerance Requirements

#### 5.3.1 Expected Doses For MDT Front-End

The neutron fluence expected for the MDT system is about \(40\)KHz/\(cm^{2}\) in the endcap MDT region (\(\eta=1.44-2.3\), see Table 8 in [12]). We assume that 10 years of LHC running is about \(10^{8}\) seconds, giving a total neutron dose of \(4*10^{12}N/cm^{2}\).

From the same table in [12], \(9.8\) kHz of \(\gamma\) rays is the worst case. 10 years of LHC operation is about \(10^{8}\) sec. \(10\)K Hz \(*10^{12}*10^{8}\) sec gives \(10^{12}\) total \(\gamma\)s. Assuming \(2*10^{11}\) 1MeV photons/\(cm^{2}=1\) Gray [13] and 1 Gray = 100 Rad, we get 500 Rad total dose.

A summary of radiation the tolerance of some CMOS IC processes is shown in Table 5.3.1.

The Orbit \(2\mu\) tests done by Sadrozinski et al may be a significant overestimate, as they did not measure the amount of ionizing radiation accompanying the neutrons.

Rad-hard processes are very expensive, of order 4x-8x the cost of standard processes for non-recurring expenses. Additional production cost is not known at this time.

So-called "radiation tolerant" CMOS processes are available with 100KRad tolerance at only modest additional cost. Their neutron tolerance will be studied.

In summary, standard CMOS' gamma tolerance of 50KRad is no problem. Our expected neutron dose of \(4*10^{12}\) is a potential problem for non rad-hard CMOS processes. Rad-hard processes would easily meet our requirements at additional cost.

We will continue to research this subject vigorously. We will eventually have to test our final ASD chip to assure it's neutron tolerance.

### Reliability

One of the issues that will have be faced for the MDT system is the reliability of components. Clearly this is an ATLAS wide concern. There are two aspects to reliability - the first is an estimation of rate of failure. The ATLAS Electronic Coordination Board will hopefully come up with a set of guidelines for reliability estimation. For ASIC's there is a tremendous variability even _within_ a single process for the reliability of components. Reliability depends much more on the actual design than anything else, although some processes are inherently safer than others. The second issue relates to burn-in of components. We will have to develop some criteria for the burn-in of MDT electronics - particularly anything that will be located on the chamber.

\begin{table}
\begin{tabular}{l|l|l|l} \(Process\) & \(neutrons/cm^{2}\) & \(\gamma\) _dose_ & _notes_ \\ \hline Orbit \(2\mu\) (mosis) & \(5*10^{12}\) & & [14] (see note below) \\ UTMP (RH) & \(10^{15}\) & & [14] (no longer available) \\ Harris AVLSI-RA & \(10^{14}\) & \(1\,00\)M Rad & [15] (rad hard) \\ Seiko 1.2um CMOS & & \(1\,00\)K Rad & [15] (not rad-hard) \\ ”Standard” CMOS & & \(<\,50\)KRad & \\ \end{tabular}
\end{table}
Table 2: Radiation Tolerance of some CMOS Processes

## References

* ATLAS Muon Note No. 080 1995.
* [2] Valery Tchernatchine, private communication.
* [3] "Trailing Edge Timing Studies with prototype ATLAS Muon Drift Tubes", Proceedings of the First Workshop on Electronics for LHC Experiments, CERN/LHCC/95-56, pp 195-198
* [4][http://www.nikhef.nl/pub/departments/et/L3/L3_preamp/L3amp.html](http://www.nikhef.nl/pub/departments/et/L3/L3_preamp/L3amp.html)
* [5] S. Whittlestone, "Neutron Distribution from the Deuteron Bombardment of a Thick Be Target", J. Phys. D Vol 10 No. 13, pp 1715-1723
* [6] Wolfgang Riegler, private communication.
* [7] F.M. Newcomer, S. Tedja, R. Van Berg, J. Van der Spiegel, and H.H. Williams, IEEE Nuc. Sci. **NS-40**, 4 1993.
* First Workshop on Electronics for LHC Experiments, Lisbon Portugal, 1995.
* [9] P. E. Allen and D. R. Holberg, "CMOS Analog Circuit Design", Harcourt Brace, 1987, p 355
* A VLSI Layout System (public domain software). [http://www.research.digital.com/wrl/projects/magic/magic.html](http://www.research.digital.com/wrl/projects/magic/magic.html)
* [11] J. E. Franca and Y. Tsividis (Ed.), "Design of Analog-Digital VLSI Circuits for Telecommunications and Signal Processing", Prentice Hall, 1994, pp 341-359. _(All of chapter 11 is worthwhile reading.)_
* [12] A. Ferrari and P. R. Sala, ATLAS Muon Note No. 90
* [13] Particles and Fields, Phys. Rev. D, 1994, p. 1268 See heading "Fluxes (per \(cm^{2}\)) to deposit one Gray...". The \(2*10^{11}\) is for 1MeV photons into carbon, not strictly correct for our case.
* [14] Sadrozinski, H F W; "Test of radiation hardness of CMOS transistors under neutron irradiation", Nucl. instrum. methods phys. res., A : 288 (1990) 76-78
* [15] Seller, P, "100 Mrad radiation tolerant CMOS devices." Rutherford Appleton Laboratory, 1995, RAL-TR-95-055 CERN Server no: SCAN-9510266
* [16] "Fluences and Spectra of Accelerator Generated Fast Neutrons", G. H. R. Kegel, P. Bertone, D. L. Case, D. J. DeSimone, C. K. C. Jen, C. Narayan, M. O'Connor, and P. Staples, IEEE Trans. Nucl. Sci. NS-39, December 1992.
ATLAS Internal Note DAQ-NO-10

EAST note 93-24

29 Nov 1993

Revision 1

R.K.Bock and J.Vermeulen

A readout model for some ATLAS detectors

_Detectors and their transmission parameters_

We consider in this note a subset of the ATLAS detectors, the data they produce, and a model of how the frontend electronics could transmit them to a level-2 buffer, assuming that buffering during level-1 triggering occurs on the detector. They are the barrel calorimeter (BCAL), the transition radiation detector (TRT), the silicon tracker (SIT), and the forward microstrip gas counters (MSGC's). We follow the Cosenors House layout, one of the layouts under discussion for ATLAS.

Our objective is neither completeness nor continuously updated information. A more comprehensive and permanently up-to-date description of readout parameters (e.g.in a data base) will also become part of ATLAS preparatory work. We intend here to have a model as working hypothesis, that allows significant developments of transmission devices, buffers, and region-of-interest building. The detectors described represent the most typical problems encountered: high-precision and 3-dimensional collection problems (BCAL), high occupancy and large overlap in RoI-s (TRT), and sparse data with data-dependent times for transmission and algorithm execution (SIT and MSGC's). Additional detectors will foreseeably not pose problems fundamentally different.

1. The electromagnetic barrel calorimeter (BCAL) is subdivided into cells of approximately.025x.025 along rapidity \(\eta\) and azimuth \(\phi\). For a coverage of +-1.5 in \(\eta\), we assume 128x258 =31768 e.m. cells (in \(\pi\)x\(\phi\)). There are three e.m. layers in depth (r). The readout proceeds via FERMI boards; they group 4x4 e.m. cells over the three r-layers into a trigger cell, and these 48 channels are read by 4 FERMI chips, one per \(\eta\). A board has 24 chips, and provides full information for a region 0.3x0.2 in \(\pi\)x\(\phi\) (288 channels). Note that we assume here a future FERMI chip and board with a modularity best adapted to the calorimeter granularity and first-level trigger problem; in L2 we simply have to assume a modularity of single channel transmission and buffering.

The hadronic BCAL also has three layers in depth, in its first two depth segments it has a linear factor 4 less granularity, the 0.1x0.1 size cells are read by two photomultipliers each. The third layer has a basic cell of 0.2x0.1 (\(\pi\)x\(\phi\)), again it is read by two PM-s. The readout proceeds again via FERMI boards, they group 5 PM-s over the three depth segments into a 0.1x0.1 trigger cell, and two trigger cells or 10 channels are read by a FERMI chip. A FERMI board contains 24 chips, and covers a hadronic region of 0.8x0.6 (\(\pi\)x\(\phi\)).

In total, 320 e.m and 40 hadronic boards are needed. Each board transmits via a single fibre (288*16bits*100KHz=0.46 Gbit/s), in free order of chips, but information from one chip being kept together. The information per cell is 16 bits, uncompressed.

2. The forward TRT is arranged in 16 wheels, each containing 8 planes equidistant along z. Wheels are mounted non-equidistant along z, from z=109 to z=320cm. Each plane contains 600 straws at equal distance in \(\phi\), but with small \(\phi\) offsets from plane to plane. The inner radius is 0.5, the outer 1.0 m. Each straw produces 10 bits of information, 3 bits for drift time, a low and a high threshold bit, all for two successive time slices. The readout groups 8(\(\phi\))x64(z) = 512 straws in a single readout module, and transmits uncompressed information via a single fibre (512*10bits*100KHz = 0.5 Gbit/s).

The barrel TRT is arranged in two layered cylinders covering respectively the z region from -1m to 0, and from 0 to +1m. Each cylinder contains straws arranged in 62 layers of constant r, radii varying from 0.558 to 1.032 m. In each layer, straws are at constant distance (about 6.8mm), i.e. \(\Delta\phi\) and therefore the number of straws vary from layer to layer (from 515 to 953 straws). The total number of straws is 45513. Each straw produces 10 bits of information, 3 bits for drift time, a low and a high threshold bit, all for two successive time slices. The readout groups up to 512 straws arranged as best one can in a sector of constant \(\Delta\phi\) (90 sectors), into a single readout module, and transmits uncompressed information via a single fibre (512*10bits*100KHz = 0.5 Gbit/s).

If a low-bandwidth fibre option (e.g. only 32 straws per fibre) is used for the TRD, it is assumed that a separate 16:1 collection station is interspersed between the frontend electronics and the buffer, establishing the above readout granularity.

3. The forward MSGC system is arranged in wheels. The TRT wheels are located between the MSGC wheels. The first and the last two MSGC wheels are "full wheels": each is fully equipped with 3 layers of MSGC's at r = 40, 49.5, 59, 68.5 and 84 cm. The three innner rings have 10 cm high MSGC's, the two outer rings 16 cm high MSGC's. All MSGC's are 10 cm wide at the beam pipe side. The total number of MSGC's per ring is 3 * 24, 3 * 30, 3 * 36, 3 * 42 and 3 * 51, respectively. The strips of the MSGC's in the 3 different layers make an angle of 0, -0.5 and + 0.5 degrees with the radial direction. The 13 remaining wheels are also equipped with 3 layers of MSGC's, but only with two rings, one at the inner edge (at a radius of 40 cm, 10 cm high MSGC's) and one at the outer edge (at a radius of 84 cm, 16 cm high MSGC's) of the wheel. The strips of the MSGC's in the 3 different layers make again an angle of 0, -0.5 and + 0.5 degrees with the radial direction. The total number of MSGC's per ring is 3 * 24 and 3 * 51, respectively. The wheel positions are : z= 106.25 (full wheel), 118.25, 127.75, 137.25, 149.95, 162.65, 175.35, 188.05, 204.55, 221.05, 237.55, 257.25, 276.95, 300.45 (hollow wheels), 326.25 and 336.25 cm (full wheels).

Each MSGC has 512 strips (strip pitch = 200 \(\upmu\)m). Strip hit information is read-out via FASTPLEX chips, which contain digital pipelines and buffer memories and a serial data input and output. The data input makes daisy-chaining of FASTPLEX chips possible. The data is transmitted zero-suppressed via the data output. One FASTPLEX chip reads out 64 strips. The occupancy at maximum luminosity is expected to fall in the range 0.1 to 2 %. A tentative number for the bandwidth of the serial connection is 160 MBit / s.

The full system consists of 2 * 3572 = 9144 MSGC's, with 73152 FASTPLEX chips attached, representing in total 4'681'278 measuring channels. With 2 % maximum occupancy, 16-bit addresses and read-out of only a single time slice, about 20 GBytes / s have to be transported. In total about 1000 optical fibres running at 160 MBit / s (20 MByte / s) will be needed to transport the data for the full MSGC system. The length of an MSGC signal as seen by the FASTPLEX chips corresponds to 2 - 3 bunch crossing intervals. The FASTPLEX chips have to correlate each signal with the correct bunch crossing. The correlation procedure can be switched off for checking purposes and low luminosity running. In that case each hit will be read-out 2 or 3 times (for consecutive bunch crossings).

The MSGC's connected to a single optical fibre will be close to each other. They will form part of a ring and all belong to the same projection (i.e. to the same layer of MSGC's in a particular wheel). The assignment of optical fibres to the MSGC's in a particular wheel will not depend on the wheel number, as it is foreseen that repairs will be done by exchanging a wheel with a reserve wheel. The assumed MSGCinformation format is the same as for the SIT (see below), but there will be no pulse height information.

4. The SIT is arranged on 5 cylindrical surfaces at radii from 52 to 105 cm, each wafer being about 5x6 cm in \(\phi\) and z, and containing 256 channels (r-\(\phi\) strips or z strips). Two wafers are bonded together, and read via the same readout controller. The total number of double wafers is 4000, with the highest number at the outermost radius. The information is thresholded, only 1% of the channels being active for a given bunch crossing. The assumed SIT information format is the following (bytes):

Header (ID etc.) 6 bytes chip address (marked by a bit) strip address pulse height strip address pulse height...... (repeated) chip address (marked by a bit) strip address pulse height...... (repeated) terminator

The readout groups the information from a double wafer (512 strips) in a single module, and transmits via a single low-capacity fibre (26bytes (average)*100KHz = 21 Mbit/s).
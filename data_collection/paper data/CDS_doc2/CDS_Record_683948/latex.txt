ATLAS Internal Note

MUON-NO-137

22. Jan. 1997

EUROPEAN ORGANIZATION FOR NUCLEAR RESEARCH

MDT Resolution Simulation

Frontend Electronics Requirements

**Werner Riegler**

CERN

In order to define the MDT frontend electronics requirements, a full chain simulation of the MDT response to charged particle tracks was performed. The induced current signal was simulated with GARFIELD, MDT and frontend electronics were simulated with PSPICE and a stand alone program. The simulation was checked in two ways: Pulseshapes recorded with a digital scope were compared to GARFIELD + PSPICE simulated signals. The resolution simulation was compared to testbeam measurements. After getting confidence in the simulation, a scan over frontend parameters like preamp peaking time, filter constants and threshold settings was performed in order to optimize resolution, hit rate, trailing edge resolution and deadtime. Further on the resolution improvement by performing a time slewing correction with a double threshold discriminator or a leading edge charge measurement was studied. The use of a strong tail cancellation channel for double track separation was studied as well.

[MISSING_PAGE_EMPTY:2]

###### Contents

* 1 Introduction
* 2 Signal Simulation
	* 2.1 Cluster Position and Cluster Size Distribution
	* 2.2 Diffusion, Driftvelocity
	* 2.3 Gasgain and Gain Variation
	* 2.4 Ion mobility
	* 2.5 GARFIELD Signal Simulation
* 3 Electronics Simulation
	* 3.1 Tube
	* 3.2 Preamp
	* 3.3 Noise, Threshold determination
	* 3.4 Filters
	* 3.5 Discriminator, ADC, TDC
* 4 Time Slewing Corrections
* 5 Results
	* 5.1 Resolution
	* 5.2 Efficiency
	* 5.3 Hitnumbers, Deadtime, Trailing Edge Resolution
	* 5.4 Double Track Separation (Channel 2)
* 6 Conclusions
* 7 Resolution and Deadtimes for Simulation efforts

Introduction

The MDT operating point and the frontend electronics parameters have to be carefully chosen to satisfy all the requirements of a precision tracking device for the ATLAS muon spectrometer. (Fig. 1) shows the MDT with the signal processing possibilities studied in this note. The following points determine the particular choice of the frontend parameters.

* Due to the high background rates in the spectrometer, the possible degradation of the MDT performance caused by high amounts of deposited charge is a serious problem. To minimize the aging effects one has to operate the chambers on the lowest possible gasgain which is still compatible with requirements on space resolution. The temporary choice for the gain is \(2\times 10^{4}\) which would result in a total charge deposit of \(1C/cm\) in 15 years of high luminosity LHC operation including a safety factor of 5. Also the effect of spacecharge in the MDT's due to the high background requires a low gasgain.
* In case of a trigger, all MDT's with at least one hit in the \(1\mu s\) trigger time window are read out. To minimize the readout data volume, the number of hits per charged particle track should be close to 1, which affects the choice of preamp peaking time, filter time constants and threshold setting.
* To get good space resolution the chambers are operated at 3 bars (absolute). The aim of a space resolution of \(70\mu m\) to \(80\mu m\) has also strong implications on shapingtime and threshold setting.
* The high background rates also cause significant chamber occupancies (deadtimes). If a particle crosses a tube where electrons from a previous track are still drifting towards the anode wire, the two signals pile up. To see the leading edge of the second track one has to cancel the signal tail strongly and one also has to set the threshold very high. Since this results in worse resolution, this option can only be implemented in a separate channel. To minimize the deadtime and to restore the baseline, a double pole/zero network is foreseen. The maximum drifttime of the current gas mixture (Ar/N2/CH4 91/4/5) is about 480ns. Since the gas is quite linear, the drifttime spectrum is a flat distribution from 0 to 480ns assuming a uniform illumination of the tube. To derive the deadtime spectrum one has to add the duration of the preamp response to a single electron which is shapingtime and filter dependent.
* The trailing edge time of a signal from a track coming from the interaction region is correlated to the bunchcrossing time. This information can be used to remove uncorrelated background hits which could help for pattern recognition efficiency. The resolution of the trailing edge timing and the efficiency is also a strong function of the filter constants.

## 3 Channel 1:

Figure 1: _The MDT frontend. P/Z indicates pole/zero filters. The first TDC channel records leading edge + trailing edge or ADC measurement optionally. The second channel has 3 strong tail cancellation filters for double track separation._

Figure 2: **Channel 1:**_The leading edge timing corresponds to the drifttime. Trailing edge and ADC measurement are just backup informations. If one would like to record trailing edge measurement_ **and** _charge one would have to add a separate channel for the ADC readout. To avoid another channel, the baseline idea is to switch between the two options, depending on what happens to be the most useful thing._Signal Simulation

The simulation of the induced current signal was done with GARFIELD [1]. The input to GARFIELD are the number of clusters/cm, clustersize distribution, diffusion, driftvelocity, gasgain, gasgain variation, volt age and ion mobility. All simulations were done for the gas mixture Ar/N2/CH4 91/4/5 at 3 bars absolute, a wire diameter of 50\(\mu m\) and a tube radius of 1.5cm.

### Cluster Position and Cluster Size Distribution

A muon traversing an MDT ionizes the gas atoms. The tracklengths of most ionization electrons in 3 bars of Argon are very short, so the track of a muon is usually modelled by individual pointlike clusters of electrons. According to [2], the number of clusters per cm in 1 bar of Argon for a particle with \(\gamma=1000\) is 35 which gives 105 clusters/cm for a pressure of 3 bars. The ionization interactions are independent, so the number of clusters is Poisson distributed which results in an exponential cluster position distribution.

The energy spectrum of the ionization electrons is \(\propto 1/E^{2}\) for transfer energies higher than the gas ionization energies (E is the electron energy). So the probability of a cluster with \(n\) electrons is \(\propto 1/n^{2}\). For lower energies, detailed calculations [3] or measurements [4] have to be used. Although there is quite a discrepancy in these two references, using both distributions the simulation showed no difference in the signal shapes.

Most important is the choice of the cut off number for n. Since the distribution is \(\propto 1/n^{2}\), the probability of having a cluster with \(>100\) electrons among the average cluster number of 300 is still 50 %! The effective ionization energy of Argon is 26eV, so a knock-out electron of Energy 12keV creates 460 electrons. Since the range of a 12keV electron in 3bars of Argon is about 1mm, this is already on the edge of the model of pointlike clusters. To check the sensitivity of the resolution simulation to this number, the cutoff was varied from 30 to 1000 electrons. Up to a cutoff of 150 electrons the results vary dramatically, from there on, no major difference can be observed. This gives confidence in the assumption that the cutoff has to be \(>\approx 400\) and that the particular choice of the cutoff from there on is not too crucial.

### Diffusion, Driftvelocity

The diffusion coefficients and the driftvelocity were calculated with MAGBOLTZ [5] which is directly interfaced to GARFIELD.

### Gasgain and Gain Variation

For the particular gas mixture of Ar/N2/CH4 91/4/5 a gas gain of \(2\times 10^{4}\) requires a Voltage of 3270V for a \(50\mu m\) wire [6].

The gain variations for a cylindrical geometry are well described by a Polya distribution [7] which has the following form:

\[f(x)\propto x^{\Theta}e^{-(1+\Theta)x} \tag{1}\]

\(\Theta\) was chosen to be 0.4.

### Ion mobility

The E-field dependent ion mobility was taken from [8].

### GARFIELD Signal Simulation

The GARFIELD program processes this input the following way:

* Clusters of electrons are created along the track
* The individual electrons are tracked to the wire along the electric field lines applying longitudinal and transvers diffusion.
* The induced signal for each electron is simulated by tracking ions from the wire surface according to the given ion mobility.

To check this input, MDT signals recorded with a digital scope were compared to GARFIELD + PSPICE simulated signals. The 'number of spikes' per signal and the overall shapes were in excellent agreement. Still there were some discrepancies in the signal tails and decay times.

Since the avalanche process might not be simulated properly by the model of tracking the ions from the wire surface, a detailed simulation of the avalanche process together with the electron pulse component was introduced to GARFIELD recently. Studies on this new model are ongoing and will be published in a future note.

The impact of the slight tail discrepancy on the simulation of resolution and hit rates is assumed to be small for 2 reasons: The leading edge of the signal which is important for the resolution is not affected by this effect. The number of hits for a certain threshold is strongly dependent on the filter constants, so a difference in the tail can always be compensated by different filter constants.

Electronics Simulation

The tube, preamplifier, filters and the noise were simulated with a stand alone program assuming analytical transfer functions. Simulation of electronics has been introduced to GARFIELD recently.

### Tube

A schematic of the MDT circuit together with a simplified model are shown in (Fig. 3).

To avoid reflections on the end of the tube the termination resistor \(R_{t}\) has to be matched to the tube impedance. For a tube radius of \(1.5cm\) and a \(50\mu m\) wire we get \(R_{t}=\sqrt{LC}=382\Omega\) where \(C\) is the tube capacitance and \(L\) the tube inductance per unit of length.

The decoupling capacitors were chosen to be \(500\)pF, the loading resistance \(R_{t}\) is \(1M\Omega\). A \(50\mu m\) W/Rh wire has a resistance of about \(50\Omega/m\). \(R_{1}\) is the total wire resistance between the impact point and the preamp side, \(R_{2}\) the wire resistance between impact point and termination end. \(R_{w}=R_{1}+R_{2}\) is the total wire resistance. \(R_{in}\) is the preamp input resistance which is about \(100\Omega\) for the current preamp design.

The analytical transfer function of the MDT (from the impact point to the preamp input) can be found in [9]. (Fig. 3) shows the absolute value of the transfer function for a \(1m\) tube.

The tube transfer function has 4 characteristic frequency intervals

1. \(f<10^{2}Hz\) A large part of the signal leaves the wire via the \(1M\Omega\) HV loading resistor.
2. \(10^{2}<f<10^{5}Hz\) In this frequency range half the induces signal goes down the termination resistor side and the other half goes down the preamp side, since the signal divides like \(C/(C+C)=0.5\).
3. \(10^{5}<f<10^{9}Hz\) The capacitors can be neglected and the signal splits like \((R_{t}+R_{2})/(R_{w}+R_{t}+R_{i})\).
4. \(>10^{9}Hz\): The parallel tube capacitance starts to play the major role and the induced signal leaves the system via this capacitance.

The leading edge of the signal is mostly affected by domain No.3, the overall signal shape is dominated by region 2 and 3. Since the frequencies \(>10^{9}Hz\) are anyway cut off by the preamp and the domain where the loading resistor affects the signal shape can be Figure 3: _Transfer function of the MDT from the impact point to preamp input. The left picture shows the exact calculation [9] and the right picture shows the transfer function from the simplified model._

neglected one can use a simplified circuit for the MDT (Fig. 3). The transfer function of this simplified circuit is:

\[\frac{i_{1}}{i_{0}}=\frac{R_{2}+R_{t}}{R_{in}+R_{w}+R_{t}}\times\frac{s+\frac{1}{ \tau_{1}}}{s+\frac{1}{\tau_{2}}}\qquad\tau_{1}=C\times\left(R_{2}+R_{t}\right) \tag{2}\]

This transfer function is equivalent to a pole/zero or zero/pole network described below. As we can see, the transfer function depends on the avalanche position on the wire which results in different signal shapes for different impact parameters as well as different signal loss.

### Preamp

The preamp was assumed to be an ideal preamp followed by n+1 RC integration stages [10][11].

\[f(s)=\frac{n!\tau}{(1+s\tau)^{n+1}}\qquad\text{where}\qquad\begin{array}{l}n...\text{number of integrations}\\ \tau...\text{time constant of one integration stage}\\ n\tau=t_{p}...\text{peaking time}\end{array} \tag{3}\]

This corresponds to a delta response of

\[\overline{f}(t)=\left(\frac{t}{\tau}\right)^{n}e^{-\frac{t}{\tau}}\]

(Fig. 4) shows the delta responses for different integration numbers.

Figure 4: _Deltaresponses of preamps with 10ns peakingtime for different numbers of integrations_.

### Noise, Threshold determination

The main part of the noise in the MDTs consists of thermal noise caused by the termination resistor. Referring to [12] the output voltage rms due to the termination resistor is given by

\[V_{rms}^{2}=\frac{4\,kT}{R_{t}}\frac{R_{in}}{R_{t}+R_{in}}\int_{0}^{\infty}|f(i \omega)|^{2}\frac{d\omega}{2\pi}\hskip 28.452756ptT...\mbox{temperature of the termination resistor}\]

In order to get the equivalent noise charge (ENC) one has to divide the \(V_{rms}\) by the peak of the preamp output caused by a unit delta input pulse on the wire. The ENC in electrons we finally derive by dividing by the electron charge \(e0\).

\[ENC=\frac{V_{rms}}{e_{0}*peak}\]

Using the above transfer function (3) we get

\[ENC=\frac{1}{e_{0}}\frac{e^{n}}{2^{n}}n^{-(n+1/2)}\sqrt{t_{p}\frac{kT}{R_{t}}( 2n)!}\]

(Fig. 5) shows the ENC for different peaking times and integration numbers (\(T=300K,R_{t}=382\Omega\)).

The wire resistance is also a noise source, but since the noise from the terminator is attenuated by the wire resistance, the ENC is almost independent of the tube length [12]. The preamp noise was neglected in this study since it should be very small compared to the termination resistor noise.

To simulate the noise and the noise spectrum, gaussian numbers were added to the signal every time bin. The sigma of these numbers was chosen to give the correct \(V_{rms}\) on the output.

The ENC itself isn't too illusive. The important numbers are the minimum threshold one can apply to the output signal as well as the influence of noise on the MDT single wire resolution.

To avoid noise hits, the minimum discriminator threshold we can set is

\[thr_{min}=5*\sigma_{noise}\]It is common use to express the threshold in 'electrons'. A threshold of n electrons corresponds to the voltage equivalent to the peak of the signal caused by n ionization electrons in the tube.

(Fig. 5) shows the thresholds equivalent to \(5\times\sigma_{\mathit{noise}}\) for different preamp peaking times and integration numbers for a gasgain of \(2\times 10^{4}\).

Figure 5: _ENC from the termination resistor for different preamp peaking times and integration numbers and equivalent minimum thresholds for a gain of \(2\times 10^{4}\)._

### Filters

The ions moving away from the anode wire induce a current signal which has approximately a \((t+t_{0})^{-1}\) form. Since this 'ion tail' would cause enormous deadtime one has to differentiate the signal to restore the baseline quickly.

Two commonly used filter circuits, a pole/zero and a zero/pole filter are shown in (Fig. 6). The transfer functions for these two networks are

\[\begin{array}{llll}f_{1}(s)=\frac{s+\frac{1}{\tau_{1}}}{s+\frac{1}{\tau_{2}}}& \tau_{1}=R_{1}C\\ \tau_{2}=\frac{R_{1}R_{2}C}{R_{1}+R_{2}}&\tau_{2}=\frac{R_{1}}{R_{1}+R_{2}} \end{array}\quad\mbox{ and }\quad f_{2}(s)=\frac{R_{1}}{R_{1}+R_{2}}\times\frac{s+\frac{1}{\tau_{1}}}{s+ \frac{1}{\tau_{2}}}&\tau_{2}=(R_{1}+R_{2})C\\ \tau_{1}<\tau_{2}\end{array}\]

Sending a \(e^{-\frac{t}{\tau_{1}}}\) signal through such a filter results in an output \(\propto e^{-\frac{t}{\tau_{2}}}\), so we see that a pole/zero filter shortens the signal tail while a zero/pole filter attenuates it and makes the tail longer. For baseline restoration we therefore use a pole/zero filter.

Since the MDT signals are not of an exponential form but of the form \(s(t)=(t+t_{0})^{-1}\), one needs more than one filter to do the job properly. For this simulation a \(2\times\) pole/zero network was used. How to find the appropriate time constants for such a double filter is described in [13].

Since the signal shape depends on the position along the wire one has to decide for which impact parameter one wants to adjust the filter constants.

Adjusting the filter constants for the termination resistor side causes overcompensation for a signal close to the preamp side. The result is a quite big undershoot of the signal.

Adjusting them for the preamp side results in undercancellation \(\rightarrow\) baselineshift \(\rightarrow\) pileup, which is intolerable for the low thresholds we want to use.

**We have to adjust the filter constants for signals from the termination resistor side.**

Figure 6: _pole/zero and zero/pole filter_(Fig.7) shows the signal of a muon track for different impact parameters.

As a consequence the filters have to be adjusted differently for every tubelength and in case of a change of gas or pressure all the constants have to be changed differently.

As we have seen before, the tube acts as a pole/zero filter (2), so by adding a zero/pole filter one could cancel the tube transfer function for the terminator side. We would be left with the transfer function

\[s(t)=c_{1}*\frac{1}{t+t_{0}} \tag{4}\]

for the far end of all tubes. These constants would stay fixed with the tubes and one could adjust the two pole/zero filters only for cancelling the \(\frac{1}{t+t_{0}}\) signal independently of the tubelength in the whole system. However, this procedure would add some complication to the frontend and could be reason for errors.

Since the filters are planned to have programmable time constants it seems more convenient to have an online test setup with different tubes to find the individual constants experimentally and directly feed them to the front end.

Figure 7: _The same current signal induced on both ends of a 6m tube. In the left picture the filter constants are adjusted for the termination resistor side, in the right one for the preamp side. The signal close to the terminator shows attenuation (dashed line). Clearly we have to adjust for the termination end to avoid pileup._

### Discriminator, ADC, TDC

The discriminator was simulated to be an ideal one with a deadtime of 5ns and a hysteresis that can be chosen from 0 to the threshold level.

The TDC was assumed to have 0.8ns timebins [14].

If we want to encode the ADC measurement in the TDC channel we have to consider the following constraints:

The ADC gate acts like a fixed deadtime, so if we would like to measure the charge of the whole signal using a gate of 600ns we introduce a fixed deadtime of 600ns. Since this is intolerable we can not do a measurement of the total charge.

If we don't want to introduce artificial deadtime by the charge measurement, the time needed for measuring the charge plus the time for converting it into a 'time' should not exceed the minimum pulsewidth which is about 100ns.

Since the charge has to be converted into a time between 0ns and 100ns, which corresponds to an ADC with \(100/0.8\approx 126\) bins, this would correspond to an ADC with 7 bits.

We will see that a short gate ADC measurement happens to be much more useful than a total charge measurement.

Time Slewing Corrections

Because of charge fluctuations in the leading edge of the signal, the risetime of the signal varies. This results in different threshold crossings times and therefore degraded resolution. Contrary to diffusion, the information about the time slewing is still available by measuring the leading edge risetime.

A classical constant fraction discriminator can not be used in our case due to the high noise level and the fact that a delay line is hard to implement on a chip.

The other possibility is measuring the leading edge rise time and correcting for the timeslewing offline. The rise time can be measured in two ways (8):

* Applying 2 thresholds to the signal and taking the time difference as a measure of the risetime.
* Measuring the leading edge charge with a short gate ADC (\(tp<gate<2t\,p\)).

In the simulation, the time slewing correction can be performed by fitting a function through the distributions and looking at the residuals.

In the real measurement one would have to correct the TDC data by a function \(t_{corr}=t+c_{1}x+c_{2}x^{2}+...\) (x corresponds to the ADC value or the time difference) and vary the constants to minimize the residuals. Fortunately the correlation is quite linear and an improvement in resolution by doing a second order correction could not be observed.

Figure 8: _Correlation of threshold crossing time with the leading edge charge and the double discriminator time difference. The individual bands correspond to the distances 1mm,2mm...15mm. The ’normal’ resolution at a certain distance is given by the projection of the distribution on the time axis. The time slewing corrected resolution corresponds to the width of the bands._

## 5 Results

### Resolution

For the resolution simulation, signals for distances from 0mm to 15mm in steps of 1mm were created (1000 each). After sending them through the electronics, the threshold crossing times for each distance were histogramed and fitted with a gaussian. To derive the resolution the sigma of this time distribution was multiplied with the driftvelocity at the given point.

(Fig. 9) shows a comparison of the simulation with testbeam results [15].

To define the average MDT resolution one would naturally fit a gaussian to the residuals from all the distances. However, the residual distribution is not at all gaussian, which is mostly due to the very bad resolution at distances \(<2mm\). So defining an average MDT resolution that way makes no sense.

Since for the optimizing process we are mainly interested in the differences in resolution for different parameters, we define the linear average of the resolutions from 1mm to 15mm as the quantity we want to minimize.

To separate the detector physics and the electronic noise effects (Fig.10) shows the average resolution assuming the noise to be zero which would be equivalent to a very high gain.

Figure 9: _Comparison of simulation and some measurements. The ENC for this simulation was taken from a measurement on the setup [15]._Figure 10: _MDT resolution linearly averaged from 1mm to 14mm assuming no noise which is equivalent to a very high gain (\(>6\times 10^{4}\)). Note that this should not be quoted as an average chamber resolution, but just as the quantity to be minimized. We see that the difference in resolution for different preamp peaking times and thresholds is mostly due to time slewing effects. The preamp was assumed to have n=2._

As one can see, the difference in resolution for different peaking times and thresholds is only due to time slewing effects. The reason for the increase of time slewing for longer peaking times and higher threshold can be seen from (11). For thresholds \(<5\) electrons the resolution degrades a bit since the very first arriving electrons are sometimes far out of the statistical average. The resolution doesn't improve for preamp peaking times \(<5\)ns since then the integration time is already of the order of the electron arrival time sigma. (Fig. 5) shows that also the signal to noise ratio rapidly becomes worse for peaking times \(<5\)ns which is important for the low gains we want to run.

The average resolution for a gain of \(2\times 10^{4}\) including the noise is given in (Fig. 12). The minimum threshold we want to apply is \(5\times\sigma_{noise}\) which is equivalent to about 15 electrons at this gasgain. The noise degrades the resolution in two ways: the threshold setting (\(5\times\sigma_{noise}\)) and directly through the overlay to the signal.

The uncorrected resolution is mostly affected by the threshold only, but looking at the ADC and double threshold corrected results we see that this is only due to the fact that the direct noise influence is hidden in the time slewing. The time slewing corrected resolution shows more influence from the noise. Why long integration times are more affected by the noise can be seen from (Fig. 13).

In long tubes, the signals from muons passing the MDT close to the terminator side are attenuated up to 50% because of the wire resistance, the noise however stays about the same (noise from terminator is attenuated, but wire resistance noise adds). This rises the \(5\sigma\) noise level to an effective threshold of 30 electrons. (Fig. 14) shows the average resolution assuming 2 times the noise.

Hence, (Fig. 12) corresponds to the resolution for muon tracks very close to the preamp side while (Fig.14) corresponds to the resolution of tracks 6m away from the preamp side. Resolutions for impact parameters in between can be interpolated linearly.

We conclude:

Figure 11: _This figure shows why the time slewing effect is smaller for short preamp peaking times and low thresholds._

Figure 12: _MDT resolution linearly averaged from 1mm to 14mm for a gasgain of \(2\times 10^{4}\) which is our current working point. Attenuation was not taken into account here, so this results refers to short tubes or impacts close to the preamp side. We see that we want the lowest threshold (15 to 20 electrons). We also see that long peaking times are more influenced by noise than short peaking times (13). The preamp was assumed to have n=2._

* For a given preamp peaking time the resolution improves by lowering the threshold. Since the lowest threshold is determined by the noise level we want our threshold at \(5\sigma\) of the noise.
* The resolution is better for short peaking times.

(Fig. 15) shows the radial resolution dependence at this threshold for a very short tube or impact of the muon at the preamplifier side (best case).

(Fig. 16) shows the radial resolution dependence for the muon impacting on the termination resistor side of a 6m tube (worst case).

It is without question that any additional noise to this theoretical limit like pickup noise will degrade the resolution accordingly.

(Fig. 17) illustrates the contribution of noise, clusterposition distribution, clustersize distribution, gasgain variation and diffusion to the total resolution.

It is important to remember that the time slewing is only correlated to the leading edge charge and not to the total signal charge. The ADC measurement with a gate \(>2\times tp\) can no longer be used to improve the resolution.

Figure 13: _The influence of noise on the time slewing corrected resolution is bigger for long preamp peaking times. From this figure we can imagine that the timechitter from the noise for a slower risetime (long peakingtime) is bigger since the intersection angle of the leading edge and the threshold becomes smaller._

Figure 14: _MDT resolution linearly averaged from 1mm to 14mm for a gasgain of \(2\times 10^{4}\) assuming \(2\times\) the noise which is equivalent to the resolution of tracks close to the terminator side of a 6m tube. This can be considered the worst case. Because of the higher threshold we gain even more by the slewing correction. The preamp was assumed to have n=2._

Figure 15: _Radial resolution dependence for a short tube or impacts close to the preamp side. The threshold is \(5\sigma_{noise}\). The preamp was assumed to have n=2._

Figure 16: _Radial resolution dependence for the far end of a 6m tube. The threshold is \(5\sigma_{noise}\). The preamp was assumed to have n=2. The ’bumpy’ structure of the curves is due to the quite ’non gaussian’ distribution of the residuals._

Figure 17: _The contribution of each component was calculated by switching off the fluctuations of all the other components. The contributions do not at all add in quadrature since they are heavily correlated. Especially the contribution from diffusion is strongly correlated to the cluster size fluctuations so from this point of view we underestimate the diffusion effect. The cluster size contribution component is only due to the time slewing effect and would become smaller for short preamp peaking times (and vanish for an infinitely fast preamp) while the other contributions would stay about the same. This plot can be very misleading. Since all effects are correlated it is not allowed to split them up. The only meaningful study is the total resolution dependence on parameters like peaking time, threshold, pressure etc._

### Efficiency

Clearly in addition to the best single wire resolution we also aim for very high efficiency. One has to distinguish different contributions to the efficiency:

1. An uncorrelated background event or an accompanying charge particle track hides the leading edge of the muon.
2. The signal stays below the threshold and there is no hit in the trigger time window.

To avoid shadowing of a leading edge by background particles one has to make the deadtime as short as possible which will be addressed in the next chapter.

The probability that the signal stays below the threshold is very low in our case. Only very close to the wall this starts to matter ( \(<200\mu m\) from the wall).

To get a feeling for that (Fig. 18) shows the signal maxima of 15000 signals at randomly distributed distances together with the lowest effective threshold we expect.

We see that the inefficiencies due to ionization fluctuations alone are negligible. Since effects like attachment, spacecharge, deltaelectrons etc. also cause inefficiencies, but are hard to model, the only way to get serious numbers about that is the measurement. Results from measurements will be published soon.

Figure 18: _Signal minima for randomly distributed tracks between 0mm and 14mm. The peaking time chosen is 5ns since for short preamp peaking times the signal to noise ratio is worst. It is obvious that inefficiency due to signals staying below the threshold is very low._

### Hitnumbers, Deadtime, Trailing Edge Resolution

In case of a trigger, all tubes with at least one hit are read out. To minimize the amount of d at a our aim is to get only one leading and trailing edge per signal. (Fig. 19) shows the preamp output and the filter output for the same input signal for a peaking time of \(5ns\) and \(25ns\).

From these figures we can immediately imagine the general tendencies for different peaking times and filter constants. There is a threshold region where we get about 1 threshold crossing per signal which becomes smaller for short peaking times. One can of course push the'spiky region' always up by cancelling the signal tail not that strongly, but this introduces deadtime and also degrades the trailing edge resolution since the intersection angle of the signal tail with the threshold becomes smaller (Fig. 20).

We also have to keep in mind that signals from long tubes are attenuated because of the wire resistance and they are shaped differently because of different transfer functions from different impact points. These two things act as an effectively higher threshold which results in more hits (Fig. 21).

For this study the following time constants were used for the double pole/zero network [13]:

Figure 19: _Preamp and filter output for different peamp peaking times but the same input signal and the same filter constants. The solid horizontal lines indicate the \(5\sigma\) noise level. The signal spikes are due to cluster size fluctuations._Figure 21: _The same signal for muon impact on both ends of a 6m tube. The signal close to the terminator side is attenuated while the signal close to the preamp side is overcompensated._

Figure 20: _The same signal for 2 different sets of pole/zero constants. Cancelling the tail not so strongly reduces the number of hits but introduces deadtime. One also can imagine that the trailing edge resolution will suffer since the intersection angle of the signal tail and the threshold becomes smaller._

\[\begin{array}{lclcl}\tau_{1}&=&133ns&&\mbox{and}&&\tau_{3}&=&1125ns\\ \tau_{2}&=&55ns&&\tau_{4}&=&587ns\end{array} \tag{5}\]

The average number of hits for tubelengths of 1m and 5m is shown in (Fig 22). The signals were randomly distributed over the whole length of the tube.

(Fig. 23) shows a signal together with the discriminator output. We can see that a discriminator hysteresis reduces the amount of hits enormously, i.e. one applies a lower threshold for the trailing edge. So the discriminator output is set high when the signal goes above threshold and it is set low when it goes below a lower threshold. The difference between the 'leading edge threshold' and the 'trailing edge threshold' is called hysteresis.

(Fig. 24) shows the effect of a hysteresis corresponding to half the threshold.

(Fig. 26) gives some details about the discriminator output.

Figure 22: **Standard tail cancellation, hysteresis = 0.**_The first row of figures shows the average number of hits for different peaking times and tubelengths. The muon impacts were randomly distributed over the whole tubelength. The second row shows the minimum pulsewidth (lower curves) and the maximum pulsewidth (upper curves) for different parameters. For a magnetic field of 0.5 T the maximum pulsewidth is about 100ns longer. The bottom figure shows the trailing edge resolution neglecting B-field and propagation time effects. The preamp was assumed to have n\({}_{\overrightarrow{\mbox{p}}}\)._

Figure 23: _A signal from a 5m tube together with the discriminator output signal. Since the threshold is on the lower edge of the ’spiky region’, the trailing edges are immediately followed by another leading edge. A discriminator hysteresis can help a lot to reduce the number of hits. Note that this is a worst case example to illustrate the effect._

Figure 24: **Standard tail cancellation, hysteresis = 0.5 \(\times\) threshold**_For explanation see (Fig. 22). We can get rid of a lot of hits by introducing some hysteresis. The preamp was assumed to have n=2._

Figure 25: **Standard tail cancellation, hysteresis = 0.**_The first histograms shows the discriminator output characteristics. Pulsewidth we call the time when the discriminator output is high. The gapwidth corresponds to the time when the output is low. (Fig. 23). The minimum pulsewidth is 5ns since the discriminator was assumed to have a deadtime of 5ns. Since the minimum pulsewidth of a real pulse is \(>80ns\), a discriminator deadtime up to 80ns would reduce the number of hits without messing up the trailing edge measurement. Still a discriminator hysteresis is a much more effective way to reduce the number of hits. The last histogram shows the number of hits per signal._

Figure 26: **Standard tail cancellation, hysteresis = 0.5 \(\times\) threshold.**_For explanation see (Fig. 25). The individual spikes in the first histogram are due to the fact that signals were only created at discrete distances 0mm, 1mm...14mm._

[MISSING_PAGE_EMPTY:36]

The resolution of the second track is about \(160\mu m\). Adding a second channel would change the deadtime spectrum from a 100ns to 600 ns flat distribution to a 80% efficient deadtime of 100ns.

This corresponds to the separation efficiency of 2 tracks that are perpendicular to the wire, so one can apply this result to particles accompanying the muon track.

The uncorrelated background signals which are responsible for the biggest fraction of the chamber occupancy have a different structure since they are not perpendicular to the wire and in addition, the particle tracks are bent because of the magnetic field. For this reason one has to treat this case separately. Results on this investigation will follow.

At the moment it is not foreseen to implement the second channel for various reasons.

In case we don't install the second channel but get in trouble with high rates at some point we could follow the following scheme:

* We program the 2 pole/zero filters of the first channel to cancel the tail strongly.
* We apply a threshold of about 50 electrons (tp=15ns).
* We use the ADC measurement to correct for the time slewing.

With these settings we could have a double track separation efficiency of 70% to 80% and still get a fairly good space resolution due to the leading edge charge correction. The average number of hits would be about 1.8. Details are are given (Fig. 30).

Figure 28: _Average number of hits for a single track in channel 2._

Figure 29: _To get a high double track separation efficiency one has to raise the threshold which also helps to reduce the number of hits out of which one has to find the second track. The curves on bottom of the plots refer to fake hits. This is the fraction of hits within \(\pm 3\sigma\) of the expected position resulting from spikes of the first signal only._

Figure 30: _Strong tail cancellation with a high threshold for double track separation. For explanation see (Fig. 25). We don’t want any hysteresis in that case since we would like to have all the hits to find to second track._

Conclusions

* The single wire resolution is best for short preamp peaking times (\(\approx 5\)ns) and the lowest possible threshold (15-20 electrons for a gasgain of \(2\times 10^{4}\)). A peaking time of 15ns seems to be a good compromise in terms of resolution and stability.
* A time slewing correction by a leading edge charge measurement (\(t\,p<\) ADC gate \(<2\times\) tp) improves the resolution and makes it 'almost independent' of threshold. It also reduces the resolutions dependence on peaking time.
* The average number of hits per signal assuming a hysteresis of \(0.5\times\) threshold and a discriminator deadtime of 5ns is \(\approx 1.2\) for a preamp peaking time of 15ns and a threshold of \(15-25\) electrons.
* The trailing edge resolution is \(\approx 20\)ns neglecting \(B\) Field effects.
* Applying strong tail cancellation to the signal together with a higher threshold one can reduce the deadtime spectrum from a flat 100ns to 600ns distribution to a 80 % efficient deadtime of 100ns. For a preamp peaking time of 15ns and a threshold of 60-70 electrons we would get about 1.7 hits per single track and 2.7 hits per doubletrack.
* To reduce attenuation of the signal it is very important to aim for the lowest wire resistance which is still compatible with mechanical aspects.

Many thanks to Valeri Tcherniatine (BNL) who was the first to have realistic MDT resolution simulations.

Many thanks to Rob Veenhof for all the discussions and for implementing the electronics features into GARFIELD.

## 7 Resolution and Deadtimes for Simulation efforts

The tables give the explicit resolution numbers for preamp peaking times of 5ns, 15ns and 25ns for wiredistance 0 to 14mm. The distances 0m and 6m refer to the distance of the impact point to the preamp side. Other distances can be interpolated linearly. The baseline at the moment is a peaking time of 15ns together with a single threshold.

To find the deadtime spectrum for the uncorrelated background hits we first have to look at the photon background spectrum (Fig. 31) [17]. The electrons created by the photon interaction are sometimes very high energetic, so they can hit more than one tube. (Fig.32) gives details about the tracks from background hits [17].

The important number for the resulting deadtime are the inner and the outer enveloping radii of the track created by this electron (Fig. 31).

As we see in (Fig. 32) most of the electrons are knocked out of the wall or dump in the wall. To derive the deadtime from the tracklengths we have to look at the rt-relations for different magnetic fields (Fig. 33). A simple parametrization of this set of curves is

\[\begin{array}{c}t(r,By,Bz)=22.14r+1.88r^{2}-0.08r^{3}+r^{2}(0.62By^{2}+0.68*Bz ^{2})\quad ns\\ \mbox{B[T] and r[mm]}\end{array} \tag{6}\]

For Fields \(<1T\) this parametrization is accurate to about 15ns and for fields \(1T<1.5T\) it is accurate to about 30ns.

To reproduce the \(R_{min}-R_{max}\) spectrum from (Fig. 32) the following parametrization isappropriate:

We take a uniformly distributed random number \(x(0,1)\). \(d=r_{max}-r_{min}\) is given by

\[\begin{array}{ll}d=12.86-10.*\sqrt{1.286^{2}-x*2.249}\quad mm&0<x<0.583\\ d=-4.18+x*19.18\quad mm&0.583<x<1\end{array} \tag{7}\]

To convert \(d\) into a deadtime we have to use the parametrization of the rt-relation (6). Since all the tracks come out of the wall or dump in the wall the corresponding deadtime is given by

\[t_{dead}(d,By,Bz)=t(15.,By,Bz)-t(15.-d,By,Bz)+100\quad ns \tag{8}\]

The 100ns correspond to the deadtime resulting from the electronics.

Figure 31: _Photon spectrum for the barrel region. The high energy photons will mostly create Compton electrons. The numbers that determines the deadtime are the outer and the inner enveloping radius of the track created by the electron._

Figure 32: _The first figure shows the number of tubes which are hit by a single background event. For explanation of the other histograms see (Fig. 31). The simulations were done for a magnetic field of 0.4 T._

Figure 33: _rt-relations for different components of the B- field for Ar-N2-CH4 91-4-5, 3 bars, 3270V, 50\(\mu m\) wire._

## References

* [1] Rob Veenhof,GARFIELD, a drift chamber simulation program, Version 5.35, CERN.
* [2] V. K. Ermilova, L.P Kotenko, G.I. Merzon and V.A  Chechin, primary specific ionization of relativistic particles in gases, Sov. Phys.-JETP 29, 861 (1969).
* [3] F. Lapigue and F. Piuz, Simulation of the measurement by primary cluster counting of the energy lost by a relativistic ionizing particle in argon, NIM 175, 297 (1980).
* [4] H.Fischle, J. Heintze and B. Schmidt, experimental determination of ionization cluster size distribution in counting gases. NIM A 301, 202 (1991)
* [5] S. Biagi, MAGBOLTZ, program to compute gas transport parameters, Version 1.10, CERN
* [6] M. Deile, J. Dubbert, N.P. Hessey et al., Testbeam Studies of the gas mixtures Ar:N2:Ch4=91:4:5... ATLAS internal note MUON-NO-122 (1996), CERN
* [7] G. D. Alkhazov, Statistics of electron avalanches and ultimate resolution of proportional counters, NIM 89, 155(1970)
* [8] Landolt-Boernstein, vol.4/3, Eigenschaften des Plasmas,no 44315,6th edn (Springer, Berlin Heidelberg 1957)
* [9] M. Deile, J. Dubbert, N.P Hessey, charge division and intrinsic pulse shaping in drift tubes, ATLAS internal note MUON-NO-105 (1996)
* [10] V. Radeka, Ann. Rev. Nucl. Part. Sci. 1988, 38, 217, 77
* [11] P.W. Nicholson, Nuclear Electronics, John Wiley and Sons
* [12] C.Blocker, J.Huth, J.Oliver, Noise Considerations for the ATLAS Muon Front-End Electronics ATLAS internal note MUON-NO-80 (1995)
* [13] R.A. Boie, A.T Hrisoho and P. Rehak, signal shaping and tail cancellation for gas proportional detectors at high counting rates, NIM 192 (1982).
* [14] Yasuo Arai, Jorgen Christiansen, Requirements and specifications of the TDC for the ATLAS Precision Muon Tracker, ATLAS internal note (1996)
* [15] M. Hill et al., Resolution Studies of a Prototype Set of High Pressure Monitored, ATLAS internal note MUON-NO-121 (1996)
* [16] E.Hazen, J. Shank, Status of the Front End Electronics for the MDT System, ATLAS internal note MUON-NO-111 (1996).
* [17] A. Ferrari, INFN-Milan, private communication
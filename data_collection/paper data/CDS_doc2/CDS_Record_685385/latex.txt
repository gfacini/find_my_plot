Atlas

LARG internal note

May 2002

**The LArg Tower Builder Board:**

**calculation, simulation, measurements**

P. Borgeaud, X. de la Broise, E. Ferrer Ribas, A. Le Coguie,

B. Mansoulie, J. Pascual

Abstract

_The Tower Builder for the ATLAS electromagnetic calorimeter is in charge of summing the samplings in depth in a trigger tower of transverse size \(\mathbf{Dh}\) ^ - \(\mathbf{Df}\)\(=\) 0.1 ^ 0.1. In this document we show that the Tower Builder fulfils its requirements in terms of output signal shape, noise and saturation behaviour. Studies on test bench and test beam are compared to analytical calculations and Spice simulations of the trigger chain._

[MISSING_PAGE_EMPTY:2]

Introduction.

The aim of this note is to show that the Tower Builder Board (TBB) fulfils its requirements in terms of output signal shape, noise and saturation behaviour. For this purpose measurements on test bench and test beam have been compared to analytical calculations and Spice simulations of the trigger chain. These comparisons have led, on one hand, to the final calculation of the final components of the poles zero, in order to shape the signal of the 4 samplings in depth to a signal of _35 ns_ peaking time and, on the other hand, to calculate of the components of the two amplification stages. Moreover the noise and the saturation behaviour of the chain have been studied thoroughly and they are shown to fulfil design requirements.

Trigger towers are formed in three stages: the first level is done by the linear mixer designed in the shaper. It sums the four calorimeter signals processed by the chip; the second stage is done on the FEB by the layer sum boards (LSB) that sum the outputs of the linear mixers belonging to the same layer within the same trigger tower; finally, the last stage is performed by the tower builder which sums the different depth layers. A scheme of the chain is shown in figure 1.

In Section 2 the Tower Builder Board is described and its requirements discussed. In Section 3 the test bench and test beam environment are described. The analytical calculation and comparisons with the test bench and test beam measurements are presented in Section 4. A numerical method using Spice software are presented and compared to measurements in Section 0. Section 6 is devoted to the final calculation of the final TBB components taking into account the comparisons of measurements to the analytical calculations and to Spice simulations. Section 7 and 8 are dedicated to saturation and noise studies.

Figure 1: Schematic diagram showing the summing stages in the LAr Level-1 trigger chain. “Strip layer”, “pad layer 1” and “pad layer 2” stand for “Front”, “Middle” and “Back” respectively.

Description and requirement of the

Tower Builder Board.

The TBB is in charge of adding the energy in a trigger tower over the samplings in depth (Presampler, Front, Middle and Back) with a transverse size of \(\textbf{{Dh}}\) ^ _DF = 0.1 ^ - 0.1 (0.2 ^ 0.2 for rapidities above 2.5)_[1]. In each trigger tower there are a total of 60 (electromagnetic barrel) readout cells as can be seen in figure 2. The granularity of the trigger towers in the LAr electromagnetic calorimeter varies with rapidity and there is one region of overlap between the barrel and the endcap [2].

The structure of the calorimeter constrains the allocation of calorimeter signals to tower builder boards. In the barrel, each tower builder board handles 30 towers from a region of \(\textbf{{Dh}}\) ^ _Df = 1.5 ^ 0.2_. Fifteen trigger towers corresponding to \(\textbf{{Dh}}\) ^ _Df = 1.5 ^ 0.1_ are grouped on a single 16-way cable for transmission to the Level 1 cavern. The granularity of the trigger towers in the end cap is not uniform. For _1.4 \(<\) |h| \(<\) 2.5_ the granularity is \(\textbf{{Dh}}\) ^ _Df = 0.1 ^ 0.1_ and while for _2.5 \(<\) |h| \(<\) 3.1_ it is \(\textbf{{Dh}}\) ^ _Df = 0.2 ^ 0.2_ to match the hadronic endcap and for _3.1 \(<\) |h| \(<\) 3.2_ it is \(\textbf{{Dh}}\) ^ _DH = 0.1 ^ 0.2_.

Transverse energy is the important quantity for the first level trigger and the signal delivered should be proportional to _Et_ with saturation at or above _256 GeV_. The precision is limited to _5 %_[1]. The output Tower Builder signal should have a peaking time of _35 ns_ within a few _ns_[2].

Conversion of the calorimeter signal into transverse energy is done in two stages. A rough correction is done at the calorimeter front end, where the gain of the linear mixers can be switched between \(1\) and _3.5_ depending on the rapidity of the channel. Final adjustment is done in the TBB. A diagram of the complete board can be seen in figure 3. The Pole Zero is in charge of modifying the input signal to a signal of _35 ns_ peaking time and the two amplification stages to normalize the signal to _3 V_ for _Et = 256 GeV_. The noise is expected to be less than _400 MeV_ per trigger tower at the chain output at \(\textbf{{h}}=0\)_[1] and saturation signals amplitude should not be below _3 V_. These requirements are summarised in table 1.

The gains, shapes and timings need to be adjusted between the various layers in depth in order to sum the energies correctly. To achieve this, the input signals of the TB need to be predicted accurately to determine the components that will provide the different adjustments in shape and time. The inputs pulses are very different due to:

Figure 2: Schematic view of a trigger tower.

* the changing granularity with depth : this gives rise to different cell sizes and therefore different detector capacitances. The detector capacitances as a function of \(\mathbf{h}\) and sampling are shown in the appendix A;
* the changing geometry in \(\mathbf{h}\): for the barrel, the thickness of the absorber changes with \(\mathbf{h}\), changing the sensitivity (\(I_{0}(\mathbf{m}\mathbf{t})\) / \(E\)(_GeV_) and for the endcap, the gap increases with the radius and so does the \(t_{dr}\).

To take into account these factors and optimize the overall gain, the amplifiers gain will also depend on the sampling and on \(\mathbf{h}\) position. And as said earlier, the gains of linear mixers can be switched between \(1\) and _3.5_ depending on \(\mathbf{h}\). A summary of the most important parameters as a function of \(\mathbf{h}\) for the barrel and the end cap region is given in table 2.

The shape adjustments will be done by a pole zero and the gain adjustments by two amplification stages as can be seen from figure 3.

\begin{table}
\begin{tabular}{|c|c|} \hline
**Shape and amplitude** & Peaking time = 35 ns \\ (TBB output) & 3 V for E\({}_{\mathrm{T}}\) = 256 GeV \\ \hline
**Noise and saturation** & Noise / trigger tower \(<\) 400 MeV \\ (trigger chain output) & Saturation signals amplitude \(>\) 3 V \\ \hline \hline \end{tabular}
\end{table}
Table 1: Summary of the Tower Builder requirements.

Figure 3: Schematic diagram of the Tower Builder Board.

## 3 Test bench and Test beam environment.

Many measurements in configurations close to final conditions have been performed in order to characterize the trigger. In this section the test bench and test beam setups will be described and precisions will be given when the components are not in their final version.

### Test bench.

The test bench is a simplified version of the trigger chain. A schematic diagram can be seen in figure 4. The liquid Argon gap is described by a capacitor between the absorber and the readout electrode. The injected signal is a triangular signal with a \(t_{d\nu}\) comparable to _450 ns_. The trigger chain components, preamplifier, shaper (version V3) and LSB are standard versions. The TBB used version is shown on figure 3. The cable was a prototype version with the same properties (attenuation, propagation time) as the final version. The receiver used is not the final version, a diagram is shown in the appendix B. The measurements were done in all possible configurations taking into account the \(C_{d.}\) the preamplifier type, shaper gain and LSB gain as a function of \(\mathbf{h}\).

### Test beam.

The beam tests of the two barrel and end cap modules were carried out on CERN's H8 beam line during the summer 2001. Measurements were taken during scanning of the barrel M13 and M15 with electrons of energies ranging from _10_ to _245 GeV_. Calibration

\begin{table}
\begin{tabular}{|c|c|c|c|c|c|c|} \hline \hline
**Sampling** & **\(\mathbf{\hbar}\)region** & **tdr** & **Sensitivity** & **Type of PA** & **Shaper** & **LSB** \\  & & **(ns)** & **(m\(\mathbf{\hbar}\)GeV)** & **(k\(\mathbf{\hbar}\))** & **gain** & **gain** \\ \hline
**Presampler** & \(0<\eta<0.8\) & 420 & 0.7-0.9 & 3 & 1 & 2 \\  & \(0.8<\eta<1.4\) & 420 & 0.6-0.8 & 3 & 1 & 2 \\  & \(1.4<\eta<1.8\) & 425 & 0.8 & 3 & 1 & 2 \\  & \(1.8<\eta<2.5\) & 425 & 0.8 & 3 & 1 & 2 \\  & \(2.5<\eta<3.1\) & 425 & 0.8 & 3 & 1 & 2 \\ \hline
**Front** & \(0<\eta<0.8\) & 450 & 2.7 & 3 & 1 & 1 \\  & \(0.8<\eta<1.4\) & 450 & 3.1 & 3 & 1 & 1 \\  & \(1.5<\eta<1.8\) & 412-557 & 2.4 & 3 & 1 & 1 \\  & \(1.8<\eta<2.5\) & 206-451 & 2.4 & 3 & 1 & 1 \\ \hline
**Middle** & \(0<\eta<0.8\) & 450 & 2.7 & 1 & 3 & 1 \\  & \(0.8<\eta<1.4\) & 450 & 3.1 & 0.5 & 3 & 1 \\  & \(1.4<\eta<1.8\) & 475-600 & 2.4 & 0.5 & 3 & 1 \\  & \(1.8<\eta<2.5\) & 216-466 & 2.4 & 0.5 & 1 & 1 \\  & \(2.5<\eta<3.1\) & 353-556 & 1.9 & 0.5 & 1 & 1 \\ \hline
**Back** & \(0<\eta<0.8\) & 450 & 2.7 & 1 & 3 & 1 \\  & \(0.8<\eta<1.4\) & 450 & 3.1 & 1 & 1 & 1 \\  & \(1.4<\eta<1.8\) & 480-592 & 2.4 & 1 & 1 & 1 \\  & \(1.8<\eta<2.5\) & 257-497 & 2.4 & 1 & 1 & 1 \\  & \(2.5<\eta<3.1\) & 384-600 & 1.9 & 1 & 1 & 1 \\ \hline \hline \end{tabular}
\end{table}
Table 2: Summary of the relevant parameters for the prediction of TB pulse shapes as a function of sampling and \(\mathbf{\hbar}\).

measurements were also taken to study the saturation behaviour of the trigger chain during the cold test of the barrel module 13. A complete description of the test beam setup can be found [4]. Here only the details relevant for the tower builder testing will be discussed.

The test beam Front End Electronics were final except for the radiation hardness. However, for practical reasons the shaper gains were constant (_3.5_ instead of \(1\) or _3.5_ depending on \(h\) position). Only half of the Front-End Boards were equipped with Layer Sum Boards (Feedthrough-1) and only one 70 m (out of two to equip one TBB) cable was available. Therefore measurements could only be physically recorded during the scanning of the bottom quarter of the module.

A diagram of the Receiver version used is given in the appendix B. The 70 m cable was a prototype version. However its intrinsic properties (like the cable attenuation and transmission time) should not be changed in the final version.

A schematic diagram of the setup is shown in figure 5.

## 4 Analytical model of the system.

In this section, the system is modelled with an analytical description of the trigger chain by modelling each component by a transfer function. This basic model aims at reproducing the signal shapes by adjusting relevant parameters of the electric chain to fit measured pulses in test bench. It is important to verify that the model reproduces well the output LSB pulses as these predicted pulses will be the input for the calculation of the poles zero and the two amplifier stages in the Tower Builder.

### Description of the analytical model.

The electrical model for one sampling of the LArg calorimeter is given in figure 1. The detector cell is represented as a capacitance, \(C_{d}\). The signal caused by ionization in the detector is equivalent to a triangular current source at the input of the capacitor. Its Laplace transform is:

\[\mathbf{L[T_{phy}]~{}(s)~{}=~{}\mathbf{T^{0}}_{phy}\left(\frac{1}{s}-\frac{1-e ^{-s~{}tdr}}{t_{dx}s^{2}}\right)}\]

Figure 4: A schematic diagram of the Test bench setup measurements.

The preamplifier is linear with an input impedance \(R_{0}\), and the shaper has a shaping time \(t\). Their transfer functions can be written as follows:

\[\textbf{H}_{\textbf{pa}}\ \textbf{(s)} =\frac{\textbf{1}}{\textbf{1}+\textbf{C}_{\textbf{d}}\ \textbf{R}_{0}\ \textbf{s}}\] \[\textbf{H}_{\textbf{ah}}\ \textbf{(s)} =\frac{\textbf{r}}{\textbf{(1+r\ \ s)}^{2}}\]

The tower builder will integrate or differentiate the signal in order to normalize the peaking time to _35 ns_ so its transfer function will be given by:

\[\textbf{H}_{\textbf{tb}}\ \textbf{(s)} =\frac{\textbf{1+c\ \textbf{s}}}{\textbf{1+d\ \textbf{s}}}\]

where \(c\) and \(d\) will be functions of the values of the resistor and capacitors used in the poles. Then the output of the Tower builder will be driven to the receiver that will integrate the pulse of a time _rec_:

\[\textbf{H}_{\textbf{noc}}\ \textbf{(s)} =\frac{\textbf{1}}{\textbf{1+rec\ \textbf{s}}}\]

The response of the system will be given by:

\[\textbf{Response}=\textbf{G}_{\textbf{sh}}\times\textbf{G}_{\textbf{lab}} \times\textbf{G}_{\textbf{tb}}\times\textbf{att}\times\textbf{H}_{\textbf{ pa}}\times\textbf{H}_{\textbf{sh}}\times\textbf{H}_{\textbf{tb}}\times\textbf{H}_{\textbf{noc}}\]

\(G_{\textbf{sh}}\) is the gain due to the two amplification stages in the tower builder and _att_ is the attenuation of the delay line in the Tower Builder Board.

The model was confronted to test bench measurements at the output of the LSB and the pulses predicted analytical pulses were seen to be too fast compared to test bench measurements. In order to have a better agreement an extra pole with a parasitic capacitance was included at the level of the Preamplier:

\[\textbf{H}_{\textbf{par}}\ \textbf{(s)} =\frac{\textbf{1}}{\textbf{1}+\textbf{C}_{\textbf{f}}\ \textbf{R}_{\textbf{f}}\ \textbf{s}}\]

where \(C_{\textbf{f}}\) is the parasitic capacitance and _Rf_ is the preamplifier impedance. The parasitic capacitance was adjusted for the different type of preamplifiers.

After measuring or adjusting the different parameters, the final configuration of the parameters used in the analytical calculations for the barrel trigger chain is shown in table 3.

Figure 5: A schematic diagram of the setup for Tower Builder measurements at the test beam.

[MISSING_PAGE_EMPTY:9]

negligible and show the limitations of this method and the need for a more sophisticated method, like SPICE. Nevertheless with a simple method a reasonable agreement has been obtained for the different configurations. Moreover with this method the pole correction can be calculated easily with the parameters described in table 3.

### Comparison with test beam measurements.

The interest of test beam is to check that the calculated correction poles were acting as expected in real conditions. The output of the tower builder gives out the sum of the four samplings. However, it was chosen to record mainly pulses shapes coming from individual samplings using the shapers switches that allow selecting a given layer. In this way, it is possible to identify any misfunctioning per sampling that would be smeared in the sum output. We aimed to cover the maximum possible \(\mathbf{h}\) positions to check the correction poles at every position.

An example of pulses recorded at the Front and the Middle sampling is shown in figure 8. It can be observed that for a same \(\mathbf{h}\) position the amplitude varies quite a lot. This effect comes mostly from the energy fluctuations due to the fluctuation of shower development in depth and from the \(\upmu\)pion contamination in the beam (bigger fluctuations). It can be deduced that in these conditions and with the limited number of pulses recorded at each position and per sampling, these pulses can not be used for an amplitude study. A systematic study of the behaviour of the pulses in time as a function of \(\mathbf{h}\) will be shown for the Front and Middle sampling. The study has not been done for the Presampler and the Back samplings: the energy deposition amplitudes are of the order of a few \(mV\) only) is very low in these two samplings as the bulk of the energy is deposited in the Front and the Middle sampling (_95 %_ at \(\mathbf{h}=\) _0.3_ for example).

Pulses shapes for pseudorapidities between \(0\) and _1.1_ were recorded for the Front and the Middle samplings (combining the measurements from the July and October test beams) allowing to study the behaviour of the pole corrections for nearly all towers of the barrel. figure 9 shows the difference in peaking time observed between the analytically predicted and test beam pulses shapes as a function of **h** for the front and the middle samplings at the output of the Receiver. For the middle, the difference in time seems to be constant for **h** values less than _0.8_ and _*2 ns_ below for **h** values greater than _0.8_. It can be seen that the differences, for both front and middle are stable as a function of **h** (within _*2 ns_) and vary always in the same direction (the predicted pulses are faster than test beam pulses), allowing easily a correction for the final version. The maximum differences are of _6 ns_. If we compare these results to the differences measured using test bench pulses, figure 10 is obtained. In this figure the differences in time are expressed as functions of capacitance in order to superimpose easily the results from test bench. It can be observed that the differences in time between test bench pulses (compaired to analytical predictions) and test beam pulses (compaired to analytical predictions) agree within _*3 ns_.

Figure 8: Examples of pulses recorded at the test beam for the Front and the Middle samplings at two cell positions corresponding to pseudorapidities of _1.025_ and _1.050_.

#### 4.3.1 Effect of a misalignment in time on the energy estimate from Montecarlo simulation.

In order to have a rough estimate of the effect of a misalignment in time (due to a non perfect pole zero compensation) between signals coming from different layers on the estimate of the energy a simple simulation has been done. In this simulation it has been assumed that the full energy was deposited in only two samplings (front and middle), instead of four, misaligned of _10 ns_. The fraction of energy deposited per sampling has been fixed to \(20\pm 10\,\%\) in the front and \(80\pm 10\,\%\) Middle, a realistic case and to \(50\pm 10\,\%\) in the front and \(60\pm 10\,\%\) Middle to consider an extreme case where the effect on the estimation of the energy is expected to be larger. The energy has been simply estimated as:

Figure 9: Time differences \(\mathbf{D}=t_{5\text{-}100\,\%}\)\(\bullet\)\(t_{5\text{-}100\,\%}\)\(\bullet\)\(t_{5\text{-}100\,\%}\) obtained from comparing test beam analytical predicted pulses for the Front and Middle samplings as a function of \(\mathbf{h}\).

\[\mathbf{E}=\sum_{\mathbf{i}}\mathbf{w_{i}}\ \mathbf{a_{i}}\]

where \(a_{i}\) are the amplitudes sampled at _25 ns_ and \(\mathbf{w}_{i}\) are the weights of each sampling (fixed as white noise weights). The distributions of the total energy are given in figure 11. It can be observed, from the distribution width, that the biggest error on the estimation of the energy happens in figure 11b (with the extreme considerations for the energy sharings) and it can be estimated of the order of _2 %_. This is encouraging as the misalignment considered is of _10 ns_, and the differences that we actually see of measurements with respect to predictions are of the order of 5 _ns_. It can then be extrapolated that these misalignments will produce a maximum energy uncertainty of _1 %_. This is well within the specifications,

[MISSING_PAGE_EMPTY:14]

noise evaluation. The model has been refined several times after comparison with measurements. It can then be used for systematic studies that measurements do not allow easily, or for configurations that cannot be reproduced with our benches.

### Comparison with test bench pulses.

Measurements have been done on our test bench in various configurations, covering all the range of the physical parameters values (particularly the detector capacitance, for every layer and \(\mathbf{h}\) values). As mentioned above, the model was adjusted several times.

At the end of this process, figure 13 shows the final differences between our simulation and our test bench measurements, in the six possible configurations of the chain, and for various values of capacitances covering their range of variation. The maximum of this difference is about _2.5 ns_ in peaking time and _3 %_ in amplitude (a little more in a few exceptional cases).

Differences between our test bench (which is the reference of the mathematical model) and the final configuration in Atlas.

Another aspect, that gives to the Spice simulation all its interest, is that our test bench is not exactly identical to the final trigger chain, and that the Spice model can take this into account. The two main differences are first the shape of the input signal, and second the connection between the detector and the Front End Crate (FEC).

Figure 12: Block diagram of our Spice model. The chain contains : one Injection cell (including detector capacity and equivalent inductance), the cable between the detector and the crate, the Front End Board trigger chips (0T preamplifier, Shaper, Layer Sum Board) the cable modelling the crate Back Plane, one Tower Builder Board channel, the 70 m cable joining the crate and the Receiver, and one Receiver channel. In each block appears the parameters that depend on the layer (presampler, front middle or back) and on \(\mathbf{h}\).

#### 5.3.1 Shape of the input signal.

Contrary to the physical signal in the detector, the signal injected in the test bench is not a perfect triangle signal rising in a few nanoseconds and with a drift time of _450 ns_. The injected signal stays constant about _30 ns_ before decreasing. The Spice simulator allows to evaluate the consequences of this difference on the chain output signal.. After simulation, we have noticed an increase of _3.7 %_ of the peak amplitude and _2.5 ns_ of the peaking time at the chain output, when passing from the perfect signal to the one used in our test bench. So these differences need to be taken into account in the final calculation of TBB components.

#### 5.3.2 Connection between the detector and the FEC.

The second difference between our test bench and the final configuration concerns the connections. In the calorimeter, one detector cell is connected to the FEC by three cables, of different characteristic impedances, and linked together by different of Feedthrough connectors (see figure 15A). These cables are the "Cold Cable" from the Mother Board up to the Cold Feedthrough (_25_ or _50 W_), the "Vacuum Cable" up to the Warm Feedthrough (_33 W_), and the "Warm Cable" up to the FEC (_33 W_). The impedance of the Feedthrough connectors is _50 W_, and the impedance of the FEC connector is _75 W_. Moreover, the length of the "Cold Cable" changes with \(h\) and with the detector layer (from _1.1 m_ to _4.4 m_ in the barrel).

Figure 13: Error in amplitude (“_Diff. amp._”) and peaking time (“_Diff. Tpeak_”), according to the detector capacitance (“_Cal\({}_{\textit{test}}\)_”), between simulation and measurement on our test bench. This calculation is made for every of the six possible configurations of the trigger chain (see the six zones), depending on \(h\) and the layer. The parameters corresponding to the five configurations are regrouped in column “_Parameter’_, and the range of variation of the detector capacity in every part of the detector in column “_Cd\({}_{\textit{test}}\)_”.

These cables induce two kinds of effects :

* The multiple changes of impedance of cables and connectors induce reflections deforming the signal differently depending on the length of the "Cold Cable".
* The skin effect of the cable induces attenuation of high frequencies, depending on the length and on the temperature of the cable.

In our test bench, these cables and connectors are replaced by a unique 2 m cable at room temperature. It is then necessary to evaluate the influence of this change to decide

Figure 14: Simulated output signal coming from one cell of the middle layer, at _h = 0.0, 1.0 and 1.3_, using the three different models. The delay between the \(C\) pulse and the \(A\) and \(B\) pulses is due to the difference of the total length of these cables. Arrows indicate the deformation due to reflection effects.

Figure 15: Our three different models of connection system. The model \(A\) is closest to reality : reflection and skin effects are taken into account. The model \(B\) artificially eliminates the reflection effects ; only the skin effect is kept. The model \(C\) reproduces our test bench configuration with one 2 m “warm” cable (whereas the lengths of the cables of the \(A\) and \(B\) models are the definitive ones).

whether these effects should be taken into account in our simulations. To this end, three different Spice model have been considered (figure 15A-C).

\(\bullet\) The model \(A\) is the closest to reality : all cables (at nominal length depending on \(\mathbf{h}\)) and connectors are integrated in the model, taking into account the reflection effects of the skin effect.

\(\bullet\) The model \(B\) eliminates the reflection effects of the Warm and Vacuum cables and their connectors by artificially replacing it by only one cable (at nominal length) without connectors. So only the skin effect is kept.

\(\bullet\) At last, the model \(C\) reproduces our test bench configuration with one 2 m "warm" cable.

Figure 14 is a good illustration of the effect of the final cables and connectors on the pulses shape. As an example, it shows versus time the simulated output signal coming from one cell of the middle layer, at \(\mathbf{h}=0.0\), \(\mathbf{h}=1.0\) and \(\mathbf{h}=1.3\), using the three different models described above. Two comments can be done :

\(\bullet\) The reflection effects are particularly visible comparing the simulations \(A\) and \(B\) : one deformation seems to move toward the signal peak as \(\mathbf{h}\) increases. This is due to the fact that the cable length decreases, and therefore the echo arrives earlier.

\(\bullet\) The comparison between simulations \(B\) and \(C\) shows the skin effect on the pulse shapes. The differences of cable temperature and length between the two simulations induce different attenuation of high frequencies (the attenuation decreases with temperature, and increases with length). This induces differences of peak amplitude visible on the figure, and differences of peaking time that can be evaluated.

Indeed this study has been extended to all towers of the barrel calorimeter, focusing on two parameters calculated from the pulse shape : the peaking time and the peak amplitude of the signal. For example figure 16a shows, for the Middle layer, the difference of peaking time between the \(A\) or \(B\) simulations (i.e. final configuration with or without connectors) with \(C\) simulation (i.e. the test bench configuration). Figure 16b shows the same differences but for the relative peak amplitude. On both plots, the length of the final cable has been represented to show the correlation of the length and the magnitude of these differences.

Some conclusions can be drawn from these two plots :

\(\bullet\) First the difference between the \(A\) and \(B\) simulations increases with \(\mathbf{h}\). This is due to the fact that, as already mentioned, the echo moves toward the signal peak as \(\mathbf{h}\) increases, modifying its amplitude and its shape.

Figure 16: For all the barrel towers of the middle layer, the plot \(a\) shows the difference in peaking time between the \(A\) (diamonds) or \(B\) (squares) models (i.e. the final configuration with or without connectors), and the \(C\) model (i.e. the test bench configuration). The plot \(b\) is the same with the relative difference of peak amplitude. In each case, the final cable length (dotted lines) is also represented.

* Second, except for very high values of \(h\), the differences on peaking time due to reflections and to the skin effect are small, whereas the differences on peak amplitude can be important.
* Third it is nevertheless possible to recognise the peaking time step of _1.5 ns_ observed when comparing the analytical calculation to test beam measurements (figure 9). It can be thus concluded that the observed differences were probably due to the skin effect.

#### 5.3.3 Control of Spice model with test beam.

The consequences of the differences between our test bench and the final configuration are confirmed when comparing the simulations including all these elements with the _test beam_ measurements. Indeed figure 17 shows these differences in peaking time for the Middle and Front layers as a function of \(h\). The differences are small, particularly for the Middle layer where most of the energy is deposited, and about the order of the measurement precision (_2 ns_). These differences were more important when the same comparison was done with the analytical model (figure 9), which does not take into account the differences between our test bench and the final configuration. So it is necessary to include these effects in our method of calculation of the components.

## 6 Calculation of the final components.

On one hand the Spice model has two advantages comparing to the analytical model :

* its precision is intrinsically better ;
* and it can take into account the non-negligible differences between our test bench (which is the reference for the adjustment of our models) and the final configuration of the trigger chain.

On the other hand, only the analytical model can give a direct analytical relation between the value of the components to be fixed (the "variable" components), and the required shape of the output signal.

Figure 17: Difference of peaking time between Spice simulation and test beam measurements as a function of \(h\), for Middle (squares) and Front (diamonds) layers.

In order to take advantage of the two models, we have decided to calculate the final components of the TBB by applying the corrections obtained with the Spice model to the analytical method. This is done in four steps :

\(\bullet\) The analytical model is used to calculate the value of the "variable" components of the TBB in order to fulfil the requirements : _35 ns_ of peaking time for the output signal, and _3 V_ of peak amplitude for one _E\({}_{T}\) = 256 GeV_ input signal.

\(\bullet\) The value of these "variable" components is integrated in our Spice model in the final configuration, and a simulation is done with an injected signal of _E\({}_{T}\) = 256 GeV_. The model \(B\) - which takes into account only the skin effect - is used instead of the model \(A\) - which takes also into account the reflections. The reason is that reflections induce local deformations of the signal (as seen in figure 14) that cannot be compensated by the TBB _zero poles_, which act on the whole of the signal. So if we tried to compensate for these local deformations when they are close to the signal peak, then we would improve the value of the central sampling taken by the ADC at the output of the trigger chain, but we would debase the value of the four others. So the correction would not be appropriate.

\(\bullet\) The differences in terms of peaking time and relative peak amplitude are then calculated between the aimed values (_35 ns_ and _3 V_) and the values obtained by the Spice simulation.

\(\bullet\) Finally the analytical model recalculates the "variable" components applying the correction given by the Spice simulation on the aimed values (_35 ns_ and _3 V_).

Figure 18 shows such corrections, in peaking time and in relative amplitude, evaluated with the Spice model and applied to the analytical model, as a function of \(h\) for the Middle layer. The difference of peak amplitude is about _4 %_ for small \(h\), identified notably as the difference between the imperfect test bench injected signal and the perfectly triangular physics signal. For large \(h\), the difference increase due to the influence of the Cold Cable skin effect. This effect goes in opposite directions to the one shown by the squares of figure 16b, because a simulation error in one direction induces an overcompensation once the components are calculated from this simulation, and finally the error is in the opposite direction. Concerning the peaking time, part of the difference comes again from the imperfect test bench injected signal (again it can be observed that the small step due to skin effect is inverted when comparing to the differences shown by the squares on figure 16a for the same previous reasons).

By this method the final values of the "variable" components are calculated to the best possible precision. All their final values are brought together in the annexe 3.

Figure 18: Difference of peaking time (squares and left axis) and peak amplitude (diamonds and right axis) between Spice simulated values (using the components predicted by the analytical method in first iteration) and aimed values (_35 ns_ and _3 V_).

Level-1 trigger saturation.

The trigger chain is designed to deliver a signal rising linearly with transverse energy up to _3 V_ at _256 GeV_, and for energies above this value the signal should not decrease below _3 V_. The behaviour of the saturation is controlled by placing operational amplifiers with clamping at all amplifying stages of the trigger chain. However despite this, due to the presence of the shapers that behave like a derivative of the signal, the increasing signal at the chain output is not _a priori_ assured (see figure 19). In some configurations, the signal amplitude at saturation (when _E\({}_{T}\)_ is beyond _256 GeV_) could be lower than the signal amplitude for _E\({}_{T}\)_below _256 GeV_, and that could induce trigger errors.

This type of behaviour would be totally unsuitable for a trigger system and it is important to verify that our trigger system does not suffer from it. In the next sections the saturation will be studied using three tools : our test bench, the test beam module, and our Spice model.

### Measurements on test bench.

Our test bench is the natural tool to verify the behaviour of the chain in saturation mode : it allows to measure the signal at different points of the chain, and to explore different configurations and saturation types. In particular, it is possible to shift the point of first saturation in the trigger chain (on 0T preamplifier, shaper, LSB or TBB) by modifying the injection configuration. It is for example possible to increase the number of 0T preamplifiers connected up with the shaper, or to increase the LSB gain, and so to saturate respectively the shaper or the LSB before the other components. It has been verified that in all possible configurations (input energy, number of cells, **h**), and at every point of the chain, the behaviour in saturation is well understood.

Then it is necessary to control that in all cases the amplitude at the chain output is linear up to _256 GeV_, and next that it does not decrease below its value at _256 GeV_. More precisely, the important parameter is the amplitude finally digitised by the ADC at the chain output. These ADC take five samples of the signal at _25 ns_ interval, which are used to

Figure 19: Diagram of the possible undesirable behaviour of saturated signals. Non saturated signals (_E\({}_{T}\) < 256 GeV_) are represented by dashed line, whereas saturated signals (_E\({}_{T}\)> 256 GeV_) are represented by solid line. : Both signals at the input of the shaper. : Signals at the output of the shaper behaving like a derivative of the signal. : A possible signal shape after the shaping of the TBB and the receiver – the amplitude of the saturated signal is smaller than the amplitude of the non-saturated signal, inducing trigger error (it is even worse if the signal is sampled at a fixed time : at the peak middle, the saturated signal can give _0_).

estimate the transverse energy received by one tower. So the behaviour of these samples when saturation increases should be carefully studied.

We assume that the signal is sampled five times with the third sample at signal maximum and 25 ns between samples (see figure 20). The evolution of the amplitude at these five samples is measured when the injection, and thus the energy, is increasing. As an example, figure 21 shows one of these plots measured when the signal is injected in one unique cell of the middle layer, at **h** = _0.3_. Figure 21a represents the receiver output signal versus time for increasing energies (the _256 GeV_ reference signal is in bold line, and the five sample placed as previously explained are in dotted lines). This figure is used to calculate the figure 21b, which represents, versus energy, the signal amplitude at each sampling time.

We can extract from this figure some conclusions. First the amplitude of all the samples is linearly rising up to _256 GeV_, and so the linearity requirement is satisfied. Second, the amplitude of the two first samples (sample \(1\) and \(2\) on figure 21b) is monotonously rising with energy ; this is natural as they belong to the rising edge of the signal, which is not modified by saturation conditions. Third the amplitude of the three last samples (samples \(3\), \(4\) and \(5\) on figure 21b) is rising up to about _600 GeV_, and is decreasing above this value. This is explained by the fact that the signal width decreases when strong saturation occurs (see figure 21a), as predicted by the derivative behaviour of the shaper (see figure 19). But most importantly the amplitude of the central sample (sample \(3\) on figure 21b) does not decrease below its value at _256 GeV_, with energies above _256 GeV_. Therefore this sample can be used to determine whether or not saturation has occurred : if its amplitude is greater than its value at _256 GeV_, then we can assert that the energy received by the tower is greater than _256 GeV_.

Figure 20: The receiver output amplitude versus time when _E_\({}_{T}\) = _256 GeV_ (middle layer, \(\eta\) = 0.3). The position of the five samplings for digitisation (numerated \(1\) to _5_) are shown in dotted lines.

### Measurements in calibration on test beam module.

The saturation behaviour can be also monitored by using the calibration on the test beam module. Calibration signals corresponding to increasing energy has been injected, and the signal shape has been measured at the receiver output.

Figure 21: _a)_ Receiver output signal, versus time, measured for increasing energies on our test bench (the _256 GeV_ reference signal is in bold line, and the five sampling instants in dotted lines). _b)_ Evolution of the five sample amplitudes versus energy, extracted from figure \(a\) measurements (the points of figure \(b\) are the intersection between solid lines and dotted lines of figure a). _N.B._ : The Receiver’s gain is _0.73_, instead of \(1\) in final the Receiver, reason why the amplitude of sample \(3\) for _256 GeV_ is not _3 V_, but _1.9 V_.

An example of the obtained signals are shown on figure 22. These calibration curves cannot be directly compared to our test bench measurements for three reasons.

\(\bullet\) First the injected calibration pulses are exponential instead of triangular as the physical injection. This explains the negative behaviour of the pulses compared with figure 21a.

\(\bullet\) Second, for practical reasons, the measurements were not recorded when the calorimeter module was in a liquid argon bath, but in air, and therefore the detector capacitance were not at nominal values and the TBB zero pole cancellations were not perfect.

\(\bullet\) Third the TBB used in the test beam had no clamping of the output pulses. Indeed this board was equipped with AD8011 operational amplifier instead of the HFA1135 chosen for the final version, which has a clamping switch. This shows up as the increase of the width of the positive part of the pulses with the energy.

But taking all these remarks into account, the behaviour of these signals is as expected ; no surprising difference with test bench measurements has been noticed.

### Simulation.

All the measurements we have presented above implied signals coming from only one or four calorimeter cells. But the real detector and its electromagnetic showers implies many different cells. This modifies the global behaviour of the trigger chain in saturation because the output signal is then the sum of signals which can be more or less saturated, or not saturated at all.

But it would be difficult to reproduce these conditions on our test bench, because of the number of implied cells, and because the energy repartition between the layers is complex and energy dependent. We use our Spice model of the Level-1 trigger chain to take into account realistic conditions.

Figure 22: Receiver output signals for increasing calibration signals, measured on test beam module. Standard calibration pulses 4 middle channels together in a tower, so DAC = 4000 calibration signal correspond to \(E_{T}=\) _* 56.5 GeV = 226 GeV._

#### 7.3.1 Model control : simulation of the saturation of one cell.

The first step before going further is to ensure that our Spice model is in agreement, for saturation, with the simple configurations that can be produced by our test bench (with a unique cell). To this end many configurations have been tested : different layers, and different values of \(\mathbf{h}\) corresponding to extreme capacitances of the calorimeter. In figure 23 some examples of a comparison between Spice simulation (light lines) and test bench measurements (bold line) are shown versus time for the \(\mathbf{h}=\) _0.9_ trigger tower. There is a good agreement between simulation and measurements (it is a little less true at very high energies). Our model can therefore be extrapolated to more complex configurations (multi-cells configurations).

#### 7.3.2 Electromagnetic saturating shower : multi-cells simulation.

When an electromagnetic shower occurs in the calorimeter, it induces signals in numerous cells of the presampler, front, middle and back layers. The amplitudes of these signals are not identical, but depend on the layer and on the transverse position of the cell in relation to the shower axis. To simulate it with Spice, it is necessary to introduce this elements in the model.

_Model._

We first need the energy distribution in the four layers versus the total energy and \(\mathbf{h}\). Data from Monte Carlo simulations and giving these values for a set of total energy values are available (figure 24). But what we need for our Spice model is one function that gives these data for _every_ energy and \(\mathbf{h}\) values, to be sure to explore the maximum of possible configurations. To obtain this function, we start from the parameterisation2

Figure 23: Comparison between signals measured on our test bench (bold lines) and simulated (light lines), at the output of Tower Builder Board (“TBB”) and of the Receiver (“RCV”), for the middle layer and \(\mathbf{h}=\) _0.9_, when \(E_{T}=\) _257 GeV, 511 GeV, 810 GeV, 2040 GeV_. For readability, simulated and measured signals has been shifted by some ns.

\[\frac{\textbf{dE}}{\textbf{dt}}=\textbf{Ef}\textbf{b}^{\textbf{g}\textbf{-1}}\ \frac{\textbf{t}^{\textbf{a}}\textbf{ e}\textbf{-b}\textbf{t}}{\Gamma\ (\textbf{a}\textbf{+1})}\qquad\quad\text{with}:\qquad\left\{\begin{array}{l} \textbf{b}=\textbf{1}/\textbf{2}\\ \textbf{t}=\textbf{x}/\textbf{X0}\\ \textbf{a}=\textbf{b}\left(\textbf{ln}\left(\frac{\textbf{Ef}\textbf{Z}\textbf{ E}\textbf{D}}{\textbf{E}_{\textbf{C}}}\right)-\textbf{1}\right)\\ \textbf{E}\textbf{c}=\textbf{0},\ \textbf{55}\,\text{GeV}\\ \textbf{Z}\textbf{E}\textbf{b}=\textbf{82}\end{array}\right.\]

that gives the energy profile according to the longitudinal position \(t\) and the total energy _Ef_ of the shower. The energy _f(t\({}_{t}\), t\({}_{2}\))_ in one layer is then extracted by integrating this equation between the limits \(t_{t}\) and \(t_{2}\) of the layer (\(t_{t}\) and \(t_{2}\) depend on _h_) :

\[\textbf{f}\ (\textbf{t}_{1},\textbf{t}_{2})=\int_{\textbf{t}_{1}}^{\textbf{t}_{2 }}\textbf{Ef}\textbf{\ D}^{\textbf{a}\textbf{+1}}\ \frac{\textbf{t}^{\textbf{a}}\textbf{ e}\textbf{-b}\textbf{t}}{\Gamma\ (\textbf{a}\textbf{+1})}\ \textbf{d}\textbf{t}= \textbf{Ef}\ \frac{\Gamma\ (\textbf{a}\textbf{+1},\textbf{t}_{1}/\textbf{2})-\Gamma\ (\textbf{a}\textbf{+1},\textbf{t}_{2}/\textbf{2})}{\Gamma\ (\textbf{a}\textbf{+1})}\]

It follows that the energy distribution \(A_{xx}\) per layers (i.e. presampler, front, middle, back) is given by the formula :

Figure 24: Monte Carlo simulation of the energy deposited in each layer divided by the total energy (_1000 GeV_) at \(h\) = 1.1_, for 500 events.

[MISSING_PAGE_EMPTY:27]

non-saturated signals. The width of the saturated signals decreases as energy increases, and the width of the non-saturated signals is constant. Due to the cut of all the signals at _3 V_, the amplitudes of these two kinds of signal are comparable. So after addition the output signal has the constant width of the wider signal, i.e. the non-saturated signal. As a result the amplitude of the five ADC samples (figure 27b) are now all monotonous with energy.

_Extreme cases simulation._

Now what is the situation when the energy repartition is not the typical one, but reaches extreme values? To know this we have considered three new configurations :

1. Transverse profile : \(A\). Distribution between layers : \(A_{ps}\) ; \(A_{ps}\) - \(3\) **s** ; \(A_{nd}\) + \(3\) **s** ; \(A_{bb}\).
2. Transverse profile : \(A\). Distribution between layers : \(A_{ps}\) ; \(A_{ps}\) + \(3\) **s** ; \(A_{nd}\) - \(3\) **s** ; \(A_{bb}\).
3. Transverse profile : \(B\). Distribution between layers : \(A_{ps}\) ; \(A_{ps}\) ; \(A_{nd}\) ; \(A_{bb}\).

(N.B. : the standard deviation **s** is only applied on the energy distribution of the front and middle layers, because this layers receive the essential of the energy).

Figure 26: Schematic diagram of simulation of one electromagnetic shower. The transverse profile represented is the profile \(A\). See text for the value of \(A_{ps}\), \(A_{ps}\), \(A_{ph}\), \(A_{dd}\) and \(A_{bb}\), which depend on **h** and the total energy of the shower.

Figure 28 shows concisely on one unique plot the results of simulation corresponding to these three "extreme" configurations, and of the "typical" configuration (the parameters are the same as figure 27). Only small differences can be observed in the negative part of the signals. This induces only very small variations on the amplitude of the five ADC samples (except on the fifth sample). Therefore figure 27b still holds for these extreme configurations.

Finally, even more extreme cases can be considered, where the shower hits a cell at the edge, or even worse at the corner of the trigger tower. The saturation behaviour is then intermediate between the above mentioned one (where the amplitude of the five ADC samples are all monotonous with energy), and the one cell case (where the third sample amplitude can decrease when saturation occurs, but not below _3 V_).

Figure 27: _a)_ Simulation of the receiver output signal versus time for increasing energies (solid lines) for one electromagnetic shower, and the five samplings (dotted lines). _b)_ Figure calculated from figure \(a\) simulations, and representing versus energy the signal amplitude at the sampling instants (and so the intersection between solid lines and dotted lines of figure 21a).

#### Pileup.

We can observe on figures 27 and 28 that the output amplitude does not reach zero after the negative part of the signal. In fact in saturation mode, contrary to the linear mode, the integral of the positive part of the signal is no longer equal to the integral of the negative one. As a result the discharge of the liaison capacities is not complete at the end of the signal, but continues very slowly. This can be a problem in case of two signals following each other closely in the same tower : the second signal would be perturbed by the first signal, because the liaison capacities are not discharged.

To avoid this problem the best solution is to restore the equivalence between the

Figure 28: Simulation of the receiver output signal (\(\mathbf{h}=0\)) versus time at _500 GeV_, _1000 GeV_, _2000 GeV_ and _3000 GeV_. At each energy the signal corresponding to the four tested configurations (see text) is drawn. There is significant differences only at the energies _2000 GeV_ and _3000 GeV_.

Figure 29: Same simulation as figure 27a, but with one negative clamping level of _–0.55 V_ instead of _–3.15 V_ as previously.

positive and negative parts of the signal by limiting the amplitude of the negative part at a smaller value than the positive part. This is done by adjusting the negative clamping of the HFA1135 operational amplifier, which ensures the amplification of the signal, to _-0.55 V_ instead of _-3.15 V_ as previously. As shown on figure 29, with this modification the output amplitude returns well to zero after the negative part of the signal.

_Conclusion._

The different measurements taken on our test bench and on the test beam in different configurations, as well as our Spice simulations, show that the saturation of the trigger chain is now well understood, and conform to the requirements. Particularly the amplitude of one saturated signal never decreases below _3 V_, which is the limit of the linear part of the chain response. There is so no risk to confuse one saturated signal with one non-saturated signal. Finally, the return of the output amplitude to zero after the end of the signal is assured, avoiding so possible problems with two signals following each other closely in the same tower.

## 8 Level-1 trigger noise assessment.

The requirements on the noise of one trigger tower have been described earlier in section 0. These requirements were based on assessments that were established before a precise knowledge of the trigger chain was available. Now that the final characteristics of all the components are known (especially the Tower Builder zero-pole compensations), it is important to verify that the noise of the complete chain does not exceed the expected level, and to ensure that there is not any non-understood noise sources in the real chain.

### Estimation of the noise.

We have two tools to estimate the noise of one trigger tower : our test bench, and the test beam calorimeter. However none of these means can provide a direct measurement of the noise of one tower :

\(\bullet\) On one hand our test bench is a reduced model of the trigger chain with only 4 cells, whereas a complete barrel trigger tower contains 60 cells. Therefore a test bench measurement of the noise will only give a reduced evaluation of the noise of a trigger tower.

\(\bullet\) On the other hand in the test beam the trigger towers were complete, but the configuration was not the final one. In particular, for practical reasons, the gain of all the linear mixers was constant instead of two gain values depending on the layer and \(\boldsymbol{h}\) as described in table 3. The noise of the chain is therefore modified. Thus direct measurements on the test beam module will neither provide an estimation of the final value of the noise.

Figure 30: Schematic diagram of our test bench set up for our noise measurements and simulations. The zigzag lines represent successive cuts in the chain to apply the method explained in text.

It is therefore necessary to use our Spice model to go from these measurements to the real configuration. But before using this model, it is necessary to verify its capability to reproduce the measurements of test bench and test beam.

### Control of noise Spice model validity.

The model is successively modified to recreate the test bench and the test beam configurations, and then simulations are compared with the correspondent measurements.

#### 8.2.1 Comparison with test bench measurements.

Our test bench allows to control that each part of the trigger chain is well simulated. A schematic diagram of the set-up can be seen in figure 30. The method consists in measuring the noise at the output of the full chain. Then the first stage of the chain is removed and the noise is measured again, and so on until all the stages have been removed. The difference between two measurements gives the noise of the removed stage.

Figure 31 shows some examples of noise measurements ("chopped" lines) and Spice simulations ("smooth" lines) versus frequency when this method is applied to our test bench. This one contains the electronic of one cell of the middle layer, at \(\textbf{h}=0.1\), connecting to the corresponding channel of the TBB. Measurements were carried out at the chain output with a spectra analyser of _10 MHz_ band width. The first measurements concern the complete chain ("INJ to RCV" in the figure). The second measurement keeps only the part beginning with the TBB and ending with the Receiver ("TBB to RCV"). And

Figure 31: Successive noise measurements (“chopped” lines) versus frequency, at the output of our test bench chain, when the chain is complete (“INJ to RCV”), when only the part from the TBB to the Receiver is kept (“TBB to RCV”), and when only the Receiver is kept (“RCV”). The corresponding Spice simulations are superposed (“smooth” lines).

the third measurement keeps only the Receiver3 ("RCV"). The noise of one channel of the TBB (i.e. including the four layers of one tower) is obtained by subtracting the third spectrum from the second.

Footnote 3: The Receiver used is not the final version, which is not available, but one home modified. A schematic diagram is shown in appendix B.

The overall agreement between the measured and simulated is satisfactory, to the _15 %_ level (the peaks series around _1 MHz_ are non-significant parasitic noise due to non perfect grounding in our test bench).

#### 8.2.2 Comparison with test beam measurements.

One tower of the final detector does not contain 1 or 4 cells as above, but for example 60 cells in the barrel. It is necessary to extend our model and measurements in order to take into account all the cells of one tower.

The same spectra as earlier have been measured on the test beam module, using always our spectra analyser connected to the Receiver. The "chopped" line of figure 32 shows for example the spectrum measured at the Receiver output, corresponding to the _h = 0.7_ tower. A peak between _2 MHz_ and _15 MHz_ can be noticed, which corresponds to the band width of the chain.

Then, to compare these measurements with simulations, the model of figure 30 is modified in the following way :

\(\bullet\) the electronics of not one, but the four layers of one tower is included ;

\(\bullet\) one 0T preamplifier is connected to each of the four inputs of the shapers, and the number of shapers is adjusted so that the number of 0T preamplifiers in one layer is equal to the number of cells in this layer ;

Figure 32: Noise of the _h = 0.7_ tower versus frequency, in test beam configuration, measured at the receiver output (“chopped” line), and simulated (“smooth” line).

* the parameters of each of the 60 channels of our model reproduce the values of the experimental chain.

An example of a simulation result is shown on the same figure as the measurements (figure 32, "smooth" line), to allow for comparison. The agreement between simulation and measurement is good (particularly at high frequencies, which contains the main part of the noise power). Thus we are confident to use our Spice model for the final step, the extrapolation of the noise of one tower to the final configuration.

### Extrapolation.

As already mentioned, the configuration of the test beam electronic is not the final configuration. The main difference is that, for practical reasons, the gain of all the installed shapers is \(3\), instead of \(1\) or \(3\) depending on \(h\) and the layer in the final trigger chain (see annexes). The test beam version of our TBB takes this difference into account : its gain is divided by \(3\) when the corresponding shaper gain has been multiplied by \(3\). The result is that the amplification is sometimes made higher in the chain, and this induces a decrease of the noise in those cases (this is an advantage, but then the dynamic of the chain falls out of requirements). In conclusion the noise of the final chain is not exactly the same as the noise of the test beam version, and it is necessary, to obtain it, to extrapolate it from the measurements.

Figure 33 gives the results of the simulation of the final chain. Diamonds are the equivalent input noise of every tower measured in test beam. These values are obtained by integrating the plots presented in the previous section, and then dividing it by the gain of the chain. Squares are the same values obtained by simulation. There is a good agreement between measurements and simulation.

Figure 33: Equivalent input noise of one trigger tower versus \(h\), calculated by integrating the noise spectra. Diamonds : values obtained from test beam measurements (integration up to _10 MHz_). Square : values obtained from the simulation of test beam configuration (integration up to _10 MHz_). Triangles : the same with integration up to _40 MHz_. Circles : values obtained from the simulation of final configuration (shaper gains at nominal values).

Because of the use of our spectra analyser whose band width is _10 MHz_, the two previous lines were obtained after a frequency integration up to _10 MHz_. But the pass band of the trigger chain is greater than _10 MHz_. The triangles of figure 33 give the same simulation as squares, but when the spectrum is integrated over all the band of the trigger chain. This extrapolation gives the total noise of the trigger chain in the test beam version. At last, after modification of the model parameters, circles give a simulation of the total noise of the final version of the trigger chain. As expected, the noise increases in this configuration.

To conclude, the total noise of one trigger tower (about _300 MeV_) fulfil the requirements and first hypotheses.

## 9 Conclusion.

Test bench measurements, analytical calculations, Spice simulations and test beam measurements have allowed controlling the tower builder signal shape. Comparison within the different methods have led to the calculation of the final components of the poles zero and of the amplification stages in order to shape the signal with the design specifications.

Test bench and test beam measurements as well as Spice simulations have shown that the saturation of the trigger chain is well understood and fulfilling requirements.

Finally, the noise of the trigger chain has been studied by Spice simulations and by test beam measurements showing that the total expected noise (_300 MeV_) is well within the design requirements (_400 MeV_).

The final prototype version of the tower builder board will be tested in the front end crate test that will take place in BNL from September 2002. This test will allow to check the functionalities of the board in a complete final environment.

## References.

* [1] Atlas Collaboration, _Liquid argon calorimeter technical design report_, CERN/LHCC 96-41.
* [2] Atlas Collaboration, _First level trigger technical design report_, CERN/LHCC 98-14.
* [3] Particle Data Group, Springer.
* [4] Atlas Liquid Argon EM Collaboration, _Performance of the barrel module 0 of the Atlas electromagnetic calorimeter_, submitted to _Nucl. Instrum. Methods A_.
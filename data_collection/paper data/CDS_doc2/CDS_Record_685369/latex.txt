May 14,2002

**HV Distributor Radiation Qualification**

**Part One: SEE Tests**

**R.Chadelas, Ph.Gris, D.Lambert**

Laboratoire de Physique Corpusculaire

Clermont-Ferrand

SEE tests to qualify the production of the HV distributor system of the ATLAS Tile calorimeter were performed at the Paul Scherrer Institute (Z\(\ddot{u}\)rich - Switzerland). This note describes the setup used, the fluences applied and the effects seen.

[MISSING_PAGE_EMPTY:2]

Introduction

The enormous rate of p-p collisions at LHC makes radiation damage and radiation-induced background in the ATLAS detector a major concern. Because of its location, the front-end electronics inside the Tile Calorimeter (TileCal) is not the most exposed device. Expected radiation levels are nonetheless not negligible and careful tests must be performed to estimate if the electronics choosen can be used in a safe and reliable way in the ATLAS environment.

The qualification procedure of the electronics is defined in [1] and recommends three tests. Among them is the Single Event Effect (SEE) test. A SEE is caused by a very high energy deposition in a small volume of an electronic chip. A charge is produced along the ionizing particle path and can be collected at one of the microcircuit nodes, inducing transient currents that can lead for instance to latch-up and bit upset [2][3]. Three SEE levels are defined in [1]: soft SEEs (not permanent: cancelled by resetting the system or by rewriting data in a memory), hard SEEs (can cause a permanent change to the operation of a device) and destructive SEEs (destruction of the device). The goal of the SEE test is to evaluate the rates of the three types of events.

The High Voltage distributor system of the TileCal [4] aims at providing PMTs with stable and precise (at the per mil level) high voltages. The main components of the structure are the HVmicro and the HVopto cards which were never, up to now, submitted to SEE tests. A campaign was organised at the Paul Scherrer Institute (PSI) in Z\(\ddot{u}\)rich (27-28 october 2001) to fill this gap. The goal was to qualify the production cards with respect to SEE occurences. In this note are described the fluences applied, the results obtained for HVmicro and HVopto cards respectively and the conclusions reached.

## 2 Fluences

### What is expected in the ATLAS environment

Recently simulations[1][9] (performed in november 2001 but public in february 2002) were made for the whole ATLAS detector subdivided in elementary domains of 10x10 cm\({}^{2}\) each. Taking safety factors into account (uncertainties from the simulation and variation of radiation tolerance from lot to lot for electronic components), one can estimate the fluences for ten years of ATLAS operations at any location of the HV distributor system (see figure 1). Explicit numbers are given in table 1 (the precise position of the cards in the detector is taken into account). The highest fluences expected for the barrel part are 4.26e10 \(p.cm^{-2}\) and 2.84e10 \(p.cm^{-2}\) for HVmicro and HVopto cards respectively. For what concerns the extended barrel side, one foresees at upmost 8.62e9 \(p.cm^{-2}\) and 3.38e10 \(p.cm^{-2}\) for HVmicro and HVopto cards respectively. To give an idea of the radiation level in the TileCal, the SEE expected rate for the HVmicro card is ten thousand times lower than the one expected in the TRT endcap(ten times lower than for LAr).

### What was applied during the tests

The Proton Irradiation Facility (PIF) [5] at PSI [6] can provide protons between 35 and 300 MeV and was designed to test spacecraft components. This site was choosen because of two reasons: even if most of SEEs will be produced by neutrons in the TileCal, there 

[MISSING_PAGE_EMPTY:4]

are no significant differences for proton and neutron interactions provided energies exceed few ten MeV [2]. Furthermore the probability of triggering a SEE event depends on the energy of the ionizing particle, at least for relatively small energies - typically less than 20-30 MeV [2]. The probability reaches a plateau for energies bigger than 100 MeV. To optimise the SEE cross section, we thus have choosen 300 MeV protons.

Typical fluences obtained during the tests are given on figure 2. The flux is measured thanks to three scalers and one observes the precision of the result: the typical flux is \(2.29~{}10^{7}p.cm^{-2}.s^{-1}\) (rms of 8%). We tried to apply twice the recommended fluences which were, at the time of the tests 3.52e10 \(p.cm^{-2}\) and 2.54e10 \(p.cm^{-2}\) for HVmicro and HVopto respectively. These fluences are about twenty to thirty percents smaller than the new expectations. It took 26 and 19 minutes to irradiate HVmicro and HVopto cards at doses equivalent to ten years of ATLAS operations, safety factors included.

## 3 Results on the HVmicro card

The HVmicro card (figure 3) is a control card that will manage two distributor cards (HVopto) inside a super drawer[4]. It will receive orders (for instance high voltages to be applied on a given channel) from the ATLAS Detector Control System and will transmit them to HVopto boards. It will also read the high voltage applied, will receive and transmit data on the VME via CANBUS. It can also communicate with a console via a RS232 interface (only the CANBUS will be used in ATLAS). Its radiation sensitive components are given in table 2. The ATLAS Policy on Radiation [1] advocates to submit 4 good devices to proton beam. These devices must be under bias and on line electrical operation and measurements must be performed. We thus tested 4 HVmicro cards (serial numbers: 151-042,151-123,151-214,151-244). Because of the size difference between the available beam (roughly 9 cm diameter) and the size of our cards (16.5x9.4 cm\({}^{2}\)), only one device could be irradiated at a time and two irradiations were performed per card so as to cover all the vital parts of it. We will call test 1 and test 2 these irradiations in the following. The corresponding areas are given on figure 3. Behaviour of the cards were followed on line through the setup given on figure 4. One distinguishes three parts: the HVmicro card, the PC and an external card (with a register, a dip switch and an

\begin{table}
\begin{tabular}{|c|c|c|c|c|c|c|} \hline  & \multicolumn{3}{c|}{Barrel} & \multicolumn{3}{c|}{Extended Barrel} \\ \hline
390\(\leq\)R\(\leq\)400 & Z\({}_{min}\)(cm) & Z\({}_{max}\)(cm) & Highest Fluence (\(p.cm^{-2}\) ) & Z\({}_{min}\)(cm) & Highest Fluence (\(p.cm^{-2}\) ) \\ \hline HVmicro & 202.1 & 218.6 & 4.26e10 & 528.4 & 544.9 & 8.62e9 \\ \hline HVopto & 147.3 & 201.7 & 2.84e10 & 473.6 & 528.0 & 1.26e10 \\ (external) & & & & & & \\ \hline HVopto & 78.4 & 132.8 & 2.48e10 & 404.7 & 459.1 & 3.38e10 \\ (internal) & & & & & & \\ \hline \end{tabular}
\end{table}
Table 1: Highest fluences for ten years of ATLAS operations (safety factors included) for the HV distributor system (Barrel and Extended Barrel parts).

\begin{table}
\begin{tabular}{|l|l|l|l|l|l|l|} \hline Component & Type/Function & Supply & Technology & Nb & Nb & Test \\  & & Voltage & & & tested & \\  & & & & per card & & \\ \hline
74HCT125-B(Philips) & Digital/ & \(+\,5\)V & CMOS & 1 & 1 & 1 \\  & Quad buffer & & & & & \\
74HCT240-C(Philips) & Digital/ & \(+\,5\)V & CMOS & 1 & 0 & \\  & Bus line & & & & & \\
74HCT244-C(Texas) & Digital/ & \(+\,5\)V & CMOS & 2 & 1 & 1 \\  & Octal Driver & & & & & \\
74HCT245-C(Texas) & Digital/ & \(+\,5\)V & CMOS & 2 & 0 & \\  & Bus line & & & & \\ MC7805 CD 2T(Motorola) & Power Device/ & \(+\,15\)V & & 1 & 1 & 2 \\  & Voltage Regulator & & & & & \\ PCA 82C 250T(Philips) & Data transmission/ & \(+\,5\)V & CMOS & 1 & 1 & 2 \\  & CANBUS interface & & & & & \\ AD 589JR(Analog Device) & Linear Device/ & -\(1\)5V & Bipolar & 1 & 1 & 1/2 \\  & Voltage Reference & & & & & \\ AMF29F010-70JC(AMD) & Memory/ & \(+\,5\)V & CMOS & 2 & 2 & 1/2 \\  & Flash Memory & & & & & \\ AT25160N-10PC(ATMEL) & Memory/ & \(+\,5\)V & CMOS & 1 & 1 & 1 \\  & EEPROM & & & & & \\ HCPL2611(Hewlett-Packard) & Optoelectronics/ & \(+\,5\)V & & 2 & 2 & 2 \\  & CAN insulator & & & & & \\ K6T1008C2E(Samsung) & Memory/ & \(+\,5\)V & CMOS & 2 & 2 & 1 \\  & RAM & & & & \\ MAX233 ACWP(Maxim) & Data Transmission/ & \(+\,5\)V & CMOS & 1 & 1 & 2 \\  & RS232 interface & & & & & \\ MC68376 BGMFT20(Motorola) & Micoprocessor & \(+\,5\)V & CMOS & 1 & 1 & 1/2 \\ OPA 177GS(Burr Brown) & Linear Device/ & \(+\,15\)V/-\(15\)V & Bipolar & 2 & 2 & 1/2 \\  & OPA & & & & & \\
86SMX/IQD(IQD) & Passive/ & \(+\,5\)V & & 1 & 1 & 2 \\  & MC clock & & & & & \\ TMP17FS(Analog Devices) & Linear Device/ & -\(1\)5V & & 1 & 1 & 2 \\  & Temperature probe & & & & & \\ \hline \end{tabular}
\end{table}
Table 2: List of radiation sensitive HVmicro components. HCT240, HCT244 and HCT245 have the same technology.

EEPROM).The components that were tested/measured during irradiation are:

* RAM (size:2x128 kbytes): tested in the read/write mode: in one portion of the RAM, a pattern is written at the boot step of the HVmicro card and periodically read. In another portion, a pattern is written and read. A default pattern is then written and checked at the beginning of the next sequence.
* Flash Memory(size:2x128 kbytes): a checksum on the first (out of 8) sector (the one that contains the program) is performed and compared to the previous result. Fixed pattern were written in sectors 4, 5 and 6 during programming at Clermont: the information are read to detect any variation.
* EEPROM of the HVmicro card(size:2048 bytes): tested in the read/write mode.A pattern was written once for all in one portion and is sequentially read. In another portion of the component, a pattern is written and read (as for the RAM).
* Dip Switch: the value is read at the boot of the card and then checked.
* Register (external card): tested in the read/write mode: the default value is read, a new value is written, then read. The default value is then written.
* Dip Switch (external card): same as for the Dip Switch of the HVmicro card.
* Spi (external card): serial bus to read information of the EEPROM on the external card. These last three points aim at testing the HVmicro/HVpoto interface.

Figure 2: Proton flux applied on HVmicro and HVpoto cards.

* Low Voltages+temperature: the low voltages (+15 V,-15 V and +5 V) and the temperature are digitized by the ADC of the HVmicro card. The corresponding currents are also monitored.
* Periodically, a request is sent to the HVmicro card to test the receiving part of the CANBUS.

The information (except low voltage currents) are automatically sent at the end of each test by the HVmicro card, both through the CANBUS and the RS232, and stored in data files. It took 8 secondes to perform a full sequence. Low voltage currents were read directly at the power supply level, every other seconds. Furthermore, Labview-based GUI allowed on line monitoring to detect any problem so as to react in a prompt and suitable way.

All the cards tested were submitted at Clermont to a strict quality control procedure applied to each production card: functionnal tests, burn-in (one week at 65\({}^{o}\)C) and new functionnal tests (more details can be found in [8]).

### Measurements

#### 3.1.1 Test 1

Test 1 corresponds to the irradiation area given on figure 3. The components that saw the beam are given in table 2. In order to have reliable results, it was decided to apply twice the fluence expected (at the time of the tests) for ten years of ATLAS operations (all possible safety factors included). The total fluence that each card sees during this step is thus 7e10 \(p.cm^{-2}\) which corresponds to an irradiation time of 50 minutes per card. According to new simulations, this fluence corresponds to 16.4 years and to 81.2 years for the barrel and the extended barrel parts respectively.

The errors and problems encountered during the runs are summarized in table 3. This table deserves few comments:

* "Low voltage reset" means that we had to cycle the low voltage power supply to recover from the corresponding problem.
* "Software resets" are automatic (watchdog and power-up)
* "Peaks in current" correspond to values of current below 5 sigmas of the "standard" currents (measured with no beam) given in table 4. A low voltage power cycling was performed if these current peaks were lasting more than 4 seconds (latch-ups).

Interesting conclusions can be deduced from table 3:

* Most errors come from the RAM and to bit changes in this component. Since all information go through it (such as data on other components: Flash checksums, DIP switch value..), other elements may seem corrupted. In fact after deeper investigations we found that "dip error" (card 151-042), "test config switch" problem (card 151-123) and "test prog" problems (card 151-214) were due to change in the RAM itself and not to problems in the corresponding components. The "EEPROM" error seen on card 151-123 is quite strange: it is not attested by RS232 and missing Figure 3: HVmicro irradiation areas.

\begin{table}
\begin{tabular}{|c|c|c|c|c|c|} \hline HVmicro & Problem & Action & Fluence & SEE & Remark \\ card no & & & (\(p\).\(cm^{-2}\) ) & Type & \\ \hline  & Read RAM error & Low Voltage reset & 4.2e10 & SEU & \\  & Read RAM error & Low Voltage reset & 5.02e10 & SEU & \\  & Peaks in current (+5V/+15V) & Low Voltage reset & 6.7e10 & SEL & CANBUS Out \\  & test dip & Low Voltage reset & 7.0e10 & SEU & RAM error\({}^{*}\) \\
151-042 & Watch dog & Software reset & 4.9e10 & SEU & \\  & Watch dog & Software reset & 6.7e10 & SEU & \\  & Power-up & Software reset & 6.0e10 & SEU & \\  & Power-up & Software reset & 7e10 & SEU & \\  & Write RAM error & Recovered by itself & 3.6e10 & SEU & \\  & Write RAM error & Recovered by itself & 4.9e10 & SEU & \\ \hline  & Read RAM error & Low Voltage reset & 7.2e9 & SEU & \\  & test config switch & Low Voltage reset & 1.3e10 & SEU & RAM error\({}^{*}\) \\  & Read RAM error & Low Voltage reset & 1.6e10 & SEU & \\  & Read RAM error & Low Voltage reset & 3.2e10 & SEU & \\
151-123 & Read RAM error & Low Voltage reset & 4.2e10 & SEU & \\  & Read RAM error & Low Voltage reset & 4.8e10 & SEU & \\  & Watch dog & Software reset & 4.5e10 & SEU & \\  & Write RAM error & Recovered by itself & 2.3e10 & SEU & \\  & Write EEPROM error & Recovered by itself & 3.7e10 & SEU & Not seen by RS232 \\  & Peak in current (+15 V) & duration:\(<2\) s & 6e10 & TCP & \\ \hline  & Peak in current (+5 V) & Low voltage reset & 3.8e9 & SEL & CANBUS Out \\  & Read RAM error & Low voltage reset & 1.1e10 & SEU & \\  & CANBUS out & Low voltage reset & 1.5e10 & SEL & CANBUS Out \\  & Peak in current (+5 V/+15V) & Low voltage reset & 3.4e10 & SEL & CANBUS Out \\  & Read RAM error & Low voltage reset & 4.5e10 & SEU & \\
151-214 & Read RAM error & Low voltage reset & 5.3e10 & SEU & \\  & Read RAM error & Low voltage reset & 6.6e10 & SEU & \\  & Watch dog & Software reset & 6.0e10 & SEU & \\  & Write RAM error & Recovered by itself & 6.9e10 & SEU & \\  & Test prog & Recovered by itself & 2.4e10 & SEU & RAM error\({}^{*}\) \\  & Test prog & Recovered by itself & 3.6e10 & SEU & RAM error\({}^{*}\) \\ \hline  & Peak in current (+5 V) & Low voltage reset & 5.9e9 & SEL & CANBUS Out \\  & Read RAM error & Low voltage reset & 2.3e10 & SEU & \\  & Read RAM error & Low voltage reset & 2.7e10 & SEU & \\  & Read RAM error & Low voltage reset & 4.3e10 & SEU & \\  & Peak in current (+5 V) & Low voltage reset & 4.4e10 & SEL & CANBUS Out \\  & Read RAM error & Low voltage reset & 4.5e10 & SEU & \\
151-244 & Peak in current (+5 V) & Low voltage reset & 4.8e10 & SEL & CANBUS Out \\  & Peak in current (+5 V/+15 V) & Low voltage reset & 5.1e10 & SEL & CANBUS Out \\  & Watch dog & Software reset & 8.0e8 & SEU & \\  & Write RAM error & Recovered by itself & 2.3e10 & SEU & \\  & Write RAM error & Recovered by itself & 3.7e10 & SEU & \\ \hline \end{tabular}
\end{table}
Table 3: List of HVmicro errors encountered during test 1 (see explanations in the text for *). SEU, SEL, SB and TCP stand for Single Event Upset, Single Event Latch-up, Stuck Bit and Transient Peak Current respectively.

\begin{table}
\begin{tabular}{|c|c|c|c|} \hline  & +15V & -15V & +5V \\ \hline Value (V) & +15.2\(\pm\)0.1 & -15.5\(\pm\)0.1 & 5.4\(\pm\)0.1 \\ \hline Current (mA) & 20\(\pm\)0.03 & not measurable & 158\(\pm\)0.5 \\ \hline \end{tabular}
\end{table}
Table 4: HVmicro low voltages values and currents.

Figure 4: HVmicro test bench.

information associated to the error lead us to think that a problem occured during program execution (address jump), that is in the RAM. We thus conclude that RAMs are our most SEE sensitive component: out of 42 problems seen during test1, 26 (ie 62%) are due to RAM errors. One must add that corrupted information in the RAM showed a modification of one bit only.
* Peak currents are the second source of problems (8 out of 42). To each increase of the +5V current corresponds broken links from the CANBUS point of view. This is synonymous with paralysis in ATLAS. If the +5V current is the only one (among the three LV currents) to increase it goes typically from 160 to 370 mA. If it is associated to a +15V current increase, it rises from 160 to 560 mA and the +15V current from 20 to 50 mA. This last case may be due to SEEs in the CANBUS part.

It was also observed that to each low voltage supply power cycling was corresponding a +15 V peak current.

#### 3.1.2 Test 2

For tests 2 (see the irradiated area on figure 3), only two cards were tested (number 151-214 and 151-244) up to a fluence of 7e10 \(p.cm^{-2}\) (3.206e3 Rad). The components involved are indicated in table 2. The problems encountered are listed in table 5.

One should add to the information of table 5 that peaks of +15 V currents (from 20 to 40 or 50 mA) were seen for both cards at the end of the irradiation period (ie with no beam). Furthermore,the EEPROMs received some protons (even if not in the "main" beam) and were killed after about 11e10 \(p.cm^{-2}\) (ie 5.e3 Rad) due to dose effects. This problem had already been taken into account for the final design of the cards[4]: EEPROMs are mounted in such a way that they can be easily replaced.

### Interpretations and solutions

The errors previously observed can be divided in three major types: one concerns read/write bit errors that were recovered by writing again. Another is related to software

\begin{table}
\begin{tabular}{|c|c|c|c|c|c|} \hline HVmicro & Problem & Action & Fluence & SEE & Remark \\ card no & & & (\(p.cm^{-2}\) ) & Type & \\ \hline \multirow{3}{*}{151-214} & Write EEPROM error & No recovery: dose effect & 4.0e10 & SEU & \\  & Peak in current (+5 V/+15V) & Low voltage reset & 4.9e10 & SEL & CANBUS Out \\ \cline{3-6}  & Watch dog & Software reset & 1.1e10 & SEU & \\  & Watch dog & Software reset & 3.2e10 & SEU & \\ \hline \multirow{6}{*}{151-244} & Peak in current (+5 V) & Low voltage reset & 1.2e10 & SEL & CANBUS Out \\  & Temperature probe & Low voltage reset & 4.9e10 & SEU & \\ \cline{1-1}  & Peak in current (+5 V) & Low voltage reset & 6.0e10 & SEL & CANBUS Out \\ \cline{1-1}  & Watch dog & Software reset & 3.2e10 & SEU & \\ \cline{1-1}  & Watch dog & Software reset & 3.5e10 & SEU & \\ \cline{1-1}  & Watch dog & Software reset & 4.1e10 & SEU & \\ \cline{1-1}  & Write EEPROM error & No recovery: dose effect & 3.8e10 & SEU & \\ \hline \end{tabular}
\end{table}
Table 5: List of HVmicro errors encountered during test 2. SEU, SEL, SB and TCP stand for Single Event Upset, Single Event Latch-up, Stuck Bit and Transient Peak Current respectively.

resets. The last type deals with current increases.

#### 3.2.1 Soft SEEs

The two first types are soft SEEs: they do not prevent the system from running and disappear after rebooting the system. It can lead to misleading information. For instance in the RAM are present orders to be transmitted to the HVopto card and a wrong HV command (either to be applied or to be read) can be sent. There is no risk of damaging PMTs since HV ranges have strict bounds [4]. Furthermore, there will be a way to follow PMTs behaviour in ATLAS through the use of the laser system.

From the tests results, one obtains on average 8.5 soft SEEs (6.5 RAM errors and 2 soft resets) per card for an equivalent 16.4 years (barrel) or 81.2 (extended barrel) of ATLAS operation. This number is somewhat underestimated for RAM errors since it relies on the way components were used during the tests and it may be different in ATLAS. 557 bytes were used during the tests. But it is foreseen to use 5771 bytes in ATLAS. It means that the number of RAM errors is closer to 65 per card for 16.4 years or 81.2 years. We will thus have on average 634 soft SEE events (614 RAM errors and 20 soft resets) per year for the whole HV distributor system (528.6 for the barrel part and 105.4 for the extended barrel).

Most of our soft SEEs (about 80%) are coming from the RAM (see table 6). There are two simple ways to reduce the corresponding errors: one is to lighten RAM information (using more the Flash memories for instance which are much less sensitive to SEEs) and the other one is to update more frequently information. The first way has already been tried by hardcoding information in the Flash memories: new code versions use only 3801 bytes, reducing the number of SEE events to 424 per year (ie about 3 to 4 per day) for the entire detector. Updates of RAM information will depend on the type of errors encountered and on the way the ATLAS DCS will work.

#### 3.2.2 Latch-Up

The last type is more serious since all communication with the HV distributor system is broken. The TileCal DCS will (should) be able to identify a communication problem with a given super-drawer in a few seconds. One should notice however that this kind of SEEs have no effect on the HV applied on the PMTs. Any variation can anyway be monitored with the laser system.

We can estimate from the tests the mean latch-up rate (table 6): it is of 2 per card for 16.4 years (81.2) of ATLAS operation for the barrel (extended barrel) part. This gives us 19 (16 for the barrel and 3 for the extended) per year of ATLAS operations, taking into account all possible safety factors and the total number of HVmicro cards that may be affected.

There is no way now to modify the design of the cards to forbid these events. On the other hand, any low voltage current increase (for any reason - not only SEE) must be in ATLAS quickly detected so as to switch off the low voltage supply. The way it will be done will depend on the low voltages design and also on the DCS structure. Considering the fact that a power cycling of the LV supply takes on average one minute, the dead time induced by the latch-ups on the HV distributor system will be negligible.

## 4 Results on the HVopto card

The HVopto board (figure 5) is a distributor card that allows to adjust up to 24 high voltages by the mean of regulation loops [4]. The system is made of a DAC (slope: 1mV/V), an optocoupler, an ADC and an operational amplifier (acting as a comparator). The DAC receives the orders from the HVmicro card (ie the HV to be applied on a given channel). The output voltage is measured by a divider (ratio: 1/1000) and converted by a 12-bits ADC than can be read by the micro-controller of the HVmicro card. The components sensitive to radiations are given in table 7.

As for HVmicro cards, we have irradiated four HVopto cards (serial numbers: 150-006,150-015,150-020 and 150-021). Since the size of our card(54.4x9.4 cm\({}^{2}\)) is much bigger than the available beam size (9 cm diameter), we made two paths (test 1 and test 2) to irradiate the vital parts of HVopto cards. The quantities measured for each test as well

\begin{table}
\begin{tabular}{|c|c|c|c|c|c|} \hline SEE & Effect & N\({}_{SEE}\) & \(\Phi\) & \(<N_{SEE}>\) & \(<\Phi>\) & N\({}_{SEE}\) expected \\ Type & & (total) & (total) & (per card) & (per SEE) & in ATLAS (per year) \\ \hline SEU & RAM errors & 26 & 28e10 & 6.5 & 3.9e10 & 614/404 \\ \hline SEU & software resets & 13 & 42e10 & 2 & 4.6e10 & 20 \\ \hline SEL & Current increases & 10 & 28e10 & 2 & 3.4e10 & 19 \\  & + 5V or + 5V/+ 15V & & & & \\ \hline TCP & transients & 1 & 42e10 & 0.2 & 6e10 & 1.5 \\ \hline \end{tabular}
\end{table}
Table 6: Summary of SEE tests for HVmicro cards. Fluences (\(\Phi\)) are given in \(p.cm^{-2}\).

Figure 5: HVopto irradiation areas.

\begin{table}
\begin{tabular}{|l|l|l|l|l|l|l|} \hline Component & Type/Function & Supply & Techno. & Nb & Nb & Test \\  & & Voltage & & & tested & \\  & & Voltage & & per card & \\ \hline
74 H CT 138(Texas) & Digital/decoder & \(+\) 5V & CMOS & 1 & 1 & 1 \\
74 H CT 244(Texas) & Digital/Octal Driver & \(+\) 5V & CMOS & 3 & 2 & 1 \\
74 H CT 273(Texas) & Digital/FlipFlop & \(+\) 5V & CMOS & 3 & 2 & 1 \\ LM79L05ACM & Power Device/ & -15V & Bipolar & 2 & 0 & \\ (Analog Devices) & Voltage Regulator & & & & & \\ AD 589 JR & Linear Device/ & -15V & Bipolar & 1 & 1 & 1 \\ (Analog Devices) & Voltage Reference & & & & & \\ ADS 7820 U(Burr Brown) & Linear Device/ADC & \(+\) 5V & CMOS & 1 & 1 & 1 \\ AT 25160N-10 PC(Atmel) & Memory/EEP ROM & \(+\) 5V & CMOS & 1 & 0 & \\ BSR 17A(Philips) & Transistor & -15V & Bipolar & 4 & 2 & 2 \\ BSR 18A(Philips) & Transistor & -15V & Bipolar & 24 & 1 & 2 \\ BZD27-C180(Philips) & Diode/Zener diode & -180V & Bipolar & 48 & 2 & 2 \\ MMSZ15(Motorola) & Diode/Zener diode & 0 or +15V & Bipolar & 2 & 1 & 2 \\ INA 128 UA(Burr Brown) & Linear Device/OPA & +15V/-15V & CMOS & 1 & 1 & 1 \\ MAX 536 BCWE(Maxim) & Linear Device/DAC & +15V/-15V & CMOS & 6 & 3 & 1/2 \\ MCT2-DIP & Optoelectronics/ & +5V/ & Bipolar & 2 & 1 & 2 \\ (QT Optoelectronics) & Optocoupier & HV\({}_{in}\)-15V \(\leq\)HV\(\leq\)HV\({}_{in}\) & & & \\ MOC 8204 & Optoelectronics/ & +5V/ & Bipolar & 24 & 2 & 2 \\ (QT Optoelectronics) & Optocoupier & HV\({}_{in}\)-360V \(\leq\)HV\(\leq\)HV\({}_{in}\) & & & \\ MPC 506 AU & Linear Device/ & +15V/-15V & CMOS & 2 & 2 & 1/2 \\ (Burr Brown) & Analog multiplexer & & & & & \\ MPSA44-T0226AA & High Voltage Transistor & +5V/ & Bipolar & 24 & 1 & 2 \\ (Philips) & & HV\({}_{in}\)-360V \(\leq\)HV\(\leq\)HV\({}_{in}\) & & & \\ MTB3N120E-SOIC & Transistor/ & 0 or HV\({}_{in}\) & TMOS & 2 & 1 & 2 \\ (Philips) & E-FET transistor & & & & & \\ OPA 177 GS(Burr Brown) & Linear Device/OPA & +15V/-15V & Bipolar & 24 & 1 & 2 \\ OPA 2277-SO(Burr Brown) & Linear Device/OPA & +15V/-15V & Bipolar & 25 & 1 & 1/2 \\ REF 102 AU(Burr Brown) & Linear Device/ & +15V & & 6 & 4 & 1 \\ Voltage Reference & & & & & \\ LM335 & Linear Device/ & -15V & & 1 & 0 & \\ (National Semiconductors) & Temperature probe & & & & \\ \hline \end{tabular}
\end{table}
Table 7: List of HVpoto components radiation sensitive.HV\({}_{in}\) is the common drawer HV (-830 V for extended barrel, -950 V for barrel see [4]). Four cards were irradiated for test 1 and one for test 2. AT25160 was tested on HVmicro boards (see table 2). LM79L05ACM has the same technonoly as MC7805CD2T (see table 2).

as the doses applied are given below. The test setup is given on figure 6.

All the cards tested were submitted at Clermont to a strict quality control procedure applied to each production card: functionnal tests, burn-in (one week at 65\({}^{o}\)C) and new functionnal tests as well as calibrations (more details can be found in [8]).

### Measurements

#### 4.1.1 Test 1

The irradiated area for the first path is given on figure 5 and the components involved in table 7. Each HVopto card received a total fluence of 5.1e10 \(p.cm^{-2}\) that is twice the highest fluence expected (at the time of the tests) in ATLAS for ten years of operations for the barrel part, taking into account all possible safety factors. According to new simulations, this fluence corresponds to 18 (23) years for the barrel (extended barrel) part (highest fluences). The quantities measured, followed on line (thanks to Labview-based GUI) and saved in files were:

* 24 high voltages at the output of each regulation loops. These measurements are given by the ADC. Five output voltages are tested: 600 V, 650 V, 700 V, 750 V and 800. V
* 2 HV\({}_{in}\) values (one for each half board-even and odd sides) given by the ADC.
* 3 temperatures given by the ADC.
* 2 -5V (one for each half board) given by the ADC.
* 1 reference voltage of 1.22 V (AD589JR) digitised by the ADC.
* 3 low voltages (+15V, -15V, +5V) and their currents given by the power supply.
* HV\({}_{in}\) and its current by the power supply.

Figure 6: HVopto test bench.

It took 20 to 30 seconds to make a cycle.

One knows from previous tests (on the HVmicro cards) that observation of low voltage currents is important. No big effects are observed on the +15V and +5V currents (less than 1% and 10% respectively). On the other hand, spikes can be seen in the -15V current(figure 7). These peaks last less then few seconds and are of two types: some correspond to an increase of about 60%. Others are characterised by huge current variations (200%) and are typical of half of a card off (a regulation loop drives a higher current when HV are not applied). The first type (increase from 150 to 220 mA) is to be explained by a specific component sensitive to SEEs: optocoupler MCT2 (see test 2 for further explanations). We believe that the second type is due to a bit flip in a flip-flop (HCT273) present in the on/off structure: 3.5 SEU were seen on average for an equivalent of 18 (barrel) or 23 (extended barrel) ATLAS years.

A dose effect was seen for the four cards on the quantities digitised by the ADC: the 24 voltages, the 2 HV\({}_{in}\) values, the temperatures, the -5V and the reference voltage. This is illustrated on figures 8 and 9 for the reference voltage and one HV channel. The variation is typically of 0.5 V (0.1%) after an equivalent dose of ten years. At the end of the irradiation period, we measured the output of the reference voltage and observed no difference with the value found at the beginning. This indicates that the drifts seen come from the ADC itself. Nonetheless one can correct for the drift with the reference voltage: as observed on figure 9, the variation is of about 0.05% after a fluence corresponding to 10 years of ATLAS operations. The dose effect can thus easily be corrected. Furthermore, other parameters, such as natural ageing of the ADC, will have to be considered in ATLAS and may trigger bigger effects.

#### 4.1.2 Test 2

The irradiation area corresponding to this test is given on figure 5. The card 150-021 was the only one to be tested because of lack of time. We made three tests in total. The fluences applied are different from one test to another.

Test 2, step 1: "standard" configurationDuring the first test was irradiated the area defined in one and the same quantities as for test 1 were measured. As seen on figure 10, we had surprising and unexpected results: when the beam is on, the voltages go on and off (and are actually more often off than on). One observes the variation in -15V current, which oscillates from 150 (half card on) to 220 mA. The effect is quasi-instantaneous, indicating that one component is highly SEE sensitive. The same effect was seen previously (during test 1) when the current was increasing up to 220 mA. The goal of the further tests was to find the sensitive component and to come a solution that could be used in ATLAS.

Test 2, step 2: Removing the optocouplerThe first action was to remove the optocoupler MCT2 that has an important role in the switch on/switch off procedure of a card: if it saturates the card will be off (ie no HV on the PMTs). Removing the MCT2 will thus lead to a card always on and may tell us more about the sensitive component. Irradiation was thus performed with no MCT2. Results are visible on figure 11. Everything went fine up to a fluence of 2.6e10 \(p.cm^{-2}\) (equivalent fluence for 7.6 years of ATLAS operations).

Figure 7: -15V current and its relative variations.

Figure 8: Reference voltage (channel 0) as seen from the ADC. Values (top) and relative variations (bottom) are given.

Figure 9: HV outputs (channel 0) as seen from the ADC. Values (top) and relative variations (bottom) are given. Full lines are corrected for dose effects.

Test 2, step 3: Finding a solutionThe optocoupler MCT2 seems to be extremely sensitive to SEEs. But simply removing it is not an acceptable solution: it was introduced to allow to switch on and off a quarter of super-drawer [4]. Keeping this possibility is important for ATLAS. Furthermore, previous designs of the HVmicro card had foreseen to use a MOC8204 (the same as in regulation loops) as the optocoupler of the on/off. MCT2 was then choosen because of a possible shortage of MOC. It was thus natural to try to replace MCT2 by MOC8204 so as to see the sensitivity to SEEs. The results showed that MOC8204 are insensitive to SEEs: no problem occured up to a fluence of 2.6e10 \(p.cm^{-2}\) (equivalent fluence for 7.6 years of ATLAS operations).

### Interpretations and solutions

The results of the two tests performed on the HVopto cards can be analysed in the following way:

* Test 1: the irradiated part of the card shows a (small) sensitivity to SEEs related to peak currents especially on the -15V (from 160 mA to 500 mA) (see table 8). These increases do not last more than few second and are soft SEEs. One got on average 3.2 of these events per card for an equivalent 18 (23) years of ATLAS SEE rate for the barrel (extended barrel) part. This leads in total to 81 soft SEE per year (ie 0.7 per day) for the whole system (23.1 for the barrel external, 20.2 for the barrel internal, 10.2 for the extended barrel internal and 27.5 for the extended barrel external). Each SEU will switch off a quarter of super-drawer: the corresponding

Figure 10: Currents and Voltages for the second test (step 1) of HVopto card.

PMTs will have no HV. A procedure will (and must) be foreseen in the TileCal slow-control structure to solve this problem in a prompt and suitable way. One must stress that the corresponding current increases (from 160 to about 500 mA) are not latch-ups but do simply correspond to half of a HVopto card off. The situation is thus completely different from the HVmicro cards one. The other peaks in current seen are due to a too high MCT2 sensitivity to SEEs (see test 2).
* Test 2: the optocoupler MCT2 has a too high sensitivity to SEEs to be used in ATLAS

The solution to the second problem is simply to replace MCT2 by MOC8204. This solution has no extra cost (we can used spares already bought) and was found to be reliable.

Figure 11:Voltages for the second test (step 2) of HVopto card.

\begin{table}
\begin{tabular}{|c|c|c|c|c|c|} \hline SEE & Effect & N\({}_{SEE}\) & \(\Phi\) & \(<N_{SEE}>\) & \(<\Phi>\) & N\({}_{SEE}\) expected \\ Type & & (total) & (total) & (per card) & (per SEE) & in ATLAS (per year) \\ \hline SEU & half a card off & 13 & 20.4e10 & 3.2 & 2.5e10 & 81 \\ \hline \end{tabular}
\end{table}
Table 8: Summary of SEE tests for HVopto cards (test 1). Fluences (\(\Phi\)) are given in _p.cm\({}^{-2}\)_.

It may be possible to have an explanation of the behaviour of the MCT2 compared to the MOC8204 by looking at technical sheets [7]. One observes that the technology used is similar in both cases (gallium arsenide infrared emitting diode coupled to a silicon phototransistor). The transistor characteristics are quite different: the breakdown voltages (collector to emitter) is much bigger (400V) for MOC8204 (only 85V for MCT2). The sensitivity to SEEs may thus be related to the transistor type.

## Conclusions

The HV distributor system of the Tile calorimeter was extensively tested to SEE. The fluences applied were twice the ones recommended by ATLAS rules (at the time of the tests), except if we were running out of time. The results obtained show that these tests were necessary for the knowledge of the behaviour of the system in ATLAS. For the HVmicro card, we found two types of problems: soft SEEs, coming mainly from the RAM, and latch-ups. We are working to lower the soft SEEs to an acceptable level (typically 420 per year for the whole detector). For what concerns the latch-ups, the solution will come from protection on the low voltage system. The dead time induce will be negligible. For what concerns the HVopto cards, we found that a component (optocoupler MCT2) was too sensitive to SEEs and would prevent the system from running in ATLAS (high voltages would be off most of the time). We thus decided to replace it by another high voltage optocoupler, the MOC8204. We proved that this solution could be retained for ATLAS. Other SEU seen during the tests (81 per year for the whole system) will switch off half of an HVopto card, corresponding to the loss of up to 12 PMTs in the detector. This problem will be taken into account in the DCS structure.

We wish to stress that all the solutions found to ensure a stable and reliable running system in ATLAS will trigger no extra costs: most of them are software ones. Concerning the MOC8204, we have largely enough spares to modify all HVopto cards. We are furthermore preparing a note describing our efforts to minimize SEE rates and summarizing our request on the low voltage part of the HV distributor system [10].

## Acknowledgements

We are indebted to Wojtek Hajdas, from PSI, for his kindness and his help in preparing the tests. Thanks to Federico Faccio for his help and to Martin Dentan for the reading of the manuscript.

## References

* [1] ATLAS Policy on Radiation Tolerant Electronics M.Dentan, Ph.Farthouat and M.Price ATC-TE-QA-001
* [2] M.Huhtinen and F.Faccio Nucl. Instr. Meth. A 450 (2000) 155
* [3] M.Dentan Courses on Radiation Effects on Electronic Components (CERN April 11,2000)
* [4] R.Chadelas _et al_ ATL-TILECAL-2000-003/PCCF RI 0004
* [5][http://pif.web.psi.ch/](http://pif.web.psi.ch/)
* [6][http://www.psi.ch/](http://www.psi.ch/)
* [7][http://www.fairchildsemi.com/](http://www.fairchildsemi.com/)
* [8][http://atlasinfo.cern.ch/Atlas/SUB_DETECTORS/TILE/production](http://atlasinfo.cern.ch/Atlas/SUB_DETECTORS/TILE/production) /electronics/DISTRIBUTOR/welcome_micropt.html
* [9][http://atlas.web.cern.ch/Atlas/GROUPS/FRONTEND/radhard.htm#Radiation](http://atlas.web.cern.ch/Atlas/GROUPS/FRONTEND/radhard.htm#Radiation) Constraints
* [10] About SEEs in the HV Distributor System of the Tile Cal R.Chadelas, Ph.Gris and D.Lambert note in progress.
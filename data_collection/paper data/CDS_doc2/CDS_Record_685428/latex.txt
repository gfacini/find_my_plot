# The Straw Cooling System in the ATLAS TRT

Technical Note

Per Skarby

EP Division

Technical Assistance Group1

Jan Godlewski

CERN EP ATI

INP Cracow

European Laboratory for Particle Physics

Laboratoire Europeen pour la Physique des Particules

CH-1211 Geneve 23 - Suisse

[MISSING_PAGE_EMPTY:2]

## Abstract

This technical note deals with the straw cooling system for the TRT End-caps in the atlas detector.

Ionization currents generate heat in the straws, that needs to be removed by a forced gas flow. The straws comprise a fragile structure hence high demands are put on the automatic control system regulating the pressure. The combination of a high gas flow requirement and small gas volumes yield unfavourable properties in terms of control stability. Early experiments on a prototype of the final cooling system, showed that pressure losses in the gas distribution lines must be decreased to fulfil the pressure control requirements.

One part of this note is devoted to a CFD-analysis of acritical component, an elbow duct, in the gas distribution line. The proposed design improvement was manufactured using cad/stereolithography which enabled the analysis to be validated by experiments. The proposed design resulted in a substantial decrease in pressure loss.

To enable analyses of the overall cooling system dynamics, generic simulation components were created and applied in a simulation of the prototype cooling system. The simulation was verified by an equivalent experiment on the prototype cooling system. The created components were further developed and used in simulations of the final straw cooling system. An unpublished manual describing the final simulations system can be found in the EDMS-ATLAS database:

_Document ATC-TL-ER-0001_

_ID 356805_

The manifolds that distributes and collects the gas in the group-of-wheels are dealt with in the last chapter where results from a fluid mechanical model implemented in Matlab are compared to values obtained by experimens.

[MISSING_PAGE_EMPTY:4]

## Table of Contents

### Abstract

iii

**Table of Contents**

**List of Figures**

**List of Tables**

**Chapter 1 Introduction.**

1.0.1 Gas Distribution

1.0.2 Gas System Dynamics

1.1 Future Work

1.2 References

**Chapter 2 The TRT End-cap Straw Cooling System.**

2.1 TRT layout

2.2 Straw Cooling and Ventilation in the TRT End-cap

2.2.1 Why pressure regulation is needed

2.3 References

**Chapter 3**

**Analysis of Cooling System Components**

3.1 Gas Distribution

3.1.1 Elbow prototypes

3.2 Computational Fluid Dynamics Analysis

3.2.1 Analysis Technique

3.2.2 The Finite Element Models

3.2.2.1 Meshing

3.2.2.2 Flow Regime and Fluid properties

3.2.2.3 Boundary Conditions

3.2.3 Model Solutions

3.2.4 Result Evaluation

3.3 Prototype Manufacturing

3.4 Validation Experiment3.5 Summary of the results

3.6 Conclusions and Discussion

3.6.1 Analysis versus Experiment

3.6.2 Design Evaluation

3.7 References

Chapter 4

**Modelling and Simulation of the TRT-Gas Cooling System**

4.1 The First Prototype Gas System

4.1.1 The First Prototype versus the Final System

4.1.2 Why simulating?

4.2 Simulation Model

4.3 Simulation Components

4.3.1 Model Assumptions

4.3.2 Model Components

4.3.3 The Gas Volume Component

4.3.4 Two-Valve-Volume Component

4.3.5 The Pump

4.4 Validation Experiment of the Simulink Model

4.4.1 Simulation Settings

4.4.2 Experiment Settings

4.4.3 Results

4.5 Conclusions

4.6 References

Chapter 5

**Manifold Analysis and Experiment**

5.1 Initial Design Specifications

5.2 The inlet manifold nozzle optimization

5.2.1 Optimization Model

5.2.2 Flow Model

5.2.3 Implementation

5.2.4 Parameter Settings

5.2.5 Results and Conclusions

5.3 Manifold experiments

5.3.1 Inlet manifold

5.3.2 The flow model compared to the experimental results.

5.3.3 Outlet manifold

5.4 Conclusions

Appendix A ansys/Flortan Fluid Flow Theory

A.1 Continuity Equation

A.2 Momentum equations

Appendix B One Dimensional Pipe Flow Theory

[MISSING_PAGE_EMPTY:7]

[MISSING_PAGE_EMPTY:8]

Figure 26: p. 39 Comparison between experimental and simulated results.

Figure 27: p. 43 The TRT end-cap straw cooling systems inlet and outlet manifolds.

Figure 28: p. 44 The inlet and outlet manifold openings.

Figure 29: p. 44 The inlet manifold model.

Figure 30: p. 47 The optimization algorithm solution scheme.

Figure 31: p. 49 The pressure in the manifold at the nozzle positions.

Figure 32: p. 49 The outflow from each nozzle. The straight line shows the desired optimal value.

Figure 33: p. 50 The nozzle diameter distribution

Figure 34: p. 51 The inlet manifold experiment setup.

Figure 35: p. 53 The flowmodel versus the experimental results. Total flow = 25m3/h

Figure 36: p. 53 The flowmodel versus the experimental results. Total flow = 37m3/h

Figure 37: p. 54 The flow uniformity plots for total flows q=12.5, q=25, q=37.5m3/h respectively.

Figure 38: p. 55 The outlet manifold experiment setup.

Figure 39: p. 55 The pressure pick-up holes.

Figure 30: p. 64 The elbow prototype manufactured in stereolithography

Figure 31: p. 66 Data sheet from the pump manufacturer (Rietschle) SKG 226

Figure 32: p. 70 The Simulink Model

Figure 33: p. 72 Assembly drawing of the TRT set-of-wheels showing the elbow duct location.

Figure 34: p. 74 Elbow Detail Drawing

List of Tables

Table 1 p. 8 Design flow of CO\({}_{2}\) per end-cap.

Table 2 p. 22 Analysis and experimental results.

Table 3 p. 27 Design flow of CO\({}_{2}\) (per end-cap).

Table 4 p. 38 Simulation Parameters.

Table 5 p. 40 Simulation and Experiment results correspondence.

Table 6 p. 44

Table 7 p. 48 Parameter settings for optimization algorithm.

Table 8 p. 50 Optimization results and design variables.

Table 9 p. 52 Pressure distribution in inlet manifold for different flows.

Table 10 p. 52 Flowspeed measurements.

Table 11 p. 54 Inlet manifold pressure at first nozzle.

Table 12 p. 56 Outlet manifold with patched openings q=43m\({}^{3}\)/h (measured by total flow meter)

Table 13 p. 56 Outlet manifold with patched openings q=43m\({}^{3}\)/h (measured by total flow meter)

## Chapter 1 Introduction

This technical note deals with the cooling system of the atlas known as the Transition Radiation Tracker (trt). A detailed description of the trt and its functionality will follow in the next chapter. The demand of accurate pressure control and sufficient cooling is an absolute necessity to protect sensitive parts and assure that the trt maintain its detection performance during the whole lifetime of the experiment. The approach was to split the analysis into two sub-groups; one concerning the **distribution of the CO\({}_{2}\)-cooling gas** and the other dealing with the **dynamic behaviour and automatic control** of the system. The last chapter deals with the **gas manifolds** of the cooling system.

Different sub topics have previously been studied in [1] and [2] but the overall system design, operation and performance have not been completely described. Before the start of this analysis, experiments had been carried out on a first prototype of the gas cooling system. The aim of this note is to present the different steps as well as the results from an analysis of the trt end-cap cooling system dynamics and components.

#### Gas Distribution

This part deals with the chain of components that constitute the gas distribution line. It focuses on energy losses in internal flows and a vital component, an elbow duct, was identified and chosen as subject for the analysis. The initial design was modified with the aim to reduce the energy loss in the flow but still satisfy the geometric constraints from the surrounding components. A prototype of the improved design was manufactured in stereolithography and the analysis validated by experiments.

The tools used were:

* Pro/engineer a solid modelling cad tool.
* ansys/flotran for the computational flow dynamics analysis.
* A LabView equipped PC was used for data acquisition in the experimental work.

#### Gas System Dynamics

In this part, the dynamic behaviour of the gas cooling system is examined. Components of the cooling system are identified, modelled and linked together and simulated using Matlab/Simulink. A validation test on a physical prototype was done and compared to the simulation results. The aim of the simulation is to create model components that can be used in later simulations where different system configurations can be tested. This will reduce the necessity to build expensive physical prototypes and help greatly in the specification of the final cooling system components.

### Future Work

The flowchart in Figure 1 shows order in which the work was done. Once more of the components in the gas distribution network have been analysed and their properties fixed, a simulation of the complete and final system can be commenced and different operational conditions studied. This will be an iterative process until all the specifications can be considered fulfilled. After this step, a final system can be built, verified and put in operation.

### References

* 1 _Design Procedure for the Circular Manifold of the ATLAS TRT Forward Wheels_, R. Gebart, Technical Note, cern/TA1/21-96.
* 2 _Cooling of the forward TRT Wheels_, M.J. Price, Technical Note, cern/TA1/04-96.

Figure 1: The project structure showing the work done.

[MISSING_PAGE_EMPTY:14]

## Chapter 2 The TRT End-cap Straw Cooling System.

### 2.1 TRT layout

Each of the two TRT end-caps consists of three sets of independent type-of-wheels; A, B and C. At this time, only wheels of type A and B are being built and installed. The wheels of type C will be installed in the ATLAS detector at a later stage. The straws are mounted in 56, 8-plane wheels per end-cap, wheels of type A and B having straws stretched between radii 64 cm and 103 cm and wheels of type C having straws between 48 cm and 103 cm.

Figure 2: Layout of the TRT group-of-wheels.

### Straw Cooling and Ventilation in the TRT End-cap

The heat generated in the straws by the ions drifting towards the cathode, need to be removed with a forced gas flow [7]. The cooling gas does also serve the purpose of ventilation since it will remove any Xenon that might have leaked out from the straws. If Xenon gas would accumulate between the straws it would absorb transition radiation photons and thus decrease the performance of the detector. The cooling and ventilation gas chosen is CO\({}_{2}\) since it is one of the components in the working gas inside the straws. It is also safe, easily available, inexpensive and has good thermal properties.

The CO\({}_{2}\) gas is distributed around the perimeter by an inlet manifold, located inside the membrane, at the inner radius of the set of wheels. The gas flows radially outwards, absorbing the heat from the straws by convective heat transfer and is then guided through a heat exchanger that transfers the heat to a flourinert coolant which transports it outside the detector. In wheels of type A and C, the 8-plane wheels are mounted together to form 16-plane wheels. The heat exchangers are placed between each of the 16-plane wheels modules. Figure 3 shows the gas flow through the group-of-wheels of type A.

Figure 3: Scheme of CO\({}_{2}\) flow through the group-of-wheels type A (cross-section).

A circuit design for the gas cooling system, with estimations of pressure levels and flows, was proposed with one pump supplying all set of wheels with CO2 gas as in Figure 4. The pressure regulation would be carried out individually for each set of wheels.

The cooling requirements had been determined both by calculations and experiments before the start of the analysis and were based on the following assumptions:

* The maximum allowed temperature difference along any straw is 10-C. This is based on a requirement that the active gas density inside each straw must remain constant for constant gas gain.
* Each 8- or 16-plane wheel is equipped with a heat exchanger as seen in Figure 3. There is no heat exchanger after the last 8- or 16-plane wheel since the gas will be flowing back to the main pump where it will be cooled by an external heat exchanger.
* The estimated heat generation in the straws was set to twice the predicted amount for running at design luminosity\({}^{*}\).

Figure 4: Layout of the TRT end-cap cooling system (pressure levels not updated!)

It should be noted that although the cooling requirements were calculated, the layout and pressure levels shown in Figure 4 are proposals only, and was made initially when several parameters were still unknown.

#### 2.2.1 Why pressure regulation is needed

The pressure in any set-of-wheels must not, under any circumstances, divert from the atmospheric pressure by more than 5 mbar. The reason for this strict requirement is to guarantee the precision of the detector, i.e the exact position of the straws for successful particle detection. The amount of material needed for support and services is kept to a minimum in the inner detector to ensure good calorimeter performance1, and does not enable the design of a more rigid structure. If the pressure is let to divert too much from the atmospheric pressure, one would risk displacement and mechanical damage of the membranes dividing the set-of-wheels and a possible dislocation of the straws.

Footnote 1: Material in the detector may absorb energy of traversing particles before it has been measured in the calorimeter.

The differential pressure limit of 5 mbar was a specification of the maximum overpressure inside any set-of-wheels and the membranes were designed with respect to this value.

To get a notion of the magnitude of 5 mbars one can make a calculation of the resulting force when the pressure is applied to the membrane area.

Force on a body is given by:

\[\mathrm{F}\;=\;\mathrm{p}\cdot\mathrm{A} \tag{1}\]

where \(\mathrm{A}\) is the projected area, which in case of the annular membrane is given by:

\[\mathrm{A}\;=\;\pi(r_{\mathrm{outer}}^{2}-r_{\mathrm{inner}}^{2}) \tag{2}\]

\begin{table}
\begin{tabular}{|c|c|c|c|c|c|} \hline
**Set of wheels** & **Number of straws per wheel** & **Current (x2) [\(\mu\)A]** & **Heat** & **Total Heat** & **CO\({}_{2}\) flow** & \\
**A** & **12288** & **6.4** & **10** & **122** & **28.6** & **50.0** \\ \hline
**B** & **6144** & **6.4** & **10** & **61** & **14.4** & **25.0** \\ \hline
**C** & **9218** & **16.6** & **24** & **220** & **51.6** & **75.0** \\ \hline
**Total** & & & & & & **150.0 per end-cap** \\ \hline \end{tabular}
\end{table}
Table 1: Design flow of CO\({}_{2}\) per end-cap.

yielding the resultant force on the membrane:

\[\text{F}\,=\,(5\cdot 10^{2})\cdot\pi\cdot(1.03^{2}-0.6^{2})\,=\,1.1\text{kN} \tag{3}\]

which is a non-negligible force with respect to structural mechanics properties of the membrane. The present design consists of a sandwich structure with a honeycomb core and outer metal coatings.

### References

* [3]_A Central Rapidity Straw Tracker and Measurements on Cryogenic Components for the Large Hadron Collider_, H.Danielsson, University of Lund, Lund, 1997, pp. 26-31.
* [4]_The ATLAS Experiment_, cern Documented on the WWW at: [http://atlasexperiment.org/](http://atlasexperiment.org/).
* [5]_Elementarpartiklar_, Kosmos 1981 Band 58, Liber Forlag, Stockholm, 1981, pp. 15-20, 53-77.
* [6]_ATLAS Inner Detector TDR_, Volume II, ATLAS TDR 5, cern/LHCC 97-17,1997.
* [7]_Investigation of the Straws Cooling in the ATLAS TRT Wheels_, R.A. Astabatyan et al., ATLAS Internal Note INDET-NO-170, 1997.
* [8]_Particle Physics_, Martin&Shaw,2nd edition.

## Chapter 2

## Chapter 3 Analysis of Cooling System Components

It was found by early experiments on a prototype system [9] that pressure losses need to be kept low in order to fulfil the strict pressure control requirements inside the set-of-wheels.

### 3.1 Gas Distribution

The cooling gas is circulated in a closed system, shown in Figure 4. To obtain a flow with low energy losses it is vital to keep duct dimensions and any bend or elbow radii as large as possible, this is however due to geometric constraints in the inner detector, not always possible. At present, not all duct dimensions have been fixed but the parts constraining the available space must not be altered. A critical section in the distribution line is the 90' elbow, diverting the flow from the circular pipe along the beam axis, to the inlet manifold, depicted in Figure 5. Another figure of the parts surrounding the elbow can be found in Appendix G.

The maximum allowed diameter of the circular pipe is 26mm whereas the inlet manifold must have a rectangular cross section to fit in between the skins of the membranes enclosing the set-of-wheels volumes. The dimensions of the rectangular section were set to make use of all available space in the membranes and different prototypes of the elbow section shape were proposed.

#### 3.1.1 Elbow prototypes

The geometric constraints confining the number of possible designs are as follows:

* The diameter of the circular cross section must not be greater than 26mm.
* The trajectory radius of the elbow must not be smaller than 25mm.
* The thickness of the rectangular section must not be greater than 8mm.
* The width of the rectangular section must not be greater than 70mm.
* The elbow cross section must change from a circular to rectangular.
* The material must be able to withstand high levels of radiation.

For ten years of operation at the lhc, the absorbed dose of ionizing radiation in the trt is about 80 kGy.

Furthermore the elbow must be possible to produce using standard manufacturing techniques such as moulding and machining and preferably consist of only one part. The connecting surfaces must allow for an gastight seal that can withstand the actual pressure levels.

The initial design was a simple welded pipe connection to the rectangular duct and this configuration was used in the analysis as a "worst case" reference, since

Figure 5: The elbow section, diverting the flow from the circular pipe to the inlet manifold.

this design would be the most flow restrictive. Three alternative designs also shown below, were proposed and created using Pro/engineer":

1. Using this design, the part could be manufactured in welded or bonded aluminium sheets. The sharp corners could be smoothed and rounded by a plastic filler. The design is not likely optimal from a flow dynamic point of view but could be realised by standard manufacturing methods.
2. This design utilizes a special feature of the design software where the starting and ending cross-sections as well as a sweep trajectory is defined. The program then automatically calculates the thin walled part as shown above. Intuitively this design is the one that would be least flow restrictive but is not easily realised practically. If moulded, the part would have to be split in two sections and assembled afterwards since it will not be possible to extract the whole part without destroying the mould. Another option, although expensive, would be numerically controlled machining from a solid block.
3. The third design is an improvement of the initial design in such that it features inner and outer roundings. It can be manufactured easily out of a standard pipe bend which is cut and then welded onto the rectangular section. It suffers from the geometric constraint on the pipe diameter and does not make use of all the available space.

A decision was taken to study a version of design prototype 2 and compare it with the initial design. The ellipsoidal cross-section shown in the figure above was changed to rounded rectangular. A detailed drawing can be found in Appendix H.

Figure 6: Different elbow designs.

### Computational Fluid Dynamics Analysis

An analysis of the flow dynamics of the initial design and prototype 2 was carried out. The software used in the analysis was ansys/flotran1" which is a numerical fe-solver capable of solving compressible laminar or turbulent viscous flows in two and three dimensions. For a detailed description of the equations that are solved in ansys, see Appendix A.

#### 3.2.1 Analysis Technique

The property of interest in the analysis, is the flow resistance in the duct. That is, for a certain internal flow, what is the required driving pressure? This is equivalent to calculating the static pressure difference between two stations along a streamline in the flow.

A typical cfd analysis using ansys/flotran" consists of the following steps:

* Determine the problem domain It is necessary to identify the region of interest in order to restrict the size, and thus required calculation time, of the problem. The boundaries of the problem should be chosen where the conditions are known, e.g. pressure or velocity.
* Determine the flow regime The character of the flow is dependant of the geometry constraining the flow, the fluid properties and the magnitude of the velocity field. These parameters are described by the Reynolds number, which measures the relative strength between inertial and viscous forces and can be used to estimate whether the flow is laminar or turbulent. The Mach number, the ratio between the fluid speed and the speed of sound at any point in the flow field, determines if the flow can be considered compressible or incompressible. At or above Mach numbers of 0.7, significant difference between compressible and incompressible results can be expected.
* Create the finite element mesh The finite element mesh means dividing the flow domain into elements with finite dimensions. This is a very important step for a successful analysis. There is a number of different element shapes such as tetrahedral, wedge, mapped and free mesh, etc. The element size determines the resolution of the analysis and in regions of high gradients, e.g. close to walls, obstructions, the number of elements must be increased.

* Apply boundary conditions Boundary conditions can be applied before or after creation of the FE-mesh and can for example be set to restrict the flow in certain directions, i.e. setting velocity components to zero, or defining a region of constant static pressure. If a condition is not specified for a dependent variable, a zero gradient of that value normal to the surface is assumed. This can be used for symmetric flow assumptions.
* Set foltran analysis parameters This implies activation of the different solver options, laminar or turbulent, compressible or incompressible and setting the fluid properties such as density, viscosity and heat capacity if the compressible solver is chosen.
* Solve the problem During the solution progress, the rate of change of the dependant variables can be monitored and the stability of the analysis can be checked. The solution is only trustworthy if the rate of change of the dependant variables display a convergent behaviour. The flow equations are highly non-linear and it is often necessary to change meshing and add damping to obtain a stable solution.
* Examine the results The generated output files can be post processed and results can be plotted or graphically displayed on the geometrical model in ansys.

#### 3.2.2 The Finite Element Models

Two FE-models were made and analysed in ansys, the "initial design" (model 1) and design 2 (model 2). Model 1 could relatively easily be made using ansys own tools for creating FE-models whereas model 2 was considered to complex to be generated this way, and was instead imported directly from the cad-data using the IgES-standard.

3.2.2.1 Meshing Model 1 consists of two connected volumes that were meshed using brick elements. The mesh resolution was increased towards the joint where a high gradient was expected and close to the walls to capture boundary layer effects. Model 2 had to be meshed using an automatic free sweep method and did thus not allow for specific mesh improvements in certain areas.

#### 3.2.2.2 Flow Regime and Fluid properties

The fluid in the final system is CO\({}_{2}\) but in order to validate the analysis by experiment, the fluid properties were set equal to air.

Properties of air at 25\({}^{\circ}\)C and atmospheric pressure density: 1.204 kg/m\({}^{3}\) kinematic viscosity: 15.8*10\({}^{-6}\) m\({}^{2}\)/s If one neglects the effects of the different viscosities between two fluids, or alternatively alter the Reynolds number correspondingly, it is possible to calculate the pressure loss for a different fluid, using the same coefficient of resistance. Consider a change of fluid to CO\({}_{2}\)-gas:

Properties of CO\({}_{2}\) at 25\({}^{\circ}\)C and atmospheric pressure density: 1.784 kg/m\({}^{3}\) kinematic viscosity: 8.38*10\({}^{-6}\) m\({}^{2}\)/s In the case of an incompressible fluid and for a given Reynolds number, the fluid resistance coefficient is:

\[\zeta=\frac{\Delta\text{p}}{\frac{1}{2}\cdot\rho\cdot\nu^{2}} \tag{4}\]

where the denominator, density times the velocity squared, is known as the dynamic pressure of the flow. If the flow occurs at the same Reynolds number, the pressure loss for the new fluid is given by the dynamic pressure times the

Figure 7: The two FE-models showing the mesh elements.

coefficient of resistance. It should be noted that the coefficient of resistance is **strongly** dependant on the Reynolds number. The total pressure losses in a section conducting fluid, is for ease of calculation separated into local pressure losses (\(\Delta\)p\({}_{\text{loc}}\)) and pressure losses resulting from friction (\(\Delta\)p\({}_{\text{fr}}\)). These factors are summed to make up the total pressure loss. The definition "Reynolds number" that has been used so far, requires a brief explanation. The Reynolds number is a dimensionless unit and measures the ratio between inertial and viscous forces and is defined as:

\[\text{Re = \frac{\text{inertia force}}{\text{viscous force}}\ =\ \frac{\rho\cdot\nu\cdot\text{L}}{\mu} \tag{5}\]

where \(\nu\) is the average flow speed, \(\mu\) the kinematic viscosity, \(\rho\) the density and L the characteristic length, which in case of internal flow is the (hydraulic) diameter of the duct. The kinematic viscosity is the dynamic viscosity divided by the density of the fluid. The hydraulic diameter of a non-circular duct can be calculated using the following expression:

\[\text{d}_{\text{h}}\ =\ \frac{4(\text{cross-sectional area})}{\text{wetted perimeter}}\ =\ \frac{4\cdot\text{A}}{\phi} \tag{6}\]

If the inertial forces are dominating, instabilities develops and fluctuations in velocity and pressure start to occur. Thus the Reynolds number governs the character of the flow and can be used to determine whether the flow is turbulent or laminar. The region where the flow changes from laminar to turbulent is called the transition region and occurs at approximately Re-2300.[12]

Using this number to establish a transition velocity for the analysis of the elbow with air as fluid yields:

\[\nu\ =\ \frac{\text{Re}\cdot\mu}{\rho\cdot\text{L}}\ =\ \frac{2300\cdot 16.7 \cdot 10^{-6}}{1.2\cdot 25\cdot 10^{-3}}\ =1.3\ \text{m/s} \tag{7}\]

thus the flow in the elbow will be turbulent for the whole working range used in the TRT set-of-wheels. The Mach number sets an upper limit of the validity of the incompressibility assumption. Using a Mach number of 0.4 results in a flow speed of

\[\nu\ =\ 0.4\cdot\nu_{\text{sound}}\ =\ 136\ \text{m/s} \tag{8}\]

which would, in a 25 mm circular pipe as with the elbow, correspond to a flow of 240 m\({}^{3}\)/h which is more than three times higher than the highest design flow (75m\({}^{3}\)/h).

#### 3.2.2.3 Boundary Conditions

The flow equations require boundary conditions to be solved, i.e. boundaries where the solutions can terminate. These can for example be specified components of the flow speed or the static pressure. In the analysis, the outlet area was set to have zero static (relative) pressure and the velocity component normal to the inlet area was set to the average speed resulting in the designated flow. The other components were set to zero as well as all components at the walls of the models to obtain an attached flow, see Figure 8.

The zero velocity condition at the wall, the so called 'no-slip' condition results in a velocity profile, where the velocity increases gradually until it reaches the edge of the boundary layer. Shear stresses are dominating in the boundary layer which can be turbulent, laminar or transitional.

#### 3.2.3 Model Solutions

As seen in Figure 8, the Reynolds number indicate that the flow is turbulent. When solving for turbulent flows in ansys it was often found advantageous to first attain a laminar solution and then continue the iterations but with the turbulent solver switched on. The turbulence model used in the analysis is the default K-e model that adds a turbulent viscosity component (calculated by the turbulence model) to the absolute (laminar) viscosity.

\[\mu_{\mathrm{eff}}\,=\,\mu+\mu_{\mathrm{turb}} \tag{9}\]

In general, a more turbulent flow yields a higher effective viscosity.

Figure 8: The boundary conditions.

[MISSING_PAGE_EMPTY:29]

The maximum static pressure (the red area in Figure 10) is located to the area where the flow is abruptly diverted and the speed is reduced. This is consistent with Bernoulli's equation stating that in a steady state incompressible flow, the sum of the dynamic and static pressure is constant, thus if the speed is reduced, the static pressure has to increase.

Figure 11: The distribution of the sum of the velocity components in model 1 (m/s).

Figure 10: The static pressure distribution in model 2 (Pa).

### Prototype Manufacturing

The design studied in model 2 was manufactured in plastic epoxy using a technique known as stereolithography (see Appendix C). The manufacture of the part served both as an evaluation of the technique and enabled the CFD analysis to be validated.

### Validation Experiment

Two pumps, connected in parallel, were used and a manual by-pass valve adjusted to cover a range of different flows. The elbow was connected to a hose and let to flush the air into the room of the experiment. This gives atmospheric pressure conditions at the outlet area and reading the relative pressure at the inlet gives the total pressure loss across the elbow component. Since the hose would also impose a pressure loss, measurements were taken both with and without the elbow fixed to the hose. The schematic layout of the experiment can be seen in Figure 13.

Figure 12: The static pressure distribution in model 1 (Pa).

### Summary of the results

It was found that the difference in pressure loss was very small between having the elbow mounted and unmounted, hence the measurements had to be at least at 30 to 40 m\({}^{3}\)/h for the difference in upstream pressure to be sensed by the pressure gauges used in the experiment. The maximum flow was restricted by the two pumps, that managed to supply a maximum of 60 m\({}^{3}\)/h. The acquired signals proved rather noisy, which also complicated the experiment. Finally, the data was analysed in MatLab and a curve fit was applied to the measurements with and without the elbow. The difference between the curves was then calculated and registered as the pressure loss for the flow through the elbow. Table 2 shows the results from the analysis and experiment.

Figure 14 shows pressure loss versus the flow. Since the pressure loss for turbulent flow is approximately proportional to the velocity squared1, a quadratic curve was fitted2 to the ansys cfd results. The figure does also display the experimental results.

\begin{table}
\begin{tabular}{|c|c|c|} \hline Flow & Pressure Loss in ansys & Pressure Loss in Experiment \\ m\({}^{3}\)/h & (mbar) & (mbar) (interpolated) \\ \hline
**model 1** & & \\ \hline
50 & = 25 & not measured \\ \hline
**model 2** & & \\ \hline
5.3 & 0.08 & = 0.6 \\ \hline
25 & 1.2 & = 2.8 \\ \hline
**50** & **4.5** & = **4.2** \\ \hline
75 & 10.8 & not measured \\ \hline
100 & 19.3 & not measured \\ \hline \end{tabular}
\end{table}
Table 2: Analysis and experimental results.

Figure 13: Scheme of the experiment for measuring the pressure loss in the elbow duct.

### Conclusions and Discussion

#### Analysis versus Experiment

The CFD results displays very good agreement with the theory outlined in Appendix B where it is shown that the pressure loss is proportional to the square of the fluid velocity. The experimental data, on the other hand diverts both in numeracy and behaviour. The main reasons for this deviation are likely due to the noisy data acquisition and the fact that the pressure levels are rather low. The range of the pressure gauge was 0-50mbar and the resolution might have been insufficient.

#### Design Evaluation

It was shown in this chapter how the pressure loss in an elbow duct can be reduced, by altering the geometry guiding the flow. The pressure loss according to the analysis is at least a factor 5 smaller in model 2 than in the initial design for the given flow of 50 m\({}^{3}\)/h. The elbow design shown in model 2 is a feasible concept with respect to the geometry constraints but it remains to be settled whether the final elbow component can be manufactured by stereolithography or if another method has to be used. It should also be pointed out that other components in the gas distribution line may force the design of the elbow to be altered since the pressure levels are still unknown. Problems such as leakages at high supply pressures will have to be further investigated.

Figure 14: Pressure loss in the duct versus the flow.

### References

* [9]_TRT Meeting_, Presentation by A. Wasem and S.Haider, cern 20 February 2002
* [10]_VDI-Warmeatlas 6_,VDI-Verlag GmbH, Dusseldorf, 1991
* [11]_ANSYS 5.7.1 Help_, On-line documentation, unpublished, 2001
* [12]_Introduction to Thermal Sciences: thermodynamics, fluid dynamics, heat transfer_, F.W Schmidt et. al., 2nd edition, John Wiley & Sons Inc., 1993
* [13]_ANSYS, Inc. Theory Manual_, Twelfth Edition, SAS IP

## Chapter 4 Modelling and Simulation of the TRT-Gas Cooling System

This chapter will describe the modelling and simulation of the end-cap gas cooling system for the TRT-detector. A prototype, referred to in this text as the **First Prototype,** of the end-cap cooling system, was used to validate the simulation model. The simulation components are described by differential equations governing their physical behaviour. These equations are then linked together and solved using the Matlab(tm) module Simulink(tm).

Simulink(tm), widely used in control engineering[16], is a software that enables any dynamic system, i.e. systems whose outputs and states change with time, to be modelled, simulated, and analysed. In this note it will be used for simulating the dynamic behaviour of a gas system. It has a graphical user interface where component blocks can be connected in an interactive fashion. Parameters can also be easily altered, enabling different system setups to be simulated and analysed.

### 4.1 The First Prototype Gas System

The first prototype of the gas system was assembled from parts previously used in other experiments. Photographs of the prototype can be seen in Figure 15 and the layout drawing in Figure 16. A number of tests were carried out in order to learn more about the characteristics of the components and the system as a whole.

A data acquisition system that logged data such as pressure levels at different stations, the flow and the output signals from the two pid controllers, was installed. The pid's were connected to two regulator valves:

* pid1 sensing the pressure inside the vessel corresponding to the set-of-wheels, was connected to a valve "sauter1", regulating the outflow from the vessel and thus the pressure in the vessel.
* pid2 sensing the pressure in the low pressure pipe before the pump and connected to a by-pass valve "sauter2" connected in parallel with the pump. This controller will strive to maintain a constant pressure at the inlet of the pump.

#### 4.1.1 The First Prototype versus the Final System

The final trt end-cap cooling system will be a unique system in terms of performance requirements. The high flow rate together with the strict pressure envelope in which the system has to operate will put high demands on valves, actuators, controllers, etc.

The prototype was designed to resemble the final gas cooling system but some of the components proved to be insufficient in capacity and performance:

* The pump used in the experiments supplied only about 15m\({}^{3}\)/h at the pressure levels during testing, and did thus not reach the designated flow (Table 3).
* The regulator valve, "sauter1", at the outlet of the vessel was suffering from a bad stem. Friction between the stem and the seal bushing resulted in an un-smooth travel of the stem, and the pneumatic actuator controlling the stem (a closed-loop system), was due to this reason, not completely stable during operation.

Figure 15: The First Prototype Gas SystemThe above mentioned limitations will not prevail in the final system and this must be taken into account when reading experimental results. A better valve with less stem friction, will likely yield better servo properties of the valve and thus a higher robustness of the cooling system. A higher flow will however make the system response faster and thus increase the risk of instability.

#### Why simulating?

It is clear from the previous arguments that simulation of the cooling system is a very useful complement to building (expensive) physical prototypes in a number of ways:

Figure 16: Layout of the First Prototype Gas System.

The main advantage of simulation is that different system parameters may be altered easily. This enables different configurations to be tried out, e.g. instead of buying a new pump or a valve, one adjusts values in a data file.
2. Prototypes are sometimes built using components that will not be used in the final system. The risk is then high that the prototype will display characteristics that will not occur in the final system and that problems occurring in the final system will not be discovered by experiments on the prototype.
3. Simulations can be used to specify the minimum requirements for a certain component, this helps in quickly reaching an operational system.

Simulations are usually subject to simplifications and assumptions and these need to be viable with respect to the requested accuracy. It is also often required to validate the simulation results by physical experiments.

### Simulation Model

Since the layout shown in Figure 17 is rather complex, a simplified scheme of the first prototype was created by dividing it into components. The components were then linked together into a simulation model, referred to in this text as the **First Simulation Model**.

* The first simulation model is built up of a pump connected to a volume (hp1) that corresponds to the duct between the pump and the buffer volume.
* The ducts between the buffer volume and the trt volume are, in the same fashion, merged into another volume (hp2).
* The same type of simulation component is used for both the trt volume and the buffer volume, only with differing valve and volume settings.
* The loop is closed by another volume (lp) that links the trt volume back to the pump.

The scheme of the first simulation model can be seen in Figure 17 and the complete Simulink model in Appendix F.

### Simulation Components

The system is divided into components and sub-components. Each of these components will be identified by a block or a system of blocks in a hierachical system with assigned input and output functions of time, see Figure 18. Simulink does only supply a limited number of "pre-programmed" functional blocks and none concerning gas dynamics, hence all the components that were used in the simulation were programmed for the purpose of the simulation. The blocks are, however, generic in the sense that they can be modified and used repeatedly in any system layout.

A Simulink model specifies the time derivatives of its continuous states but not the values of the states themselves. Thus, when simulating a system, Simulink

Figure 17: Scheme of the first simulation model

Figure 18: Scheme of a Simulink component block.

must compute continuous states by numerically integrating their state derivatives. Simulink provides implementations of numerical integration techniques called ordinary differential equation (ode) solvers. The solver that was used in the first simulation model was ode45, which is a general purpose ode-solver based on an explicit Runge-Kutta, Dormand-Prince formula.

#### 4.3.1 Model Assumptions

The cooling system that was modelled is based on the ideal gas law and assumes the behaviour of an ideal gas in all processes. The temperature of the gas was assumed to remain constant, corresponding to the case of no heat exchange between the gas and the surroundings. Since the pressure levels in the modelled system are very low (\(\sim\)mbar, relative) and the working temperature is around 20\({}^{\circ}\)C, the deviations from the behaviour of a perfect gas can be neglected [15]. The low pressure levels does also motivate the constant density assumption.

#### 4.3.2 Model Components

The components in the simulated system are:

* Volumes. This component corresponds to any duct or vessel where inflow and outflow are known.
* Pumps. A flow source that displaces gas from one volume to another.
* Valves. A valve can be used to model any restriction where the flow through it is governed by the pressures on each side of the restriction.
* PID Controllers.

These components are connected and simulated in Simulink".

#### 4.3.3 The Gas Volume Component

The gas volume component has an input and output flow and a volume property assigned to it. The general gas law is applied to calculate the pressure at any instance given the initial value.

\[\mathrm{p}\cdot\mathrm{V}\;=\;\mathrm{m}\cdot\mathrm{R}\cdot\mathrm{T} \tag{10}\]

Differentiating with respect to time and making the assumptions previously stated yields:\[\frac{\partial\mathrm{p}}{\partial\mathrm{t}}\,=\,\frac{\mathrm{R}\cdot\mathrm{T}}{ \mathrm{V}}\cdot\frac{\partial\mathrm{m}}{\partial\mathrm{t}} \tag{11}\]

The total mass flow is:

\[\frac{\partial\mathrm{m}}{\partial\mathrm{t}}\,=\,\mathrm{q}_{\mathrm{in}}- \mathrm{q}_{\mathrm{out}} \tag{12}\]

Integrating (11) using (12) with respect to time gives:

\[\mathrm{p(t)}\,=\,\int\limits_{\mathrm{t}_{0}}^{\mathrm{t}}\frac{\mathrm{R} \cdot\mathrm{T}}{\mathrm{V}}\cdot(\mathrm{q}_{\mathrm{in}}(\mathrm{t})- \mathrm{q}_{\mathrm{out}}(\mathrm{t}))\mathrm{dt} \tag{13}\]

The mass flow is given by multiplying volume flow with the density of the gas:

\[\frac{\partial\mathrm{m}}{\partial\mathrm{t}}\,=\,\rho\frac{\partial\mathrm{v }}{\partial\mathrm{t}} \tag{14}\]

The volume component can be used to model a pipe, vessel or any other enclosed constant volume where inflow and outflow are specified. The symbol and corresponding simulink block can be seen in Figure 19.

The block f(u) in the figure above realises equation (13), the input signals being the volume and the difference between in- and outflow. The next block is a

Figure 19: The Gas Volume Component.

numerical integrator which is initially set to output the reference (atmospheric) pressure. This value could be changed to simulate a volume containing compressed gas.

#### 4.3.4 Two-Valve-Volume Component

If flow into and out from the gas volume is, in some way, restricted, one has to use a different approach. The flow through the restrictions is depending on the pressures at each side and the in- and outflow has thus to be re-calculated at each time-step since the pressures are changing. The basic equation for determining the pressure inside the volume is the same as for the "volume only"-component. The Two-Valve-Volume component was used for both the TRT volume and the buffer volume in the first simulation model. The component and the corresponding Simulink block can bee seen in Figure 20.

In this model, a standard concept for calculating the restrictor (valve) characteristics is used (CETOP RP 50 P). According to [15], the volume flow is expressed as:

Figure 20: The Two-Valve-Volume Component.

[MISSING_PAGE_EMPTY:43]

The calculation of the C- and b-parameter is rather difficult for anything more complex than a single orifice. In practice, these parameters have to be determined by experiments.

The b parameter specifies the critical pressure ratio of the restrictor. For a sharp edged orifice the theoretical value of b is 0.528 [15]. This value can not be reached by any real pneumatic component. A valve consists of several orifices in the inlet and outlet channels and serial connections of orifices reduces the critical pressure ratio for the whole serial link. A typical value can be b=0.25.

Equation (16) can be realised in Simulink with standard mathematical block components (see Figure 21) rather than calling an external Matlab function. This improves the performance of the simulation significantly. In case p\({}_{2}\) is greater than p\({}_{1}\) (reversed flow), the function assigns a negative value to the output flow.

It should be noted that the simulink function in Figure 21 does not compare the pressure ratio to the b-parameter but assumes that the flow is always undercritical. This is a viable assumption since the pressure differences in the TRT Cooling System will be relatively small. It was also checked in simulations that the pressure ratio was indeed always smaller than the b-parameter even for step signals (zero to max) of the pump speed.

Figure 21: Critical/Undercritical flow determination function in Simulink.

#### 4.3.5 The Pump

The pump is in theory just a flow source. In a closed system, gas will be displaced around the loop causing a lower pressure on one side and higher pressure on the other. The pump cannot, however, supply any flow at any pressure due to leakages inside the pump, i.e. the flow is dependant on the pressure difference across the pump and the pump speed. The pump used in the prototype; a double flow side channel compressor (Rietschle SKG 226-2)1, supplies a maximum flow of 130m\({}^{3}\)/h at full speed and zero pressure difference and a maximum of 133mbar at zero flow. It was assumed to have linear characteristics according to Figure 23.

Figure 22: The \(\omega\)–functionThe pump component was combined with a by-pass valve that can be opened to reduce the outflow from the pump block. There are thus 4 nodes in the pump, all being set as input signals:

* The pump speed (v\({}_{\text{pump}}\))in revolutions per second. This determines the maximum output flow.
* The pressure on the inlet side (p\({}_{\text{in}}\)).
* The pressure on the outlet side (p\({}_{\text{out}}\)).
* The opening of the by-pass valve (C\({}_{\text{by-pass}}\)).

If the pump is to be connected in a looped system which is the case in the end-cap cooling system, the output flow has to be connected as an output flow from the volume on the inlet side of the pump. This will close the loop in the system since the pump will then only displace the gas from the inlet to the outlet volume. A schematic drawing and the corresponding simulink block of the pump can be seen in Figure 24.

Figure 24: The Pump Component.

Figure 23: Pump characteristics of the Rietschle SKG 226-2

Figure 25 shows the complete pump function.

The upper part of the diagram determines the flow from the pump. The pump function block takes the pressure difference as input parameter and returns a flow according to Figure 23. The lower part calculates the flow through the by-pass valve, which behaves just as an ordinary valve described earlier in this chapter. The block outputs the difference between the two flows as volume flow in m\({}^{3}\)/s.

### Validation Experiment of the Simulink Model

To validate the correctness of the modelled components, an experiment on the prototype was carried out and compared to results from the first simulation model that was shown in Figure 17.

#### 4.4.1 Simulation Settings

The number of unknown physical parameters was high since little or no data of the valves existed. Since it was considered too time consuming to acquire this data by experiments and also since the prototype valves will not be used in the final system, the valve settings (C\({}_{\text{in}}\), C\({}_{\text{out}}\)) in the simulation model were tuned manually to fit the experimental data as well as possible. It should be pointed out, however, that parameter changes in the simulations did resemble the behaviour of the physical system. The volumes of the vessels and ducts were calculated from measurements on the first prototype1, and implemented in the simulation. Table 4 shows the parameter settings that were used in the simulation.

Figure 25: The Pump Component in Simulink

The by-pass valve in the pump component was fully closed, i.e. C\({}_{\text{by-pass}}\) was set to zero and pid1 was set to manual mode.

#### 4.4.2 Experiment Settings

The experiment on the prototype consisted of a steep ramp input signal to the pump (it was switched on to full speed manually) with all regulator valves held at a constant opening in manual mode. sauter2 was fully closed as well as the manual by-pass valve mv10. sauter1 was set to 86% (100% = fully closed) since this gave reasonable pressure levels at other stations in the loop.

#### 4.4.3 Results

The acquired data from the experiment and the simulation results can be seen in Figure 26. The dashed lines are plotted from experiment data and the continuous lines show the simulation results.

\begin{table}
\begin{tabular}{|c|c|c|c|} \hline
**Simulation Component** & **Volume (m3)** & **C\({}_{\text{in}}\)** (m3/sPa)** & **C\({}_{\text{out}}\)** (m3/sPa)** \\ \hline HP1 & 0.033 & n/a & n/a \\ \hline Buffer Volume & 0.157 & 8.2\({}^{\circ}\)10 [8] & 5.2\({}^{\circ}\)10 [8] \\ \hline HP2 & 0.041 & n/a & n/a \\ \hline TRT Volume & 0.057 & 14\({}^{\circ}\)10 [8] & 2.15\({}^{\circ}\)10 [8] \\ \hline LP & 0.060 & n/a & n/a \\ \hline \end{tabular}
\end{table}
Table 4: Simulation Parameters.

The simulation model is a simplification of the first prototype layout since several ducts are lumped into just one volume component. It is therefore not possible to read the simulated pressure level at exactly the same prototype location, but one must instead compare the simulated pressure level to the closest corresponding pressure gauge on the first prototype. Table 5 shows the correspondence between the pressure levels in the simulation components and the pressure gauges on the first prototype.

Figure 26: Comparison between experimental and simulated results.

hP1 had no corresponding digital pressure gauge but an approximate steady-state value could be read from the manometer at mv3 during the experiment.

Figure 26 shows that experimental and simulated values correspond relatively well. The pressure in the trt volume does initially decrease in the experiment to later increase to its steady-state value, a behaviour that was clearly captured in the simulation. The dynamic behaviour of the pressure levels is not completely coherent in terms of delay time, time constants and occurrence but this can partially depend on a rather coarse data acquisition. The limiting factor was not the sampling rate but the high-level software logging of the data, that proved to be too time demanding to make fully use of the available hardware. Another possible cause is the model of the valves (restrictors) used in the simulation with the assumptions previously mentioned.

### Conclusions

It was shown in this chapter how the physical components of the first prototype were implemented in Simulink and how the simulation was validated by an experiment. The successful validation of the components will enable their use in future simulations where a more dynamic behaviour of the system can be studied. It will for example be possible to study cases like:

* Fluctuations in the pump speed yielding an unsteady gas flow.
* Leakages on both high and low pressure sides.
* Emergency switch-off.

Steady-state simulation results of the pressure levels may help in designing a system with minimum active-control demands, which in the case of the strict requirements of the trt end-cap cooling system, is highly desirable. Reducing the amount of active control will result in a system less sensitive to electrical interference and power failures.

\begin{table}
\begin{tabular}{|c|c|c|c|c|} \hline
**Simulated** & **Corresponding** & **Simulated** & **Experimental** & **Relative** \\
**Component/Property** & **Gauge** & **Steady-state value** & **Steady-state value** & **Error** \\ \hline HP1 & NONE & 28.8 mbar & 27 mbar & 6.7\% \\ \hline Buffer Volume & P1 & 22.9 mbar & 21.2 mbar & 8\% \\ \hline HP2 & P2 & 8.1 mbar & 6.2 mbar & 30\% \\ \hline TRT Volume & P3 (pTRTSim) & 6.0 mbar & 6.4 mbar & 6.3\% \\ \hline LP & P6 & -87.0 mbar & -82.8 mbar & 5.1\% \\ \hline Flow & Flow Meter & 3.7 m\({}^{3}\)/h & 3.5 m\({}^{3}\)/h & 5.7\% \\ \hline \end{tabular}
\end{table}
Table 5: Simulation and Experiment results correspondence.

### References

* [14]_Distributed Modelling for Simulation of Pneumatic Systems_, P.Krus, Fourth JHPS International Symposium on Fluid Power, Tokyo
* [15]_Basic Theory for Pneumatic System Design_, K-E Rydberg, Linkoping University, IKP Fluid and Mechanical Engineering Systems, 1997
* [16]_Control System Engineering using MATLAB(tm)_, B. Shahian M. Hassul, Prentice Hall, Englewood Cliffs, New Jersey, 1993
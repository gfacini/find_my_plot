[

I.N.F.N. and Dipartimento di Fisica, Milano, Italy

Vadim Kostyukhin

I.N.F.N. Genova, Italy

Ronald J. Madaras

Lawrence Berkeley National Laboratory, Berkeley, CA, USA

###### Abstract

This document provides a description of the survey performed on different components of the ATLAS Pixel Detector at different stages of its assembly.

[MISSING_PAGE_EMPTY:2]

Introduction

During the production of the ATLAS pixel detector great care was put in the geometrical survey of the location of the sensitive area of modules. This had a double purpose:

* to provide a check of the quality of the assembly procedure and assure tolerances in the geometrical assembly were met;
* to provide an initial point for the alignment (the so called "as-built detector"), better than the ideal geometry.

Since direct access to the sensitive area becomes more and more difficult with the progress of the assembly, the survey needed to be performed at different stages: after module loading on the local supports (sectors and staves) and after assembly of the local supports in disks or halfshells.

Different techniques were used, including both optical 2D and 3D surveys and mechanical survey.

This document summarizes the survey procedures, the analysis done on the collected data and how survey data are stored in case they will need to be accessed in the future.

Figure 1: Stave drawing and survey reference system.

Survey Procedures

### 2.1 Stave Survey

#### Reference system definition

A barrel stave layout and its reference system are shown in Figure 1.The y-axis is defined by the normal to the reference planes at the edge of the stave, the z-axis is given by the direction of one well machined edge of the stave.

This machined edge is not accessible after the modules have been mounted on the stave, therefore the stave reference frame is determined by a mechanical survey of the local support along with a touching probe. In this reference system, the positions of the ruby balls at the edge of the stave are also measured.

When the staves are loaded [1], the X-Z positions of the ruby balls are measured using an optical probe. These are used to set the stave reference system for the survey.

#### R\(\Phi\) survey

In the X-Z plane the full stave is measured optically in 2D.

The targets are four reference marks on the sensor surface, which are visible through openings in the flex hybrids [2]. They can be directly connected to the sensitive area, being at coordinates x=\(\pm\)8.9 mm, z=\(\pm\)29.9 mm, from the centre of the active area.

For redundancy, in case the above mentioned alignment marks are not visible, corners of the front-end chips are also measured. Their position with respect to the sensitive area is less known due to uncertainty in the flip-chip process, but in any case at the level of few micrometers.

The alignment marks are used to determine the x and z coordinates of the sensitive area region centre and the rotation of the module about the y-axis.

#### RZ survey

The optical probe used for the loaded stave reference system determination and the R\(\Phi\) survey does not have enough resolution to provide an acceptable precision on the vertical (y) coordinate.

This is performed using different techniques in the different stave assembly sites, to access some specific points on the front-end surface.

The two lines of points, which are collected at x=\(\pm\)11 mm are then fitted to a circle given by the following equation, where the parameters are indicated in Figure 2 and \(\theta\) is the angle of the tangent to the circle at the nominal center of module z, defined to be negative if oriented like in the figure 2:

\[\left(z-z_{c}+R\sin\theta\right)^{2}+\left(y-Y_{c}-R\cos\theta\right)^{2}=R^{2}\]

for which a parabolic approximation can also be given:

\[y=Y_{c}+\left(z-z_{c}\right)\tan\theta+\frac{1}{2}\frac{\left(z-z_{c}\right)^ {2}}{R\cos\theta}\]

#### Average plane and distortions

Putting together all the parameters, survey data for each module consist therefore of the following nine quantities:

* x\({}_{c}\), z\({}_{c}\), e\({}_{y}\): position of the center of the active area and orientation of the modules in the x-z plane, given from 2D survey
* y\({}_{c+}\), R\({}_{+}\), \(\theta\), parameter of the circle describing the edge of the module at x=+11 mm
* y\({}_{c}\), R\({}_{-}\), \(\theta\), parameter of the circle describing the edge of the module at x=-11 mmInterpolating between the two module edges, the module surface can be described with a sub-micrometer accuracy, by the following equation:

\[y=\frac{\left(x-x_{c}\right)+11\text{ mm}}{22\text{ mm}}\left[Y_{c_{+}}+\left(z-z_{c}\right) \tan\theta_{+}+\frac{1}{2}\frac{\left(z-z_{c}\right)^{2}}{R_{+}\cos\theta_{+}} \right]+\frac{11\text{ mm}-\left(x-x_{c}\right)}{22\text{ mm}}\left[Y_{c_{-}}+\left(z-z_{c} \right)\tan\theta_{+}+\frac{1}{2}\frac{\left(z-z_{c}\right)^{2}}{R_{-}\cos \theta_{-}}\right]\]

which can be decomposed in a linear term, describing a plane and two distortion terms:

\[y =\frac{Y_{c_{+}}+Y_{c_{-}}}{2}+\left(x-x_{c}\right)\frac{Y_{c_{+}} -Y_{c_{-}}}{22\text{ mm}}+\left(z-z_{c}\right)\frac{\tan\theta_{+}+\tan\theta_{- }}{2}\] \[\quad+\left(x-x_{c}\right)\left(z-z_{c}\right)\frac{\tan\theta_{+ }-\tan\theta_{-}}{22\text{ mm}}\] \[\quad+\frac{1}{2}\left(z-z_{c}\right)^{2}\left[\frac{1}{2}\left( \frac{1}{R_{+}\cos\theta_{+}}+\frac{1}{R_{-}\cos\theta_{-}}\right)+\frac{x-x_{ c}}{22\text{ mm}}\left(\frac{1}{R_{+}\cos\theta_{+}}-\frac{1}{R_{-}\cos\theta_{-}}\right)\right]\]

If we now define the quantities:

\[\mathcal{Y}_{c}=\frac{Y_{c_{+}}+Y_{c_{-}}}{2}\] \[\tan\varepsilon_{z}=\frac{Y_{c_{+}}-Y_{c_{-}}}{22\text{ mm}}\] \[\tan\varepsilon_{x}=\frac{\tan\theta_{+}+\tan\theta_{-}}{2}\] \[\theta=\theta_{+}-\theta_{-}\] \[\kappa_{\pm}=\frac{1}{R_{\pm}}\]

and neglect the very small difference between \(\cos\theta+\) and \(\cos\theta\)-, we can summarize the above result saying that the transformation that brings the local coordinates (in the module plane) to the stave frame is given by:

\[\begin{pmatrix}x\\ y\\ z\end{pmatrix}=\begin{pmatrix}\cos\varepsilon_{y}&\approx 0&\sin\varepsilon_{y}\\ \sin\varepsilon_{z}&\approx 1&\sin\varepsilon_{x}\\ -\sin\varepsilon_{y}&\approx 0&\cos\varepsilon_{y}\end{pmatrix}\begin{pmatrix}x_{ \text{local}}\\ 0\\ z_{\text{local}}\end{pmatrix}+\begin{pmatrix}x_{c}\\ y_{c}\\ z_{c}\end{pmatrix}\]

with the additional out of plane correction:

\[\mathcal{Y}_{\text{local}}=\frac{x_{\text{local}}z_{\text{local}}\theta}{22 \text{ mm}}+\frac{1}{2}z_{\text{local}}^{2}\left(\frac{\kappa_{+}+\kappa_{-}}{2 }+\frac{x_{\text{local}}\left(\kappa_{+}-\kappa_{-}\right)}{22\text{ mm}}\right)\]

These parameters (coordinates of the module center, three angles and distortions) are stored in the production database as described in Section 3.

Figure 2: Points measured along the edge of a module: the fitting program provides the curvature radius and the tangent to the circle at the nominal centre of the module, separately for the two sides.

### Halfshell Survey

#### 2.2.1 Reference system definition

The halfshell survey is performed in the ATLAS frame.

The link between the ATLAS frame and the CMM frame is done by measuring ruby balls located on the halfring used as support points for the staves. These ruby balls have been inspected at Peine (D), after the assembly of the empty halfshells, and results are reported in the figures attached to this document (see Section 5).

Six of these ruby balls are accessible for layer 1 and 2 halfshells, only four for the B-Layer. The transformation is computed by the CMM software using three selected ruby balls and matching the CMM reference frame with the ATLAS coordinates determined at Peine.

Changing the selection of the ruby balls results in reference systems which differ at most by 200 \(\upmu\)m within the sensitive region of the pixel detector.

#### 2.2.2 Stave measurement

For each stave are measured:

* the position of the ruby ball on the C-side,
* six points on the carbon-carbon plane below the ruby ball on the C-side,
* the position of the ruby ball on the A-side,
* six points on the carbon-carbon plane below the ruby ball on the A-side.

The six points on each side are fitted together to provide the equation of the carbon-carbon plane. Notice that the points are not compensated for the size of the touching probe, since this correction needs to know the orientation of the plane. Therefore after the fit the plane must be translated inwards by a distance equal to the radius of the touching probes (0.496 mm in our setup).

In the same way all the twelve points (six on A-side and six on C-side) are fitted together to provide an average stave plane. This plane is the corresponding one to the y=0 plane in the stave survey. A measurement is accepted if:

* deviation from sphericity of a ruby ball is less than 10 \(\upmu\)m (fabrication tolerance \(\pm\)0.125 \(\upmu\)m [3]);
* difference from nominal diameter of a ruby ball is less then 20 \(\upmu\)m (fabrication tolerance \(\pm\)1 \(\upmu\)m [3]);
* deviation from planarity of one of the end-planes is bigger than 50 \(\upmu\)m (fabrication tolerance \(\pm\)10 \(\upmu\)m [4]).

These cuts take into account the different quality of the ruby ball and carbon-carbon surfaces, and the strong correlation between the fitted diameter and the position of the centre of the sphere: given the few (5) measured points on each ball and their distribution, it may happen that the deviation from sphericity is small, while the centre is badly computed. The check on the diameter allows one to detect such problems.

Staves are measured always in a clockwise order as seen from the C-side (Figure 3) [5].

Labels to understand the geometrical objects in the report files available in the RDB, are indicated in Table 1.

Every halfshell is measured twice and the differences between the two set of measurements are computed in order to detect outliers and, if needed, repeat the measurements on them. The r.m.s. of these differences are quoted in Table 2. At the end the two measurements are averaged to provide the best estimation for the parameters. The uncertainty in these averages should be half the size of the r.m.s. of the differences.

Figure 3: Stave numbering and split planes between top and bottom halfshells, from [5]. During halfshell survey, staves are measured in clockwise order, according to this picture.

\begin{table}
\begin{tabular}{l l} \hline \multirow{2}{*}{Halfshell} & \multicolumn{2}{c|}{Ruby balls} & \multicolumn{2}{c}{Average planes} \\ \cline{2-3}  & R [\(\mu\)m] & R\(\Phi\) [\(\mu\)m] & Z [\(\mu\)m] & R-Z tilt [\({}^{\circ}\)] & R\(\Phi\) tilt [\({}^{\circ}\)] & R [\(\mu\)m] \\ \hline B-layer bottom & 5.7 & 3.4 & 3.9 & 0.0007 & 0.036 & 6.0 \\ \hline B-layer top & 7.3 & 3.8 & 3.5 & 0.0007 & 0.021 & 7.7 \\ \hline Layer-1 bottom & 8.5 & 6.3 & 3.5 & 0.0005 & 0.024 & 7.0 \\ \hline Layer-1 top & 12.2 & 21.9 & 3.8 & 0.0009 & 0.045 & 2.6 \\ \hline Layer-2 bottom & 15.6 & 14.8 & 7.9 & 0.0019 & 0.024 & 8.7 \\ \hline Layer-2 top & 6.0 & 4.5 & 3.6 & 0.0008 & 0.025 & 2.8 \\ \hline \end{tabular}
\end{table}
Table 2: The r.m.s. of differences between two half shell measurements

\begin{table}
\begin{tabular}{l l} \hline \multirow{2}{*}{**Label**} & **Description** \\ SP\#1 & C-side ruby ball \\ PT\#2-PT\#7 & Not-compensated points on the carbon-carbon plane below the C-side ruby ball \\ PL\#8 & Plane fitted through PT\#2-PT\#7 \\ PL\#9 & PL\#8 corrected for the size of touching probe \\ PT\#10 & Projection of di SP\#1 on PL\#9 \\ SA\#1 & A-side ruby ball \\ PTA\#2-PTA\#7 & Not-compensated points on the carbon-carbon plane below the A-side ruby ball \\ PA\#8 & Plane fitted through PTA\#2-PTA\#7 \\ PA\#9 & PA\#8 corrected for the size of touching probe \\ PL\## & Plane fitted through the 12 points PT\#2-PT\#7 e PTA\#-PTA\#7 \\ PL\#\# & PL3\# corrected for the size of touching probe \\ \hline \end{tabular}
\end{table}
Table 1: Identifiers of the survey objects in the raw data file. The \(\#\#\) character pairs indicates the progressive stave number within the halfshell.

### Sector and Disk Surveys

#### 2.3.1 Goal of the Survey

The goal of the survey of the ATLAS pixel endcap modules is to provide the position and orientation of the 48 pixel modules on each of the 6 disks, including any misalignments due to the placement of the modules on the sector and the placement of the sectors on the disk ring. These survey module alignment parameters are put into the conditions database, and are then used in the track reconstruction. The absolute positions of the disks or of the pixel endcap are not measured in this survey.

#### 2.3.2 Module Alignment Parameters

The pixel endcap module is treated as flat rigid plane, as the module distortions (such as bow) are very small. The bow of the module is defined as the distance of the module center to the plane defined by the module ends. Figure 4 shows the distribution of the bow measurements for all modules. The Gaussian fit to the bow distribution has a mean of 3 microns and a sigma of 8 microns. This small amount of bow has a negligible effect on the spatial resolution. Tobias Golling (LBNL) studied the effects of 60 micron module distortions on the five track parameter resolutions, and found a negligible effect (1% or less).

The local module coordinate system is shown in Figure 5 for "12:00 o'clock" modules in Endcap A and Endcap C, as seen from the interaction point (IP). Thus for modules on A disks:

* for a "12:00 o'clock" module X is to the right and Y is up (as seen from the IP),
* for a "6:00 o'clock" module X is to the left and Y is down (as seen from the IP).

For modules on C disks:

* for a "12:00 o'clock" module X is to the left and Y is up (as seen from the IP),
* for a "6:00 o'clock" module X is to the right and Y is down (as seen from the IP).

For all modules, Y is always in the outward radial direction. X,Y,Z form the usual right-handed coordinate system.

The module alignment parameters in the local module reference frame are those 6 parameters used to describe a flat plane:

X, Y, Z, \(\Phi_{\rm X}\), \(\Phi_{\rm Y}\), \(\Phi_{\rm Z}\)

where:

X,Y is the position of the module center [mm].

Z is the midpoint of the silicon sensor at the module center [mm].

\(\Phi_{\rm X}\) is the rotation of the module about the X (short) axis [mrad].

\(\Phi_{\rm Y}\) is the rotation of the module about the Y (long) axis [mrad].

\(\Phi_{\rm Z}\) is the rotation of the module about the Z axis [mrad].

The 3 phi angles are simple rotations, not Euler angles. Their order of application does not matter, since all the angles are so small.

In the local module reference frame, the nominal module positions are X=Y=Z=\(\Phi_{\rm X}\)=\(\Phi_{\rm Y}\)=\(\Phi_{\rm Z}\)=0. Thus the module alignment parameters are the displacements of the module from its nominal position (i.e. the difference from nominal).

Figure 4: Distribution of the module bow, for all pixel endcap modules.

Figure 5: Local module coordinate system for “12:00 o’clock” modules in Endcap A and in Endcap C, as seen from the interaction point.

#### 2.3.3 Description of the Sector and Disk Surveys

Figure 6 shows three endcap modules mounted on a sector. For the surveys, the sector (or disk) is mounted on the table of an optical SmartScope. The SmartScope very precisely measures X,Y coordinates (in the plane of the sector) by measuring the position of the table, and measures Z coordinates (perpendicular to the sector) with optical focusing.

When the pixel endcaps are installed in Atlas, the so-called "front" modules are on the sides of the sectors facing towards the interaction point, and the so-called "back" modules are on the sides of the sectors facing away from the interaction point.

To determine the module alignment parameters three different types of surveys of modules were done:

\begin{tabular}{l l}
**X,Y sector survey:** & Measured the X,Y position of survey targets at the 4 corners of front and back modules mounted on a sector. Survey is done before mounting sectors on disks. \\
**Z sector survey:** & Measured 32 X,Y,Z points on the top side of all modules (16 along one long edge, 16 along the other long edge) in the vicinity of the first and last chip ID pads of each front-end chip. The Z values are with respect to the plane of the sector (determined by the surfaces of the 3 mounting buttons). Survey is done before mounting sectors on disks. \\
**X,Y disk survey:** & Measured the X,Y position of survey targets at the 4 corners of front modules on sectors mounted on disks. \\ \end{tabular}

The data from each of the above surveys were used in the following ways:

\begin{tabular}{l l}
**X,Y sector survey:** & Used to calculate the X,Y,\(\Phi_{\rm Z}\) of front and back modules on a sector, due to the placement of the module on the sector. These are not the final X,Y,\(\Phi_{\rm Z}\) survey alignment parameters, as they do not include the effect of the placement of the sector on the disk ring. \\
**Z sector survey:** & Used to calculate the Z,\(\Phi_{\rm X}\),\(\Phi_{\rm Y}\) of front and back modules on a sector, due to the placement of the module on the sector. These are the final Z,\(\Phi_{\rm X}\),\(\Phi_{\rm Y}\) survey alignment parameters since no Z information was obtained during the disk surveys. \\
**X,Y disk survey:** & Used to directly calculate the final X,Y,\(\Phi_{\rm Z}\) of front modules, due to the placement of the module on the sector and the placement of the sector on the disk ring. \\ \end{tabular}

Used to indirectly calculate the final X,Y,\(\Phi_{\rm Z}\) of back modules:

\begin{tabular}{l l}
**\(\bullet\)** & It is assumed there is a small translation and rotation of a sector from nominal when it is mounted on the disk ring, which is determined from a fit to the differences in the local module positions of the three front modules between the X,Y sector survey and the X,Y disk survey. It is found that these fits of the sector movement are good to a couple of microns, which validates the above assumption. \\ \end{tabular}

\begin{tabular}{l l}
**\(\bullet\)** & Use this calculated sector movement to calculate how much the back modules move from nominal when the sectors are placed on the disk ring. \\ \end{tabular}

\begin{tabular}{l l}
**\(\bullet\)** & Add this calculated movement of the back modules to the X,Y,\(\Phi_{\rm Z}\) of back modules from the X,Y sector survey results, to get the final X,Y,\(\Phi_{\rm Z}\) parameters of back modules for both effects (the placement of the modules on the sector and the placement of the sectors on the disk ring). \\ \end{tabular}

#### 2.3.4 Calculation of the Survey Module Alignment Parameters

The six survey module alignment parameters were calculated from the survey data with the following procedure:

Using the **X,Y sector/disk survey data**, calculated:

**X,Y:**: The X and Y of the module center, in the sector reference frame, are calculated as the average of the 4 target X values and the 4 target Y values, respectively. They are then transformed to the local module reference frame.
**\(\Phi_{\rm z}\):**: This angle is also determined from the X,Y positions of the 4 targets at the corners of each module. The angle of rotation is calculated for each target, using the X,Y of the target and the X,Y of the module center. The average of the 4 angles is calculated for each module. \(\Phi_{\rm z}\) is the difference between this average value of rotation and the nominal value of rotation, for each module.

Using the **Z sector survey data**, calculated:

**Z:**: The 32 X,Y,Z points measured along the module edges were fit to a flat 3D plane using a ROOT macro, giving a module plane. The equation of the module plane was then transformed from the sector coordinate system to the local module coordinate system, resulting in Z = \(d\) + \(e^{*}\)X + \(f^{\rm th}\)Y. Z has been corrected here to be that of the midpoint of the silicon, with respect to nominal. Thus Z at the module center = \(d\).
**\(\Phi_{\rm x}\),\(\Phi_{\rm v}\):**: Since these angles are small, from the above equation: \(\Phi_{\rm x}\)=\(f\), \(\Phi_{\rm v}\)=-\(e\) (using the normal right hand definition of angles).

Figure 6: Three endcap pixel modules mounted on a sector.

Storage of Survey Data

Survey data need to be stored in several places.

In this section are described:

* the directory structure in the RawDatabaseServer where barrel raw data are to be stored
* definition of PDB tests that will contain:
* summary data for stave survey
* summary data from halfshell survey
* data from the sector and disk surveys.

In the following tables, the precision indicates the number of decimal digits. This is typically equivalent to a rounding error of 0.1 \(\upmu\)m or 0.001\({}^{\circ}\), which should match the printout format of most CMMs.

### RDB Data Structure

The typical directory structure on the Raw Database Server is:

Component Type/Serial Number/Test Type/Test version number

Files containing stave survey data are therefore in:

StaveAssembly/2021200######SURVEY/##/

and

StaveAssembly/2021200######SUMMARY/##/

where # indicates a digit.

Halfshell survey raw data will be in:

L2_HalfShAssemblyBot/20212001120121/SURVEY/##

L2_HalfShAssemblyTop/20212001120122/SURVEY/##

L1_HalfShAssemblyBot/2021200112011/SURVEY/##

L1_HalfShAssemblyTop/20212001120112/SURVEY/##

BL_HalfShAssemblyBot/20212001120101/SURVEY/##

BL_HalfShAssemblyTop/20212001120102/SURVEY/##

### PDB Test Definition

#### Sphere Coordinates

This test was originally defined for both Stave and StaveAssembly objects.

Data collected in the Stave survey need to updated and attached to the relevant StaveAssembly item.

Test name is **Stave Coord**.

The data content is shown in Table 3.

#### 3.2.2 Stave survey

The test is attached to StaveAssembly objects.

Test name is **STSurvey**.

Test content is defined in Table 4.

\begin{table}
\begin{tabular}{|l|l|l|l|l|} \hline Name & type & units & range / precision & Description \\ \hline M6C\_X & float & mm & -2 - 2 / 0.0001 mm & X coordinate of center of module M6C \\  & & & & in the stave reference system \\ \hline M6C\_Y & float & mm & -4 - 4 / 0.0001 mm & Y coordinate of center of module M6C \\  & & & & in the stave reference system \\ \hline M6C\_Z & float & mm & -400 - 400 / 0.0001 mm & Z coordinate of center of module M6C \\  & & & & in the stave reference system \\ \hline M6C\_EX & float & degrees & -3 – 3 / 0.001\({}^{\circ}\) & Rotation about the an axis parallel to the stave \\  & & & & X axis and passing about the module center. \\ \hline M6C\_EY & float & degrees & -2 – 2 / 0.001\({}^{\circ}\) & Rotation about the an axis parallel to the stave \\  & & & & Y axis and passing about the module center. \\ \hline M6C\_EZ & float & degrees & -2 – 2 / 0.001\({}^{\circ}\) & Rotation about the an axis parallel to the stave \\  & & & & Z axis and passing about the module center. \\ \hline M6C\_1RP & float & mm\({}^{\downarrow}\) & -0.002 – 0.002 – 10\({}^{\circ}\) & Inverse of curvature radius measured at \(\sim\)x=11 \\  & & & & mm. \\  & & & & That range should correspond to \(\pm\)1 mm bow \\  & & & & with a precision of 0.5 \(\upmu\)m \\ \hline M6C\_1RN & float & mm\({}^{\downarrow}\) & -0.002 – 0.002 – 10\({}^{\circ}\) & Inverse of curvature radius measured at \(\sim\)x=-11 mm. \\  & & & & 11 mm. \\  & & & & That range should correspond to \(\pm\)1 mm bow \\  & & & & with a precision of 0.5 \(\upmu\)m \\ \hline M6C\_TW & float & degrees & -1 – 1 / 0.001\({}^{\circ}\) & Difference between EX measurement at \\  & & & & x=\(\pm\)11 mm \\ \hline \end{tabular}... same 9 words repeated for modules M5C-M1C, M0, M1A-M6A

\end{table}
Table 4: Structure of the STSurvey test

\begin{table}
\begin{tabular}{|l|l|l|l|l|} \hline Name & type & units & range / precision & Description \\ \hline X1 & float & mm & 4-8 / 0.0001 mm & X coordinates of sphere C in the stave \\  & & & & reference system \\ \hline Y1 & float & mm & 0-4 / 0.0001 mm & Y coordinates of sphere C in the stave \\  & & & & reference system \\ \hline Z1 & float & mm & 400-450 / 0.0001 mm & Z coordinates of sphere C in the stave \\  & & & & reference system \\ \hline X2 & float & mm & 4-8 / 0.0001 mm & X coordinates of sphere A in the stave \\  & & & & reference system \\ \hline Y2 & float & mm & 0-4 / 0.0001 mm & Y coordinates of sphere A in the stave \\  & & & & reference system \\ \hline Z2 & float & mm & -400 - -450 / 0.0001 mm & Z coordinates of sphere A in the stave \\  & & & & reference system \\ \hline \end{tabular}
\end{table}
Table 3: Structure of the Stave Coord test.

[MISSING_PAGE_FAIL:16]

[MISSING_PAGE_EMPTY:17]

The vector normal to the average stave plane has components given by:

\[\textbf{n}=(\text{ cos(PL\_NX), cos(PL\_NY), cos(PL\_NZ))}\]

and so on for the other planes.

The orientation of **n** is defined to be toward the center of ATLAS.

The value of PL\_D is such that the plane is defined by equation

**n**-**x**+PL\_D=0

Since the value of **x** for which the above equation will be used range up to \(\sim\)1000 mm, the cosines must be computed with a precision of order of 10\({}^{\text{-7}}\), and double numbers are required.

The transformation from the stave survey frame to the ATLAS frame is computed using the projections of the center of spheres onto the average stave plane. It is found by matching the following items in the two frames:

* the mid-point of the two spheres' projections;
* the unit vector **n** = ( cos(PL\_NX), cos(PL\_NY), cos(PL\_NZ)) with the normal to the y=0 plane in the stave survey **j**=(0,1,0);
* the unit vector along the direction joining the two spheres' projections.

### Data from Sector and Disk Surveys

A 5 MB zipped folder, EC_Pixel_Survey_Data.zip, contains:

**Folders**, which contain files with the original survey measurements. The survey measurements are entered into the Excel files by the execution of Excel macros, which read many files from the folders.

**Excel files**, which contain both the raw data values (the X,Y,Z measurements of targets and points on the modules from the sector and disk surveys) and the necessary step-by-step calculations that must be done to produce module positions from the raw data values.

**Text files**, which contain the final survey module alignment parameters for the conditions data base.

The **folders** are:

\begin{tabular}{l l} disk\_surveys: & Raw data from X,Y disk surveys. \\ module\_Z\_survey: & Raw data from Z sector surveys. \\ sector\_module\_results: & Processed raw data from Z sector surveys. \\ sector\_survey\_summaries: & Raw data from X,Y sector surveys. \\ \end{tabular}

The **Excel files** for the analysis of the data from the **X,Y sector surveys** and **Z sector surveys** are:

\begin{tabular}{l l} Module\_Tilt\_Angles.xls: & Translate and rotate module plane equations to local module frame. \\ XYZ\_Sector\_Loading\_Stats.xls: & Summary of bow, tilt, XY placement, etc measurements. \\ Z\_Survey\_Measurernts.xls: & Process raw Z measurements from Z sector surveys. \\ Module\_positions\_on\_sectors.xls: & Calculation of alignment parameters for modules from sector surveys. \\ Disk\_0A\_V1.xls: & Module alignment parameters from sector surveys. \\ Disk\_1A\_V1.xls: & Module alignment parameters from sector surveys. \\ Disk\_2A\_V1.xls: & Module alignment parameters from sector surveys. \\ Disk\_0C\_V1.xls: & Module alignment parameters from sector surveys. \\ Disk\_1C\_V1.xls: & Module alignment parameters from sector surveys. \\ Disk\_2C\_V1.xls: & Module alignment parameters from sector surveys. \\ \end{tabular}

The **Excel files** for the calculation of the survey module alignment parameters from the **X,Y disk surveys** are:

\begin{tabular}{l l} Disk\_0A\_V2.xls \\ Disk\_1A\_V2.xls \\ Disk\_2A\_V2.xls \\ Disk\_0C\_V2.xls \\ Disk\_1C\_V2.xls \\ Disk\_2C\_V2.xls \\ \end{tabular}

The **Text files** with the **final survey module alignment parameters** for the conditions data base are:

\begin{tabular}{l l} Survey\_Align\_Param\_Pixel\_Disk\_0A\_V3.txt \\ Survey\_Align\_Param\_Pixel\_Disk\_1A\_V3.txt \\ Survey\_Align\_Param\_Pixel\_Disk\_2A\_V3.txt \\ Survey\_Align\_Param\_Pixel\_Disk\_0C\_V3.txt \\ Survey\_Align\_Param\_Pixel\_Disk\_1C\_V3.txt \\ Survey\_Align\_Param\_Pixel\_Disk\_2C\_V3.txt \\ \end{tabular}

Summary of results

### Results for Barrel Modules

#### 4.1.1 Comparison between stave and halfshell survey

Reconstruction of the barrel geometry requires overlapping the measurements coming from stave and halfshell survey, using the ruby balls.

Consistency checks on these measurements have been performed. Figure 7 shows the distance between the ruby balls as measured in the stave survey and in the halfshells survey. The agreement is good, with an r.m.s. of 19 \(\upmu\)m and no evidence of a systematic difference (average over 112 staves is -3 \(\upmu\)m).

Figure 8: **Height of the ruby balls over the stave plane. The two populations correspond to different batches of stave production (Polyform and IVW). The r.m.s. of the difference is 26 \(\upmu\)m.**

Figure 7: **Comparison of the ruby balls distance between the halfshell and stave surveys. The residuals have a r.m.s. of 19 \(\upmu\)m.**

Figure 8 compares the height of the spheres over the average plane. There is a good correlation between the two measurements, with a pair of outliers probably due to a swapping of the stave survey data for stave 4027. The two populations are due to two different batches of stave production: the original Polyform ones cluster at 1.5 mm height, while the more recent IVW staves clusters around 1 mm height.

In this case the r.m.s. of the differences is 26 \(\upmu\)m.

Overall we can therefore quote a systematic error due to the stave/halfshell survey mismatch of about 20 \(\upmu\)m.

#### 4.1.2 Module distortions

A summary of the distortion parameters \(k_{\pm}\) and \(\theta\), mentioned in section 2.1.4, is reported in Figure 9. The distortion size is provided in the caption.

As to the module curvature, while there is good correlation between the curvature on the two sides, an asymmetrical distribution is observed, with the curvature on the negative x side weaker than the one on the positive side. Also the twist parameter \(\theta\) has an asymmetric distribution.

This effect has been traced to be due to the pick-up tool used for stave loading in Genova, which was slightly distorting the modules during the loading.

Figure 10: Deviation from nominal position of module centers according to the stave survey.

Figure 9: Distortion parameters: on the left side, comparison between the curvature on the two sides of the modules. In this scale 0.1 m\({}^{-1}\) corresponds to a sagitta over the module length of 45 \(\upmu\)m. Right side is the 0 parameter distribution. The 0.05” r.m.s. is equivalent to a \(\pm\)25 \(\upmu\)m height difference on the edges.

[MISSING_PAGE_EMPTY:22]

### Results for Disk Modules

#### 4.2.1 Results of the X,Y and Z sector surveys

Using the data from the X,Y sector surveys and the Z sector surveys described in Section 2.3.3, the six module alignment parameters (X, Y, Z, \(\Phi_{\rm X}\), \(\Phi_{\rm Y}\), \(\Phi_{\rm Z}\)) were calculated (in the local module reference frame) for all front and back modules, as described in Section 2.3.4. These alignment parameters are the displacements from nominal due only to the placement of the module on the sector. The X,Y,\(\Phi_{\rm Z}\) alignment parameters calculated here from the X,Y sector surveys are not the final survey alignment parameters, as they do not include the effect of the placement of the sector on the disk ring. The Z,\(\Phi_{\rm X}\),\(\Phi_{\rm Y}\) alignment parameters calculated here from the Z sector surveys are the final survey alignment parameters, since no good Z information was obtained during the disk surveys.

In Figure 13 are the distributions of the X,Y,\(\Phi_{\rm Z}\) module alignment parameters calculated from the X,Y sector surveys (treating all the modules as A Disk modules, which means plotting the negative of the actual X and \(\Phi_{\rm Z}\) values for the C Disk modules), and in Table 6 are the means and sigmas of the Gaussian fits to these distributions. One sees several features:

* The mean of the X alignment parameter distribution is different for front and back modules: -2.8 microns for front modules, and +2.8 microns for back modules. This is due to a small systematic offset when the modules were mounted on the sectors. The opposite sign occurs when converting the survey measurements to the same coordinate system.
* The average sigma for the X and Y alignment parameter distributions is 2.0 microns, and the sigma for the \(\Phi_{\rm Z}\) alignment parameter distribution is 0.064 mrad. These resolutions include both the placement accuracy and the measurement precision, and thus represent upper limits on the placement accuracy. These small values show that the modules have been placed on the sectors with excellent accuracy. The measurement precision of the alignment parameters is in Section 4.3.

In Figure 14 are the distributions of the final Z,\(\Phi_{\rm X}\),\(\Phi_{\rm Y}\) module alignment parameters calculated from the Z sector surveys (treating all the modules as A Disk modules, which means plotting the negative of the actual Z and \(\Phi_{\rm X}\) values for the C Disk modules), and in Table 7 are the means and sigmas of the Gaussian fits to these distributions. The mean of the Z alignment parameter distribution is different for front and back modules: +50 microns for front modules, and -14 microns for back modules. In the calculation of the these Z alignment parameters it was assumed that the nominal Z value of the midpoint of the silicon sensor was \(\pm\) 2.1 mm from the midpoint of the sector. Thus while the nominal distance between the midpoints of the silicon of front and back modules is 4.2 mm, the Z sector survey shows that it is actually 4.264 mm, averaged over all modules.

\begin{table}
\begin{tabular}{|l|l|l|} \cline{2-3} \multicolumn{1}{c|}{} & Mean & Sigma \\ \hline X for Front Modules & -2.8 \(\pm\) 0.2 \(\mu\) & 2.1 \(\pm\) 0.2 \(\mu\) \\ \hline X for Back Modules & 2.8 \(\pm\) 0.1 \(\mu\) & 1.4 \(\pm\) 0.1 \(\mu\) \\ \hline Y for Front and Back Modules & -0.1 \(\pm\) 0.1 \(\mu\) & 2.3 \(\pm\) 0.1 \(\mu\) \\ \hline \(\Phi_{Z}\) for Front and Back Modules & -0.011 \(\pm\) 0.004 mrad & 0.064 \(\pm\) 0.004 mrad \\ \hline \end{tabular}
\end{table}
Table 6: Means and sigmas of the Gaussian fits to the sector survey distributions in Figure 13.

\begin{table}
\begin{tabular}{|l|l|l|} \cline{2-3} \multicolumn{1}{c|}{} & Mean & Sigma \\ \hline Z for Front Modules & 50.4 \(\pm\) 1.9 \(\mu\)m & 21.7 \(\pm\) 1.7 \(\mu\)m \\ \hline Z for Back Modules & -14.2 \(\pm\) 2.4 \(\mu\)m & 26.6 \(\pm\) 1.9 \(\mu\)m \\ \hline \(\Phi_{\rm X}\) for Front and Back Modules & -0.339 \(\pm\) 0.033 mrad & 0.545 \(\pm\) 0.026 mrad \\ \hline \(\Phi_{\rm Y}\) for Front and Back Modules & 0.029 \(\pm\) 0.030 mrad & 0.482 \(\pm\) 0.024 mrad \\ \hline \end{tabular}
\end{table}
Table 7: Means and sigmas of the Gaussian fits to the sector survey distributions in Figure 14.

[MISSING_PAGE_FAIL:25]

#### 4.2.3 Measurement Precision and Stability

The measurement precision is determined by comparing the X,Y module alignment parameters calculated from two X,Y disk surveys taken one right after the other. This was done for two disks, Disk 0A and Disk 1A. In Figure 16 are the distributions of the difference in the X module alignment parameters, and the difference in the Y module alignment parameters, for two surveys of these disks taken one right after the other. In Table 9 are the means and sigmas of the Gaussian fits to these distributions. Dividing the average sigma of these difference distributions by \(\sqrt{2}\) gives about 0.4 microns for the statistical precision of measuring the X,Y module alignment parameters.

The stability during a month of handling of a disk is determined by comparing the X,Y module alignment parameters calculated from two X,Y disk surveys taken one month apart. This was done for Disk 2A. During the month of handling Disk 2A was moved from one building to another and back by car (\(\sim\)2 miles round trip), U-tubes and exhaust tubes were added, the disk was transferred from the disk holder to the sector loading tool, 2 sectors were removed, and 2 sectors were loaded on the disk. This stability study only used the six sectors that were not removed. For the three "front" modules in each of those six sectors, Figure 17 shows the distributions of the difference in the X module alignment parameters, and the difference in the Y module alignment parameters, for two surveys of Disk 2A taken one month apart. In Table 10 are the averages and RMS of these distributions. It is seen that the stability of the measurements of the X,Y module alignment parameters is about 1 micron over a month of handling.

Figure 16: For two X,Y disk surveys taken one right after the other: a) Difference in the X module alignment parameters, b) Difference in the Y module alignment parameters.

\begin{table}
\begin{tabular}{|l|l|l|} \cline{2-3} \multicolumn{1}{c|}{} & Mean & Sigma \\ \hline X for Front Modules & -0.1 \(\pm\) 1.1 \(\mu\) & 12.6 \(\pm\) 0.9 \(\mu\) \\ \hline X for Back Modules & 1.1 \(\pm\) 1.0 \(\mu\) & 11.5 \(\pm\) 0.8 \(\mu\) \\ \hline Y for Front and Back Modules & 35.3 \(\pm\) 0.7 \(\mu\) & 11.4 \(\pm\) 0.6 \(\mu\) \\ \hline \(\Phi_{\mathrm{Z}}\) for Front and Back Modules & -0.029 \(\pm\) 0.008 mrad & 0.130 \(\pm\) 0.009 mrad \\ \hline \end{tabular}
\end{table}
Table 8: Means and sigmas of the Gaussian fits to the disk survey distributions in Figure 15.

\begin{table}
\begin{tabular}{|l|l|l|} \cline{2-3} \multicolumn{1}{c|}{} & Mean & Sigma \\ \hline Difference in the X alignment parameters & 0.05 \(\pm\) 0.05 \(\mu\) & 0.48 \(\pm\) 0.05 \(\mu\) \\ \hline Difference in the Y alignment parameters & -0.32 \(\pm\) 0.06 \(\mu\) & 0.59 \(\pm\) 0.06 \(\mu\) \\ \hline \end{tabular}
\end{table}
Table 9: Means and sigmas of the Gaussian fits to the difference distributions in Figure 16.

#### 4.2.4 Additional Uncertainty for Back Module Alignment Parameters

As seen from the previous Sections, the final X,Y,\(\Phi_{\mathrm{Z}}\) survey alignment parameters for the front modules of a sector were determined from SmartScope measurements done after the sectors were attached to the disk rings (the "X,Y disk survey"). But the back modules were not measured after the sectors were attached to the disk rings; their positions were only measured when they were mounted on the sectors. Thus to get the analogous final X,Y,\(\Phi_{\mathrm{Z}}\) survey alignment parameters for the back modules requires an additional step (using the positions of the back modules relative to the front modules from the measurements of the front and back modules on the individual sectors in the "X,Y sector survey"). This introduces several additional sources of uncertainty for the alignment parameters of the back modules, which are listed in Table 11. When added in quadrature, they equal about 5 microns.

\begin{table}
\begin{tabular}{|c|c|c|} \cline{2-3} \multicolumn{1}{c|}{} & Average & RMS \\ \hline Difference in the X alignment parameters & 0.0 \(\upmu\) & 0.9 \(\upmu\) \\ \hline Difference in the Y alignment parameters & -0.7 \(\upmu\) & 1.0 \(\upmu\) \\ \hline \end{tabular}
\end{table}
Table 10: Averages and RMS of the difference distributions in Figure 17.

Figure 17: For two X,Y disk surveys taken one month apart: a) Difference in the X module alignment parameters, b) Difference in the Y module alignment parameters.

The 4 micron uncertainty due to the "Back module position relative to front modules in the sector survey" is due to the error in measuring the reference holes on the front and back sides of the sector, and the variation of the actual distance between the holes. It was determined by using the measured positions of the two reference holes to calculate the distance between them, and then calculating the variation of that distance from nominal.

The 2 micron uncertainty due to the "Movement of modules between surveying them on sectors and surveying them on disks" was determined by comparing the distance between targets on neighboring modules from the sector survey measurements to the same quantity from the disk survey measurements, for the front modules. It is assumed that the results apply equally well to the back modules. For front modules this movement is accounted for since the front modules are measured again after mounting the sectors on the disks, but this is not true for the back modules.

Finally, there is a 2 micron uncertainty due to the "Extrapolation of back module measurements on sectors to back module positions on disks". It is assumed there is a small translation and rotation of a sector from nominal when it is mounted on the disk ring, which is determined from a fit to the differences in the local module positions of the three front modules between the X,Y sector survey and the X,Y disk survey. The sector fits are used along with the positions of the back modules from the X,Y sector surveys to calculate the final X,Y,\(\Phi_{\rm Z}\) survey alignment parameters for the back modules. The 2 micron uncertainty arises from the uncertainty in the fits.

#### 4.2.5 Conclusion for Disk Modules

The X, Y, Z, \(\Phi_{\rm X}\), \(\Phi_{\rm Y}\), \(\Phi_{\rm Z}\) survey alignment parameters of the 48 pixel modules on each of the 6 endcap disks have been determined. These alignment parameters give the position and orientation of each module due to the effects of the placement of the modules on the sector and the placement of the sectors on the disk ring. The distributions of the final survey module alignment parameters are in Figures 14 and 15, and the means and sigmas of the Gaussian fits to these distributions are in Tables 7 and 8. The statistical uncertainty in the X,Y survey module alignment parameters is about 1 micron for front modules, and about 5 microns for back modules.

## References

* [1]_Procedure for building the Loading Reference System on the New Stave_ ATL-IP-FP-0025
* [2]_Pixel Sensor Parameters_ ATL-IP-EP-0011
* [3]_Fiducial balls purchasing specifications_ ATL-IP-ES-0043
* [4]_Engineering drawing of the new TMT halves_ ATL-IP-ED-0201
* [5]_Barrel Layout Parameters_ ATL-IP-EP-0015
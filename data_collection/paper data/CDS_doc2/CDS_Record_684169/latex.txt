# TRT detector HV power supplies

- version 1.1 -_

## 1 Introduction

Following note is meant as basic specifications for final design of the TRT HV power supplies system. It allows for possible comparison of different technical solutions. Two alternative solutions for system are sketched out to have some freedom for economical manoeuvre. Some of the specifications have to be defined in only approximated way due to not yet fixed technical solutions of the HV distribution. However the set of numbers should allow for first functional model to be designed and build.

## 2 General considerations

**Organisation of detector**

The TRT detector is organised into a barrel part and two end-cap parts. The barrel TRT consists of three layers of 32 modules each, corresponding to a total of 52 544 straws. The end-cap TRT consists of 36 wheels of three different types (A, B, C), with 18 wheels on each side of the barrel TRT, corresponding to a total of 319 488 straws. The total number of separate high-voltage loads is 372 032. This loads are grouped together with between 48 up to 80 per group. Final number of separate high voltage channels needed is:

**6176**

For reasons of reliability, of trigger requirements and electronics modularity the entire system is broken into 32 regions in \(\Phi\), the azimutal angle. This regions are further split to include granularity of the wheels in end-caps and modules in barrel so we have in the detector 1344 (2x96 in barrel and 2x18x32 in end-caps) regions which can be treated as entities from electrical (or functional) point of view (ex. grounding)

**HV system**

The supply discussion that follows is very general and is not meant to be a complete treatment of the topic but just to estimate the problems of meeting our desired functionality and specifications.

As mentioned above, each region of about 48 up to 80 straws will require a separate HV supply basically due to detector safety considerations. It is not expected to have to vary the detector operating voltage separately in small regions (i.e. in all 6176 channels). The major changes in gain are due to gas composition, temperature and pressure. It is hard to imagine situation where gas contents or pressure changes locally as to have to take this factor into account. So only the temperature variations can have impact on local HV adjustments. It is intended to monitor the basic gain of the detector in external monitoring system and then, using local temperature measurements make adjustments in operating voltage region by region. **Basically this granularity might be as coarse as one or two wheels (and barrels module layers).** One can thus imagine two possible systems:* all 6176 channels are fully independent, controlled and monitored individualy, contained in the crates which provide necessary liaison to external world of controls, mains and serve mechano/electrical purposes.
* multichannel modules which are having functionality necessary for single channel operations. The bulk power source (adjusted, controlled and monitored) can be imagined as separate unit located either in a rack or in a crate containing distributor modules (as special module).

Each of the possible solutions should be evaluated from technical and economical point of view. The technical parameters judged should be ex. complexity of the controls and monitoring, grounding policy, feasibility of stand-alone operation, scalability etc. etc. In following chapters we try to specify requirements for overall system functionality without distinctions which technical solution is chosen. It should be up to designers to optimize system configuration and distribution of particular functionalities.

## 3 System issues

* Power supply system is contained in the crates (to fit into standard 19" LHC rack).
* from simple electro/mechanical container of output modules
- to 'intelligent'crate which would allow fully stand-alone operation. First variety is to make multicrate system economically sane, second one is to allow for laboratory, production or beam tests.
* Crates controls can be daisy-chained to have less than one crate controller per crate. It is also acceptable to have crates interconnects extending internal crate bus over several crates.
* Crate contains output modules (either independent or of a distributor type)
* Module contains channels. Number of channels per module should be maximized.
* System should allow for connection of 'common' to the'safety ground', which connection should be normally of high resistance (to have system 'floating') but in case of failures prevent from dangerous potentials appearing on accessible parts.
* System should have or allow an adequate cooling. Not more than 5% of the power processed in the crate should be allowed to escape to environment. This can be fulfilled centraly but adoption of an appropriate racks system.

## 4 Detailed channel specifications

The overall specifications are summarised in Table 4-1 and certain functionalities are discussed in greater detail in following text. In case of 'bulk' solution the specifications in bold apply to the individual channels (to 'bulk' unit otherwise)

This is recollection of recent discussion on parameters for HV power supplies (basic reference is document issued last year with following EDMS nb. ATL-IT-ES-0003 [6-1].

**Safety functions and HV system protection**

Not only must the HV system provide a well-regulated DC current and voltage, but it must also provide a variety of important safety and interlock features to protect the detector, and the operators of the device.

There are a number of control functions required for each HV channel as dictated by safety of detector and reliability considerations:

* Overcurrent (slow trip
* Current surge (fast trip)

**Overcurrent (slow)**

The channel must have an independent monitor of the output current that is capable of turning off any supply that exceeds its DC current set point by some preset percentage or amount. This is to protect the straws and/or cables from short-circuits or low-resistance paths that could develop with time.

\begin{table}
\begin{tabular}{|l|c|c|c|} \hline
**Specification** & **Value** & **Control** & **Monitoring** \\ \hline \hline Nominal output voltage & 1530 to 1600 V & Programmable in range 1000-2000 V; set to \(\pm\)1 V (10/11 bits) & Read to \(\pm\)1 V \\ \hline Maximum output voltage & 2000 V & Hardware limited & \\ \hline Voltage stability (10 ms to 1 hr.) & 1 V & N/A & \\ \hline Ripple (100 Hz to 1 MHz) & 50 mV\({}_{\text{p-p}}\) & N/A & \\ \hline
**Nominal output current** & up to 0.7 mA & N/A & Read to \(\pm\)1 \(\mu\)A \\ \hline
**Max. output current** & 1 mA\({}^{\text{a}}\) & Hard-wired & \\ \hline Voltage ramp on & 50 to 200 V / sec & Hard-wired & \\ turn-on/turn-off & & \\ \hline
**Current surge, _di/dt_ sensing\({}^{\text{b}}\)** & 1 mA/15 \(\mu\)sec; 100 \(\mu\)sec reaction & N/A\({}^{\text{c}}\); Reset & Status \\ \hline
**Slow overcurrent trip(s)** & Maximum & Programmable in 0.05 mA & Read setting \\  & 1 mA & steps, Reset & Status \\ \hline On / Off control & & On/Off & Status \\ \hline Fast emergency stop = Interlock (with ramping) & & Hardware input & Read status \\ \hline Stand-by mode & \({}^{\text{v}}_{\text{OUT}^{\text{a}}\text{v}}_{\text{SET}^{\text{-a}}\text{v}}\) & Programmable voltage drop & Status \\  & & down to 1000+\(\Delta\) V, On/Off & \\ \hline \end{tabular}

* to be verified for highest luminosity
* this value and practicality has to be further checked with simulations of whole HV distribution chain.
* might be necessary to introduce hardwired ‘programming’ of the di/dt value since could vary with different number of detecting elements connected.

\end{table}
Table 4.1: HV power supply specifications.

_If the nominal HV area is running normally at 0.5 mA total DC draw and then some slow change takes place that moves the DC current up to 0.8 or even 1 mA, a HV supply trip is required. Again, two separate controls are needed here, a hardware trip (pot or resistor) set at the maximum tolerable current (both calculated for a HV area and measured for a control block), and a programmable, software trip that moves with but above the nominal current drawn._

**Current surge (fast trip)**:

The channel must have an independent monitor of the output current _changes_ that is capable of turning off any supply that exhibits instantaneous current surge (di/dt). The value of current derivative should be hardwired according to measured value of the pulse resulting from in-straw discharge. The reaction time should be fast enough as to protect the chamber from fast (sub-millisecond level) discharges that occur when a wire or other part of the detector incurs a momentary spark.

_This is the most challenging area, where the most difficult problems of implementation are expected. Ideally, the system should be sensitive to (and thus be able to react to) a partial discharge in one straw that signalled the initiation of a serious breakdown or spark. The system would then be able to detect the beginning of a spark and turn off the sensitive area if required. In an ideal system one might even desire to be able to detect an incipient problem and change the operating point quickly enough to avoid any damage to the chamber._

## 5 System control functions

In this section we remind the control functions which should be available in the HV system controls to allow for comfortable, reliable and safe operation of the detector. This functions has been listed in TRT DCS specification note [6-2]. Following paragraphs should be modified accordingly to the final solution adapted for the hardware. Items in bold apply to individual channels only (i.e. are valid for 6176 outputs) where all others are also valid for bulk HV source (in some cases are not necessary for single channel).

### Channel control functions (hardware control):

1. System shall allow to set the channel 'normal' state1 (On/Off/Stand-by2)

Footnote 1: Other states as tripped, overcurrent or overvoltage shall be called ‘error (or fault) state’
2. System shall allow to reset channel in error state (to Off state)

2. System shall allow to set Voltage V

**4. System shall allow to set Trip Current I**

5. System shall allow to set Ramp Up Rate

6. System shall allow to set Ramp Down Rate7. System shall allow to set Action on Trip (Ramp Down or drop to zero)
8. System shall allow to read Status
9. System shall allow to read Voltage
10. System shall allow to read Current
11. System shall allow to read Demanded Voltage V1 Footnote 1: All requested values should be read in one block-read (items 4 - 12).
12. System shall allow to read Trip Current I
13. System shall allow to read Ramp Up Rate
14. System shall allow to read Ramp Down Rate
15. System shall allow to read Action on Trip (Ramp Down or drop to zero)

### Module control2
1. It should be possible to set maximum possible voltage allowed for any channel in the module.
2. It should be possible to read back the module type.
3. It should be possible to read maximum possible voltage allowed for any channel in the module (even if this value is being set by hardware only).

### Crate (bulk source) control

1. System shall allow to set state Off/On for the crate (only when proper status of the channels/modules)
2. System shall reset Communications. This may actually need to be a hardware reset via a push button (or external hw signal), or may be possible via the network or field bus employed. However, it must be possible to restart communications to the crate without affecting the channel parameters in any way (neither values nor statuses).
3. System shall allow to disable/enable interlocks
4. Status of interlocks control shall be available even if power to the system is off.
5. System shall read global crate status with following parameters: - Security key On/Off; - Inhibit hardware signal enabled - Interlock status: enabled/disabled; - Crate controls in Local/Global
6. System shall read list of modules currently installed in crate.

## 6 References

* 6-1 ATL-IT-ES-0003 v.0 High Voltage power supplies specifications
* 6-2 ATL-IT-ES-0009 v.0 Specification document for TRT Detector Control System